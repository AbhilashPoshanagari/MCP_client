import{a as IP,b as q8,c as G8,d as W8,e as K8,f as Q8,g as Y8,h as Z8,i as kC,j as X8,k as RC,l as Ll,m as J8,n as e5}from"./chunk-J3X5HNZW.js";import{$a as Oh,$b as N8,A as BO,Aa as ZO,Ab as R8,B as _C,Ba as Su,Bb as M8,C as bC,Ca as Sr,Cb as mP,D as vC,Da as XO,Db as O8,Ea as C_,Eb as ar,Fa as JO,Fb as gP,Ga as eP,Gb as _P,Ha as Fl,Hb as AC,Ia as tP,Ib as bP,Ja as nP,Jb as mt,Ka as rP,Kb as Yn,La as iP,Lb as vP,Ma as oP,Mb as yP,N as ln,Na as Du,Nb as yn,O as Nl,Oa as Mi,Ob as I_,P as VO,Pa as sP,Pb as An,Q as Iu,Qa as No,Qb as wP,R as $O,Ra as Tu,Rb as xP,S as Ah,Sa as Br,Sb as Dr,Ta as Oi,Tb as S_,U as pn,Ua as Bn,Ub as CP,V as ti,Va as Mh,Vb as EP,W as kh,Wa as EC,Wb as SP,X as _i,Xa as Ts,Xb as DP,Y as yC,Ya as aP,Z as UO,Za as lP,Zb as TP,_a as Au,_b as P8,a as m,ab as Ji,ac as F8,b as w,ba as zO,bb as cP,bc as L8,c as Ae,cb as ku,cc as j8,d as He,db as uP,dc as B8,e as qt,ea as wa,eb as dP,ec as V8,f as MO,fa as HO,fb as fP,fc as $8,g as sr,gb as hP,gc as U8,h as v,hb as pP,hc as z8,i as ee,ia as wC,ib as IC,ic as H8,j as We,ja as xC,jb as Ph,jc as MC,k as Ri,kb as I8,l as Ee,lb as bi,m as et,ma as qO,mb as SC,n as b,na as y_,nb as Nh,o as b_,oa as GO,ob as S8,p as v_,pa as w_,pb as Fh,q as OO,qa as Po,qb as xa,r as PO,ra as x_,rb as D8,s as NO,sa as WO,sb as DC,t as Ds,tb as T8,u as FO,ub as A8,v as gC,va as KO,vb as k8,w as LO,wa as Rh,wb as Fo,x as jO,xa as CC,xb as E_,ya as QO,yb as TC,za as YO,zb as Lh}from"./chunk-236BIZN3.js";var xB=He((Ny,wB)=>{"use strict";(function(n,e){typeof Ny=="object"&&typeof wB<"u"?e(Ny):typeof define=="function"&&define.amd?define(["exports"],e):e(n.URI=n.URI||{})})(Ny,function(n){"use strict";function e(){for(var k=arguments.length,D=Array(k),M=0;M<k;M++)D[M]=arguments[M];if(D.length>1){D[0]=D[0].slice(0,-1);for(var L=D.length-1,U=1;U<L;++U)D[U]=D[U].slice(1,-1);return D[L]=D[L].slice(1),D.join("")}else return D[0]}function t(k){return"(?:"+k+")"}function r(k){return k===void 0?"undefined":k===null?"null":Object.prototype.toString.call(k).split(" ").pop().split("]").shift().toLowerCase()}function i(k){return k.toUpperCase()}function o(k){return k!=null?k instanceof Array?k:typeof k.length!="number"||k.split||k.setInterval||k.call?[k]:Array.prototype.slice.call(k):[]}function s(k,D){var M=k;if(D)for(var L in D)M[L]=D[L];return M}function a(k){var D="[A-Za-z]",M="[\\x0D]",L="[0-9]",U="[\\x22]",_e=e(L,"[A-Fa-f]"),it="[\\x0A]",St="[\\x20]",Mt=t(t("%[EFef]"+_e+"%"+_e+_e+"%"+_e+_e)+"|"+t("%[89A-Fa-f]"+_e+"%"+_e+_e)+"|"+t("%"+_e+_e)),Ln="[\\:\\/\\?\\#\\[\\]\\@]",Ct="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",bn=e(Ln,Ct),jn=k?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",hn=k?"[\\uE000-\\uF8FF]":"[]",Tt=e(D,L,"[\\-\\.\\_\\~]",jn),vn=t(D+e(D,L,"[\\+\\-\\.]")+"*"),Ht=t(t(Mt+"|"+e(Tt,Ct,"[\\:]"))+"*"),Ml=t(t("25[0-5]")+"|"+t("2[0-4]"+L)+"|"+t("1"+L+L)+"|"+t("[1-9]"+L)+"|"+L),mi=t(t("25[0-5]")+"|"+t("2[0-4]"+L)+"|"+t("1"+L+L)+"|"+t("0?[1-9]"+L)+"|0?0?"+L),Ai=t(mi+"\\."+mi+"\\."+mi+"\\."+mi),en=t(_e+"{1,4}"),gi=t(t(en+"\\:"+en)+"|"+Ai),ki=t(t(en+"\\:")+"{6}"+gi),Oo=t("\\:\\:"+t(en+"\\:")+"{5}"+gi),Ol=t(t(en)+"?\\:\\:"+t(en+"\\:")+"{4}"+gi),Es=t(t(t(en+"\\:")+"{0,1}"+en)+"?\\:\\:"+t(en+"\\:")+"{3}"+gi),Eh=t(t(t(en+"\\:")+"{0,2}"+en)+"?\\:\\:"+t(en+"\\:")+"{2}"+gi),m_=t(t(t(en+"\\:")+"{0,3}"+en)+"?\\:\\:"+en+"\\:"+gi),g_=t(t(t(en+"\\:")+"{0,4}"+en)+"?\\:\\:"+gi),vu=t(t(t(en+"\\:")+"{0,5}"+en)+"?\\:\\:"+en),yu=t(t(t(en+"\\:")+"{0,6}"+en)+"?\\:\\:"),Is=t([ki,Oo,Ol,Es,Eh,m_,g_,vu,yu].join("|")),wu=t(t(Tt+"|"+Mt)+"+"),pC=t(Is+"\\%25"+wu),Pl=t(Is+t("\\%25|\\%(?!"+_e+"{2})")+wu),b8=t("[vV]"+_e+"+\\."+e(Tt,Ct,"[\\:]")+"+"),v8=t("\\["+t(Pl+"|"+Is+"|"+b8)+"\\]"),TO=t(t(Mt+"|"+e(Tt,Ct))+"*"),Ih=t(v8+"|"+Ai+"(?!"+TO+")|"+TO),Sh=t(L+"*"),AO=t(t(Ht+"@")+"?"+Ih+t("\\:"+Sh)+"?"),Dh=t(Mt+"|"+e(Tt,Ct,"[\\:\\@]")),y8=t(Dh+"*"),kO=t(Dh+"+"),w8=t(t(Mt+"|"+e(Tt,Ct,"[\\@]"))+"+"),Ss=t(t("\\/"+y8)+"*"),xu=t("\\/"+t(kO+Ss)+"?"),mC=t(w8+Ss),__=t(kO+Ss),Cu="(?!"+Dh+")",Xse=t(Ss+"|"+xu+"|"+mC+"|"+__+"|"+Cu),Eu=t(t(Dh+"|"+e("[\\/\\?]",hn))+"*"),Th=t(t(Dh+"|[\\/\\?]")+"*"),RO=t(t("\\/\\/"+AO+Ss)+"|"+xu+"|"+__+"|"+Cu),x8=t(vn+"\\:"+RO+t("\\?"+Eu)+"?"+t("\\#"+Th)+"?"),C8=t(t("\\/\\/"+AO+Ss)+"|"+xu+"|"+mC+"|"+Cu),E8=t(C8+t("\\?"+Eu)+"?"+t("\\#"+Th)+"?"),Jse=t(x8+"|"+E8),eae=t(vn+"\\:"+RO+t("\\?"+Eu)+"?"),tae="^("+vn+")\\:"+t(t("\\/\\/("+t("("+Ht+")@")+"?("+Ih+")"+t("\\:("+Sh+")")+"?)")+"?("+Ss+"|"+xu+"|"+__+"|"+Cu+")")+t("\\?("+Eu+")")+"?"+t("\\#("+Th+")")+"?$",nae="^(){0}"+t(t("\\/\\/("+t("("+Ht+")@")+"?("+Ih+")"+t("\\:("+Sh+")")+"?)")+"?("+Ss+"|"+xu+"|"+mC+"|"+Cu+")")+t("\\?("+Eu+")")+"?"+t("\\#("+Th+")")+"?$",rae="^("+vn+")\\:"+t(t("\\/\\/("+t("("+Ht+")@")+"?("+Ih+")"+t("\\:("+Sh+")")+"?)")+"?("+Ss+"|"+xu+"|"+__+"|"+Cu+")")+t("\\?("+Eu+")")+"?$",iae="^"+t("\\#("+Th+")")+"?$",oae="^"+t("("+Ht+")@")+"?("+Ih+")"+t("\\:("+Sh+")")+"?$";return{NOT_SCHEME:new RegExp(e("[^]",D,L,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(e("[^\\%\\:]",Tt,Ct),"g"),NOT_HOST:new RegExp(e("[^\\%\\[\\]\\:]",Tt,Ct),"g"),NOT_PATH:new RegExp(e("[^\\%\\/\\:\\@]",Tt,Ct),"g"),NOT_PATH_NOSCHEME:new RegExp(e("[^\\%\\/\\@]",Tt,Ct),"g"),NOT_QUERY:new RegExp(e("[^\\%]",Tt,Ct,"[\\:\\@\\/\\?]",hn),"g"),NOT_FRAGMENT:new RegExp(e("[^\\%]",Tt,Ct,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(e("[^]",Tt,Ct),"g"),UNRESERVED:new RegExp(Tt,"g"),OTHER_CHARS:new RegExp(e("[^\\%]",Tt,bn),"g"),PCT_ENCODED:new RegExp(Mt,"g"),IPV4ADDRESS:new RegExp("^("+Ai+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Is+")"+t(t("\\%25|\\%(?!"+_e+"{2})")+"("+wu+")")+"?\\]?$")}}var l=a(!1),c=a(!0),u=function(){function k(D,M){var L=[],U=!0,_e=!1,it=void 0;try{for(var St=D[Symbol.iterator](),Mt;!(U=(Mt=St.next()).done)&&(L.push(Mt.value),!(M&&L.length===M));U=!0);}catch(Ln){_e=!0,it=Ln}finally{try{!U&&St.return&&St.return()}finally{if(_e)throw it}}return L}return function(D,M){if(Array.isArray(D))return D;if(Symbol.iterator in Object(D))return k(D,M);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=function(k){if(Array.isArray(k)){for(var D=0,M=Array(k.length);D<k.length;D++)M[D]=k[D];return M}else return Array.from(k)},h=2147483647,f=36,p=1,g=26,_=38,y=700,E=72,T=128,A="-",P=/^xn--/,R=/[^\0-\x7E]/,W=/[\x2E\u3002\uFF0E\uFF61]/g,S={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},$=f-p,Z=Math.floor,Y=String.fromCharCode;function oe(k){throw new RangeError(S[k])}function F(k,D){for(var M=[],L=k.length;L--;)M[L]=D(k[L]);return M}function j(k,D){var M=k.split("@"),L="";M.length>1&&(L=M[0]+"@",k=M[1]),k=k.replace(W,".");var U=k.split("."),_e=F(U,D).join(".");return L+_e}function H(k){for(var D=[],M=0,L=k.length;M<L;){var U=k.charCodeAt(M++);if(U>=55296&&U<=56319&&M<L){var _e=k.charCodeAt(M++);(_e&64512)==56320?D.push(((U&1023)<<10)+(_e&1023)+65536):(D.push(U),M--)}else D.push(U)}return D}var q=function(D){return String.fromCodePoint.apply(String,d(D))},X=function(D){return D-48<10?D-22:D-65<26?D-65:D-97<26?D-97:f},le=function(D,M){return D+22+75*(D<26)-((M!=0)<<5)},ge=function(D,M,L){var U=0;for(D=L?Z(D/y):D>>1,D+=Z(D/M);D>$*g>>1;U+=f)D=Z(D/$);return Z(U+($+1)*D/(D+_))},pe=function(D){var M=[],L=D.length,U=0,_e=T,it=E,St=D.lastIndexOf(A);St<0&&(St=0);for(var Mt=0;Mt<St;++Mt)D.charCodeAt(Mt)>=128&&oe("not-basic"),M.push(D.charCodeAt(Mt));for(var Ln=St>0?St+1:0;Ln<L;){for(var Ct=U,bn=1,jn=f;;jn+=f){Ln>=L&&oe("invalid-input");var hn=X(D.charCodeAt(Ln++));(hn>=f||hn>Z((h-U)/bn))&&oe("overflow"),U+=hn*bn;var Tt=jn<=it?p:jn>=it+g?g:jn-it;if(hn<Tt)break;var vn=f-Tt;bn>Z(h/vn)&&oe("overflow"),bn*=vn}var Ht=M.length+1;it=ge(U-Ct,Ht,Ct==0),Z(U/Ht)>h-_e&&oe("overflow"),_e+=Z(U/Ht),U%=Ht,M.splice(U++,0,_e)}return String.fromCodePoint.apply(String,M)},It=function(D){var M=[];D=H(D);var L=D.length,U=T,_e=0,it=E,St=!0,Mt=!1,Ln=void 0;try{for(var Ct=D[Symbol.iterator](),bn;!(St=(bn=Ct.next()).done);St=!0){var jn=bn.value;jn<128&&M.push(Y(jn))}}catch(Pl){Mt=!0,Ln=Pl}finally{try{!St&&Ct.return&&Ct.return()}finally{if(Mt)throw Ln}}var hn=M.length,Tt=hn;for(hn&&M.push(A);Tt<L;){var vn=h,Ht=!0,Ml=!1,mi=void 0;try{for(var Ai=D[Symbol.iterator](),en;!(Ht=(en=Ai.next()).done);Ht=!0){var gi=en.value;gi>=U&&gi<vn&&(vn=gi)}}catch(Pl){Ml=!0,mi=Pl}finally{try{!Ht&&Ai.return&&Ai.return()}finally{if(Ml)throw mi}}var ki=Tt+1;vn-U>Z((h-_e)/ki)&&oe("overflow"),_e+=(vn-U)*ki,U=vn;var Oo=!0,Ol=!1,Es=void 0;try{for(var Eh=D[Symbol.iterator](),m_;!(Oo=(m_=Eh.next()).done);Oo=!0){var g_=m_.value;if(g_<U&&++_e>h&&oe("overflow"),g_==U){for(var vu=_e,yu=f;;yu+=f){var Is=yu<=it?p:yu>=it+g?g:yu-it;if(vu<Is)break;var wu=vu-Is,pC=f-Is;M.push(Y(le(Is+wu%pC,0))),vu=Z(wu/pC)}M.push(Y(le(vu,0))),it=ge(_e,ki,Tt==hn),_e=0,++Tt}}}catch(Pl){Ol=!0,Es=Pl}finally{try{!Oo&&Eh.return&&Eh.return()}finally{if(Ol)throw Es}}++_e,++U}return M.join("")},zt=function(D){return j(D,function(M){return P.test(M)?pe(M.slice(4).toLowerCase()):M})},Cn=function(D){return j(D,function(M){return R.test(M)?"xn--"+It(M):M})},ft={version:"2.1.0",ucs2:{decode:H,encode:q},decode:pe,encode:It,toASCII:Cn,toUnicode:zt},En={};function I(k){var D=k.charCodeAt(0),M=void 0;return D<16?M="%0"+D.toString(16).toUpperCase():D<128?M="%"+D.toString(16).toUpperCase():D<2048?M="%"+(D>>6|192).toString(16).toUpperCase()+"%"+(D&63|128).toString(16).toUpperCase():M="%"+(D>>12|224).toString(16).toUpperCase()+"%"+(D>>6&63|128).toString(16).toUpperCase()+"%"+(D&63|128).toString(16).toUpperCase(),M}function C(k){for(var D="",M=0,L=k.length;M<L;){var U=parseInt(k.substr(M+1,2),16);if(U<128)D+=String.fromCharCode(U),M+=3;else if(U>=194&&U<224){if(L-M>=6){var _e=parseInt(k.substr(M+4,2),16);D+=String.fromCharCode((U&31)<<6|_e&63)}else D+=k.substr(M,6);M+=6}else if(U>=224){if(L-M>=9){var it=parseInt(k.substr(M+4,2),16),St=parseInt(k.substr(M+7,2),16);D+=String.fromCharCode((U&15)<<12|(it&63)<<6|St&63)}else D+=k.substr(M,9);M+=9}else D+=k.substr(M,3),M+=3}return D}function Q(k,D){function M(L){var U=C(L);return U.match(D.UNRESERVED)?U:L}return k.scheme&&(k.scheme=String(k.scheme).replace(D.PCT_ENCODED,M).toLowerCase().replace(D.NOT_SCHEME,"")),k.userinfo!==void 0&&(k.userinfo=String(k.userinfo).replace(D.PCT_ENCODED,M).replace(D.NOT_USERINFO,I).replace(D.PCT_ENCODED,i)),k.host!==void 0&&(k.host=String(k.host).replace(D.PCT_ENCODED,M).toLowerCase().replace(D.NOT_HOST,I).replace(D.PCT_ENCODED,i)),k.path!==void 0&&(k.path=String(k.path).replace(D.PCT_ENCODED,M).replace(k.scheme?D.NOT_PATH:D.NOT_PATH_NOSCHEME,I).replace(D.PCT_ENCODED,i)),k.query!==void 0&&(k.query=String(k.query).replace(D.PCT_ENCODED,M).replace(D.NOT_QUERY,I).replace(D.PCT_ENCODED,i)),k.fragment!==void 0&&(k.fragment=String(k.fragment).replace(D.PCT_ENCODED,M).replace(D.NOT_FRAGMENT,I).replace(D.PCT_ENCODED,i)),k}function O(k){return k.replace(/^0*(.*)/,"$1")||"0"}function Fe(k,D){var M=k.match(D.IPV4ADDRESS)||[],L=u(M,2),U=L[1];return U?U.split(".").map(O).join("."):k}function rt(k,D){var M=k.match(D.IPV6ADDRESS)||[],L=u(M,3),U=L[1],_e=L[2];if(U){for(var it=U.toLowerCase().split("::").reverse(),St=u(it,2),Mt=St[0],Ln=St[1],Ct=Ln?Ln.split(":").map(O):[],bn=Mt.split(":").map(O),jn=D.IPV4ADDRESS.test(bn[bn.length-1]),hn=jn?7:8,Tt=bn.length-hn,vn=Array(hn),Ht=0;Ht<hn;++Ht)vn[Ht]=Ct[Ht]||bn[Tt+Ht]||"";jn&&(vn[hn-1]=Fe(vn[hn-1],D));var Ml=vn.reduce(function(ki,Oo,Ol){if(!Oo||Oo==="0"){var Es=ki[ki.length-1];Es&&Es.index+Es.length===Ol?Es.length++:ki.push({index:Ol,length:1})}return ki},[]),mi=Ml.sort(function(ki,Oo){return Oo.length-ki.length})[0],Ai=void 0;if(mi&&mi.length>1){var en=vn.slice(0,mi.index),gi=vn.slice(mi.index+mi.length);Ai=en.join(":")+"::"+gi.join(":")}else Ai=vn.join(":");return _e&&(Ai+="%"+_e),Ai}else return k}var Xt=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,At="".match(/(){0}/)[1]===void 0;function Qe(k){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},M={},L=D.iri!==!1?c:l;D.reference==="suffix"&&(k=(D.scheme?D.scheme+":":"")+"//"+k);var U=k.match(Xt);if(U){At?(M.scheme=U[1],M.userinfo=U[3],M.host=U[4],M.port=parseInt(U[5],10),M.path=U[6]||"",M.query=U[7],M.fragment=U[8],isNaN(M.port)&&(M.port=U[5])):(M.scheme=U[1]||void 0,M.userinfo=k.indexOf("@")!==-1?U[3]:void 0,M.host=k.indexOf("//")!==-1?U[4]:void 0,M.port=parseInt(U[5],10),M.path=U[6]||"",M.query=k.indexOf("?")!==-1?U[7]:void 0,M.fragment=k.indexOf("#")!==-1?U[8]:void 0,isNaN(M.port)&&(M.port=k.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?U[4]:void 0)),M.host&&(M.host=rt(Fe(M.host,L),L)),M.scheme===void 0&&M.userinfo===void 0&&M.host===void 0&&M.port===void 0&&!M.path&&M.query===void 0?M.reference="same-document":M.scheme===void 0?M.reference="relative":M.fragment===void 0?M.reference="absolute":M.reference="uri",D.reference&&D.reference!=="suffix"&&D.reference!==M.reference&&(M.error=M.error||"URI is not a "+D.reference+" reference.");var _e=En[(D.scheme||M.scheme||"").toLowerCase()];if(!D.unicodeSupport&&(!_e||!_e.unicodeSupport)){if(M.host&&(D.domainHost||_e&&_e.domainHost))try{M.host=ft.toASCII(M.host.replace(L.PCT_ENCODED,C).toLowerCase())}catch(it){M.error=M.error||"Host's domain name can not be converted to ASCII via punycode: "+it}Q(M,l)}else Q(M,L);_e&&_e.parse&&_e.parse(M,D)}else M.error=M.error||"URI can not be parsed.";return M}function Lr(k,D){var M=D.iri!==!1?c:l,L=[];return k.userinfo!==void 0&&(L.push(k.userinfo),L.push("@")),k.host!==void 0&&L.push(rt(Fe(String(k.host),M),M).replace(M.IPV6ADDRESS,function(U,_e,it){return"["+_e+(it?"%25"+it:"")+"]"})),(typeof k.port=="number"||typeof k.port=="string")&&(L.push(":"),L.push(String(k.port))),L.length?L.join(""):void 0}var Jt=/^\.\.?\//,_r=/^\/\.(\/|$)/,Cs=/^\/\.\.(\/|$)/,Fn=/^\/?(?:.|\n)*?(?=\/|$)/;function Ir(k){for(var D=[];k.length;)if(k.match(Jt))k=k.replace(Jt,"");else if(k.match(_r))k=k.replace(_r,"/");else if(k.match(Cs))k=k.replace(Cs,"/"),D.pop();else if(k==="."||k==="..")k="";else{var M=k.match(Fn);if(M){var L=M[0];k=k.slice(L.length),D.push(L)}else throw new Error("Unexpected dot segment condition")}return D.join("")}function br(k){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},M=D.iri?c:l,L=[],U=En[(D.scheme||k.scheme||"").toLowerCase()];if(U&&U.serialize&&U.serialize(k,D),k.host&&!M.IPV6ADDRESS.test(k.host)){if(D.domainHost||U&&U.domainHost)try{k.host=D.iri?ft.toUnicode(k.host):ft.toASCII(k.host.replace(M.PCT_ENCODED,C).toLowerCase())}catch(St){k.error=k.error||"Host's domain name can not be converted to "+(D.iri?"Unicode":"ASCII")+" via punycode: "+St}}Q(k,M),D.reference!=="suffix"&&k.scheme&&(L.push(k.scheme),L.push(":"));var _e=Lr(k,D);if(_e!==void 0&&(D.reference!=="suffix"&&L.push("//"),L.push(_e),k.path&&k.path.charAt(0)!=="/"&&L.push("/")),k.path!==void 0){var it=k.path;!D.absolutePath&&(!U||!U.absolutePath)&&(it=Ir(it)),_e===void 0&&(it=it.replace(/^\/\//,"/%2F")),L.push(it)}return k.query!==void 0&&(L.push("?"),L.push(k.query)),k.fragment!==void 0&&(L.push("#"),L.push(k.fragment)),L.join("")}function jr(k,D){var M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},L=arguments[3],U={};return L||(k=Qe(br(k,M),M),D=Qe(br(D,M),M)),M=M||{},!M.tolerant&&D.scheme?(U.scheme=D.scheme,U.userinfo=D.userinfo,U.host=D.host,U.port=D.port,U.path=Ir(D.path||""),U.query=D.query):(D.userinfo!==void 0||D.host!==void 0||D.port!==void 0?(U.userinfo=D.userinfo,U.host=D.host,U.port=D.port,U.path=Ir(D.path||""),U.query=D.query):(D.path?(D.path.charAt(0)==="/"?U.path=Ir(D.path):((k.userinfo!==void 0||k.host!==void 0||k.port!==void 0)&&!k.path?U.path="/"+D.path:k.path?U.path=k.path.slice(0,k.path.lastIndexOf("/")+1)+D.path:U.path=D.path,U.path=Ir(U.path)),U.query=D.query):(U.path=k.path,D.query!==void 0?U.query=D.query:U.query=k.query),U.userinfo=k.userinfo,U.host=k.host,U.port=k.port),U.scheme=k.scheme),U.fragment=D.fragment,U}function Ro(k,D,M){var L=s({scheme:"null"},M);return br(jr(Qe(k,L),Qe(D,L),L,!0),L)}function pi(k,D){return typeof k=="string"?k=br(Qe(k,D),D):r(k)==="object"&&(k=Qe(br(k,D),D)),k}function p_(k,D,M){return typeof k=="string"?k=br(Qe(k,M),M):r(k)==="object"&&(k=br(k,M)),typeof D=="string"?D=br(Qe(D,M),M):r(D)==="object"&&(D=br(D,M)),k===D}function fC(k,D){return k&&k.toString().replace(!D||!D.iri?l.ESCAPE:c.ESCAPE,I)}function Xi(k,D){return k&&k.toString().replace(!D||!D.iri?l.PCT_ENCODED:c.PCT_ENCODED,C)}var xh={scheme:"http",domainHost:!0,parse:function(D,M){return D.host||(D.error=D.error||"HTTP URIs must have a host."),D},serialize:function(D,M){var L=String(D.scheme).toLowerCase()==="https";return(D.port===(L?443:80)||D.port==="")&&(D.port=void 0),D.path||(D.path="/"),D}},yO={scheme:"https",domainHost:xh.domainHost,parse:xh.parse,serialize:xh.serialize};function wO(k){return typeof k.secure=="boolean"?k.secure:String(k.scheme).toLowerCase()==="wss"}var Ch={scheme:"ws",domainHost:!0,parse:function(D,M){var L=D;return L.secure=wO(L),L.resourceName=(L.path||"/")+(L.query?"?"+L.query:""),L.path=void 0,L.query=void 0,L},serialize:function(D,M){if((D.port===(wO(D)?443:80)||D.port==="")&&(D.port=void 0),typeof D.secure=="boolean"&&(D.scheme=D.secure?"wss":"ws",D.secure=void 0),D.resourceName){var L=D.resourceName.split("?"),U=u(L,2),_e=U[0],it=U[1];D.path=_e&&_e!=="/"?_e:void 0,D.query=it,D.resourceName=void 0}return D.fragment=void 0,D}},xO={scheme:"wss",domainHost:Ch.domainHost,parse:Ch.parse,serialize:Ch.serialize},s8={},a8=!0,CO="[A-Za-z0-9\\-\\.\\_\\~"+(a8?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]",Mo="[0-9A-Fa-f]",l8=t(t("%[EFef]"+Mo+"%"+Mo+Mo+"%"+Mo+Mo)+"|"+t("%[89A-Fa-f]"+Mo+"%"+Mo+Mo)+"|"+t("%"+Mo+Mo)),c8="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",u8="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",d8=e(u8,'[\\"\\\\]'),f8="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",h8=new RegExp(CO,"g"),bu=new RegExp(l8,"g"),p8=new RegExp(e("[^]",c8,"[\\.]",'[\\"]',d8),"g"),EO=new RegExp(e("[^]",CO,f8),"g"),m8=EO;function hC(k){var D=C(k);return D.match(h8)?D:k}var IO={scheme:"mailto",parse:function(D,M){var L=D,U=L.to=L.path?L.path.split(","):[];if(L.path=void 0,L.query){for(var _e=!1,it={},St=L.query.split("&"),Mt=0,Ln=St.length;Mt<Ln;++Mt){var Ct=St[Mt].split("=");switch(Ct[0]){case"to":for(var bn=Ct[1].split(","),jn=0,hn=bn.length;jn<hn;++jn)U.push(bn[jn]);break;case"subject":L.subject=Xi(Ct[1],M);break;case"body":L.body=Xi(Ct[1],M);break;default:_e=!0,it[Xi(Ct[0],M)]=Xi(Ct[1],M);break}}_e&&(L.headers=it)}L.query=void 0;for(var Tt=0,vn=U.length;Tt<vn;++Tt){var Ht=U[Tt].split("@");if(Ht[0]=Xi(Ht[0]),M.unicodeSupport)Ht[1]=Xi(Ht[1],M).toLowerCase();else try{Ht[1]=ft.toASCII(Xi(Ht[1],M).toLowerCase())}catch(Ml){L.error=L.error||"Email address's domain name can not be converted to ASCII via punycode: "+Ml}U[Tt]=Ht.join("@")}return L},serialize:function(D,M){var L=D,U=o(D.to);if(U){for(var _e=0,it=U.length;_e<it;++_e){var St=String(U[_e]),Mt=St.lastIndexOf("@"),Ln=St.slice(0,Mt).replace(bu,hC).replace(bu,i).replace(p8,I),Ct=St.slice(Mt+1);try{Ct=M.iri?ft.toUnicode(Ct):ft.toASCII(Xi(Ct,M).toLowerCase())}catch(Tt){L.error=L.error||"Email address's domain name can not be converted to "+(M.iri?"Unicode":"ASCII")+" via punycode: "+Tt}U[_e]=Ln+"@"+Ct}L.path=U.join(",")}var bn=D.headers=D.headers||{};D.subject&&(bn.subject=D.subject),D.body&&(bn.body=D.body);var jn=[];for(var hn in bn)bn[hn]!==s8[hn]&&jn.push(hn.replace(bu,hC).replace(bu,i).replace(EO,I)+"="+bn[hn].replace(bu,hC).replace(bu,i).replace(m8,I));return jn.length&&(L.query=jn.join("&")),L}},g8=/^([^\:]+)\:(.*)/,SO={scheme:"urn",parse:function(D,M){var L=D.path&&D.path.match(g8),U=D;if(L){var _e=M.scheme||U.scheme||"urn",it=L[1].toLowerCase(),St=L[2],Mt=_e+":"+(M.nid||it),Ln=En[Mt];U.nid=it,U.nss=St,U.path=void 0,Ln&&(U=Ln.parse(U,M))}else U.error=U.error||"URN can not be parsed.";return U},serialize:function(D,M){var L=M.scheme||D.scheme||"urn",U=D.nid,_e=L+":"+(M.nid||U),it=En[_e];it&&(D=it.serialize(D,M));var St=D,Mt=D.nss;return St.path=(U||M.nid)+":"+Mt,St}},_8=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,DO={scheme:"urn:uuid",parse:function(D,M){var L=D;return L.uuid=L.nss,L.nss=void 0,!M.tolerant&&(!L.uuid||!L.uuid.match(_8))&&(L.error=L.error||"UUID is not valid."),L},serialize:function(D,M){var L=D;return L.nss=(D.uuid||"").toLowerCase(),L}};En[xh.scheme]=xh,En[yO.scheme]=yO,En[Ch.scheme]=Ch,En[xO.scheme]=xO,En[IO.scheme]=IO,En[SO.scheme]=SO,En[DO.scheme]=DO,n.SCHEMES=En,n.pctEncChar=I,n.pctDecChars=C,n.parse=Qe,n.removeDotSegments=Ir,n.serialize=br,n.resolveComponents=jr,n.resolve=Ro,n.normalize=pi,n.equal=p_,n.escapeComponent=fC,n.unescapeComponent=Xi,Object.defineProperty(n,"__esModule",{value:!0})})});var Fy=He((ZEe,CB)=>{"use strict";CB.exports=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,i,o;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(i=r;i--!==0;)if(!n(e[i],t[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(o=Object.keys(e),r=o.length,r!==Object.keys(t).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,o[i]))return!1;for(i=r;i--!==0;){var s=o[i];if(!n(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}});var IB=He((XEe,EB)=>{"use strict";EB.exports=function(e){for(var t=0,r=e.length,i=0,o;i<r;)t++,o=e.charCodeAt(i++),o>=55296&&o<=56319&&i<r&&(o=e.charCodeAt(i),(o&64512)==56320&&i++);return t}});var xc=He((JEe,TB)=>{"use strict";TB.exports={copy:kZ,checkDataType:$T,checkDataTypes:RZ,coerceToTypes:MZ,toHash:zT,getProperty:HT,escapeQuotes:qT,equal:Fy(),ucs2length:IB(),varOccurences:NZ,varReplace:FZ,schemaHasRules:LZ,schemaHasRulesExcept:jZ,schemaUnknownRules:BZ,toQuotedString:UT,getPathExpr:VZ,getPath:$Z,getData:HZ,unescapeFragment:qZ,unescapeJsonPointer:WT,escapeFragment:GZ,escapeJsonPointer:GT};function kZ(n,e){e=e||{};for(var t in n)e[t]=n[t];return e}function $T(n,e,t,r){var i=r?" !== ":" === ",o=r?" || ":" && ",s=r?"!":"",a=r?"":"!";switch(n){case"null":return e+i+"null";case"array":return s+"Array.isArray("+e+")";case"object":return"("+s+e+o+"typeof "+e+i+'"object"'+o+a+"Array.isArray("+e+"))";case"integer":return"(typeof "+e+i+'"number"'+o+a+"("+e+" % 1)"+o+e+i+e+(t?o+s+"isFinite("+e+")":"")+")";case"number":return"(typeof "+e+i+'"'+n+'"'+(t?o+s+"isFinite("+e+")":"")+")";default:return"typeof "+e+i+'"'+n+'"'}}function RZ(n,e,t){switch(n.length){case 1:return $T(n[0],e,t,!0);default:var r="",i=zT(n);i.array&&i.object&&(r=i.null?"(":"(!"+e+" || ",r+="typeof "+e+' !== "object")',delete i.null,delete i.array,delete i.object),i.number&&delete i.integer;for(var o in i)r+=(r?" && ":"")+$T(o,e,t,!0);return r}}var SB=zT(["string","number","integer","boolean","null"]);function MZ(n,e){if(Array.isArray(e)){for(var t=[],r=0;r<e.length;r++){var i=e[r];(SB[i]||n==="array"&&i==="array")&&(t[t.length]=i)}if(t.length)return t}else{if(SB[e])return[e];if(n==="array"&&e==="array")return["array"]}}function zT(n){for(var e={},t=0;t<n.length;t++)e[n[t]]=!0;return e}var OZ=/^[a-z$_][a-z$_0-9]*$/i,PZ=/'|\\/g;function HT(n){return typeof n=="number"?"["+n+"]":OZ.test(n)?"."+n:"['"+qT(n)+"']"}function qT(n){return n.replace(PZ,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function NZ(n,e){e+="[^0-9]";var t=n.match(new RegExp(e,"g"));return t?t.length:0}function FZ(n,e,t){return e+="([^0-9])",t=t.replace(/\$/g,"$$$$"),n.replace(new RegExp(e,"g"),t+"$1")}function LZ(n,e){if(typeof n=="boolean")return!n;for(var t in n)if(e[t])return!0}function jZ(n,e,t){if(typeof n=="boolean")return!n&&t!="not";for(var r in n)if(r!=t&&e[r])return!0}function BZ(n,e){if(typeof n!="boolean"){for(var t in n)if(!e[t])return t}}function UT(n){return"'"+qT(n)+"'"}function VZ(n,e,t,r){var i=t?"'/' + "+e+(r?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):r?"'[' + "+e+" + ']'":"'[\\'' + "+e+" + '\\']'";return DB(n,i)}function $Z(n,e,t){var r=UT(t?"/"+GT(e):HT(e));return DB(n,r)}var UZ=/^\/(?:[^~]|~0|~1)*$/,zZ=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function HZ(n,e,t){var r,i,o,s;if(n==="")return"rootData";if(n[0]=="/"){if(!UZ.test(n))throw new Error("Invalid JSON-pointer: "+n);i=n,o="rootData"}else{if(s=n.match(zZ),!s)throw new Error("Invalid JSON-pointer: "+n);if(r=+s[1],i=s[2],i=="#"){if(r>=e)throw new Error("Cannot access property/index "+r+" levels up, current level is "+e);return t[e-r]}if(r>e)throw new Error("Cannot access data "+r+" levels up, current level is "+e);if(o="data"+(e-r||""),!i)return o}for(var a=o,l=i.split("/"),c=0;c<l.length;c++){var u=l[c];u&&(o+=HT(WT(u)),a+=" && "+o)}return a}function DB(n,e){return n=='""'?e:(n+" + "+e).replace(/([^\\])' \+ '/g,"$1")}function qZ(n){return WT(decodeURIComponent(n))}function GZ(n){return encodeURIComponent(GT(n))}function GT(n){return n.replace(/~/g,"~0").replace(/\//g,"~1")}function WT(n){return n.replace(/~1/g,"/").replace(/~0/g,"~")}});var KT=He((eIe,AB)=>{"use strict";var WZ=xc();AB.exports=KZ;function KZ(n){WZ.copy(n,this)}});var RB=He((tIe,kB)=>{"use strict";var el=kB.exports=function(n,e,t){typeof e=="function"&&(t=e,e={}),t=e.cb||t;var r=typeof t=="function"?t:t.pre||function(){},i=t.post||function(){};Ly(e,r,i,n,"",n)};el.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0};el.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};el.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};el.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Ly(n,e,t,r,i,o,s,a,l,c){if(r&&typeof r=="object"&&!Array.isArray(r)){e(r,i,o,s,a,l,c);for(var u in r){var d=r[u];if(Array.isArray(d)){if(u in el.arrayKeywords)for(var h=0;h<d.length;h++)Ly(n,e,t,d[h],i+"/"+u+"/"+h,o,i,u,r,h)}else if(u in el.propsKeywords){if(d&&typeof d=="object")for(var f in d)Ly(n,e,t,d[f],i+"/"+u+"/"+QZ(f),o,i,u,r,f)}else(u in el.keywords||n.allKeys&&!(u in el.skipKeywords))&&Ly(n,e,t,d,i+"/"+u,o,i,u,r)}t(r,i,o,s,a,l,c)}}function QZ(n){return n.replace(/~/g,"~0").replace(/\//g,"~1")}});var zy=He((nIe,NB)=>{"use strict";var Sm=xB(),MB=Fy(),$y=xc(),jy=KT(),YZ=RB();NB.exports=nl;nl.normalizeId=tl;nl.fullPath=By;nl.url=Vy;nl.ids=tX;nl.inlineRef=QT;nl.schema=Uy;function nl(n,e,t){var r=this._refs[t];if(typeof r=="string")if(this._refs[r])r=this._refs[r];else return nl.call(this,n,e,r);if(r=r||this._schemas[t],r instanceof jy)return QT(r.schema,this._opts.inlineRefs)?r.schema:r.validate||this._compile(r);var i=Uy.call(this,e,t),o,s,a;return i&&(o=i.schema,e=i.root,a=i.baseId),o instanceof jy?s=o.validate||n.call(this,o.schema,e,void 0,a):o!==void 0&&(s=QT(o,this._opts.inlineRefs)?o:n.call(this,o,e,void 0,a)),s}function Uy(n,e){var t=Sm.parse(e),r=PB(t),i=By(this._getId(n.schema));if(Object.keys(n.schema).length===0||r!==i){var o=tl(r),s=this._refs[o];if(typeof s=="string")return ZZ.call(this,n,s,t);if(s instanceof jy)s.validate||this._compile(s),n=s;else if(s=this._schemas[o],s instanceof jy){if(s.validate||this._compile(s),o==tl(e))return{schema:s,root:n,baseId:i};n=s}else return;if(!n.schema)return;i=By(this._getId(n.schema))}return OB.call(this,t,i,n.schema,n)}function ZZ(n,e,t){var r=Uy.call(this,n,e);if(r){var i=r.schema,o=r.baseId;n=r.root;var s=this._getId(i);return s&&(o=Vy(o,s)),OB.call(this,t,o,i,n)}}var XZ=$y.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function OB(n,e,t,r){if(n.fragment=n.fragment||"",n.fragment.slice(0,1)=="/"){for(var i=n.fragment.split("/"),o=1;o<i.length;o++){var s=i[o];if(s){if(s=$y.unescapeFragment(s),t=t[s],t===void 0)break;var a;if(!XZ[s]&&(a=this._getId(t),a&&(e=Vy(e,a)),t.$ref)){var l=Vy(e,t.$ref),c=Uy.call(this,r,l);c&&(t=c.schema,r=c.root,e=c.baseId)}}}if(t!==void 0&&t!==r.schema)return{schema:t,root:r,baseId:e}}}var JZ=$y.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function QT(n,e){if(e===!1)return!1;if(e===void 0||e===!0)return YT(n);if(e)return ZT(n)<=e}function YT(n){var e;if(Array.isArray(n)){for(var t=0;t<n.length;t++)if(e=n[t],typeof e=="object"&&!YT(e))return!1}else for(var r in n)if(r=="$ref"||(e=n[r],typeof e=="object"&&!YT(e)))return!1;return!0}function ZT(n){var e=0,t;if(Array.isArray(n)){for(var r=0;r<n.length;r++)if(t=n[r],typeof t=="object"&&(e+=ZT(t)),e==1/0)return 1/0}else for(var i in n){if(i=="$ref")return 1/0;if(JZ[i])e++;else if(t=n[i],typeof t=="object"&&(e+=ZT(t)+1),e==1/0)return 1/0}return e}function By(n,e){e!==!1&&(n=tl(n));var t=Sm.parse(n);return PB(t)}function PB(n){return Sm.serialize(n).split("#")[0]+"#"}var eX=/#\/?$/;function tl(n){return n?n.replace(eX,""):""}function Vy(n,e){return e=tl(e),Sm.resolve(n,e)}function tX(n){var e=tl(this._getId(n)),t={"":e},r={"":By(e,!1)},i={},o=this;return YZ(n,{allKeys:!0},function(s,a,l,c,u,d,h){if(a!==""){var f=o._getId(s),p=t[c],g=r[c]+"/"+u;if(h!==void 0&&(g+="/"+(typeof h=="number"?h:$y.escapeFragment(h))),typeof f=="string"){f=p=tl(p?Sm.resolve(p,f):f);var _=o._refs[f];if(typeof _=="string"&&(_=o._refs[_]),_&&_.schema){if(!MB(s,_.schema))throw new Error('id "'+f+'" resolves to more than one schema')}else if(f!=tl(g))if(f[0]=="#"){if(i[f]&&!MB(s,i[f]))throw new Error('id "'+f+'" resolves to more than one schema');i[f]=s}else o._refs[f]=g}t[a]=p,r[a]=g}}),i}});var Hy=He((rIe,LB)=>{"use strict";var XT=zy();LB.exports={Validation:FB(nX),MissingRef:FB(JT)};function nX(n){this.message="validation failed",this.errors=n,this.ajv=this.validation=!0}JT.message=function(n,e){return"can't resolve reference "+e+" from id "+n};function JT(n,e,t){this.message=t||JT.message(n,e),this.missingRef=XT.url(n,e),this.missingSchema=XT.normalizeId(XT.fullPath(this.missingRef))}function FB(n){return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}});var eA=He((iIe,jB)=>{"use strict";jB.exports=function(n,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var t=typeof e.cycles=="boolean"?e.cycles:!1,r=e.cmp&&function(o){return function(s){return function(a,l){var c={key:a,value:s[a]},u={key:l,value:s[l]};return o(c,u)}}}(e.cmp),i=[];return function o(s){if(s&&s.toJSON&&typeof s.toJSON=="function"&&(s=s.toJSON()),s!==void 0){if(typeof s=="number")return isFinite(s)?""+s:"null";if(typeof s!="object")return JSON.stringify(s);var a,l;if(Array.isArray(s)){for(l="[",a=0;a<s.length;a++)a&&(l+=","),l+=o(s[a])||"null";return l+"]"}if(s===null)return"null";if(i.indexOf(s)!==-1){if(t)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var c=i.push(s)-1,u=Object.keys(s).sort(r&&r(s));for(l="",a=0;a<u.length;a++){var d=u[a],h=o(s[d]);h&&(l&&(l+=","),l+=JSON.stringify(d)+":"+h)}return i.splice(c,1),"{"+l+"}"}}(n)}});var tA=He((oIe,BB)=>{"use strict";BB.exports=function(e,t,r){var i="",o=e.schema.$async===!0,s=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),a=e.self._getId(e.schema);if(e.opts.strictKeywords){var l=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(l){var c="unknown keyword: "+l;if(e.opts.strictKeywords==="log")e.logger.warn(c);else throw new Error(c)}}if(e.isTop&&(i+=" var validate = ",o&&(e.async=!0,i+="async "),i+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",a&&(e.opts.sourceCode||e.opts.processCode)&&(i+=" "+("/*# sourceURL="+a+" */")+" ")),typeof e.schema=="boolean"||!(s||e.schema.$ref)){var t="false schema",u=e.level,d=e.dataLevel,h=e.schema[t],f=e.schemaPath+e.util.getProperty(t),p=e.errSchemaPath+"/"+t,P=!e.opts.allErrors,S,g="data"+(d||""),A="valid"+u;if(e.schema===!1){e.isTop?P=!0:i+=" var "+A+" = false; ";var _=_||[];_.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(S||"false schema")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: {} ",e.opts.messages!==!1&&(i+=" , message: 'boolean schema is false' "),e.opts.verbose&&(i+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),i+=" } "):i+=" {} ";var y=i;i=_.pop(),!e.compositeRule&&P?e.async?i+=" throw new ValidationError(["+y+"]); ":i+=" validate.errors = ["+y+"]; return false; ":i+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?o?i+=" return data; ":i+=" validate.errors = null; return true; ":i+=" var "+A+" = true; ";return e.isTop&&(i+=" }; return validate; "),i}if(e.isTop){var E=e.isTop,u=e.level=0,d=e.dataLevel=0,g="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[""],e.schema.default!==void 0&&e.opts.useDefaults&&e.opts.strictDefaults){var T="default is ignored in the schema root";if(e.opts.strictDefaults==="log")e.logger.warn(T);else throw new Error(T)}i+=" var vErrors = null; ",i+=" var errors = 0;     ",i+=" if (rootData === undefined) rootData = data; "}else{var u=e.level,d=e.dataLevel,g="data"+(d||"");if(a&&(e.baseId=e.resolve.url(e.baseId,a)),o&&!e.async)throw new Error("async schema in sync schema");i+=" var errs_"+u+" = errors;"}var A="valid"+u,P=!e.opts.allErrors,R="",W="",S,$=e.schema.type,Z=Array.isArray($);if($&&e.opts.nullable&&e.schema.nullable===!0&&(Z?$.indexOf("null")==-1&&($=$.concat("null")):$!="null"&&($=[$,"null"],Z=!0)),Z&&$.length==1&&($=$[0],Z=!1),e.schema.$ref&&s){if(e.opts.extendRefs=="fail")throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');e.opts.extendRefs!==!0&&(s=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(i+=" "+e.RULES.all.$comment.code(e,"$comment")),$){if(e.opts.coerceTypes)var Y=e.util.coerceToTypes(e.opts.coerceTypes,$);var oe=e.RULES.types[$];if(Y||Z||oe===!0||oe&&!Fn(oe)){var f=e.schemaPath+".type",p=e.errSchemaPath+"/type",f=e.schemaPath+".type",p=e.errSchemaPath+"/type",F=Z?"checkDataTypes":"checkDataType";if(i+=" if ("+e.util[F]($,g,e.opts.strictNumbers,!0)+") { ",Y){var j="dataType"+u,H="coerced"+u;i+=" var "+j+" = typeof "+g+"; var "+H+" = undefined; ",e.opts.coerceTypes=="array"&&(i+=" if ("+j+" == 'object' && Array.isArray("+g+") && "+g+".length == 1) { "+g+" = "+g+"[0]; "+j+" = typeof "+g+"; if ("+e.util.checkDataType(e.schema.type,g,e.opts.strictNumbers)+") "+H+" = "+g+"; } "),i+=" if ("+H+" !== undefined) ; ";var q=Y;if(q)for(var X,le=-1,ge=q.length-1;le<ge;)X=q[le+=1],X=="string"?i+=" else if ("+j+" == 'number' || "+j+" == 'boolean') "+H+" = '' + "+g+"; else if ("+g+" === null) "+H+" = ''; ":X=="number"||X=="integer"?(i+=" else if ("+j+" == 'boolean' || "+g+" === null || ("+j+" == 'string' && "+g+" && "+g+" == +"+g+" ",X=="integer"&&(i+=" && !("+g+" % 1)"),i+=")) "+H+" = +"+g+"; "):X=="boolean"?i+=" else if ("+g+" === 'false' || "+g+" === 0 || "+g+" === null) "+H+" = false; else if ("+g+" === 'true' || "+g+" === 1) "+H+" = true; ":X=="null"?i+=" else if ("+g+" === '' || "+g+" === 0 || "+g+" === false) "+H+" = null; ":e.opts.coerceTypes=="array"&&X=="array"&&(i+=" else if ("+j+" == 'string' || "+j+" == 'number' || "+j+" == 'boolean' || "+g+" == null) "+H+" = ["+g+"]; ");i+=" else {   ";var _=_||[];_.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(S||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",Z?i+=""+$.join(","):i+=""+$,i+="' } ",e.opts.messages!==!1&&(i+=" , message: 'should be ",Z?i+=""+$.join(","):i+=""+$,i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),i+=" } "):i+=" {} ";var y=i;i=_.pop(),!e.compositeRule&&P?e.async?i+=" throw new ValidationError(["+y+"]); ":i+=" validate.errors = ["+y+"]; return false; ":i+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } if ("+H+" !== undefined) {  ";var pe=d?"data"+(d-1||""):"parentData",It=d?e.dataPathArr[d]:"parentDataProperty";i+=" "+g+" = "+H+"; ",d||(i+="if ("+pe+" !== undefined)"),i+=" "+pe+"["+It+"] = "+H+"; } "}else{var _=_||[];_.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(S||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",Z?i+=""+$.join(","):i+=""+$,i+="' } ",e.opts.messages!==!1&&(i+=" , message: 'should be ",Z?i+=""+$.join(","):i+=""+$,i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),i+=" } "):i+=" {} ";var y=i;i=_.pop(),!e.compositeRule&&P?e.async?i+=" throw new ValidationError(["+y+"]); ":i+=" validate.errors = ["+y+"]; return false; ":i+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}i+=" } "}}if(e.schema.$ref&&!s)i+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",P&&(i+=" } if (errors === ",E?i+="0":i+="errs_"+u,i+=") { ",W+="}");else{var zt=e.RULES;if(zt){for(var oe,Cn=-1,ft=zt.length-1;Cn<ft;)if(oe=zt[Cn+=1],Fn(oe)){if(oe.type&&(i+=" if ("+e.util.checkDataType(oe.type,g,e.opts.strictNumbers)+") { "),e.opts.useDefaults){if(oe.type=="object"&&e.schema.properties){var h=e.schema.properties,En=Object.keys(h),I=En;if(I)for(var C,Q=-1,O=I.length-1;Q<O;){C=I[Q+=1];var Fe=h[C];if(Fe.default!==void 0){var rt=g+e.util.getProperty(C);if(e.compositeRule){if(e.opts.strictDefaults){var T="default is ignored for: "+rt;if(e.opts.strictDefaults==="log")e.logger.warn(T);else throw new Error(T)}}else i+=" if ("+rt+" === undefined ",e.opts.useDefaults=="empty"&&(i+=" || "+rt+" === null || "+rt+" === '' "),i+=" ) "+rt+" = ",e.opts.useDefaults=="shared"?i+=" "+e.useDefault(Fe.default)+" ":i+=" "+JSON.stringify(Fe.default)+" ",i+="; "}}}else if(oe.type=="array"&&Array.isArray(e.schema.items)){var Xt=e.schema.items;if(Xt){for(var Fe,le=-1,At=Xt.length-1;le<At;)if(Fe=Xt[le+=1],Fe.default!==void 0){var rt=g+"["+le+"]";if(e.compositeRule){if(e.opts.strictDefaults){var T="default is ignored for: "+rt;if(e.opts.strictDefaults==="log")e.logger.warn(T);else throw new Error(T)}}else i+=" if ("+rt+" === undefined ",e.opts.useDefaults=="empty"&&(i+=" || "+rt+" === null || "+rt+" === '' "),i+=" ) "+rt+" = ",e.opts.useDefaults=="shared"?i+=" "+e.useDefault(Fe.default)+" ":i+=" "+JSON.stringify(Fe.default)+" ",i+="; "}}}}var Qe=oe.rules;if(Qe){for(var Lr,Jt=-1,_r=Qe.length-1;Jt<_r;)if(Lr=Qe[Jt+=1],Ir(Lr)){var Cs=Lr.code(e,Lr.keyword,oe.type);Cs&&(i+=" "+Cs+" ",P&&(R+="}"))}}if(P&&(i+=" "+R+" ",R=""),oe.type&&(i+=" } ",$&&$===oe.type&&!Y)){i+=" else { ";var f=e.schemaPath+".type",p=e.errSchemaPath+"/type",_=_||[];_.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(S||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(p)+" , params: { type: '",Z?i+=""+$.join(","):i+=""+$,i+="' } ",e.opts.messages!==!1&&(i+=" , message: 'should be ",Z?i+=""+$.join(","):i+=""+$,i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+g+" "),i+=" } "):i+=" {} ";var y=i;i=_.pop(),!e.compositeRule&&P?e.async?i+=" throw new ValidationError(["+y+"]); ":i+=" validate.errors = ["+y+"]; return false; ":i+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } "}P&&(i+=" if (errors === ",E?i+="0":i+="errs_"+u,i+=") { ",W+="}")}}}P&&(i+=" "+W+" "),E?(o?(i+=" if (errors === 0) return data;           ",i+=" else throw new ValidationError(vErrors); "):(i+=" validate.errors = vErrors; ",i+=" return errors === 0;       "),i+=" }; return validate;"):i+=" var "+A+" = errors === errs_"+u+";";function Fn(jr){for(var Ro=jr.rules,pi=0;pi<Ro.length;pi++)if(Ir(Ro[pi]))return!0}function Ir(jr){return e.schema[jr.keyword]!==void 0||jr.implements&&br(jr)}function br(jr){for(var Ro=jr.implements,pi=0;pi<Ro.length;pi++)if(e.schema[Ro[pi]]!==void 0)return!0}return i}});var HB=He((sIe,zB)=>{"use strict";var qy=zy(),Wy=xc(),$B=Hy(),rX=eA(),VB=tA(),iX=Wy.ucs2length,oX=Fy(),sX=$B.Validation;zB.exports=nA;function nA(n,e,t,r){var i=this,o=this._opts,s=[void 0],a={},l=[],c={},u=[],d={},h=[];e=e||{schema:n,refVal:s,refs:a};var f=aX.call(this,n,e,r),p=this._compilations[f.index];if(f.compiling)return p.callValidate=T;var g=this._formats,_=this.RULES;try{var y=A(n,e,t,r);p.validate=y;var E=p.callValidate;return E&&(E.schema=y.schema,E.errors=null,E.refs=y.refs,E.refVal=y.refVal,E.root=y.root,E.$async=y.$async,o.sourceCode&&(E.source=y.source)),y}finally{lX.call(this,n,e,r)}function T(){var F=p.validate,j=F.apply(this,arguments);return T.errors=F.errors,j}function A(F,j,H,q){var X=!j||j&&j.schema==F;if(j.schema!=e.schema)return nA.call(i,F,j,H,q);var le=F.$async===!0,ge=VB({isTop:!0,schema:F,isRoot:X,baseId:q,root:j,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:$B.MissingRef,RULES:_,validate:VB,util:Wy,resolve:qy,resolveRef:P,usePattern:Z,useDefault:Y,useCustomRule:oe,opts:o,formats:g,logger:i.logger,self:i});ge=Gy(s,dX)+Gy(l,cX)+Gy(u,uX)+Gy(h,fX)+ge,o.processCode&&(ge=o.processCode(ge,F));var pe;try{var It=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",ge);pe=It(i,_,g,e,s,u,h,oX,iX,sX),s[0]=pe}catch(zt){throw i.logger.error("Error compiling schema, function code:",ge),zt}return pe.schema=F,pe.errors=null,pe.refs=a,pe.refVal=s,pe.root=X?pe:j,le&&(pe.$async=!0),o.sourceCode===!0&&(pe.source={code:ge,patterns:l,defaults:u}),pe}function P(F,j,H){j=qy.url(F,j);var q=a[j],X,le;if(q!==void 0)return X=s[q],le="refVal["+q+"]",$(X,le);if(!H&&e.refs){var ge=e.refs[j];if(ge!==void 0)return X=e.refVal[ge],le=R(j,X),$(X,le)}le=R(j);var pe=qy.call(i,A,e,j);if(pe===void 0){var It=t&&t[j];It&&(pe=qy.inlineRef(It,o.inlineRefs)?It:nA.call(i,It,e,t,F))}if(pe===void 0)W(j);else return S(j,pe),$(pe,le)}function R(F,j){var H=s.length;return s[H]=j,a[F]=H,"refVal"+H}function W(F){delete a[F]}function S(F,j){var H=a[F];s[H]=j}function $(F,j){return typeof F=="object"||typeof F=="boolean"?{code:j,schema:F,inline:!0}:{code:j,$async:F&&!!F.$async}}function Z(F){var j=c[F];return j===void 0&&(j=c[F]=l.length,l[j]=F),"pattern"+j}function Y(F){switch(typeof F){case"boolean":case"number":return""+F;case"string":return Wy.toQuotedString(F);case"object":if(F===null)return"null";var j=rX(F),H=d[j];return H===void 0&&(H=d[j]=u.length,u[H]=F),"default"+H}}function oe(F,j,H,q){if(i._opts.validateSchema!==!1){var X=F.definition.dependencies;if(X&&!X.every(function(I){return Object.prototype.hasOwnProperty.call(H,I)}))throw new Error("parent schema must have all required keywords: "+X.join(","));var le=F.definition.validateSchema;if(le){var ge=le(j);if(!ge){var pe="keyword schema is invalid: "+i.errorsText(le.errors);if(i._opts.validateSchema=="log")i.logger.error(pe);else throw new Error(pe)}}}var It=F.definition.compile,zt=F.definition.inline,Cn=F.definition.macro,ft;if(It)ft=It.call(i,j,H,q);else if(Cn)ft=Cn.call(i,j,H,q),o.validateSchema!==!1&&i.validateSchema(ft,!0);else if(zt)ft=zt.call(i,q,F.keyword,j,H);else if(ft=F.definition.validate,!ft)return;if(ft===void 0)throw new Error('custom keyword "'+F.keyword+'"failed to compile');var En=h.length;return h[En]=ft,{code:"customRule"+En,validate:ft}}}function aX(n,e,t){var r=UB.call(this,n,e,t);return r>=0?{index:r,compiling:!0}:(r=this._compilations.length,this._compilations[r]={schema:n,root:e,baseId:t},{index:r,compiling:!1})}function lX(n,e,t){var r=UB.call(this,n,e,t);r>=0&&this._compilations.splice(r,1)}function UB(n,e,t){for(var r=0;r<this._compilations.length;r++){var i=this._compilations[r];if(i.schema==n&&i.root==e&&i.baseId==t)return r}return-1}function cX(n,e){return"var pattern"+n+" = new RegExp("+Wy.toQuotedString(e[n])+");"}function uX(n){return"var default"+n+" = defaults["+n+"];"}function dX(n,e){return e[n]===void 0?"":"var refVal"+n+" = refVal["+n+"];"}function fX(n){return"var customRule"+n+" = customRules["+n+"];"}function Gy(n,e){if(!n.length)return"";for(var t="",r=0;r<n.length;r++)t+=e(r,n);return t}});var GB=He((aIe,qB)=>{"use strict";var Ky=qB.exports=function(){this._cache={}};Ky.prototype.put=function(e,t){this._cache[e]=t};Ky.prototype.get=function(e){return this._cache[e]};Ky.prototype.del=function(e){delete this._cache[e]};Ky.prototype.clear=function(){this._cache={}}});var iV=He((lIe,rV)=>{"use strict";var hX=xc(),pX=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,mX=[0,31,28,31,30,31,30,31,31,30,31,30,31],gX=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,WB=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,_X=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,bX=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,KB=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,QB=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,YB=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,ZB=/^(?:\/(?:[^~/]|~0|~1)*)*$/,XB=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,JB=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;rV.exports=Qy;function Qy(n){return n=n=="full"?"full":"fast",hX.copy(Qy[n])}Qy.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":KB,url:QB,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:WB,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:nV,uuid:YB,"json-pointer":ZB,"json-pointer-uri-fragment":XB,"relative-json-pointer":JB};Qy.full={date:eV,time:tV,"date-time":wX,uri:CX,"uri-reference":bX,"uri-template":KB,url:QB,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:WB,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:nV,uuid:YB,"json-pointer":ZB,"json-pointer-uri-fragment":XB,"relative-json-pointer":JB};function vX(n){return n%4===0&&(n%100!==0||n%400===0)}function eV(n){var e=n.match(pX);if(!e)return!1;var t=+e[1],r=+e[2],i=+e[3];return r>=1&&r<=12&&i>=1&&i<=(r==2&&vX(t)?29:mX[r])}function tV(n,e){var t=n.match(gX);if(!t)return!1;var r=t[1],i=t[2],o=t[3],s=t[5];return(r<=23&&i<=59&&o<=59||r==23&&i==59&&o==60)&&(!e||s)}var yX=/t|\s/i;function wX(n){var e=n.split(yX);return e.length==2&&eV(e[0])&&tV(e[1],!0)}var xX=/\/|:/;function CX(n){return xX.test(n)&&_X.test(n)}var EX=/[^\\]\\Z/;function nV(n){if(EX.test(n))return!1;try{return new RegExp(n),!0}catch{return!1}}});var sV=He((cIe,oV)=>{"use strict";oV.exports=function(e,t,r){var i=" ",o=e.level,s=e.dataLevel,a=e.schema[t],l=e.errSchemaPath+"/"+t,c=!e.opts.allErrors,u="data"+(s||""),d="valid"+o,h,f;if(a=="#"||a=="#/")e.isRoot?(h=e.async,f="validate"):(h=e.root.schema.$async===!0,f="root.refVal[0]");else{var p=e.resolveRef(e.baseId,a,e.isRoot);if(p===void 0){var g=e.MissingRefError.message(e.baseId,a);if(e.opts.missingRefs=="fail"){e.logger.error(g);var _=_||[];_.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { ref: '"+e.util.escapeQuotes(a)+"' } ",e.opts.messages!==!1&&(i+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(a)+"' "),e.opts.verbose&&(i+=" , schema: "+e.util.toQuotedString(a)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),i+=" } "):i+=" {} ";var y=i;i=_.pop(),!e.compositeRule&&c?e.async?i+=" throw new ValidationError(["+y+"]); ":i+=" validate.errors = ["+y+"]; return false; ":i+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c&&(i+=" if (false) { ")}else if(e.opts.missingRefs=="ignore")e.logger.warn(g),c&&(i+=" if (true) { ");else throw new e.MissingRefError(e.baseId,a,g)}else if(p.inline){var E=e.util.copy(e);E.level++;var T="valid"+E.level;E.schema=p.schema,E.schemaPath="",E.errSchemaPath=a;var A=e.validate(E).replace(/validate\.schema/g,p.code);i+=" "+A+" ",c&&(i+=" if ("+T+") { ")}else h=p.$async===!0||e.async&&p.$async!==!1,f=p.code}if(f){var _=_||[];_.push(i),i="",e.opts.passContext?i+=" "+f+".call(this, ":i+=" "+f+"( ",i+=" "+u+", (dataPath || '')",e.errorPath!='""'&&(i+=" + "+e.errorPath);var P=s?"data"+(s-1||""):"parentData",R=s?e.dataPathArr[s]:"parentDataProperty";i+=" , "+P+" , "+R+", rootData)  ";var W=i;if(i=_.pop(),h){if(!e.async)throw new Error("async schema referenced by sync schema");c&&(i+=" var "+d+"; "),i+=" try { await "+W+"; ",c&&(i+=" "+d+" = true; "),i+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",c&&(i+=" "+d+" = false; "),i+=" } ",c&&(i+=" if ("+d+") { ")}else i+=" if (!"+W+") { if (vErrors === null) vErrors = "+f+".errors; else vErrors = vErrors.concat("+f+".errors); errors = vErrors.length; } ",c&&(i+=" else { ")}return i}});var lV=He((uIe,aV)=>{"use strict";aV.exports=function(e,t,r){var i=" ",o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),a=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,c=e.util.copy(e),u="";c.level++;var d="valid"+c.level,h=c.baseId,f=!0,p=o;if(p)for(var g,_=-1,y=p.length-1;_<y;)g=p[_+=1],(e.opts.strictKeywords?typeof g=="object"&&Object.keys(g).length>0||g===!1:e.util.schemaHasRules(g,e.RULES.all))&&(f=!1,c.schema=g,c.schemaPath=s+"["+_+"]",c.errSchemaPath=a+"/"+_,i+="  "+e.validate(c)+" ",c.baseId=h,l&&(i+=" if ("+d+") { ",u+="}"));return l&&(f?i+=" if (true) { ":i+=" "+u.slice(0,-1)+" "),i}});var uV=He((dIe,cV)=>{"use strict";cV.exports=function(e,t,r){var i=" ",o=e.level,s=e.dataLevel,a=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(s||""),h="valid"+o,f="errs__"+o,p=e.util.copy(e),g="";p.level++;var _="valid"+p.level,y=a.every(function(S){return e.opts.strictKeywords?typeof S=="object"&&Object.keys(S).length>0||S===!1:e.util.schemaHasRules(S,e.RULES.all)});if(y){var E=p.baseId;i+=" var "+f+" = errors; var "+h+" = false;  ";var T=e.compositeRule;e.compositeRule=p.compositeRule=!0;var A=a;if(A)for(var P,R=-1,W=A.length-1;R<W;)P=A[R+=1],p.schema=P,p.schemaPath=l+"["+R+"]",p.errSchemaPath=c+"/"+R,i+="  "+e.validate(p)+" ",p.baseId=E,i+=" "+h+" = "+h+" || "+_+"; if (!"+h+") { ",g+="}";e.compositeRule=p.compositeRule=T,i+=" "+g+" if (!"+h+") {   var err =   ",e.createErrors!==!1?(i+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",e.opts.messages!==!1&&(i+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&u&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),i+=" } else {  errors = "+f+"; if (vErrors !== null) { if ("+f+") vErrors.length = "+f+"; else vErrors = null; } ",e.opts.allErrors&&(i+=" } ")}else u&&(i+=" if (true) { ");return i}});var fV=He((fIe,dV)=>{"use strict";dV.exports=function(e,t,r){var i=" ",o=e.schema[t],s=e.errSchemaPath+"/"+t,a=!e.opts.allErrors,l=e.util.toQuotedString(o);return e.opts.$comment===!0?i+=" console.log("+l+");":typeof e.opts.$comment=="function"&&(i+=" self._opts.$comment("+l+", "+e.util.toQuotedString(s)+", validate.root.schema);"),i}});var pV=He((hIe,hV)=>{"use strict";hV.exports=function(e,t,r){var i=" ",o=e.level,s=e.dataLevel,a=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(s||""),h="valid"+o,f=e.opts.$data&&a&&a.$data,p;f?(i+=" var schema"+o+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",p="schema"+o):p=a,f||(i+=" var schema"+o+" = validate.schema"+l+";"),i+="var "+h+" = equal("+d+", schema"+o+"); if (!"+h+") {   ";var g=g||[];g.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { allowedValue: schema"+o+" } ",e.opts.messages!==!1&&(i+=" , message: 'should be equal to constant' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var _=i;return i=g.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+_+"]); ":i+=" validate.errors = ["+_+"]; return false; ":i+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" }",u&&(i+=" else { "),i}});var gV=He((pIe,mV)=>{"use strict";mV.exports=function(e,t,r){var i=" ",o=e.level,s=e.dataLevel,a=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(s||""),h="valid"+o,f="errs__"+o,p=e.util.copy(e),g="";p.level++;var _="valid"+p.level,y="i"+o,E=p.dataLevel=e.dataLevel+1,T="data"+E,A=e.baseId,P=e.opts.strictKeywords?typeof a=="object"&&Object.keys(a).length>0||a===!1:e.util.schemaHasRules(a,e.RULES.all);if(i+="var "+f+" = errors;var "+h+";",P){var R=e.compositeRule;e.compositeRule=p.compositeRule=!0,p.schema=a,p.schemaPath=l,p.errSchemaPath=c,i+=" var "+_+" = false; for (var "+y+" = 0; "+y+" < "+d+".length; "+y+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,y,e.opts.jsonPointers,!0);var W=d+"["+y+"]";p.dataPathArr[E]=y;var S=e.validate(p);p.baseId=A,e.util.varOccurences(S,T)<2?i+=" "+e.util.varReplace(S,T,W)+" ":i+=" var "+T+" = "+W+"; "+S+" ",i+=" if ("+_+") break; }  ",e.compositeRule=p.compositeRule=R,i+=" "+g+" if (!"+_+") {"}else i+=" if ("+d+".length == 0) {";var $=$||[];$.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",e.opts.messages!==!1&&(i+=" , message: 'should contain a valid item' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var Z=i;return i=$.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+Z+"]); ":i+=" validate.errors = ["+Z+"]; return false; ":i+=" var err = "+Z+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else { ",P&&(i+="  errors = "+f+"; if (vErrors !== null) { if ("+f+") vErrors.length = "+f+"; else vErrors = null; } "),e.opts.allErrors&&(i+=" } "),i}});var bV=He((mIe,_V)=>{"use strict";_V.exports=function(e,t,r){var i=" ",o=e.level,s=e.dataLevel,a=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(s||""),h="errs__"+o,f=e.util.copy(e),p="";f.level++;var g="valid"+f.level,_={},y={},E=e.opts.ownProperties;for(R in a)if(R!="__proto__"){var T=a[R],A=Array.isArray(T)?y:_;A[R]=T}i+="var "+h+" = errors;";var P=e.errorPath;i+="var missing"+o+";";for(var R in y)if(A=y[R],A.length){if(i+=" if ( "+d+e.util.getProperty(R)+" !== undefined ",E&&(i+=" && Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(R)+"') "),u){i+=" && ( ";var W=A;if(W)for(var S,$=-1,Z=W.length-1;$<Z;){S=W[$+=1],$&&(i+=" || ");var Y=e.util.getProperty(S),oe=d+Y;i+=" ( ( "+oe+" === undefined ",E&&(i+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(S)+"') "),i+=") && (missing"+o+" = "+e.util.toQuotedString(e.opts.jsonPointers?S:Y)+") ) "}i+=")) {  ";var F="missing"+o,j="' + "+F+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(P,F,!0):P+" + "+F);var H=H||[];H.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { property: '"+e.util.escapeQuotes(R)+"', missingProperty: '"+j+"', depsCount: "+A.length+", deps: '"+e.util.escapeQuotes(A.length==1?A[0]:A.join(", "))+"' } ",e.opts.messages!==!1&&(i+=" , message: 'should have ",A.length==1?i+="property "+e.util.escapeQuotes(A[0]):i+="properties "+e.util.escapeQuotes(A.join(", ")),i+=" when property "+e.util.escapeQuotes(R)+" is present' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var q=i;i=H.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+q+"]); ":i+=" validate.errors = ["+q+"]; return false; ":i+=" var err = "+q+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{i+=" ) { ";var X=A;if(X)for(var S,le=-1,ge=X.length-1;le<ge;){S=X[le+=1];var Y=e.util.getProperty(S),j=e.util.escapeQuotes(S),oe=d+Y;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(P,S,e.opts.jsonPointers)),i+=" if ( "+oe+" === undefined ",E&&(i+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(S)+"') "),i+=") {  var err =   ",e.createErrors!==!1?(i+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { property: '"+e.util.escapeQuotes(R)+"', missingProperty: '"+j+"', depsCount: "+A.length+", deps: '"+e.util.escapeQuotes(A.length==1?A[0]:A.join(", "))+"' } ",e.opts.messages!==!1&&(i+=" , message: 'should have ",A.length==1?i+="property "+e.util.escapeQuotes(A[0]):i+="properties "+e.util.escapeQuotes(A.join(", ")),i+=" when property "+e.util.escapeQuotes(R)+" is present' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}i+=" }   ",u&&(p+="}",i+=" else { ")}e.errorPath=P;var pe=f.baseId;for(var R in _){var T=_[R];(e.opts.strictKeywords?typeof T=="object"&&Object.keys(T).length>0||T===!1:e.util.schemaHasRules(T,e.RULES.all))&&(i+=" "+g+" = true; if ( "+d+e.util.getProperty(R)+" !== undefined ",E&&(i+=" && Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(R)+"') "),i+=") { ",f.schema=T,f.schemaPath=l+e.util.getProperty(R),f.errSchemaPath=c+"/"+e.util.escapeFragment(R),i+="  "+e.validate(f)+" ",f.baseId=pe,i+=" }  ",u&&(i+=" if ("+g+") { ",p+="}"))}return u&&(i+="   "+p+" if ("+h+" == errors) {"),i}});var yV=He((gIe,vV)=>{"use strict";vV.exports=function(e,t,r){var i=" ",o=e.level,s=e.dataLevel,a=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(s||""),h="valid"+o,f=e.opts.$data&&a&&a.$data,p;f?(i+=" var schema"+o+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",p="schema"+o):p=a;var g="i"+o,_="schema"+o;f||(i+=" var "+_+" = validate.schema"+l+";"),i+="var "+h+";",f&&(i+=" if (schema"+o+" === undefined) "+h+" = true; else if (!Array.isArray(schema"+o+")) "+h+" = false; else {"),i+=""+h+" = false;for (var "+g+"=0; "+g+"<"+_+".length; "+g+"++) if (equal("+d+", "+_+"["+g+"])) { "+h+" = true; break; }",f&&(i+="  }  "),i+=" if (!"+h+") {   ";var y=y||[];y.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { allowedValues: schema"+o+" } ",e.opts.messages!==!1&&(i+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var E=i;return i=y.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+E+"]); ":i+=" validate.errors = ["+E+"]; return false; ":i+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" }",u&&(i+=" else { "),i}});var xV=He((_Ie,wV)=>{"use strict";wV.exports=function(e,t,r){var i=" ",o=e.level,s=e.dataLevel,a=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(s||"");if(e.opts.format===!1)return u&&(i+=" if (true) { "),i;var h=e.opts.$data&&a&&a.$data,f;h?(i+=" var schema"+o+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",f="schema"+o):f=a;var p=e.opts.unknownFormats,g=Array.isArray(p);if(h){var _="format"+o,y="isObject"+o,E="formatType"+o;i+=" var "+_+" = formats["+f+"]; var "+y+" = typeof "+_+" == 'object' && !("+_+" instanceof RegExp) && "+_+".validate; var "+E+" = "+y+" && "+_+".type || 'string'; if ("+y+") { ",e.async&&(i+=" var async"+o+" = "+_+".async; "),i+=" "+_+" = "+_+".validate; } if (  ",h&&(i+=" ("+f+" !== undefined && typeof "+f+" != 'string') || "),i+=" (",p!="ignore"&&(i+=" ("+f+" && !"+_+" ",g&&(i+=" && self._opts.unknownFormats.indexOf("+f+") == -1 "),i+=") || "),i+=" ("+_+" && "+E+" == '"+r+"' && !(typeof "+_+" == 'function' ? ",e.async?i+=" (async"+o+" ? await "+_+"("+d+") : "+_+"("+d+")) ":i+=" "+_+"("+d+") ",i+=" : "+_+".test("+d+"))))) {"}else{var _=e.formats[a];if(!_){if(p=="ignore")return e.logger.warn('unknown format "'+a+'" ignored in schema at path "'+e.errSchemaPath+'"'),u&&(i+=" if (true) { "),i;if(g&&p.indexOf(a)>=0)return u&&(i+=" if (true) { "),i;throw new Error('unknown format "'+a+'" is used in schema at path "'+e.errSchemaPath+'"')}var y=typeof _=="object"&&!(_ instanceof RegExp)&&_.validate,E=y&&_.type||"string";if(y){var T=_.async===!0;_=_.validate}if(E!=r)return u&&(i+=" if (true) { "),i;if(T){if(!e.async)throw new Error("async format in sync schema");var A="formats"+e.util.getProperty(a)+".validate";i+=" if (!(await "+A+"("+d+"))) { "}else{i+=" if (! ";var A="formats"+e.util.getProperty(a);y&&(A+=".validate"),typeof _=="function"?i+=" "+A+"("+d+") ":i+=" "+A+".test("+d+") ",i+=") { "}}var P=P||[];P.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { format:  ",h?i+=""+f:i+=""+e.util.toQuotedString(a),i+="  } ",e.opts.messages!==!1&&(i+=` , message: 'should match format "`,h?i+="' + "+f+" + '":i+=""+e.util.escapeQuotes(a),i+=`"' `),e.opts.verbose&&(i+=" , schema:  ",h?i+="validate.schema"+l:i+=""+e.util.toQuotedString(a),i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var R=i;return i=P.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+R+"]); ":i+=" validate.errors = ["+R+"]; return false; ":i+=" var err = "+R+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",u&&(i+=" else { "),i}});var EV=He((bIe,CV)=>{"use strict";CV.exports=function(e,t,r){var i=" ",o=e.level,s=e.dataLevel,a=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(s||""),h="valid"+o,f="errs__"+o,p=e.util.copy(e);p.level++;var g="valid"+p.level,_=e.schema.then,y=e.schema.else,E=_!==void 0&&(e.opts.strictKeywords?typeof _=="object"&&Object.keys(_).length>0||_===!1:e.util.schemaHasRules(_,e.RULES.all)),T=y!==void 0&&(e.opts.strictKeywords?typeof y=="object"&&Object.keys(y).length>0||y===!1:e.util.schemaHasRules(y,e.RULES.all)),A=p.baseId;if(E||T){var P;p.createErrors=!1,p.schema=a,p.schemaPath=l,p.errSchemaPath=c,i+=" var "+f+" = errors; var "+h+" = true;  ";var R=e.compositeRule;e.compositeRule=p.compositeRule=!0,i+="  "+e.validate(p)+" ",p.baseId=A,p.createErrors=!0,i+="  errors = "+f+"; if (vErrors !== null) { if ("+f+") vErrors.length = "+f+"; else vErrors = null; }  ",e.compositeRule=p.compositeRule=R,E?(i+=" if ("+g+") {  ",p.schema=e.schema.then,p.schemaPath=e.schemaPath+".then",p.errSchemaPath=e.errSchemaPath+"/then",i+="  "+e.validate(p)+" ",p.baseId=A,i+=" "+h+" = "+g+"; ",E&&T?(P="ifClause"+o,i+=" var "+P+" = 'then'; "):P="'then'",i+=" } ",T&&(i+=" else { ")):i+=" if (!"+g+") { ",T&&(p.schema=e.schema.else,p.schemaPath=e.schemaPath+".else",p.errSchemaPath=e.errSchemaPath+"/else",i+="  "+e.validate(p)+" ",p.baseId=A,i+=" "+h+" = "+g+"; ",E&&T?(P="ifClause"+o,i+=" var "+P+" = 'else'; "):P="'else'",i+=" } "),i+=" if (!"+h+") {   var err =   ",e.createErrors!==!1?(i+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { failingKeyword: "+P+" } ",e.opts.messages!==!1&&(i+=` , message: 'should match "' + `+P+` + '" schema' `),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&u&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),i+=" }   ",u&&(i+=" else { ")}else u&&(i+=" if (true) { ");return i}});var SV=He((vIe,IV)=>{"use strict";IV.exports=function(e,t,r){var i=" ",o=e.level,s=e.dataLevel,a=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(s||""),h="valid"+o,f="errs__"+o,p=e.util.copy(e),g="";p.level++;var _="valid"+p.level,y="i"+o,E=p.dataLevel=e.dataLevel+1,T="data"+E,A=e.baseId;if(i+="var "+f+" = errors;var "+h+";",Array.isArray(a)){var P=e.schema.additionalItems;if(P===!1){i+=" "+h+" = "+d+".length <= "+a.length+"; ";var R=c;c=e.errSchemaPath+"/additionalItems",i+="  if (!"+h+") {   ";var W=W||[];W.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+a.length+" } ",e.opts.messages!==!1&&(i+=" , message: 'should NOT have more than "+a.length+" items' "),e.opts.verbose&&(i+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var S=i;i=W.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+S+"]); ":i+=" validate.errors = ["+S+"]; return false; ":i+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",c=R,u&&(g+="}",i+=" else { ")}var $=a;if($){for(var Z,Y=-1,oe=$.length-1;Y<oe;)if(Z=$[Y+=1],e.opts.strictKeywords?typeof Z=="object"&&Object.keys(Z).length>0||Z===!1:e.util.schemaHasRules(Z,e.RULES.all)){i+=" "+_+" = true; if ("+d+".length > "+Y+") { ";var F=d+"["+Y+"]";p.schema=Z,p.schemaPath=l+"["+Y+"]",p.errSchemaPath=c+"/"+Y,p.errorPath=e.util.getPathExpr(e.errorPath,Y,e.opts.jsonPointers,!0),p.dataPathArr[E]=Y;var j=e.validate(p);p.baseId=A,e.util.varOccurences(j,T)<2?i+=" "+e.util.varReplace(j,T,F)+" ":i+=" var "+T+" = "+F+"; "+j+" ",i+=" }  ",u&&(i+=" if ("+_+") { ",g+="}")}}if(typeof P=="object"&&(e.opts.strictKeywords?typeof P=="object"&&Object.keys(P).length>0||P===!1:e.util.schemaHasRules(P,e.RULES.all))){p.schema=P,p.schemaPath=e.schemaPath+".additionalItems",p.errSchemaPath=e.errSchemaPath+"/additionalItems",i+=" "+_+" = true; if ("+d+".length > "+a.length+") {  for (var "+y+" = "+a.length+"; "+y+" < "+d+".length; "+y+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,y,e.opts.jsonPointers,!0);var F=d+"["+y+"]";p.dataPathArr[E]=y;var j=e.validate(p);p.baseId=A,e.util.varOccurences(j,T)<2?i+=" "+e.util.varReplace(j,T,F)+" ":i+=" var "+T+" = "+F+"; "+j+" ",u&&(i+=" if (!"+_+") break; "),i+=" } }  ",u&&(i+=" if ("+_+") { ",g+="}")}}else if(e.opts.strictKeywords?typeof a=="object"&&Object.keys(a).length>0||a===!1:e.util.schemaHasRules(a,e.RULES.all)){p.schema=a,p.schemaPath=l,p.errSchemaPath=c,i+="  for (var "+y+" = 0; "+y+" < "+d+".length; "+y+"++) { ",p.errorPath=e.util.getPathExpr(e.errorPath,y,e.opts.jsonPointers,!0);var F=d+"["+y+"]";p.dataPathArr[E]=y;var j=e.validate(p);p.baseId=A,e.util.varOccurences(j,T)<2?i+=" "+e.util.varReplace(j,T,F)+" ":i+=" var "+T+" = "+F+"; "+j+" ",u&&(i+=" if (!"+_+") break; "),i+=" }"}return u&&(i+=" "+g+" if ("+f+" == errors) {"),i}});var rA=He((yIe,DV)=>{"use strict";DV.exports=function(e,t,r){var i=" ",o=e.level,s=e.dataLevel,a=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,A,d="data"+(s||""),h=e.opts.$data&&a&&a.$data,f;h?(i+=" var schema"+o+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",f="schema"+o):f=a;var p=t=="maximum",g=p?"exclusiveMaximum":"exclusiveMinimum",_=e.schema[g],y=e.opts.$data&&_&&_.$data,E=p?"<":">",T=p?">":"<",A=void 0;if(!(h||typeof a=="number"||a===void 0))throw new Error(t+" must be number");if(!(y||_===void 0||typeof _=="number"||typeof _=="boolean"))throw new Error(g+" must be number or boolean");if(y){var P=e.util.getData(_.$data,s,e.dataPathArr),R="exclusive"+o,W="exclType"+o,S="exclIsNumber"+o,$="op"+o,Z="' + "+$+" + '";i+=" var schemaExcl"+o+" = "+P+"; ",P="schemaExcl"+o,i+=" var "+R+"; var "+W+" = typeof "+P+"; if ("+W+" != 'boolean' && "+W+" != 'undefined' && "+W+" != 'number') { ";var A=g,Y=Y||[];Y.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(A||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",e.opts.messages!==!1&&(i+=" , message: '"+g+" should be boolean' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var oe=i;i=Y.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+oe+"]); ":i+=" validate.errors = ["+oe+"]; return false; ":i+=" var err = "+oe+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else if ( ",h&&(i+=" ("+f+" !== undefined && typeof "+f+" != 'number') || "),i+=" "+W+" == 'number' ? ( ("+R+" = "+f+" === undefined || "+P+" "+E+"= "+f+") ? "+d+" "+T+"= "+P+" : "+d+" "+T+" "+f+" ) : ( ("+R+" = "+P+" === true) ? "+d+" "+T+"= "+f+" : "+d+" "+T+" "+f+" ) || "+d+" !== "+d+") { var op"+o+" = "+R+" ? '"+E+"' : '"+E+"='; ",a===void 0&&(A=g,c=e.errSchemaPath+"/"+g,f=P,h=y)}else{var S=typeof _=="number",Z=E;if(S&&h){var $="'"+Z+"'";i+=" if ( ",h&&(i+=" ("+f+" !== undefined && typeof "+f+" != 'number') || "),i+=" ( "+f+" === undefined || "+_+" "+E+"= "+f+" ? "+d+" "+T+"= "+_+" : "+d+" "+T+" "+f+" ) || "+d+" !== "+d+") { "}else{S&&a===void 0?(R=!0,A=g,c=e.errSchemaPath+"/"+g,f=_,T+="="):(S&&(f=Math[p?"min":"max"](_,a)),_===(S?f:!0)?(R=!0,A=g,c=e.errSchemaPath+"/"+g,T+="="):(R=!1,Z+="="));var $="'"+Z+"'";i+=" if ( ",h&&(i+=" ("+f+" !== undefined && typeof "+f+" != 'number') || "),i+=" "+d+" "+T+" "+f+" || "+d+" !== "+d+") { "}}A=A||t;var Y=Y||[];Y.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(A||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { comparison: "+$+", limit: "+f+", exclusive: "+R+" } ",e.opts.messages!==!1&&(i+=" , message: 'should be "+Z+" ",h?i+="' + "+f:i+=""+f+"'"),e.opts.verbose&&(i+=" , schema:  ",h?i+="validate.schema"+l:i+=""+a,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var oe=i;return i=Y.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+oe+"]); ":i+=" validate.errors = ["+oe+"]; return false; ":i+=" var err = "+oe+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",u&&(i+=" else { "),i}});var iA=He((wIe,TV)=>{"use strict";TV.exports=function(e,t,r){var i=" ",o=e.level,s=e.dataLevel,a=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,g,d="data"+(s||""),h=e.opts.$data&&a&&a.$data,f;if(h?(i+=" var schema"+o+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",f="schema"+o):f=a,!(h||typeof a=="number"))throw new Error(t+" must be number");var p=t=="maxItems"?">":"<";i+="if ( ",h&&(i+=" ("+f+" !== undefined && typeof "+f+" != 'number') || "),i+=" "+d+".length "+p+" "+f+") { ";var g=t,_=_||[];_.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(g||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+f+" } ",e.opts.messages!==!1&&(i+=" , message: 'should NOT have ",t=="maxItems"?i+="more":i+="fewer",i+=" than ",h?i+="' + "+f+" + '":i+=""+a,i+=" items' "),e.opts.verbose&&(i+=" , schema:  ",h?i+="validate.schema"+l:i+=""+a,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var y=i;return i=_.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+y+"]); ":i+=" validate.errors = ["+y+"]; return false; ":i+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",u&&(i+=" else { "),i}});var oA=He((xIe,AV)=>{"use strict";AV.exports=function(e,t,r){var i=" ",o=e.level,s=e.dataLevel,a=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,g,d="data"+(s||""),h=e.opts.$data&&a&&a.$data,f;if(h?(i+=" var schema"+o+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",f="schema"+o):f=a,!(h||typeof a=="number"))throw new Error(t+" must be number");var p=t=="maxLength"?">":"<";i+="if ( ",h&&(i+=" ("+f+" !== undefined && typeof "+f+" != 'number') || "),e.opts.unicode===!1?i+=" "+d+".length ":i+=" ucs2length("+d+") ",i+=" "+p+" "+f+") { ";var g=t,_=_||[];_.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(g||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+f+" } ",e.opts.messages!==!1&&(i+=" , message: 'should NOT be ",t=="maxLength"?i+="longer":i+="shorter",i+=" than ",h?i+="' + "+f+" + '":i+=""+a,i+=" characters' "),e.opts.verbose&&(i+=" , schema:  ",h?i+="validate.schema"+l:i+=""+a,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var y=i;return i=_.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+y+"]); ":i+=" validate.errors = ["+y+"]; return false; ":i+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",u&&(i+=" else { "),i}});var sA=He((CIe,kV)=>{"use strict";kV.exports=function(e,t,r){var i=" ",o=e.level,s=e.dataLevel,a=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,g,d="data"+(s||""),h=e.opts.$data&&a&&a.$data,f;if(h?(i+=" var schema"+o+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",f="schema"+o):f=a,!(h||typeof a=="number"))throw new Error(t+" must be number");var p=t=="maxProperties"?">":"<";i+="if ( ",h&&(i+=" ("+f+" !== undefined && typeof "+f+" != 'number') || "),i+=" Object.keys("+d+").length "+p+" "+f+") { ";var g=t,_=_||[];_.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(g||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+f+" } ",e.opts.messages!==!1&&(i+=" , message: 'should NOT have ",t=="maxProperties"?i+="more":i+="fewer",i+=" than ",h?i+="' + "+f+" + '":i+=""+a,i+=" properties' "),e.opts.verbose&&(i+=" , schema:  ",h?i+="validate.schema"+l:i+=""+a,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var y=i;return i=_.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+y+"]); ":i+=" validate.errors = ["+y+"]; return false; ":i+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",u&&(i+=" else { "),i}});var MV=He((EIe,RV)=>{"use strict";RV.exports=function(e,t,r){var i=" ",o=e.level,s=e.dataLevel,a=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(s||""),h=e.opts.$data&&a&&a.$data,f;if(h?(i+=" var schema"+o+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",f="schema"+o):f=a,!(h||typeof a=="number"))throw new Error(t+" must be number");i+="var division"+o+";if (",h&&(i+=" "+f+" !== undefined && ( typeof "+f+" != 'number' || "),i+=" (division"+o+" = "+d+" / "+f+", ",e.opts.multipleOfPrecision?i+=" Math.abs(Math.round(division"+o+") - division"+o+") > 1e-"+e.opts.multipleOfPrecision+" ":i+=" division"+o+" !== parseInt(division"+o+") ",i+=" ) ",h&&(i+="  )  "),i+=" ) {   ";var p=p||[];p.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { multipleOf: "+f+" } ",e.opts.messages!==!1&&(i+=" , message: 'should be multiple of ",h?i+="' + "+f:i+=""+f+"'"),e.opts.verbose&&(i+=" , schema:  ",h?i+="validate.schema"+l:i+=""+a,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var g=i;return i=p.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+g+"]); ":i+=" validate.errors = ["+g+"]; return false; ":i+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",u&&(i+=" else { "),i}});var PV=He((IIe,OV)=>{"use strict";OV.exports=function(e,t,r){var i=" ",o=e.level,s=e.dataLevel,a=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(s||""),h="errs__"+o,f=e.util.copy(e);f.level++;var p="valid"+f.level;if(e.opts.strictKeywords?typeof a=="object"&&Object.keys(a).length>0||a===!1:e.util.schemaHasRules(a,e.RULES.all)){f.schema=a,f.schemaPath=l,f.errSchemaPath=c,i+=" var "+h+" = errors;  ";var g=e.compositeRule;e.compositeRule=f.compositeRule=!0,f.createErrors=!1;var _;f.opts.allErrors&&(_=f.opts.allErrors,f.opts.allErrors=!1),i+=" "+e.validate(f)+" ",f.createErrors=!0,_&&(f.opts.allErrors=_),e.compositeRule=f.compositeRule=g,i+=" if ("+p+") {   ";var y=y||[];y.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",e.opts.messages!==!1&&(i+=" , message: 'should NOT be valid' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var E=i;i=y.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+E+"]); ":i+=" validate.errors = ["+E+"]; return false; ":i+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } ",e.opts.allErrors&&(i+=" } ")}else i+="  var err =   ",e.createErrors!==!1?(i+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",e.opts.messages!==!1&&(i+=" , message: 'should NOT be valid' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u&&(i+=" if (false) { ");return i}});var FV=He((SIe,NV)=>{"use strict";NV.exports=function(e,t,r){var i=" ",o=e.level,s=e.dataLevel,a=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(s||""),h="valid"+o,f="errs__"+o,p=e.util.copy(e),g="";p.level++;var _="valid"+p.level,y=p.baseId,E="prevValid"+o,T="passingSchemas"+o;i+="var "+f+" = errors , "+E+" = false , "+h+" = false , "+T+" = null; ";var A=e.compositeRule;e.compositeRule=p.compositeRule=!0;var P=a;if(P)for(var R,W=-1,S=P.length-1;W<S;)R=P[W+=1],(e.opts.strictKeywords?typeof R=="object"&&Object.keys(R).length>0||R===!1:e.util.schemaHasRules(R,e.RULES.all))?(p.schema=R,p.schemaPath=l+"["+W+"]",p.errSchemaPath=c+"/"+W,i+="  "+e.validate(p)+" ",p.baseId=y):i+=" var "+_+" = true; ",W&&(i+=" if ("+_+" && "+E+") { "+h+" = false; "+T+" = ["+T+", "+W+"]; } else { ",g+="}"),i+=" if ("+_+") { "+h+" = "+E+" = true; "+T+" = "+W+"; }";return e.compositeRule=p.compositeRule=A,i+=""+g+"if (!"+h+") {   var err =   ",e.createErrors!==!1?(i+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { passingSchemas: "+T+" } ",e.opts.messages!==!1&&(i+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&u&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),i+="} else {  errors = "+f+"; if (vErrors !== null) { if ("+f+") vErrors.length = "+f+"; else vErrors = null; }",e.opts.allErrors&&(i+=" } "),i}});var jV=He((DIe,LV)=>{"use strict";LV.exports=function(e,t,r){var i=" ",o=e.level,s=e.dataLevel,a=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(s||""),h=e.opts.$data&&a&&a.$data,f;h?(i+=" var schema"+o+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",f="schema"+o):f=a;var p=h?"(new RegExp("+f+"))":e.usePattern(a);i+="if ( ",h&&(i+=" ("+f+" !== undefined && typeof "+f+" != 'string') || "),i+=" !"+p+".test("+d+") ) {   ";var g=g||[];g.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { pattern:  ",h?i+=""+f:i+=""+e.util.toQuotedString(a),i+="  } ",e.opts.messages!==!1&&(i+=` , message: 'should match pattern "`,h?i+="' + "+f+" + '":i+=""+e.util.escapeQuotes(a),i+=`"' `),e.opts.verbose&&(i+=" , schema:  ",h?i+="validate.schema"+l:i+=""+e.util.toQuotedString(a),i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var _=i;return i=g.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+_+"]); ":i+=" validate.errors = ["+_+"]; return false; ":i+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",u&&(i+=" else { "),i}});var VV=He((TIe,BV)=>{"use strict";BV.exports=function(e,t,r){var i=" ",o=e.level,s=e.dataLevel,a=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(s||""),h="errs__"+o,f=e.util.copy(e),p="";f.level++;var g="valid"+f.level,_="key"+o,y="idx"+o,E=f.dataLevel=e.dataLevel+1,T="data"+E,A="dataProperties"+o,P=Object.keys(a||{}).filter(le),R=e.schema.patternProperties||{},W=Object.keys(R).filter(le),S=e.schema.additionalProperties,$=P.length||W.length,Z=S===!1,Y=typeof S=="object"&&Object.keys(S).length,oe=e.opts.removeAdditional,F=Z||Y||oe,j=e.opts.ownProperties,H=e.baseId,q=e.schema.required;if(q&&!(e.opts.$data&&q.$data)&&q.length<e.opts.loopRequired)var X=e.util.toHash(q);function le(Xi){return Xi!=="__proto__"}if(i+="var "+h+" = errors;var "+g+" = true;",j&&(i+=" var "+A+" = undefined;"),F){if(j?i+=" "+A+" = "+A+" || Object.keys("+d+"); for (var "+y+"=0; "+y+"<"+A+".length; "+y+"++) { var "+_+" = "+A+"["+y+"]; ":i+=" for (var "+_+" in "+d+") { ",$){if(i+=" var isAdditional"+o+" = !(false ",P.length)if(P.length>8)i+=" || validate.schema"+l+".hasOwnProperty("+_+") ";else{var ge=P;if(ge)for(var pe,It=-1,zt=ge.length-1;It<zt;)pe=ge[It+=1],i+=" || "+_+" == "+e.util.toQuotedString(pe)+" "}if(W.length){var Cn=W;if(Cn)for(var ft,En=-1,I=Cn.length-1;En<I;)ft=Cn[En+=1],i+=" || "+e.usePattern(ft)+".test("+_+") "}i+=" ); if (isAdditional"+o+") { "}if(oe=="all")i+=" delete "+d+"["+_+"]; ";else{var C=e.errorPath,Q="' + "+_+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,_,e.opts.jsonPointers)),Z)if(oe)i+=" delete "+d+"["+_+"]; ";else{i+=" "+g+" = false; ";var O=c;c=e.errSchemaPath+"/additionalProperties";var Fe=Fe||[];Fe.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { additionalProperty: '"+Q+"' } ",e.opts.messages!==!1&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is an invalid additional property":i+="should NOT have additional properties",i+="' "),e.opts.verbose&&(i+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var rt=i;i=Fe.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+rt+"]); ":i+=" validate.errors = ["+rt+"]; return false; ":i+=" var err = "+rt+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c=O,u&&(i+=" break; ")}else if(Y)if(oe=="failing"){i+=" var "+h+" = errors;  ";var Xt=e.compositeRule;e.compositeRule=f.compositeRule=!0,f.schema=S,f.schemaPath=e.schemaPath+".additionalProperties",f.errSchemaPath=e.errSchemaPath+"/additionalProperties",f.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,_,e.opts.jsonPointers);var At=d+"["+_+"]";f.dataPathArr[E]=_;var Qe=e.validate(f);f.baseId=H,e.util.varOccurences(Qe,T)<2?i+=" "+e.util.varReplace(Qe,T,At)+" ":i+=" var "+T+" = "+At+"; "+Qe+" ",i+=" if (!"+g+") { errors = "+h+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+d+"["+_+"]; }  ",e.compositeRule=f.compositeRule=Xt}else{f.schema=S,f.schemaPath=e.schemaPath+".additionalProperties",f.errSchemaPath=e.errSchemaPath+"/additionalProperties",f.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,_,e.opts.jsonPointers);var At=d+"["+_+"]";f.dataPathArr[E]=_;var Qe=e.validate(f);f.baseId=H,e.util.varOccurences(Qe,T)<2?i+=" "+e.util.varReplace(Qe,T,At)+" ":i+=" var "+T+" = "+At+"; "+Qe+" ",u&&(i+=" if (!"+g+") break; ")}e.errorPath=C}$&&(i+=" } "),i+=" }  ",u&&(i+=" if ("+g+") { ",p+="}")}var Lr=e.opts.useDefaults&&!e.compositeRule;if(P.length){var Jt=P;if(Jt)for(var pe,_r=-1,Cs=Jt.length-1;_r<Cs;){pe=Jt[_r+=1];var Fn=a[pe];if(e.opts.strictKeywords?typeof Fn=="object"&&Object.keys(Fn).length>0||Fn===!1:e.util.schemaHasRules(Fn,e.RULES.all)){var Ir=e.util.getProperty(pe),At=d+Ir,br=Lr&&Fn.default!==void 0;f.schema=Fn,f.schemaPath=l+Ir,f.errSchemaPath=c+"/"+e.util.escapeFragment(pe),f.errorPath=e.util.getPath(e.errorPath,pe,e.opts.jsonPointers),f.dataPathArr[E]=e.util.toQuotedString(pe);var Qe=e.validate(f);if(f.baseId=H,e.util.varOccurences(Qe,T)<2){Qe=e.util.varReplace(Qe,T,At);var jr=At}else{var jr=T;i+=" var "+T+" = "+At+"; "}if(br)i+=" "+Qe+" ";else{if(X&&X[pe]){i+=" if ( "+jr+" === undefined ",j&&(i+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(pe)+"') "),i+=") { "+g+" = false; ";var C=e.errorPath,O=c,Ro=e.util.escapeQuotes(pe);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(C,pe,e.opts.jsonPointers)),c=e.errSchemaPath+"/required";var Fe=Fe||[];Fe.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+Ro+"' } ",e.opts.messages!==!1&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+Ro+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var rt=i;i=Fe.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+rt+"]); ":i+=" validate.errors = ["+rt+"]; return false; ":i+=" var err = "+rt+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c=O,e.errorPath=C,i+=" } else { "}else u?(i+=" if ( "+jr+" === undefined ",j&&(i+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(pe)+"') "),i+=") { "+g+" = true; } else { "):(i+=" if ("+jr+" !== undefined ",j&&(i+=" &&   Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(pe)+"') "),i+=" ) { ");i+=" "+Qe+" } "}}u&&(i+=" if ("+g+") { ",p+="}")}}if(W.length){var pi=W;if(pi)for(var ft,p_=-1,fC=pi.length-1;p_<fC;){ft=pi[p_+=1];var Fn=R[ft];if(e.opts.strictKeywords?typeof Fn=="object"&&Object.keys(Fn).length>0||Fn===!1:e.util.schemaHasRules(Fn,e.RULES.all)){f.schema=Fn,f.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(ft),f.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(ft),j?i+=" "+A+" = "+A+" || Object.keys("+d+"); for (var "+y+"=0; "+y+"<"+A+".length; "+y+"++) { var "+_+" = "+A+"["+y+"]; ":i+=" for (var "+_+" in "+d+") { ",i+=" if ("+e.usePattern(ft)+".test("+_+")) { ",f.errorPath=e.util.getPathExpr(e.errorPath,_,e.opts.jsonPointers);var At=d+"["+_+"]";f.dataPathArr[E]=_;var Qe=e.validate(f);f.baseId=H,e.util.varOccurences(Qe,T)<2?i+=" "+e.util.varReplace(Qe,T,At)+" ":i+=" var "+T+" = "+At+"; "+Qe+" ",u&&(i+=" if (!"+g+") break; "),i+=" } ",u&&(i+=" else "+g+" = true; "),i+=" }  ",u&&(i+=" if ("+g+") { ",p+="}")}}}return u&&(i+=" "+p+" if ("+h+" == errors) {"),i}});var UV=He((AIe,$V)=>{"use strict";$V.exports=function(e,t,r){var i=" ",o=e.level,s=e.dataLevel,a=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(s||""),h="errs__"+o,f=e.util.copy(e),p="";f.level++;var g="valid"+f.level;if(i+="var "+h+" = errors;",e.opts.strictKeywords?typeof a=="object"&&Object.keys(a).length>0||a===!1:e.util.schemaHasRules(a,e.RULES.all)){f.schema=a,f.schemaPath=l,f.errSchemaPath=c;var _="key"+o,y="idx"+o,E="i"+o,T="' + "+_+" + '",A=f.dataLevel=e.dataLevel+1,P="data"+A,R="dataProperties"+o,W=e.opts.ownProperties,S=e.baseId;W&&(i+=" var "+R+" = undefined; "),W?i+=" "+R+" = "+R+" || Object.keys("+d+"); for (var "+y+"=0; "+y+"<"+R+".length; "+y+"++) { var "+_+" = "+R+"["+y+"]; ":i+=" for (var "+_+" in "+d+") { ",i+=" var startErrs"+o+" = errors; ";var $=_,Z=e.compositeRule;e.compositeRule=f.compositeRule=!0;var Y=e.validate(f);f.baseId=S,e.util.varOccurences(Y,P)<2?i+=" "+e.util.varReplace(Y,P,$)+" ":i+=" var "+P+" = "+$+"; "+Y+" ",e.compositeRule=f.compositeRule=Z,i+=" if (!"+g+") { for (var "+E+"=startErrs"+o+"; "+E+"<errors; "+E+"++) { vErrors["+E+"].propertyName = "+_+"; }   var err =   ",e.createErrors!==!1?(i+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { propertyName: '"+T+"' } ",e.opts.messages!==!1&&(i+=" , message: 'property name \\'"+T+"\\' is invalid' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&u&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; "),u&&(i+=" break; "),i+=" } }"}return u&&(i+=" "+p+" if ("+h+" == errors) {"),i}});var HV=He((kIe,zV)=>{"use strict";zV.exports=function(e,t,r){var i=" ",o=e.level,s=e.dataLevel,a=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(s||""),h="valid"+o,f=e.opts.$data&&a&&a.$data,p;f?(i+=" var schema"+o+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",p="schema"+o):p=a;var g="schema"+o;if(!f)if(a.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var _=[],y=a;if(y)for(var E,T=-1,A=y.length-1;T<A;){E=y[T+=1];var P=e.schema.properties[E];P&&(e.opts.strictKeywords?typeof P=="object"&&Object.keys(P).length>0||P===!1:e.util.schemaHasRules(P,e.RULES.all))||(_[_.length]=E)}}else var _=a;if(f||_.length){var R=e.errorPath,W=f||_.length>=e.opts.loopRequired,S=e.opts.ownProperties;if(u)if(i+=" var missing"+o+"; ",W){f||(i+=" var "+g+" = validate.schema"+l+"; ");var $="i"+o,Z="schema"+o+"["+$+"]",Y="' + "+Z+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(R,Z,e.opts.jsonPointers)),i+=" var "+h+" = true; ",f&&(i+=" if (schema"+o+" === undefined) "+h+" = true; else if (!Array.isArray(schema"+o+")) "+h+" = false; else {"),i+=" for (var "+$+" = 0; "+$+" < "+g+".length; "+$+"++) { "+h+" = "+d+"["+g+"["+$+"]] !== undefined ",S&&(i+=" &&   Object.prototype.hasOwnProperty.call("+d+", "+g+"["+$+"]) "),i+="; if (!"+h+") break; } ",f&&(i+="  }  "),i+="  if (!"+h+") {   ";var oe=oe||[];oe.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+Y+"' } ",e.opts.messages!==!1&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+Y+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var F=i;i=oe.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+F+"]); ":i+=" validate.errors = ["+F+"]; return false; ":i+=" var err = "+F+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else { "}else{i+=" if ( ";var j=_;if(j)for(var H,$=-1,q=j.length-1;$<q;){H=j[$+=1],$&&(i+=" || ");var X=e.util.getProperty(H),le=d+X;i+=" ( ( "+le+" === undefined ",S&&(i+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(H)+"') "),i+=") && (missing"+o+" = "+e.util.toQuotedString(e.opts.jsonPointers?H:X)+") ) "}i+=") {  ";var Z="missing"+o,Y="' + "+Z+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(R,Z,!0):R+" + "+Z);var oe=oe||[];oe.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+Y+"' } ",e.opts.messages!==!1&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+Y+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var F=i;i=oe.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+F+"]); ":i+=" validate.errors = ["+F+"]; return false; ":i+=" var err = "+F+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else { "}else if(W){f||(i+=" var "+g+" = validate.schema"+l+"; ");var $="i"+o,Z="schema"+o+"["+$+"]",Y="' + "+Z+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(R,Z,e.opts.jsonPointers)),f&&(i+=" if ("+g+" && !Array.isArray("+g+")) {  var err =   ",e.createErrors!==!1?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+Y+"' } ",e.opts.messages!==!1&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+Y+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+g+" !== undefined) { "),i+=" for (var "+$+" = 0; "+$+" < "+g+".length; "+$+"++) { if ("+d+"["+g+"["+$+"]] === undefined ",S&&(i+=" || ! Object.prototype.hasOwnProperty.call("+d+", "+g+"["+$+"]) "),i+=") {  var err =   ",e.createErrors!==!1?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+Y+"' } ",e.opts.messages!==!1&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+Y+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",f&&(i+="  }  ")}else{var ge=_;if(ge)for(var H,pe=-1,It=ge.length-1;pe<It;){H=ge[pe+=1];var X=e.util.getProperty(H),Y=e.util.escapeQuotes(H),le=d+X;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(R,H,e.opts.jsonPointers)),i+=" if ( "+le+" === undefined ",S&&(i+=" || ! Object.prototype.hasOwnProperty.call("+d+", '"+e.util.escapeQuotes(H)+"') "),i+=") {  var err =   ",e.createErrors!==!1?(i+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+Y+"' } ",e.opts.messages!==!1&&(i+=" , message: '",e.opts._errorDataPathProperty?i+="is a required property":i+="should have required property \\'"+Y+"\\'",i+="' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=R}else u&&(i+=" if (true) {");return i}});var GV=He((RIe,qV)=>{"use strict";qV.exports=function(e,t,r){var i=" ",o=e.level,s=e.dataLevel,a=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(s||""),h="valid"+o,f=e.opts.$data&&a&&a.$data,p;if(f?(i+=" var schema"+o+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",p="schema"+o):p=a,(a||f)&&e.opts.uniqueItems!==!1){f&&(i+=" var "+h+"; if ("+p+" === false || "+p+" === undefined) "+h+" = true; else if (typeof "+p+" != 'boolean') "+h+" = false; else { "),i+=" var i = "+d+".length , "+h+" = true , j; if (i > 1) { ";var g=e.schema.items&&e.schema.items.type,_=Array.isArray(g);if(!g||g=="object"||g=="array"||_&&(g.indexOf("object")>=0||g.indexOf("array")>=0))i+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+d+"[i], "+d+"[j])) { "+h+" = false; break outer; } } } ";else{i+=" var itemIndices = {}, item; for (;i--;) { var item = "+d+"[i]; ";var y="checkDataType"+(_?"s":"");i+=" if ("+e.util[y](g,"item",e.opts.strictNumbers,!0)+") continue; ",_&&(i+=` if (typeof item == 'string') item = '"' + item; `),i+=" if (typeof itemIndices[item] == 'number') { "+h+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}i+=" } ",f&&(i+="  }  "),i+=" if (!"+h+") {   ";var E=E||[];E.push(i),i="",e.createErrors!==!1?(i+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { i: i, j: j } ",e.opts.messages!==!1&&(i+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(i+=" , schema:  ",f?i+="validate.schema"+l:i+=""+a,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var T=i;i=E.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+T+"]); ":i+=" validate.errors = ["+T+"]; return false; ":i+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",u&&(i+=" else { ")}else u&&(i+=" if (true) { ");return i}});var KV=He((MIe,WV)=>{"use strict";WV.exports={$ref:sV(),allOf:lV(),anyOf:uV(),$comment:fV(),const:pV(),contains:gV(),dependencies:bV(),enum:yV(),format:xV(),if:EV(),items:SV(),maximum:rA(),minimum:rA(),maxItems:iA(),minItems:iA(),maxLength:oA(),minLength:oA(),maxProperties:sA(),minProperties:sA(),multipleOf:MV(),not:PV(),oneOf:FV(),pattern:jV(),properties:VV(),propertyNames:UV(),required:HV(),uniqueItems:GV(),validate:tA()}});var ZV=He((OIe,YV)=>{"use strict";var QV=KV(),aA=xc().toHash;YV.exports=function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],t=["type","$comment"],r=["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"],i=["number","integer","string","array","object","boolean","null"];return e.all=aA(t),e.types=aA(i),e.forEach(function(o){o.rules=o.rules.map(function(s){var a;if(typeof s=="object"){var l=Object.keys(s)[0];a=s[l],s=l,a.forEach(function(u){t.push(u),e.all[u]=!0})}t.push(s);var c=e.all[s]={keyword:s,code:QV[s],implements:a};return c}),e.all.$comment={keyword:"$comment",code:QV.$comment},o.type&&(e.types[o.type]=o)}),e.keywords=aA(t.concat(r)),e.custom={},e}});var e$=He((PIe,JV)=>{"use strict";var XV=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];JV.exports=function(n,e){for(var t=0;t<e.length;t++){n=JSON.parse(JSON.stringify(n));var r=e[t].split("/"),i=n,o;for(o=1;o<r.length;o++)i=i[r[o]];for(o=0;o<XV.length;o++){var s=XV[o],a=i[s];a&&(i[s]={anyOf:[a,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return n}});var r$=He((NIe,n$)=>{"use strict";var IX=Hy().MissingRef;n$.exports=t$;function t$(n,e,t){var r=this;if(typeof this._opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");typeof e=="function"&&(t=e,e=void 0);var i=o(n).then(function(){var a=r._addSchema(n,void 0,e);return a.validate||s(a)});return t&&i.then(function(a){t(null,a)},t),i;function o(a){var l=a.$schema;return l&&!r.getSchema(l)?t$.call(r,{$ref:l},!0):Promise.resolve()}function s(a){try{return r._compile(a)}catch(c){if(c instanceof IX)return l(c);throw c}function l(c){var u=c.missingSchema;if(f(u))throw new Error("Schema "+u+" is loaded but "+c.missingRef+" cannot be resolved");var d=r._loadingSchemas[u];return d||(d=r._loadingSchemas[u]=r._opts.loadSchema(u),d.then(h,h)),d.then(function(p){if(!f(u))return o(p).then(function(){f(u)||r.addSchema(p,u,void 0,e)})}).then(function(){return s(a)});function h(){delete r._loadingSchemas[u]}function f(p){return r._refs[p]||r._schemas[p]}}}}});var o$=He((FIe,i$)=>{"use strict";i$.exports=function(e,t,r){var i=" ",o=e.level,s=e.dataLevel,a=e.schema[t],l=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d,h="data"+(s||""),f="valid"+o,p="errs__"+o,g=e.opts.$data&&a&&a.$data,_;g?(i+=" var schema"+o+" = "+e.util.getData(a.$data,s,e.dataPathArr)+"; ",_="schema"+o):_=a;var y=this,E="definition"+o,T=y.definition,A="",P,R,W,S,$;if(g&&T.$data){$="keywordValidate"+o;var Z=T.validateSchema;i+=" var "+E+" = RULES.custom['"+t+"'].definition; var "+$+" = "+E+".validate;"}else{if(S=e.useCustomRule(y,a,e.schema,e),!S)return;_="validate.schema"+l,$=S.code,P=T.compile,R=T.inline,W=T.macro}var Y=$+".errors",oe="i"+o,F="ruleErr"+o,j=T.async;if(j&&!e.async)throw new Error("async keyword in sync schema");if(R||W||(i+=""+Y+" = null;"),i+="var "+p+" = errors;var "+f+";",g&&T.$data&&(A+="}",i+=" if ("+_+" === undefined) { "+f+" = true; } else { ",Z&&(A+="}",i+=" "+f+" = "+E+".validateSchema("+_+"); if ("+f+") { ")),R)T.statements?i+=" "+S.validate+" ":i+=" "+f+" = "+S.validate+"; ";else if(W){var H=e.util.copy(e),A="";H.level++;var q="valid"+H.level;H.schema=S.validate,H.schemaPath="";var X=e.compositeRule;e.compositeRule=H.compositeRule=!0;var le=e.validate(H).replace(/validate\.schema/g,$);e.compositeRule=H.compositeRule=X,i+=" "+le}else{var ge=ge||[];ge.push(i),i="",i+="  "+$+".call( ",e.opts.passContext?i+="this":i+="self",P||T.schema===!1?i+=" , "+h+" ":i+=" , "+_+" , "+h+" , validate.schema"+e.schemaPath+" ",i+=" , (dataPath || '')",e.errorPath!='""'&&(i+=" + "+e.errorPath);var pe=s?"data"+(s-1||""):"parentData",It=s?e.dataPathArr[s]:"parentDataProperty";i+=" , "+pe+" , "+It+" , rootData )  ";var zt=i;i=ge.pop(),T.errors===!1?(i+=" "+f+" = ",j&&(i+="await "),i+=""+zt+"; "):j?(Y="customErrors"+o,i+=" var "+Y+" = null; try { "+f+" = await "+zt+"; } catch (e) { "+f+" = false; if (e instanceof ValidationError) "+Y+" = e.errors; else throw e; } "):i+=" "+Y+" = null; "+f+" = "+zt+"; "}if(T.modifying&&(i+=" if ("+pe+") "+h+" = "+pe+"["+It+"];"),i+=""+A,T.valid)u&&(i+=" if (true) { ");else{i+=" if ( ",T.valid===void 0?(i+=" !",W?i+=""+q:i+=""+f):i+=" "+!T.valid+" ",i+=") { ",d=y.keyword;var ge=ge||[];ge.push(i),i="";var ge=ge||[];ge.push(i),i="",e.createErrors!==!1?(i+=" { keyword: '"+(d||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { keyword: '"+y.keyword+"' } ",e.opts.messages!==!1&&(i+=` , message: 'should pass "`+y.keyword+`" keyword validation' `),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var Cn=i;i=ge.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+Cn+"]); ":i+=" validate.errors = ["+Cn+"]; return false; ":i+=" var err = "+Cn+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var ft=i;i=ge.pop(),R?T.errors?T.errors!="full"&&(i+="  for (var "+oe+"="+p+"; "+oe+"<errors; "+oe+"++) { var "+F+" = vErrors["+oe+"]; if ("+F+".dataPath === undefined) "+F+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+F+".schemaPath === undefined) { "+F+'.schemaPath = "'+c+'"; } ',e.opts.verbose&&(i+=" "+F+".schema = "+_+"; "+F+".data = "+h+"; "),i+=" } "):T.errors===!1?i+=" "+ft+" ":(i+=" if ("+p+" == errors) { "+ft+" } else {  for (var "+oe+"="+p+"; "+oe+"<errors; "+oe+"++) { var "+F+" = vErrors["+oe+"]; if ("+F+".dataPath === undefined) "+F+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+F+".schemaPath === undefined) { "+F+'.schemaPath = "'+c+'"; } ',e.opts.verbose&&(i+=" "+F+".schema = "+_+"; "+F+".data = "+h+"; "),i+=" } } "):W?(i+="   var err =   ",e.createErrors!==!1?(i+=" { keyword: '"+(d||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { keyword: '"+y.keyword+"' } ",e.opts.messages!==!1&&(i+=` , message: 'should pass "`+y.keyword+`" keyword validation' `),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&u&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; ")):T.errors===!1?i+=" "+ft+" ":(i+=" if (Array.isArray("+Y+")) { if (vErrors === null) vErrors = "+Y+"; else vErrors = vErrors.concat("+Y+"); errors = vErrors.length;  for (var "+oe+"="+p+"; "+oe+"<errors; "+oe+"++) { var "+F+" = vErrors["+oe+"]; if ("+F+".dataPath === undefined) "+F+".dataPath = (dataPath || '') + "+e.errorPath+";  "+F+'.schemaPath = "'+c+'";  ',e.opts.verbose&&(i+=" "+F+".schema = "+_+"; "+F+".data = "+h+"; "),i+=" } } else { "+ft+" } "),i+=" } ",u&&(i+=" else { ")}return i}});var lA=He((LIe,SX)=>{SX.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var l$=He((jIe,a$)=>{"use strict";var s$=lA();a$.exports={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:s$.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:s$.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}});var u$=He((BIe,c$)=>{"use strict";var DX=/^[a-z_$][a-z0-9_$-]*$/i,TX=o$(),AX=l$();c$.exports={add:kX,get:RX,remove:MX,validate:cA};function kX(n,e){var t=this.RULES;if(t.keywords[n])throw new Error("Keyword "+n+" is already defined");if(!DX.test(n))throw new Error("Keyword "+n+" is not a valid identifier");if(e){this.validateKeyword(e,!0);var r=e.type;if(Array.isArray(r))for(var i=0;i<r.length;i++)s(n,r[i],e);else s(n,r,e);var o=e.metaSchema;o&&(e.$data&&this._opts.$data&&(o={anyOf:[o,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),e.validateSchema=this.compile(o,!0))}t.keywords[n]=t.all[n]=!0;function s(a,l,c){for(var u,d=0;d<t.length;d++){var h=t[d];if(h.type==l){u=h;break}}u||(u={type:l,rules:[]},t.push(u));var f={keyword:a,definition:c,custom:!0,code:TX,implements:c.implements};u.rules.push(f),t.custom[a]=f}return this}function RX(n){var e=this.RULES.custom[n];return e?e.definition:this.RULES.keywords[n]||!1}function MX(n){var e=this.RULES;delete e.keywords[n],delete e.all[n],delete e.custom[n];for(var t=0;t<e.length;t++)for(var r=e[t].rules,i=0;i<r.length;i++)if(r[i].keyword==n){r.splice(i,1);break}return this}function cA(n,e){cA.errors=null;var t=this._validateKeyword=this._validateKeyword||this.compile(AX,!0);if(t(n))return!0;if(cA.errors=t.errors,e)throw new Error("custom keyword definition is invalid: "+this.errorsText(t.errors));return!1}});var d$=He((VIe,OX)=>{OX.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var w$=He(($Ie,y$)=>{"use strict";var h$=HB(),Cc=zy(),PX=GB(),p$=KT(),NX=eA(),FX=iV(),LX=ZV(),m$=e$(),g$=xc();y$.exports=In;In.prototype.validate=BX;In.prototype.compile=VX;In.prototype.addSchema=$X;In.prototype.addMetaSchema=UX;In.prototype.validateSchema=zX;In.prototype.getSchema=qX;In.prototype.removeSchema=WX;In.prototype.addFormat=tJ;In.prototype.errorsText=eJ;In.prototype._addSchema=KX;In.prototype._compile=QX;In.prototype.compileAsync=r$();var Xy=u$();In.prototype.addKeyword=Xy.add;In.prototype.getKeyword=Xy.get;In.prototype.removeKeyword=Xy.remove;In.prototype.validateKeyword=Xy.validate;var _$=Hy();In.ValidationError=_$.Validation;In.MissingRefError=_$.MissingRef;In.$dataMetaSchema=m$;var Zy="http://json-schema.org/draft-07/schema",f$=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],jX=["/properties"];function In(n){if(!(this instanceof In))return new In(n);n=this._opts=g$.copy(n)||{},aJ(this),this._schemas={},this._refs={},this._fragments={},this._formats=FX(n.format),this._cache=n.cache||new PX,this._loadingSchemas={},this._compilations=[],this.RULES=LX(),this._getId=YX(n),n.loopRequired=n.loopRequired||1/0,n.errorDataPath=="property"&&(n._errorDataPathProperty=!0),n.serialize===void 0&&(n.serialize=NX),this._metaOpts=sJ(this),n.formats&&iJ(this),n.keywords&&oJ(this),nJ(this),typeof n.meta=="object"&&this.addMetaSchema(n.meta),n.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),rJ(this)}function BX(n,e){var t;if(typeof n=="string"){if(t=this.getSchema(n),!t)throw new Error('no schema with key or ref "'+n+'"')}else{var r=this._addSchema(n);t=r.validate||this._compile(r)}var i=t(e);return t.$async!==!0&&(this.errors=t.errors),i}function VX(n,e){var t=this._addSchema(n,void 0,e);return t.validate||this._compile(t)}function $X(n,e,t,r){if(Array.isArray(n)){for(var i=0;i<n.length;i++)this.addSchema(n[i],void 0,t,r);return this}var o=this._getId(n);if(o!==void 0&&typeof o!="string")throw new Error("schema id must be string");return e=Cc.normalizeId(e||o),v$(this,e),this._schemas[e]=this._addSchema(n,t,r,!0),this}function UX(n,e,t){return this.addSchema(n,e,t,!0),this}function zX(n,e){var t=n.$schema;if(t!==void 0&&typeof t!="string")throw new Error("$schema must be a string");if(t=t||this._opts.defaultMeta||HX(this),!t)return this.logger.warn("meta-schema not available"),this.errors=null,!0;var r=this.validate(t,n);if(!r&&e){var i="schema is invalid: "+this.errorsText();if(this._opts.validateSchema=="log")this.logger.error(i);else throw new Error(i)}return r}function HX(n){var e=n._opts.meta;return n._opts.defaultMeta=typeof e=="object"?n._getId(e)||e:n.getSchema(Zy)?Zy:void 0,n._opts.defaultMeta}function qX(n){var e=b$(this,n);switch(typeof e){case"object":return e.validate||this._compile(e);case"string":return this.getSchema(e);case"undefined":return GX(this,n)}}function GX(n,e){var t=Cc.schema.call(n,{schema:{}},e);if(t){var r=t.schema,i=t.root,o=t.baseId,s=h$.call(n,r,i,void 0,o);return n._fragments[e]=new p$({ref:e,fragment:!0,schema:r,root:i,baseId:o,validate:s}),s}}function b$(n,e){return e=Cc.normalizeId(e),n._schemas[e]||n._refs[e]||n._fragments[e]}function WX(n){if(n instanceof RegExp)return Yy(this,this._schemas,n),Yy(this,this._refs,n),this;switch(typeof n){case"undefined":return Yy(this,this._schemas),Yy(this,this._refs),this._cache.clear(),this;case"string":var e=b$(this,n);return e&&this._cache.del(e.cacheKey),delete this._schemas[n],delete this._refs[n],this;case"object":var t=this._opts.serialize,r=t?t(n):n;this._cache.del(r);var i=this._getId(n);i&&(i=Cc.normalizeId(i),delete this._schemas[i],delete this._refs[i])}return this}function Yy(n,e,t){for(var r in e){var i=e[r];!i.meta&&(!t||t.test(r))&&(n._cache.del(i.cacheKey),delete e[r])}}function KX(n,e,t,r){if(typeof n!="object"&&typeof n!="boolean")throw new Error("schema should be object or boolean");var i=this._opts.serialize,o=i?i(n):n,s=this._cache.get(o);if(s)return s;r=r||this._opts.addUsedSchema!==!1;var a=Cc.normalizeId(this._getId(n));a&&r&&v$(this,a);var l=this._opts.validateSchema!==!1&&!e,c;l&&!(c=a&&a==Cc.normalizeId(n.$schema))&&this.validateSchema(n,!0);var u=Cc.ids.call(this,n),d=new p$({id:a,schema:n,localRefs:u,cacheKey:o,meta:t});return a[0]!="#"&&r&&(this._refs[a]=d),this._cache.put(o,d),l&&c&&this.validateSchema(n,!0),d}function QX(n,e){if(n.compiling)return n.validate=i,i.schema=n.schema,i.errors=null,i.root=e||i,n.schema.$async===!0&&(i.$async=!0),i;n.compiling=!0;var t;n.meta&&(t=this._opts,this._opts=this._metaOpts);var r;try{r=h$.call(this,n.schema,e,n.localRefs)}catch(o){throw delete n.validate,o}finally{n.compiling=!1,n.meta&&(this._opts=t)}return n.validate=r,n.refs=r.refs,n.refVal=r.refVal,n.root=r.root,r;function i(){var o=n.validate,s=o.apply(this,arguments);return i.errors=o.errors,s}}function YX(n){switch(n.schemaId){case"auto":return JX;case"id":return ZX;default:return XX}}function ZX(n){return n.$id&&this.logger.warn("schema $id ignored",n.$id),n.id}function XX(n){return n.id&&this.logger.warn("schema id ignored",n.id),n.$id}function JX(n){if(n.$id&&n.id&&n.$id!=n.id)throw new Error("schema $id is different from id");return n.$id||n.id}function eJ(n,e){if(n=n||this.errors,!n)return"No errors";e=e||{};for(var t=e.separator===void 0?", ":e.separator,r=e.dataVar===void 0?"data":e.dataVar,i="",o=0;o<n.length;o++){var s=n[o];s&&(i+=r+s.dataPath+" "+s.message+t)}return i.slice(0,-t.length)}function tJ(n,e){return typeof e=="string"&&(e=new RegExp(e)),this._formats[n]=e,this}function nJ(n){var e;if(n._opts.$data&&(e=d$(),n.addMetaSchema(e,e.$id,!0)),n._opts.meta!==!1){var t=lA();n._opts.$data&&(t=m$(t,jX)),n.addMetaSchema(t,Zy,!0),n._refs["http://json-schema.org/schema"]=Zy}}function rJ(n){var e=n._opts.schemas;if(e)if(Array.isArray(e))n.addSchema(e);else for(var t in e)n.addSchema(e[t],t)}function iJ(n){for(var e in n._opts.formats){var t=n._opts.formats[e];n.addFormat(e,t)}}function oJ(n){for(var e in n._opts.keywords){var t=n._opts.keywords[e];n.addKeyword(e,t)}}function v$(n,e){if(n._schemas[e]||n._refs[e])throw new Error('schema with key or id "'+e+'" already exists')}function sJ(n){for(var e=g$.copy(n._opts),t=0;t<f$.length;t++)delete e[f$[t]];return e}function aJ(n){var e=n._opts.logger;if(e===!1)n.logger={log:uA,warn:uA,error:uA};else{if(e===void 0&&(e=console),!(typeof e=="object"&&e.log&&e.warn&&e.error))throw new Error("logger must implement log, warn and error methods");n.logger=e}}function uA(){}});var f3=He(Yw=>{"use strict";Yw.byteLength=Gie;Yw.toByteArray=Kie;Yw.fromByteArray=Zie;var ps=[],Yi=[],qie=typeof Uint8Array<"u"?Uint8Array:Array,sR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Yc=0,u3=sR.length;Yc<u3;++Yc)ps[Yc]=sR[Yc],Yi[sR.charCodeAt(Yc)]=Yc;var Yc,u3;Yi[45]=62;Yi[95]=63;function d3(n){var e=n.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=n.indexOf("=");t===-1&&(t=e);var r=t===e?0:4-t%4;return[t,r]}function Gie(n){var e=d3(n),t=e[0],r=e[1];return(t+r)*3/4-r}function Wie(n,e,t){return(e+t)*3/4-t}function Kie(n){var e,t=d3(n),r=t[0],i=t[1],o=new qie(Wie(n,r,i)),s=0,a=i>0?r-4:r,l;for(l=0;l<a;l+=4)e=Yi[n.charCodeAt(l)]<<18|Yi[n.charCodeAt(l+1)]<<12|Yi[n.charCodeAt(l+2)]<<6|Yi[n.charCodeAt(l+3)],o[s++]=e>>16&255,o[s++]=e>>8&255,o[s++]=e&255;return i===2&&(e=Yi[n.charCodeAt(l)]<<2|Yi[n.charCodeAt(l+1)]>>4,o[s++]=e&255),i===1&&(e=Yi[n.charCodeAt(l)]<<10|Yi[n.charCodeAt(l+1)]<<4|Yi[n.charCodeAt(l+2)]>>2,o[s++]=e>>8&255,o[s++]=e&255),o}function Qie(n){return ps[n>>18&63]+ps[n>>12&63]+ps[n>>6&63]+ps[n&63]}function Yie(n,e,t){for(var r,i=[],o=e;o<t;o+=3)r=(n[o]<<16&16711680)+(n[o+1]<<8&65280)+(n[o+2]&255),i.push(Qie(r));return i.join("")}function Zie(n){for(var e,t=n.length,r=t%3,i=[],o=16383,s=0,a=t-r;s<a;s+=o)i.push(Yie(n,s,s+o>a?a:s+o));return r===1?(e=n[t-1],i.push(ps[e>>2]+ps[e<<4&63]+"==")):r===2&&(e=(n[t-2]<<8)+n[t-1],i.push(ps[e>>10]+ps[e>>4&63]+ps[e<<2&63]+"=")),i.join("")}});var OC;function D_(){return OC}function Lo(n){let e=OC;return OC=n,e}var AP=Symbol("NotFound");function Ru(n){return n===AP||n?.name==="\u0275NotFound"}function M_(n,e){return Object.is(n,e)}var Zn=null,T_=!1,PC=1,t5=null,Vn=Symbol("SIGNAL");function je(n){let e=Zn;return Zn=n,e}function O_(){return Zn}var Ca={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Ea(n){if(T_)throw new Error("");if(Zn===null)return;Zn.consumerOnSignalRead(n);let e=Zn.nextProducerIndex++;if(F_(Zn),e<Zn.producerNode.length&&Zn.producerNode[e]!==n&&Bh(Zn)){let t=Zn.producerNode[e];N_(t,Zn.producerIndexOfThis[e])}Zn.producerNode[e]!==n&&(Zn.producerNode[e]=n,Zn.producerIndexOfThis[e]=Bh(Zn)?RP(n,Zn,e):0),Zn.producerLastReadVersion[e]=n.version}function kP(){PC++}function P_(n){if(!(Bh(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===PC)){if(!n.producerMustRecompute(n)&&!jl(n)){R_(n);return}n.producerRecomputeValue(n),R_(n)}}function NC(n){if(n.liveConsumerNode===void 0)return;let e=T_;T_=!0;try{for(let t of n.liveConsumerNode)t.dirty||n5(t)}finally{T_=e}}function FC(){return Zn?.consumerAllowSignalWrites!==!1}function n5(n){n.dirty=!0,NC(n),n.consumerMarkedDirty?.(n)}function R_(n){n.dirty=!1,n.lastCleanEpoch=PC}function As(n){return n&&(n.nextProducerIndex=0),je(n)}function Ia(n,e){if(je(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Bh(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)N_(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function jl(n){F_(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(P_(t),r!==t.version))return!0}return!1}function Mu(n){if(F_(n),Bh(n))for(let e=0;e<n.producerNode.length;e++)N_(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function RP(n,e,t){if(MP(n),n.liveConsumerNode.length===0&&OP(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=RP(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function N_(n,e){if(MP(n),n.liveConsumerNode.length===1&&OP(n))for(let r=0;r<n.producerNode.length;r++)N_(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];F_(i),i.producerIndexOfThis[r]=e}}function Bh(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function F_(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function MP(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function OP(n){return n.producerNode!==void 0}function L_(n){t5?.(n)}function Vh(n,e){let t=Object.create(r5);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(P_(t),Ea(t),t.value===jh)throw t.error;return t.value};return r[Vn]=t,L_(t),r}var A_=Symbol("UNSET"),k_=Symbol("COMPUTING"),jh=Symbol("ERRORED"),r5=w(m({},Ca),{value:A_,dirty:!0,error:null,equal:M_,kind:"computed",producerMustRecompute(n){return n.value===A_||n.value===k_},producerRecomputeValue(n){if(n.value===k_)throw new Error("");let e=n.value;n.value=k_;let t=As(n),r,i=!1;try{r=n.computation(),je(null),i=e!==A_&&e!==jh&&r!==jh&&n.equal(e,r)}catch(o){r=jh,n.error=o}finally{Ia(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function i5(){throw new Error}var PP=i5;function NP(n){PP(n)}function LC(n){PP=n}var o5=null;function jC(n,e){let t=Object.create($h);t.value=n,e!==void 0&&(t.equal=e);let r=()=>FP(t);return r[Vn]=t,L_(t),[r,s=>Bl(t,s),s=>BC(t,s)]}function FP(n){return Ea(n),n.value}function Bl(n,e){FC()||NP(n),n.equal(n.value,e)||(n.value=e,s5(n))}function BC(n,e){FC()||NP(n),Bl(n,e(n.value))}var $h=w(m({},Ca),{equal:M_,value:void 0,kind:"signal"});function s5(n){n.version++,kP(),NC(n),o5?.(n)}function Ne(n){return typeof n=="function"}function Ou(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var j_=Ou(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Vl(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var lt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Ne(r))try{r()}catch(o){e=o instanceof j_?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{LP(o)}catch(s){e=e??[],s instanceof j_?e=[...e,...s.errors]:e.push(s)}}if(e)throw new j_(e)}}add(e){var t;if(e&&e!==this)if(this.closed)LP(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Vl(t,e)}remove(e){let{_finalizers:t}=this;t&&Vl(t,e),e instanceof n&&e._removeParent(this)}};lt.EMPTY=(()=>{let n=new lt;return n.closed=!0,n})();var VC=lt.EMPTY;function B_(n){return n instanceof lt||n&&"closed"in n&&Ne(n.remove)&&Ne(n.add)&&Ne(n.unsubscribe)}function LP(n){Ne(n)?n():n.unsubscribe()}var eo={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Pu={setTimeout(n,e,...t){let{delegate:r}=Pu;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Pu;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function V_(n){Pu.setTimeout(()=>{let{onUnhandledError:e}=eo;if(e)e(n);else throw n})}function Uh(){}var jP=$C("C",void 0,void 0);function BP(n){return $C("E",void 0,n)}function VP(n){return $C("N",n,void 0)}function $C(n,e,t){return{kind:n,value:e,error:t}}var $l=null;function Nu(n){if(eo.useDeprecatedSynchronousErrorHandling){let e=!$l;if(e&&($l={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=$l;if($l=null,t)throw r}}else n()}function $P(n){eo.useDeprecatedSynchronousErrorHandling&&$l&&($l.errorThrown=!0,$l.error=n)}var Ul=class extends lt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,B_(e)&&e.add(this)):this.destination=c5}static create(e,t,r){return new ks(e,t,r)}next(e){this.isStopped?zC(VP(e),this):this._next(e)}error(e){this.isStopped?zC(BP(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?zC(jP,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},a5=Function.prototype.bind;function UC(n,e){return a5.call(n,e)}var HC=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){$_(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){$_(r)}else $_(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){$_(t)}}},ks=class extends Ul{constructor(e,t,r){super();let i;if(Ne(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&eo.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&UC(e.next,o),error:e.error&&UC(e.error,o),complete:e.complete&&UC(e.complete,o)}):i=e}this.destination=new HC(i)}};function $_(n){eo.useDeprecatedSynchronousErrorHandling?$P(n):V_(n)}function l5(n){throw n}function zC(n,e){let{onStoppedNotification:t}=eo;t&&Pu.setTimeout(()=>t(n,e))}var c5={closed:!0,next:Uh,error:l5,complete:Uh};var Fu=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Vr(n){return n}function qC(...n){return GC(n)}function GC(n){return n.length===0?Vr:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Be=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=d5(t)?t:new ks(t,r,i);return Nu(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=UP(r),new r((i,o)=>{let s=new ks({next:a=>{try{t(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Fu](){return this}pipe(...t){return GC(t)(this)}toPromise(t){return t=UP(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function UP(n){var e;return(e=n??eo.Promise)!==null&&e!==void 0?e:Promise}function u5(n){return n&&Ne(n.next)&&Ne(n.error)&&Ne(n.complete)}function d5(n){return n&&n instanceof Ul||u5(n)&&B_(n)}function WC(n){return Ne(n?.lift)}function Ye(n){return e=>{if(WC(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ke(n,e,t,r,i){return new KC(n,e,t,r,i)}var KC=class extends Ul{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Lu(){return Ye((n,e)=>{let t=null;n._refCount++;let r=Ke(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var ju=class extends Be{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,WC(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new lt;let t=this.getSubject();e.add(this.source.subscribe(Ke(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=lt.EMPTY)}return e}refCount(){return Lu()(this)}};var zP=Ou(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=(()=>{class n extends Be{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new U_(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new zP}next(t){Nu(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Nu(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Nu(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?VC:(this.currentObservers=null,o.push(t),new lt(()=>{this.currentObservers=null,Vl(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new Be;return t.source=this,t}}return n.create=(e,t)=>new U_(e,t),n})(),U_=class extends re{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:VC}};var Lt=class extends re{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var zh={now(){return(zh.delegate||Date).now()},delegate:void 0};var z_=class extends re{constructor(e=1/0,t=1/0,r=zh){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let l=1;l<r.length&&r[l]<=s;l+=2)a=l;a&&r.splice(0,a+1)}}};var H_=class extends lt{constructor(e,t){super()}schedule(e,t=0){return this}};var Hh={setInterval(n,e,...t){let{delegate:r}=Hh;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Hh;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var q_=class extends H_{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Hh.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Hh.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Vl(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Bu=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Bu.now=zh.now;var G_=class extends Bu{constructor(e,t=Bu.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var qh=new G_(q_),HP=qh;var lr=new Be(n=>n.complete());function W_(n){return n&&Ne(n.schedule)}function QC(n){return n[n.length-1]}function K_(n){return Ne(QC(n))?n.pop():void 0}function jo(n){return W_(QC(n))?n.pop():void 0}function qP(n,e){return typeof QC(n)=="number"?n.pop():e}function WP(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})}function GP(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function zl(n){return this instanceof zl?(this.v=n,this):new zl(n)}function KP(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(f){return function(p){return Promise.resolve(p).then(f,d)}}function a(f,p){r[f]&&(i[f]=function(g){return new Promise(function(_,y){o.push([f,g,_,y])>1||l(f,g)})},p&&(i[f]=p(i[f])))}function l(f,p){try{c(r[f](p))}catch(g){h(o[0][3],g)}}function c(f){f.value instanceof zl?Promise.resolve(f.value.v).then(u,d):h(o[0][2],f)}function u(f){l("next",f)}function d(f){l("throw",f)}function h(f,p){f(p),o.shift(),o.length&&l(o[0][0],o[0][1])}}function QP(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof GP=="function"?GP(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,l){s=n[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}}var Vu=n=>n&&typeof n.length=="number"&&typeof n!="function";function Q_(n){return Ne(n?.then)}function Y_(n){return Ne(n[Fu])}function Z_(n){return Symbol.asyncIterator&&Ne(n?.[Symbol.asyncIterator])}function X_(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function f5(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var J_=f5();function eb(n){return Ne(n?.[J_])}function tb(n){return KP(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield zl(t.read());if(i)return yield zl(void 0);yield yield zl(r)}}finally{t.releaseLock()}})}function nb(n){return Ne(n?.getReader)}function jt(n){if(n instanceof Be)return n;if(n!=null){if(Y_(n))return h5(n);if(Vu(n))return p5(n);if(Q_(n))return m5(n);if(Z_(n))return YP(n);if(eb(n))return g5(n);if(nb(n))return _5(n)}throw X_(n)}function h5(n){return new Be(e=>{let t=n[Fu]();if(Ne(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function p5(n){return new Be(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function m5(n){return new Be(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,V_)})}function g5(n){return new Be(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function YP(n){return new Be(e=>{b5(n,e).catch(t=>e.error(t))})}function _5(n){return YP(tb(n))}function b5(n,e){var t,r,i,o;return WP(this,void 0,void 0,function*(){try{for(t=QP(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function ni(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function rb(n,e=0){return Ye((t,r)=>{t.subscribe(Ke(r,i=>ni(r,n,()=>r.next(i),e),()=>ni(r,n,()=>r.complete(),e),i=>ni(r,n,()=>r.error(i),e)))})}function ib(n,e=0){return Ye((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function ZP(n,e){return jt(n).pipe(ib(e),rb(e))}function XP(n,e){return jt(n).pipe(ib(e),rb(e))}function JP(n,e){return new Be(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function e1(n,e){return new Be(t=>{let r;return ni(t,e,()=>{r=n[J_](),ni(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>Ne(r?.return)&&r.return()})}function ob(n,e){if(!n)throw new Error("Iterable cannot be null");return new Be(t=>{ni(t,e,()=>{let r=n[Symbol.asyncIterator]();ni(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function t1(n,e){return ob(tb(n),e)}function n1(n,e){if(n!=null){if(Y_(n))return ZP(n,e);if(Vu(n))return JP(n,e);if(Q_(n))return XP(n,e);if(Z_(n))return ob(n,e);if(eb(n))return e1(n,e);if(nb(n))return t1(n,e)}throw X_(n)}function mn(n,e){return e?n1(n,e):jt(n)}function ye(...n){let e=jo(n);return mn(n,e)}function Sa(n,e){let t=Ne(n)?n:()=>n,r=i=>i.error(t());return new Be(e?i=>e.schedule(r,0,i):r)}function sb(n){return!!n&&(n instanceof Be||Ne(n.lift)&&Ne(n.subscribe))}var Rs=Ou(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function r1(n){return n instanceof Date&&!isNaN(n)}function be(n,e){return Ye((t,r)=>{let i=0;t.subscribe(Ke(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:v5}=Array;function y5(n,e){return v5(e)?n(...e):n(e)}function $u(n){return be(e=>y5(n,e))}var{isArray:w5}=Array,{getPrototypeOf:x5,prototype:C5,keys:E5}=Object;function ab(n){if(n.length===1){let e=n[0];if(w5(e))return{args:e,keys:null};if(I5(e)){let t=E5(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function I5(n){return n&&typeof n=="object"&&x5(n)===C5}function lb(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Uu(...n){let e=jo(n),t=K_(n),{args:r,keys:i}=ab(n);if(r.length===0)return mn([],e);let o=new Be(S5(r,e,i?s=>lb(i,s):Vr));return t?o.pipe($u(t)):o}function S5(n,e,t=Vr){return r=>{i1(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let l=0;l<i;l++)i1(e,()=>{let c=mn(n[l],e),u=!1;c.subscribe(Ke(r,d=>{o[l]=d,u||(u=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function i1(n,e,t){n?ni(t,n,e):e()}function o1(n,e,t,r,i,o,s,a){let l=[],c=0,u=0,d=!1,h=()=>{d&&!l.length&&!c&&e.complete()},f=g=>c<r?p(g):l.push(g),p=g=>{o&&e.next(g),c++;let _=!1;jt(t(g,u++)).subscribe(Ke(e,y=>{i?.(y),o?f(y):e.next(y)},()=>{_=!0},void 0,()=>{if(_)try{for(c--;l.length&&c<r;){let y=l.shift();s?ni(e,s,()=>p(y)):p(y)}h()}catch(y){e.error(y)}}))};return n.subscribe(Ke(e,f,()=>{d=!0,h()})),()=>{a?.()}}function kn(n,e,t=1/0){return Ne(e)?kn((r,i)=>be((o,s)=>e(r,o,i,s))(jt(n(r,i))),t):(typeof e=="number"&&(t=e),Ye((r,i)=>o1(r,i,n,t)))}function cb(n=1/0){return kn(Vr,n)}function s1(){return cb(1)}function Da(...n){return s1()(mn(n,jo(n)))}function Ms(n){return new Be(e=>{jt(n()).subscribe(e)})}function Gh(...n){let e=K_(n),{args:t,keys:r}=ab(n),i=new Be(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),l=s,c=s;for(let u=0;u<s;u++){let d=!1;jt(t[u]).subscribe(Ke(o,h=>{d||(d=!0,c--),a[u]=h},()=>l--,void 0,()=>{(!l||!d)&&(c||o.next(r?lb(r,a):a),o.complete())}))}});return e?i.pipe($u(e)):i}var D5=["addListener","removeListener"],T5=["addEventListener","removeEventListener"],A5=["on","off"];function Wh(n,e,t,r){if(Ne(t)&&(r=t,t=void 0),r)return Wh(n,e,t).pipe($u(r));let[i,o]=M5(n)?T5.map(s=>a=>n[s](e,a,t)):k5(n)?D5.map(a1(n,e)):R5(n)?A5.map(a1(n,e)):[];if(!i&&Vu(n))return kn(s=>Wh(s,e,t))(jt(n));if(!i)throw new TypeError("Invalid event target");return new Be(s=>{let a=(...l)=>s.next(1<l.length?l:l[0]);return i(a),()=>o(a)})}function a1(n,e){return t=>r=>n[t](e,r)}function k5(n){return Ne(n.addListener)&&Ne(n.removeListener)}function R5(n){return Ne(n.on)&&Ne(n.off)}function M5(n){return Ne(n.addEventListener)&&Ne(n.removeEventListener)}function Kh(n=0,e,t=HP){let r=-1;return e!=null&&(W_(e)?t=e:r=e),new Be(i=>{let o=r1(n)?+n-t.now():n;o<0&&(o=0);let s=0;return t.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function $r(...n){let e=jo(n),t=qP(n,1/0),r=n;return r.length?r.length===1?jt(r[0]):cb(t)(mn(r,e)):lr}function Ze(n,e){return Ye((t,r)=>{let i=0;t.subscribe(Ke(r,o=>n.call(e,o,i++)&&r.next(o)))})}function l1(n){return Ye((e,t)=>{let r=!1,i=null,o=null,s=!1,a=()=>{if(o?.unsubscribe(),o=null,r){r=!1;let c=i;i=null,t.next(c)}s&&t.complete()},l=()=>{o=null,s&&t.complete()};e.subscribe(Ke(t,c=>{r=!0,i=c,o||jt(n(c)).subscribe(o=Ke(t,a,l))},()=>{s=!0,(!r||!o||o.closed)&&t.complete()}))})}function zu(n,e=qh){return l1(()=>Kh(n,e))}function Pi(n){return Ye((e,t)=>{let r=null,i=!1,o;r=e.subscribe(Ke(t,void 0,void 0,s=>{o=jt(n(s,Pi(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function c1(n,e,t,r,i){return(o,s)=>{let a=t,l=e,c=0;o.subscribe(Ke(s,u=>{let d=c++;l=a?n(l,u,d):(a=!0,u),r&&s.next(l)},i&&(()=>{a&&s.next(l),s.complete()})))}}function Ta(n,e){return Ne(e)?kn(n,e,1):kn(n,1)}function Os(n,e=qh){return Ye((t,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let c=o;o=null,r.next(c)}};function l(){let c=s+n,u=e.now();if(u<c){i=this.schedule(void 0,c-u),r.add(i);return}a()}t.subscribe(Ke(r,c=>{o=c,s=e.now(),i||(i=e.schedule(l,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function Aa(n){return Ye((e,t)=>{let r=!1;e.subscribe(Ke(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function wn(n){return n<=0?()=>lr:Ye((e,t)=>{let r=0;e.subscribe(Ke(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Hu(n){return be(()=>n)}function qu(n,e=Vr){return n=n??O5,Ye((t,r)=>{let i,o=!0;t.subscribe(Ke(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function O5(n,e){return n===e}function ub(n=P5){return Ye((e,t)=>{let r=!1;e.subscribe(Ke(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function P5(){return new Rs}function Bo(n){return Ye((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Vo(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Ze((i,o)=>n(i,o,r)):Vr,wn(1),t?Aa(e):ub(()=>new Rs))}function Gu(n){return n<=0?()=>lr:Ye((e,t)=>{let r=[];e.subscribe(Ke(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function YC(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Ze((i,o)=>n(i,o,r)):Vr,Gu(1),t?Aa(e):ub(()=>new Rs))}function db(){return Ye((n,e)=>{let t,r=!1;n.subscribe(Ke(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function ZC(n,e){return Ye(c1(n,e,arguments.length>=2,!0))}function Qh(n={}){let{connector:e=()=>new re,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,l,c=0,u=!1,d=!1,h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),s=l=void 0,u=d=!1},p=()=>{let g=s;f(),g?.unsubscribe()};return Ye((g,_)=>{c++,!d&&!u&&h();let y=l=l??e();_.add(()=>{c--,c===0&&!d&&!u&&(a=XC(p,i))}),y.subscribe(_),!s&&c>0&&(s=new ks({next:E=>y.next(E),error:E=>{d=!0,h(),a=XC(f,t,E),y.error(E)},complete:()=>{u=!0,h(),a=XC(f,r),y.complete()}}),jt(g).subscribe(s))})(o)}}function XC(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new ks({next:()=>{r.unsubscribe(),n()}});return jt(e(...t)).subscribe(r)}function Wu(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,Qh({connector:()=>new z_(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Yh(n){return Ze((e,t)=>n<=t)}function Xn(...n){let e=jo(n);return Ye((t,r)=>{(e?Da(n,t,e):Da(n,t)).subscribe(r)})}function $n(n,e){return Ye((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(Ke(r,l=>{i?.unsubscribe();let c=0,u=o++;jt(n(l,u)).subscribe(i=Ke(r,d=>r.next(e?e(l,d,u,c++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Gt(n){return Ye((e,t)=>{jt(n).subscribe(Ke(t,()=>t.complete(),Uh)),!t.closed&&e.subscribe(t)})}function gn(n,e,t){let r=Ne(n)||e||t?{next:n,error:e,complete:t}:n;return r?Ye((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Ke(o,l=>{var c;(c=r.next)===null||c===void 0||c.call(r,l),o.next(l)},()=>{var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),o.complete()},l=>{var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,l),o.error(l)},()=>{var l,c;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):Vr}function u1(n){let e=je(null);try{return n()}finally{je(e)}}var gb="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",se=class extends Error{code;constructor(e,t){super(Fs(e,t)),this.code=e}};function N5(n){return`NG0${Math.abs(n)}`}function Fs(n,e){return`${N5(n)}${e?": "+e:""}`}var $o=globalThis;function Ot(n){for(let e in n)if(n[e]===Ot)return e;throw Error("")}function h1(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Ns(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Ns).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function _b(n,e){return n?e?`${n} ${e}`:n:e||""}var F5=Ot({__forward_ref__:Ot});function er(n){return n.__forward_ref__=er,n.toString=function(){return Ns(this())},n}function vr(n){return uE(n)?n():n}function uE(n){return typeof n=="function"&&n.hasOwnProperty(F5)&&n.__forward_ref__===er}function p1(n,e){n==null&&dE(e,n,null,"!=")}function dE(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(r==null?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}function K(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Se(n){return{providers:n.providers||[],imports:n.imports||[]}}function np(n){return L5(n,bb)}function fE(n){return np(n)!==null}function L5(n,e){return n.hasOwnProperty(e)&&n[e]||null}function j5(n){let e=n?.[bb]??null;return e||null}function eE(n){return n&&n.hasOwnProperty(hb)?n[hb]:null}var bb=Ot({\u0275prov:Ot}),hb=Ot({\u0275inj:Ot}),G=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=K({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function hE(n){return n&&!!n.\u0275providers}var pE=Ot({\u0275cmp:Ot}),mE=Ot({\u0275dir:Ot}),gE=Ot({\u0275pipe:Ot}),_E=Ot({\u0275mod:Ot}),Jh=Ot({\u0275fac:Ot}),Kl=Ot({__NG_ELEMENT_ID__:Ot}),d1=Ot({__NG_ENV_ID__:Ot});function vb(n){return typeof n=="string"?n:n==null?"":String(n)}function pb(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():vb(n)}var bE=Ot({ngErrorCode:Ot}),m1=Ot({ngErrorMessage:Ot}),Xh=Ot({ngTokenPath:Ot});function vE(n,e){return g1("",-200,e)}function yb(n,e){throw new se(-201,!1)}function B5(n,e){n[Xh]??=[];let t=n[Xh],r;typeof e=="object"&&"multi"in e&&e?.multi===!0?(p1(e.provide,"Token with multi: true should have a provide property"),r=pb(e.provide)):r=pb(e),t[0]!==r&&n[Xh].unshift(r)}function V5(n,e){let t=n[Xh],r=n[bE],i=n[m1]||n.message;return n.message=U5(i,r,t,e),n}function g1(n,e,t){let r=new se(e,n);return r[bE]=e,r[m1]=n,t&&(r[Xh]=t),r}function $5(n){return n[bE]}function U5(n,e,t=[],r=null){let i="";t&&t.length>1&&(i=` Path: ${t.join(" -> ")}.`);let o=r?` Source: ${r}.`:"";return Fs(e,`${n}${o}${i}`)}var tE;function _1(){return tE}function Ur(n){let e=tE;return tE=n,e}function yE(n,e,t){let r=np(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;yb(n,"Injector")}var z5={},Hl=z5,nE="__NG_DI_FLAG__",rE=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=ql(t)||0;try{return this.injector.get(e,r&8?null:Hl,r)}catch(i){if(Ru(i))return i;throw i}}};function H5(n,e=0){let t=D_();if(t===void 0)throw new se(-203,!1);if(t===null)return yE(n,void 0,e);{let r=q5(e),i=t.retrieve(n,r);if(Ru(i)){if(r.optional)return null;throw i}return i}}function de(n,e=0){return(_1()||H5)(vr(n),e)}function x(n,e){return de(n,ql(e))}function ql(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function q5(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function iE(n){let e=[];for(let t=0;t<n.length;t++){let r=vr(n[t]);if(Array.isArray(r)){if(r.length===0)throw new se(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],l=G5(a);typeof l=="number"?l===-1?i=a.token:o|=l:i=a}e.push(de(i,o))}else e.push(de(r))}return e}function wE(n,e){return n[nE]=e,n.prototype[nE]=e,n}function G5(n){return n[nE]}function ka(n,e){let t=n.hasOwnProperty(Jh);return t?n[Jh]:null}function b1(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function v1(n){return n.flat(Number.POSITIVE_INFINITY)}function wb(n,e){n.forEach(t=>Array.isArray(t)?wb(t,e):e(t))}function xE(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function rp(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function y1(n,e){let t=[];for(let r=0;r<n;r++)t.push(e);return t}function w1(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function xb(n,e,t){let r=Qu(n,e);return r>=0?n[r|1]=t:(r=~r,w1(n,r,e,t)),r}function Cb(n,e){let t=Qu(n,e);if(t>=0)return n[t|1]}function Qu(n,e){return W5(n,e,1)}function W5(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Ma={},Tr=[],Ls=new G(""),CE=new G("",-1),EE=new G(""),ep=class{get(e,t=Hl){if(t===Hl){let i=g1("",-201);throw i.name="\u0275NotFound",i}return t}};function IE(n){return n[_E]||null}function js(n){return n[pE]||null}function SE(n){return n[mE]||null}function x1(n){return n[gE]||null}function Oa(n){return{\u0275providers:n}}function C1(...n){return{\u0275providers:DE(!0,n),\u0275fromNgModule:!0}}function DE(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return wb(e,s=>{let a=s;mb(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&E1(i,o),t}function E1(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];TE(i,o=>{e(o,r)})}}function mb(n,e,t,r){if(n=vr(n),!n)return!1;let i=null,o=eE(n),s=!o&&js(n);if(!o&&!s){let l=n.ngModule;if(o=eE(l),o)i=l;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of l)mb(c,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let c;try{wb(o.imports,u=>{mb(u,e,t,r)&&(c||=[],c.push(u))})}finally{}c!==void 0&&E1(c,e)}if(!a){let c=ka(i)||(()=>new i);e({provide:i,useFactory:c,deps:Tr},i),e({provide:EE,useValue:i,multi:!0},i),e({provide:Ls,useValue:()=>de(i),multi:!0},i)}let l=o.providers;if(l!=null&&!a){let c=n;TE(l,u=>{e(u,c)})}}else return!1;return i!==n&&n.providers!==void 0}function TE(n,e){for(let t of n)hE(t)&&(t=t.\u0275providers),Array.isArray(t)?TE(t,e):e(t)}var K5=Ot({provide:String,useValue:Ot});function I1(n){return n!==null&&typeof n=="object"&&K5 in n}function Q5(n){return!!(n&&n.useExisting)}function Y5(n){return!!(n&&n.useFactory)}function Gl(n){return typeof n=="function"}function S1(n){return!!n.useClass}var ip=new G(""),fb={},f1={},JC;function Yu(){return JC===void 0&&(JC=new ep),JC}var cn=class{},Wl=class extends cn{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,sE(e,s=>this.processProvider(s)),this.records.set(CE,Ku(void 0,this)),i.has("environment")&&this.records.set(cn,Ku(void 0,this));let o=this.records.get(ip);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(EE,Tr,{self:!0}))}retrieve(e,t){let r=ql(t)||0;try{return this.get(e,Hl,r)}catch(i){if(Ru(i))return i;throw i}}destroy(){Zh(this),this._destroyed=!0;let e=je(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),je(e)}}onDestroy(e){return Zh(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Zh(this);let t=Lo(this),r=Ur(void 0),i;try{return e()}finally{Lo(t),Ur(r)}}get(e,t=Hl,r){if(Zh(this),e.hasOwnProperty(d1))return e[d1](this);let i=ql(r),o,s=Lo(this),a=Ur(void 0);try{if(!(i&4)){let c=this.records.get(e);if(c===void 0){let u=tq(e)&&np(e);u&&this.injectableDefInScope(u)?c=Ku(oE(e),fb):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c,i)}let l=i&2?Yu():this.parent;return t=i&8&&t===Hl?null:t,l.get(e,t)}catch(l){let c=$5(l);throw c===-200||c===-201?new se(c,null):l}finally{Ur(a),Lo(s)}}resolveInjectorInitializers(){let e=je(null),t=Lo(this),r=Ur(void 0),i;try{let o=this.get(Ls,Tr,{self:!0});for(let s of o)s()}finally{Lo(t),Ur(r),je(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Ns(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=vr(e);let t=Gl(e)?e:vr(e&&e.provide),r=X5(e);if(!Gl(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Ku(void 0,fb,!0),i.factory=()=>iE(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=je(null);try{if(t.value===f1)throw vE(Ns(e));return t.value===fb&&(t.value=f1,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&eq(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{je(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=vr(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function oE(n){let e=np(n),t=e!==null?e.factory:ka(n);if(t!==null)return t;if(n instanceof G)throw new se(204,!1);if(n instanceof Function)return Z5(n);throw new se(204,!1)}function Z5(n){if(n.length>0)throw new se(204,!1);let t=j5(n);return t!==null?()=>t.factory(n):()=>new n}function X5(n){if(I1(n))return Ku(void 0,n.useValue);{let e=AE(n);return Ku(e,fb)}}function AE(n,e,t){let r;if(Gl(n)){let i=vr(n);return ka(i)||oE(i)}else if(I1(n))r=()=>vr(n.useValue);else if(Y5(n))r=()=>n.useFactory(...iE(n.deps||[]));else if(Q5(n))r=(i,o)=>de(vr(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=vr(n&&(n.useClass||n.provide));if(J5(n))r=()=>new i(...iE(n.deps));else return ka(i)||oE(i)}return r}function Zh(n){if(n.destroyed)throw new se(205,!1)}function Ku(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function J5(n){return!!n.deps}function eq(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function tq(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function sE(n,e){for(let t of n)Array.isArray(t)?sE(t,e):t&&hE(t)?sE(t.\u0275providers,e):e(t)}function yr(n,e){let t;n instanceof Wl?(Zh(n),t=n):t=new rE(n);let r,i=Lo(t),o=Ur(void 0);try{return e()}finally{Lo(i),Ur(o)}}function D1(){return _1()!==void 0||D_()!=null}var to=0,Oe=1,Ue=2,Jn=3,Fi=4,zr=5,Ql=6,Zu=7,Rn=8,Yl=9,Bs=10,Wt=11,Xu=12,kE=13,Zl=14,Hr=15,Pa=16,Xl=17,Uo=18,op=19,RE=20,Ps=21,Eb=22,Vs=23,vi=24,Jl=25,un=26,T1=1,ME=6,Na=7,sp=8,ec=9,ur=10;function zo(n){return Array.isArray(n)&&typeof n[T1]=="object"}function no(n){return Array.isArray(n)&&n[T1]===!0}function OE(n){return(n.flags&4)!==0}function Fa(n){return n.componentOffset>-1}function Ju(n){return(n.flags&1)===1}function Ho(n){return!!n.template}function ed(n){return(n[Ue]&512)!==0}function tc(n){return(n[Ue]&256)===256}var PE="svg",A1="math";function Li(n){for(;Array.isArray(n);)n=n[to];return n}function NE(n,e){return Li(e[n])}function ro(n,e){return Li(e[n.index])}function ap(n,e){return n.data[e]}function Ib(n,e){return n[e]}function FE(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function ji(n,e){let t=e[n];return zo(t)?t:t[to]}function k1(n){return(n[Ue]&4)===4}function Sb(n){return(n[Ue]&128)===128}function R1(n){return no(n[Jn])}function yi(n,e){return e==null?null:n[e]}function LE(n){n[Xl]=0}function jE(n){n[Ue]&1024||(n[Ue]|=1024,Sb(n)&&La(n))}function M1(n,e){for(;n>0;)e=e[Zl],n--;return e}function lp(n){return!!(n[Ue]&9216||n[vi]?.dirty)}function Db(n){n[Bs].changeDetectionScheduler?.notify(8),n[Ue]&64&&(n[Ue]|=1024),lp(n)&&La(n)}function La(n){n[Bs].changeDetectionScheduler?.notify(0);let e=Ra(n);for(;e!==null&&!(e[Ue]&8192||(e[Ue]|=8192,!Sb(e)));)e=Ra(e)}function BE(n,e){if(tc(n))throw new se(911,!1);n[Ps]===null&&(n[Ps]=[]),n[Ps].push(e)}function O1(n,e){if(n[Ps]===null)return;let t=n[Ps].indexOf(e);t!==-1&&n[Ps].splice(t,1)}function Ra(n){let e=n[Jn];return no(e)?e[Jn]:e}function VE(n){return n[Zu]??=[]}function $E(n){return n.cleanup??=[]}function P1(n,e,t,r){let i=VE(e);i.push(t),n.firstCreatePass&&$E(n).push(r,i.length-1)}var ct={lFrame:q1(null),bindingsEnabled:!0,skipHydrationRootTNode:null},cp=function(n){return n[n.Off=0]="Off",n[n.Exhaustive=1]="Exhaustive",n[n.OnlyDirtyViews=2]="OnlyDirtyViews",n}(cp||{}),nq=0,aE=!1;function N1(){return ct.lFrame.elementDepthCount}function F1(){ct.lFrame.elementDepthCount++}function UE(){ct.lFrame.elementDepthCount--}function Tb(){return ct.bindingsEnabled}function zE(){return ct.skipHydrationRootTNode!==null}function HE(n){return ct.skipHydrationRootTNode===n}function qE(){ct.skipHydrationRootTNode=null}function Ve(){return ct.lFrame.lView}function on(){return ct.lFrame.tView}function tt(n){return ct.lFrame.contextLView=n,n[Rn]}function nt(n){return ct.lFrame.contextLView=null,n}function Un(){let n=GE();for(;n!==null&&n.type===64;)n=n.parent;return n}function GE(){return ct.lFrame.currentTNode}function L1(){let n=ct.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function td(n,e){let t=ct.lFrame;t.currentTNode=n,t.isParent=e}function WE(){return ct.lFrame.isParent}function KE(){ct.lFrame.isParent=!1}function j1(){return ct.lFrame.contextLView}function QE(n){dE("Must never be called in production mode"),nq=n}function YE(){return aE}function nd(n){let e=aE;return aE=n,e}function Ab(){let n=ct.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function B1(n){return ct.lFrame.bindingIndex=n}function ja(){return ct.lFrame.bindingIndex++}function ZE(n){let e=ct.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function V1(){return ct.lFrame.inI18n}function $1(n,e){let t=ct.lFrame;t.bindingIndex=t.bindingRootIndex=n,kb(e)}function U1(){return ct.lFrame.currentDirectiveIndex}function kb(n){ct.lFrame.currentDirectiveIndex=n}function z1(n){let e=ct.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function Rb(){return ct.lFrame.currentQueryIndex}function up(n){ct.lFrame.currentQueryIndex=n}function rq(n){let e=n[Oe];return e.type===2?e.declTNode:e.type===1?n[zr]:null}function XE(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=rq(o),i===null||(o=o[Zl],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=ct.lFrame=H1();return r.currentTNode=e,r.lView=n,!0}function Mb(n){let e=H1(),t=n[Oe];ct.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function H1(){let n=ct.lFrame,e=n===null?null:n.child;return e===null?q1(n):e}function q1(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function G1(){let n=ct.lFrame;return ct.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var JE=G1;function Ob(){let n=G1();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function W1(n){return(ct.lFrame.contextLView=M1(n,ct.lFrame.contextLView))[Rn]}function $s(){return ct.lFrame.selectedIndex}function Ba(n){ct.lFrame.selectedIndex=n}function dp(){let n=ct.lFrame;return ap(n.tView,n.selectedIndex)}function rd(){ct.lFrame.currentNamespace=PE}function K1(){return ct.lFrame.currentNamespace}var Q1=!0;function Pb(){return Q1}function fp(n){Q1=n}function lE(n,e=null,t=null,r){let i=eI(n,e,t,r);return i.resolveInjectorInitializers(),i}function eI(n,e=null,t=null,r,i=new Set){let o=[t||Tr,C1(n)];return r=r||(typeof n=="object"?void 0:Ns(n)),new Wl(o,e||Yu(),r||null,i)}var ke=class n{static THROW_IF_NOT_FOUND=Hl;static NULL=new ep;static create(e,t){if(Array.isArray(e))return lE({name:""},t,e,"");{let r=e.name??"";return lE({name:r},e.parent,e.providers,r)}}static \u0275prov=K({token:n,providedIn:"any",factory:()=>de(CE)});static __NG_ELEMENT_ID__=-1},Pe=new G(""),dr=(()=>{class n{static __NG_ELEMENT_ID__=iq;static __NG_ENV_ID__=t=>t}return n})(),tp=class extends dr{_lView;constructor(e){super(),this._lView=e}get destroyed(){return tc(this._lView)}onDestroy(e){let t=this._lView;return BE(t,e),()=>O1(t,e)}};function iq(){return new tp(Ve())}var cr=class{_console=console;handleError(e){this._console.error("ERROR",e)}},ri=new G("",{providedIn:"root",factory:()=>{let n=x(cn),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(cr),e.handleError(t))}}}),Y1={provide:Ls,useValue:()=>void x(cr),multi:!0};function Va(n){return typeof n=="function"&&n[Vn]!==void 0}function kt(n,e){let[t,r,i]=jC(n,e?.equal),o=t,s=o[Vn];return o.set=r,o.update=i,o.asReadonly=Nb.bind(o),o}function Nb(){let n=this[Vn];if(n.readonlyFn===void 0){let e=()=>this();e[Vn]=n,n.readonlyFn=e}return n.readonlyFn}function tI(n){return Va(n)&&typeof n.set=="function"}var Ni=class{},id=new G("",{providedIn:"root",factory:()=>!1});var nI=new G(""),rI=new G("");var nc=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=oq}return n})();function oq(){return new nc(Ve(),Un())}var qo=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Lt(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Be(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=K({token:n,providedIn:"root",factory:()=>new n})}return n})(),rc=(()=>{class n{internalPendingTasks=x(qo);scheduler=x(Ni);errorHandler=x(ri);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=K({token:n,providedIn:"root",factory:()=>new n})}return n})();function ic(...n){}var hp=(()=>{class n{static \u0275prov=K({token:n,providedIn:"root",factory:()=>new cE})}return n})(),cE=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function fd(n){return{toString:n}.toString()}var Fb="__parameters__";function dq(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function kN(n,e,t){return fd(()=>{let r=dq(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(l,c,u){let d=l.hasOwnProperty(Fb)?l[Fb]:Object.defineProperty(l,Fb,{value:[]})[Fb];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),l}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var xp=wE(kN("Optional"),8);var JI=wE(kN("SkipSelf"),4);function fq(n){return typeof n=="function"}var qb=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function RN(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var xn=(()=>{let n=()=>MN;return n.ngInherit=!0,n})();function MN(n){return n.type.prototype.ngOnChanges&&(n.setInput=pq),hq}function hq(){let n=PN(this),e=n?.current;if(e){let t=n.previous;if(t===Ma)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function pq(n,e,t,r,i){let o=this.declaredInputs[r],s=PN(n)||mq(n,{previous:Ma,current:null}),a=s.current||(s.current={}),l=s.previous,c=l[o];a[o]=new qb(c&&c.currentValue,t,l===Ma),RN(n,e,i,t)}var ON="__ngSimpleChanges__";function PN(n){return n[ON]||null}function mq(n,e){return n[ON]=e}var Z1=[];var Bt=function(n,e=null,t){for(let r=0;r<Z1.length;r++){let i=Z1[r];i(n,e,t)}};function gq(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=MN(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function NN(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),c&&((n.viewHooks??=[]).push(t,c),(n.viewCheckHooks??=[]).push(t,c)),u!=null&&(n.destroyHooks??=[]).push(t,u)}}function Vb(n,e,t){FN(n,e,3,t)}function $b(n,e,t,r){(n[Ue]&3)===t&&FN(n,e,t,r)}function iI(n,e){let t=n[Ue];(t&3)===e&&(t&=16383,t+=1,n[Ue]=t)}function FN(n,e,t,r){let i=r!==void 0?n[Xl]&65535:0,o=r??-1,s=e.length-1,a=0;for(let l=i;l<s;l++)if(typeof e[l+1]=="number"){if(a=e[l],r!=null&&a>=r)break}else e[l]<0&&(n[Xl]+=65536),(a<o||o==-1)&&(_q(n,t,e,l),n[Xl]=(n[Xl]&4294901760)+l+2),l++}function X1(n,e){Bt(4,n,e);let t=je(null);try{e.call(n)}finally{je(t),Bt(5,n,e)}}function _q(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[Ue]>>14<n[Xl]>>16&&(n[Ue]&3)===e&&(n[Ue]+=16384,X1(a,o)):X1(a,o)}var sd=-1,ac=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function bq(n){return(n.flags&8)!==0}function vq(n){return(n.flags&16)!==0}function yq(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];wq(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function LN(n){return n===3||n===4||n===6}function wq(n){return n.charCodeAt(0)===64}function ad(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?J1(n,t,i,null,e[++r]):J1(n,t,i,null,null))}}return n}function J1(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function jN(n){return n!==sd}function Gb(n){return n&32767}function xq(n){return n>>16}function Wb(n,e){let t=xq(n),r=e;for(;t>0;)r=r[Zl],t--;return r}var mI=!0;function Kb(n){let e=mI;return mI=n,e}var Cq=256,BN=Cq-1,VN=5,Eq=0,Go={};function Iq(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Kl)&&(r=t[Kl]),r==null&&(r=t[Kl]=Eq++);let i=r&BN,o=1<<i;e.data[n+(i>>VN)]|=o}function Qb(n,e){let t=$N(n,e);if(t!==-1)return t;let r=e[Oe];r.firstCreatePass&&(n.injectorIndex=e.length,oI(r.data,n),oI(e,null),oI(r.blueprint,null));let i=eS(n,e),o=n.injectorIndex;if(jN(i)){let s=Gb(i),a=Wb(i,e),l=a[Oe].data;for(let c=0;c<8;c++)e[o+c]=a[s+c]|l[s+c]}return e[o+8]=i,o}function oI(n,e){n.push(0,0,0,0,0,0,0,0,e)}function $N(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function eS(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=GN(i),r===null)return sd;if(t++,i=i[Zl],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return sd}function gI(n,e,t){Iq(n,e,t)}function Sq(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(LN(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function UN(n,e,t){if(t&8||n!==void 0)return n;yb(e,"NodeInjector")}function zN(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[Yl],o=Ur(void 0);try{return i?i.get(e,r,t&8):yE(e,r,t&8)}finally{Ur(o)}}return UN(r,e,t)}function HN(n,e,t,r=0,i){if(n!==null){if(e[Ue]&2048&&!(r&2)){let s=kq(n,e,t,r,Go);if(s!==Go)return s}let o=qN(n,e,t,r,Go);if(o!==Go)return o}return zN(e,t,r,i)}function qN(n,e,t,r,i){let o=Tq(t);if(typeof o=="function"){if(!XE(e,n,r))return r&1?UN(i,t,r):zN(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))yb(t);else return s}finally{JE()}}else if(typeof o=="number"){let s=null,a=$N(n,e),l=sd,c=r&1?e[Hr][zr]:null;for((a===-1||r&4)&&(l=a===-1?eS(n,e):e[a+8],l===sd||!tN(r,!1)?a=-1:(s=e[Oe],a=Gb(l),e=Wb(l,e)));a!==-1;){let u=e[Oe];if(eN(o,a,u.data)){let d=Dq(a,e,t,s,r,c);if(d!==Go)return d}l=e[a+8],l!==sd&&tN(r,e[Oe].data[a+8]===c)&&eN(o,a,e)?(s=u,a=Gb(l),e=Wb(l,e)):a=-1}}return i}function Dq(n,e,t,r,i,o){let s=e[Oe],a=s.data[n+8],l=r==null?Fa(a)&&mI:r!=s&&(a.type&3)!==0,c=i&1&&o===a,u=Ub(a,s,t,l,c);return u!==null?gp(e,s,u,a,i):Go}function Ub(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,l=n.directiveStart,c=n.directiveEnd,u=o>>20,d=r?a:a+u,h=i?a+u:c;for(let f=d;f<h;f++){let p=s[f];if(f<l&&t===p||f>=l&&p.type===t)return f}if(i){let f=s[l];if(f&&Ho(f)&&f.type===t)return l}return null}function gp(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof ac){let a=o;if(a.resolving){let f=pb(s[t]);throw vE(f)}let l=Kb(a.canSeeViewProviders);a.resolving=!0;let c=s[t].type||s[t],u,d=a.injectImpl?Ur(a.injectImpl):null,h=XE(n,r,0);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&gq(t,s[t],e)}finally{d!==null&&Ur(d),Kb(l),a.resolving=!1,JE()}}return o}function Tq(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Kl)?n[Kl]:void 0;return typeof e=="number"?e>=0?e&BN:Aq:e}function eN(n,e,t){let r=1<<n;return!!(t[e+(n>>VN)]&r)}function tN(n,e){return!(n&2)&&!(n&1&&e)}var sc=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return HN(this._tNode,this._lView,e,ql(r),t)}};function Aq(){return new sc(Un(),Ve())}function Vt(n){return fd(()=>{let e=n.prototype.constructor,t=e[Jh]||_I(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Jh]||_I(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function _I(n){return uE(n)?()=>{let e=_I(vr(n));return e&&e()}:ka(n)}function kq(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[Ue]&2048&&!ed(s);){let a=qN(o,s,t,r|2,Go);if(a!==Go)return a;let l=o.parent;if(!l){let c=s[RE];if(c){let u=c.get(t,Go,r);if(u!==Go)return u}l=GN(s),s=s[Zl]}o=l}return i}function GN(n){let e=n[Oe],t=e.type;return t===2?e.declTNode:t===1?n[zr]:null}function tS(n){return Sq(Un(),n)}function Rq(){return hd(Un(),Ve())}function hd(n,e){return new De(ro(n,e))}var De=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=Rq}return n})();function WN(n){return n instanceof De?n.nativeElement:n}function Mq(){return this._results[Symbol.iterator]()}var Bi=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new re}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=v1(e);(this._changesDetected=!b1(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=Mq};function KN(n){return(n.flags&128)===128}var nS=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(nS||{}),QN=new Map,Oq=0;function Pq(){return Oq++}function Nq(n){QN.set(n[op],n)}function bI(n){QN.delete(n[op])}var nN="__ngContext__";function ld(n,e){zo(e)?(n[nN]=e[op],Nq(e)):n[nN]=e}function YN(n){return XN(n[Xu])}function ZN(n){return XN(n[Fi])}function XN(n){for(;n!==null&&!no(n);)n=n[Fi];return n}var vI;function rS(n){vI=n}function JN(){if(vI!==void 0)return vI;if(typeof document<"u")return document;throw new se(210,!1)}var pd=new G("",{providedIn:"root",factory:()=>Fq}),Fq="ng",uv=new G(""),Qo=new G("",{providedIn:"platform",factory:()=>"unknown"});var Cp=new G(""),md=new G("",{providedIn:"root",factory:()=>JN().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Lq="h",jq="b";var eF="r";var tF="di";var nF=!1,rF=new G("",{providedIn:"root",factory:()=>nF});var Bq=(n,e,t,r)=>{};function Vq(n,e,t,r){Bq(n,e,t,r)}function dv(n){return(n.flags&32)===32}var $q=()=>null;function iF(n,e,t=!1){return $q(n,e,t)}function oF(n,e){let t=n.contentQueries;if(t!==null){let r=je(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];up(o),a.contentQueries(2,e[s],s)}}}finally{je(r)}}}function yI(n,e,t){up(0);let r=je(null);try{e(n,t)}finally{je(r)}}function iS(n,e,t){if(OE(e)){let r=je(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let l=t[s];a.contentQueries(1,l,s)}}}finally{je(r)}}}var Us=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Us||{}),Lb;function Uq(){if(Lb===void 0&&(Lb=null,$o.trustedTypes))try{Lb=$o.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Lb}function fv(n){return Uq()?.createHTML(n)||n}var zs=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${gb})`}},wI=class extends zs{getTypeName(){return"HTML"}},xI=class extends zs{getTypeName(){return"Style"}},CI=class extends zs{getTypeName(){return"Script"}},EI=class extends zs{getTypeName(){return"URL"}},II=class extends zs{getTypeName(){return"ResourceURL"}};function Hs(n){return n instanceof zs?n.changingThisBreaksApplicationSecurity:n}function uc(n,e){let t=sF(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${gb})`)}return t===e}function sF(n){return n instanceof zs&&n.getTypeName()||null}function oS(n){return new wI(n)}function sS(n){return new xI(n)}function aS(n){return new CI(n)}function lS(n){return new EI(n)}function cS(n){return new II(n)}function zq(n){let e=new DI(n);return Hq()?new SI(e):e}var SI=class{inertDocumentHelper;constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(fv(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}},DI=class{defaultDoc;inertDocument;constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=fv(e),t}};function Hq(){try{return!!new window.DOMParser().parseFromString(fv(""),"text/html")}catch{return!1}}var qq=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function hv(n){return n=String(n),n.match(qq)?n:"unsafe:"+n}function qs(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function Ep(...n){let e={};for(let t of n)for(let r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}var aF=qs("area,br,col,hr,img,wbr"),lF=qs("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),cF=qs("rp,rt"),Gq=Ep(cF,lF),Wq=Ep(lF,qs("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Kq=Ep(cF,qs("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),rN=Ep(aF,Wq,Kq,Gq),uF=qs("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Qq=qs("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Yq=qs("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),Zq=Ep(uF,Qq,Yq),Xq=qs("script,style,template"),TI=class{sanitizedSomething=!1;buf=[];sanitizeChildren(e){let t=e.firstChild,r=!0,i=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild){i.push(t),t=t6(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let o=e6(t);if(o){t=o;break}t=i.pop()}}return this.buf.join("")}startElement(e){let t=iN(e).toLowerCase();if(!rN.hasOwnProperty(t))return this.sanitizedSomething=!0,!Xq.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let r=e.attributes;for(let i=0;i<r.length;i++){let o=r.item(i),s=o.name,a=s.toLowerCase();if(!Zq.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=o.value;uF[a]&&(l=hv(l)),this.buf.push(" ",s,'="',oN(l),'"')}return this.buf.push(">"),!0}endElement(e){let t=iN(e).toLowerCase();rN.hasOwnProperty(t)&&!aF.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(oN(e))}};function Jq(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function e6(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw dF(e);return e}function t6(n){let e=n.firstChild;if(e&&Jq(n,e))throw dF(e);return e}function iN(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function dF(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var n6=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,r6=/([^\#-~ |!])/g;function oN(n){return n.replace(/&/g,"&amp;").replace(n6,function(e){let t=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((t-55296)*1024+(r-56320)+65536)+";"}).replace(r6,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var jb;function uS(n,e){let t=null;try{jb=jb||zq(n);let r=e?String(e):"";t=jb.getInertBodyElement(r);let i=5,o=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=t.innerHTML,t=jb.getInertBodyElement(r)}while(r!==o);let a=new TI().sanitizeChildren(sN(t)||t);return fv(a)}finally{if(t){let r=sN(t)||t;for(;r.firstChild;)r.firstChild.remove()}}}function sN(n){return"content"in n&&i6(n)?n.content:null}function i6(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var wr=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(wr||{});var o6=/^>|^->|<!--|-->|--!>|<!-$/g,s6=/(<|>)/g,a6="\u200B$1\u200B";function l6(n){return n.replace(o6,e=>e.replace(s6,a6))}function fF(n){return n instanceof Function?n():n}function c6(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var hF="ng-template";function u6(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&c6(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(dS(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function dS(n){return n.type===4&&n.value!==hF}function d6(n,e,t){let r=n.type===4&&!t?hF:n.value;return e===r}function f6(n,e,t){let r=4,i=n.attrs,o=i!==null?m6(i):0,s=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!s&&!io(r)&&!io(l))return!1;if(s&&io(l))continue;s=!1,r=l|r&1;continue}if(!s)if(r&4){if(r=2|r&1,l!==""&&!d6(n,l,t)||l===""&&e.length===1){if(io(r))return!1;s=!0}}else if(r&8){if(i===null||!u6(n,i,l,t)){if(io(r))return!1;s=!0}}else{let c=e[++a],u=h6(l,i,dS(n),t);if(u===-1){if(io(r))return!1;s=!0;continue}if(c!==""){let d;if(u>o?d="":d=i[u+1].toLowerCase(),r&2&&c!==d){if(io(r))return!1;s=!0}}}}return io(r)||s}function io(n){return(n&1)===0}function h6(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return g6(e,n)}function pF(n,e,t=!1){for(let r=0;r<e.length;r++)if(f6(n,e[r],t))return!0;return!1}function p6(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if((t&1)===0)return e[t+1]}return null}function m6(n){for(let e=0;e<n.length;e++){let t=n[e];if(LN(t))return e}return n.length}function g6(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function _6(n,e){e:for(let t=0;t<e.length;t++){let r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function aN(n,e){return n?":not("+e.trim()+")":e}function b6(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!io(s)&&(e+=aN(o,i),i=""),r=s,o=o||!io(r);t++}return i!==""&&(e+=aN(o,i)),e}function v6(n){return n.map(b6).join(",")}function y6(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!io(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var $i={};function w6(n,e){return n.createText(e)}function x6(n,e,t){n.setValue(e,t)}function C6(n,e){return n.createComment(l6(e))}function mF(n,e,t){return n.createElement(e,t)}function Yb(n,e,t,r,i){n.insertBefore(e,t,r,i)}function gF(n,e,t){n.appendChild(e,t)}function lN(n,e,t,r,i){r!==null?Yb(n,e,t,r,i):gF(n,e,t)}function _F(n,e,t){n.removeChild(null,e,t)}function E6(n,e,t){n.setAttribute(e,"style",t)}function I6(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function bF(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&yq(n,e,r),i!==null&&I6(n,e,i),o!==null&&E6(n,e,o)}function fS(n,e,t,r,i,o,s,a,l,c,u){let d=un+r,h=d+i,f=S6(d,h),p=typeof c=="function"?c():c;return f[Oe]={type:n,blueprint:f,template:t,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1,ssrId:u}}function S6(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:$i);return t}function D6(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=fS(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function hS(n,e,t,r,i,o,s,a,l,c,u){let d=e.blueprint.slice();return d[to]=i,d[Ue]=r|4|128|8|64|1024,(c!==null||n&&n[Ue]&2048)&&(d[Ue]|=2048),LE(d),d[Jn]=d[Zl]=n,d[Rn]=t,d[Bs]=s||n&&n[Bs],d[Wt]=a||n&&n[Wt],d[Yl]=l||n&&n[Yl]||null,d[zr]=o,d[op]=Pq(),d[Ql]=u,d[RE]=c,d[Hr]=e.type==2?n[Hr]:d,d}function T6(n,e,t){let r=ro(e,n),i=D6(t),o=n[Bs].rendererFactory,s=pS(n,hS(n,i,null,vF(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function vF(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function yF(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function pS(n,e){return n[Xu]?n[kE][Fi]=e:n[Xu]=e,n[kE]=e,e}function B(n=1){wF(on(),Ve(),$s()+n,!1)}function wF(n,e,t,r){if(!r)if((e[Ue]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Vb(e,o,t)}else{let o=n.preOrderHooks;o!==null&&$b(e,o,0,t)}Ba(t)}var pv=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(pv||{});function AI(n,e,t,r){let i=je(null);try{let[o,s,a]=n.inputs[t],l=null;(s&pv.SignalBased)!==0&&(l=e[o][Vn]),l!==null&&l.transformFn!==void 0?r=l.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,l,r,t,o):RN(e,l,o,r)}finally{je(i)}}var Wo=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Wo||{}),A6;function mS(n,e){return A6(n,e)}function od(n,e,t,r,i){if(r!=null){let o,s=!1;no(r)?o=r:zo(r)&&(s=!0,r=r[to]);let a=Li(r);n===0&&t!==null?i==null?gF(e,t,a):Yb(e,t,a,i||null,!0):n===1&&t!==null?Yb(e,t,a,i||null,!0):n===2?_F(e,a,s):n===3&&e.destroyNode(a),o!=null&&B6(e,n,o,t,i)}}function k6(n,e){xF(n,e),e[to]=null,e[zr]=null}function R6(n,e,t,r,i,o){r[to]=i,r[zr]=e,gv(n,r,t,1,i,o)}function xF(n,e){e[Bs].changeDetectionScheduler?.notify(9),gv(n,e,e[Wt],2,null,null)}function M6(n){let e=n[Xu];if(!e)return sI(n[Oe],n);for(;e;){let t=null;if(zo(e))t=e[Xu];else{let r=e[ur];r&&(t=r)}if(!t){for(;e&&!e[Fi]&&e!==n;)zo(e)&&sI(e[Oe],e),e=e[Jn];e===null&&(e=n),zo(e)&&sI(e[Oe],e),t=e&&e[Fi]}e=t}}function gS(n,e){let t=n[ec],r=t.indexOf(e);t.splice(r,1)}function mv(n,e){if(tc(e))return;let t=e[Wt];t.destroyNode&&gv(n,e,t,3,null,null),M6(e)}function sI(n,e){if(tc(e))return;let t=je(null);try{e[Ue]&=-129,e[Ue]|=256,e[vi]&&Mu(e[vi]),P6(n,e),O6(n,e),e[Oe].type===1&&e[Wt].destroy();let r=e[Pa];if(r!==null&&no(e[Jn])){r!==e[Jn]&&gS(r,e);let i=e[Uo];i!==null&&i.detachView(n)}bI(e)}finally{je(t)}}function O6(n,e){let t=n.cleanup,r=e[Zu];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[Zu]=null);let i=e[Ps];if(i!==null){e[Ps]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Vs];if(o!==null){e[Vs]=null;for(let s of o)s.destroy()}}function P6(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof ac)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],l=o[s+1];Bt(4,a,l);try{l.call(a)}finally{Bt(5,a,l)}}else{Bt(4,i,o);try{o.call(i)}finally{Bt(5,i,o)}}}}}function CF(n,e,t){return N6(n,e.parent,t)}function N6(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[to];if(Fa(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Us.None||i===Us.Emulated)return null}return ro(r,t)}function EF(n,e,t){return L6(n,e,t)}function F6(n,e,t){return n.type&40?ro(n,t):null}var L6=F6,cN;function _S(n,e,t,r){let i=CF(n,r,e),o=e[Wt],s=r.parent||e[zr],a=EF(s,r,e);if(i!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)lN(o,i,t[l],a,!1);else lN(o,i,t,a,!1);cN!==void 0&&cN(o,r,e,t,i)}function pp(n,e){if(e!==null){let t=e.type;if(t&3)return ro(e,n);if(t&4)return kI(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return pp(n,r);{let i=n[e.index];return no(i)?kI(-1,i):Li(i)}}else{if(t&128)return pp(n,e.next);if(t&32)return mS(e,n)()||Li(n[e.index]);{let r=IF(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Ra(n[Hr]);return pp(i,r)}else return pp(n,e.next)}}}return null}function IF(n,e){if(e!==null){let r=n[Hr][zr],i=e.projection;return r.projection[i]}return null}function kI(n,e){let t=ur+n+1;if(t<e.length){let r=e[t],i=r[Oe].firstChild;if(i!==null)return pp(r,i)}return e[Na]}function bS(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],l=t.type;if(s&&e===0&&(a&&ld(Li(a),r),t.flags|=2),!dv(t))if(l&8)bS(n,e,t.child,r,i,o,!1),od(e,n,i,a,o);else if(l&32){let c=mS(t,r),u;for(;u=c();)od(e,n,i,u,o);od(e,n,i,a,o)}else l&16?SF(n,e,r,t,i,o):od(e,n,i,a,o);t=s?t.projectionNext:t.next}}function gv(n,e,t,r,i,o){bS(t,r,n.firstChild,e,i,o,!1)}function j6(n,e,t){let r=e[Wt],i=CF(n,t,e),o=t.parent||e[zr],s=EF(o,t,e);SF(r,0,e,t,i,s)}function SF(n,e,t,r,i,o){let s=t[Hr],l=s[zr].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];od(e,n,i,u,o)}else{let c=l,u=s[Jn];KN(r)&&(c.flags|=128),bS(n,e,c,u,i,o,!0)}}function B6(n,e,t,r,i){let o=t[Na],s=Li(t);o!==s&&od(e,n,r,o,i);for(let a=ur;a<t.length;a++){let l=t[a];gv(l[Oe],l,n,e,r,o)}}function V6(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Wo.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Wo.Important),n.setStyle(t,r,i,o))}}function DF(n,e,t,r,i){let o=$s(),s=r&2;try{Ba(-1),s&&e.length>un&&wF(n,e,un,!1),Bt(s?2:0,i,t),t(r,i)}finally{Ba(o),Bt(s?3:1,i,t)}}function _v(n,e,t){G6(n,e,t),(t.flags&64)===64&&W6(n,e,t)}function Ip(n,e,t=ro){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function $6(n,e,t,r){let o=r.get(rF,nF)||t===Us.ShadowDom,s=n.selectRootElement(e,o);return U6(s),s}function U6(n){z6(n)}var z6=()=>null;function H6(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function TF(n,e,t,r,i,o){let s=e[Oe];if(xS(n,s,e,t,r)){Fa(n)&&q6(e,n.index);return}n.type&3&&(t=H6(t)),AF(n,e,t,r,i,o)}function AF(n,e,t,r,i,o){if(n.type&3){let s=ro(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function q6(n,e){let t=ji(e,n);t[Ue]&16||(t[Ue]|=64)}function G6(n,e,t){let r=t.directiveStart,i=t.directiveEnd;Fa(t)&&T6(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Qb(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],l=gp(e,n,s,t);if(ld(l,e),o!==null&&Z6(e,s-r,l,a,t,o),Ho(a)){let c=ji(t.index,e);c[Rn]=gp(e,n,s,t)}}}function W6(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=U1();try{Ba(o);for(let a=r;a<i;a++){let l=n.data[a],c=e[a];kb(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&K6(l,c)}}finally{Ba(-1),kb(s)}}function K6(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function vS(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];pF(e,o.selectors,!1)&&(r??=[],Ho(o)?r.unshift(o):r.push(o))}return r}function Q6(n,e,t,r,i,o){let s=ro(n,e);Y6(e[Wt],s,o,n.value,t,r,i)}function Y6(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?vb(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function Z6(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let l=s[a],c=s[a+1];AI(r,t,l,c)}}function yS(n,e,t,r,i){let o=un+t,s=e[Oe],a=i(s,e,n,r,t);e[o]=a,td(n,!0);let l=n.type===2;return l?(bF(e[Wt],a,n),(N1()===0||Ju(n))&&ld(a,e),F1()):ld(a,e),Pb()&&(!l||!dv(n))&&_S(s,e,a,n),n}function wS(n){let e=n;return WE()?KE():(e=e.parent,td(e,!1)),e}function X6(n,e){let t=n[Yl];if(!t)return;t.get(ri,null)?.(e)}function xS(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let l=0;l<s.length;l+=2){let c=s[l],u=s[l+1],d=e.data[c];AI(d,t[c],u,i),a=!0}if(o)for(let l of o){let c=t[l],u=e.data[l];AI(u,c,r,i),a=!0}return a}function J6(n,e){let t=ji(e,n),r=t[Oe];e9(r,t);let i=t[to];i!==null&&t[Ql]===null&&(t[Ql]=iF(i,t[Yl])),Bt(18),CS(r,t,t[Rn]),Bt(19,t[Rn])}function e9(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function CS(n,e,t){Mb(e);try{let r=n.viewQuery;r!==null&&yI(1,r,t);let i=n.template;i!==null&&DF(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Uo]?.finishViewCreation(n),n.staticContentQueries&&oF(n,e),n.staticViewQueries&&yI(2,n.viewQuery,t);let o=n.components;o!==null&&t9(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Ue]&=-5,Ob()}}function t9(n,e){for(let t=0;t<e.length;t++)J6(n,e[t])}function Sp(n,e,t,r){let i=je(null);try{let o=e.tView,a=n[Ue]&4096?4096:16,l=hS(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),c=n[e.index];l[Pa]=c;let u=n[Uo];return u!==null&&(l[Uo]=u.createEmbeddedView(o)),CS(o,l,t),l}finally{je(i)}}function cd(n,e){return!e||e.firstChild===null||KN(n)}var uN=!1,n9=new G("");function _p(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Li(o)),no(o)&&kF(o,r);let s=t.type;if(s&8)_p(n,e,t.child,r);else if(s&32){let a=mS(t,e),l;for(;l=a();)r.push(l)}else if(s&16){let a=IF(e,t);if(Array.isArray(a))r.push(...a);else{let l=Ra(e[Hr]);_p(l[Oe],l,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function kF(n,e){for(let t=ur;t<n.length;t++){let r=n[t],i=r[Oe].firstChild;i!==null&&_p(r[Oe],r,i,e)}n[Na]!==n[to]&&e.push(n[Na])}function RF(n){if(n[Jl]!==null){for(let e of n[Jl])e.impl.addSequence(e);n[Jl].length=0}}var MF=[];function r9(n){return n[vi]??i9(n)}function i9(n){let e=MF.pop()??Object.create(s9);return e.lView=n,e}function o9(n){n.lView[vi]!==n&&(n.lView=null,MF.push(n))}var s9=w(m({},Ca),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{La(n.lView)},consumerOnSignalRead(){this.lView[vi]=this}});function a9(n){let e=n[vi]??Object.create(l9);return e.lView=n,e}var l9=w(m({},Ca),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Ra(n.lView);for(;e&&!OF(e[Oe]);)e=Ra(e);e&&jE(e)},consumerOnSignalRead(){this.lView[vi]=this}});function OF(n){return n.type!==2}function PF(n){if(n[Vs]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Vs])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[Ue]&8192)}}var c9=100;function ES(n,e=0){let r=n[Bs].rendererFactory,i=!1;i||r.begin?.();try{u9(n,e)}finally{i||r.end?.()}}function u9(n,e){let t=YE();try{nd(!0),RI(n,e);let r=0;for(;lp(n);){if(r===c9)throw new se(103,!1);r++,RI(n,1)}}finally{nd(t)}}function NF(n,e){QE(e?cp.Exhaustive:cp.OnlyDirtyViews);try{ES(n)}finally{QE(cp.Off)}}function d9(n,e,t,r){if(tc(e))return;let i=e[Ue],o=!1,s=!1;Mb(e);let a=!0,l=null,c=null;o||(OF(n)?(c=r9(e),l=As(c)):O_()===null?(a=!1,c=a9(e),l=As(c)):e[vi]&&(Mu(e[vi]),e[vi]=null));try{LE(e),B1(n.bindingStartIndex),t!==null&&DF(n,e,t,2,r);let u=(i&3)===3;if(!o)if(u){let f=n.preOrderCheckHooks;f!==null&&Vb(e,f,null)}else{let f=n.preOrderHooks;f!==null&&$b(e,f,0,null),iI(e,0)}if(s||f9(e),PF(e),FF(e,0),n.contentQueries!==null&&oF(n,e),!o)if(u){let f=n.contentCheckHooks;f!==null&&Vb(e,f)}else{let f=n.contentHooks;f!==null&&$b(e,f,1),iI(e,1)}p9(n,e);let d=n.components;d!==null&&jF(e,d,0);let h=n.viewQuery;if(h!==null&&yI(2,h,r),!o)if(u){let f=n.viewCheckHooks;f!==null&&Vb(e,f)}else{let f=n.viewHooks;f!==null&&$b(e,f,2),iI(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Eb]){for(let f of e[Eb])f();e[Eb]=null}o||(RF(e),e[Ue]&=-73)}catch(u){throw o||La(e),u}finally{c!==null&&(Ia(c,l),a&&o9(c)),Ob()}}function FF(n,e){for(let t=YN(n);t!==null;t=ZN(t))for(let r=ur;r<t.length;r++){let i=t[r];LF(i,e)}}function f9(n){for(let e=YN(n);e!==null;e=ZN(e)){if(!(e[Ue]&2))continue;let t=e[ec];for(let r=0;r<t.length;r++){let i=t[r];jE(i)}}}function h9(n,e,t){Bt(18);let r=ji(e,n);LF(r,t),Bt(19,r[Rn])}function LF(n,e){Sb(n)&&RI(n,e)}function RI(n,e){let r=n[Oe],i=n[Ue],o=n[vi],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&jl(o)),s||=!1,o&&(o.dirty=!1),n[Ue]&=-9217,s)d9(r,n,r.template,n[Rn]);else if(i&8192){let a=je(null);try{PF(n),FF(n,1);let l=r.components;l!==null&&jF(n,l,1),RF(n)}finally{je(a)}}}function jF(n,e,t){for(let r=0;r<e.length;r++)h9(n,e[r],t)}function p9(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Ba(~i);else{let o=i,s=t[++r],a=t[++r];$1(s,o);let l=e[o];Bt(24,l),a(2,l),Bt(25,l)}}}finally{Ba(-1)}}function IS(n,e){let t=YE()?64:1088;for(n[Bs].changeDetectionScheduler?.notify(e);n;){n[Ue]|=t;let r=Ra(n);if(ed(n)&&!r)return n;n=r}return null}function BF(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function VF(n,e){let t=ur+e;if(t<n.length)return n[t]}function Dp(n,e,t,r=!0){let i=e[Oe];if(m9(i,e,n,t),r){let s=kI(t,n),a=e[Wt],l=a.parentNode(n[Na]);l!==null&&R6(i,n[zr],a,e,l,s)}let o=e[Ql];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function $F(n,e){let t=bp(n,e);return t!==void 0&&mv(t[Oe],t),t}function bp(n,e){if(n.length<=ur)return;let t=ur+e,r=n[t];if(r){let i=r[Pa];i!==null&&i!==n&&gS(i,r),e>0&&(n[t-1][Fi]=r[Fi]);let o=rp(n,ur+e);k6(r[Oe],r);let s=o[Uo];s!==null&&s.detachView(o[Oe]),r[Jn]=null,r[Fi]=null,r[Ue]&=-129}return r}function m9(n,e,t,r){let i=ur+r,o=t.length;r>0&&(t[i-1][Fi]=e),r<o-ur?(e[Fi]=t[i],xE(t,ur+r,e)):(t.push(e),e[Fi]=null),e[Jn]=t;let s=e[Pa];s!==null&&t!==s&&UF(s,e);let a=e[Uo];a!==null&&a.insertView(n),Db(e),e[Ue]|=128}function UF(n,e){let t=n[ec],r=e[Jn];if(zo(r))n[Ue]|=2;else{let i=r[Jn][Hr];e[Hr]!==i&&(n[Ue]|=2)}t===null?n[ec]=[e]:t.push(e)}var $a=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[Oe];return _p(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Rn]}set context(e){this._lView[Rn]=e}get destroyed(){return tc(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Jn];if(no(e)){let t=e[sp],r=t?t.indexOf(this):-1;r>-1&&(bp(e,r),rp(t,r))}this._attachedToViewContainer=!1}mv(this._lView[Oe],this._lView)}onDestroy(e){BE(this._lView,e)}markForCheck(){IS(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Ue]&=-129}reattach(){Db(this._lView),this._lView[Ue]|=128}detectChanges(){this._lView[Ue]|=1024,ES(this._lView)}checkNoChanges(){return;try{this.exhaustive??=this._lView[Yl].get(n9,uN)}catch{this.exhaustive=uN}}attachToViewContainerRef(){if(this._appRef)throw new se(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ed(this._lView),t=this._lView[Pa];t!==null&&!e&&gS(t,this._lView),xF(this._lView[Oe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new se(902,!1);this._appRef=e;let t=ed(this._lView),r=this._lView[Pa];r!==null&&!t&&UF(r,this._lView),Db(this._lView)}};var Ar=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=g9;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=Sp(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new $a(o)}}return n})();function g9(){return bv(Un(),Ve())}function bv(n,e){return n.type&4?new Ar(e,n,hd(n,e)):null}function gd(n,e,t,r,i){let o=n.data[e];if(o===null)o=_9(n,e,t,r,i),V1()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=L1();o.injectorIndex=s===null?-1:s.injectorIndex}return td(o,!0),o}function _9(n,e,t,r,i){let o=GE(),s=WE(),a=s?o:o&&o.parent,l=n.data[e]=v9(n,a,t,e,r,i);return b9(n,l,o,s),l}function b9(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function v9(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return zE()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var $me=new RegExp(`^(\\d+)*(${jq}|${Lq})*(.*)`);function y9(n){let e=n[ME]??[],r=n[Jn][Wt],i=[];for(let o of e)o.data[tF]!==void 0?i.push(o):w9(o,r);n[ME]=i}function w9(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[eF];for(;t<i;){let o=r.nextSibling;_F(e,r,!1),r=o,t++}}}var x9=()=>null,C9=()=>null;function Zb(n,e){return x9(n,e)}function zF(n,e,t){return C9(n,e,t)}var HF=class{},vv=class{},MI=class{resolveComponentFactory(e){throw new se(917,!1)}},Tp=class{static NULL=new MI},zn=class{},tn=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>E9()}return n})();function E9(){let n=Ve(),e=Un(),t=ji(e.index,n);return(zo(t)?t:n)[Wt]}var qF=(()=>{class n{static \u0275prov=K({token:n,providedIn:"root",factory:()=>null})}return n})();var zb={},OI=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,zb,r);return i!==zb||t===zb?i:this.parentInjector.get(e,t,r)}};function Xb(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=_b(i,a);else if(o==2){let l=a,c=e[++s];r=_b(r,l+": "+c+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function ce(n,e=0){let t=Ve();if(t===null)return de(n,e);let r=Un();return HN(r,t,vr(n),e)}function SS(){let n="invalid";throw new Error(n)}function GF(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,l=null,c=null;for(let u of s)if(u.resolveHostDirectives!==null){[a,l,c]=u.resolveHostDirectives(s);break}D9(n,e,t,a,o,l,c)}o!==null&&r!==null&&I9(t,r,o)}function I9(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new se(-301,!1);r.push(e[i],o)}}function S9(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function D9(n,e,t,r,i,o,s){let a=r.length,l=!1;for(let h=0;h<a;h++){let f=r[h];!l&&Ho(f)&&(l=!0,S9(n,t,h)),gI(Qb(t,e),n,f.type)}O9(t,n.data.length,a);for(let h=0;h<a;h++){let f=r[h];f.providersResolver&&f.providersResolver(f)}let c=!1,u=!1,d=yF(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let h=0;h<a;h++){let f=r[h];if(t.mergedAttrs=ad(t.mergedAttrs,f.hostAttrs),A9(n,t,e,d,f),M9(d,f,i),s!==null&&s.has(f)){let[g,_]=s.get(f);t.directiveToIndex.set(f.type,[d,g+t.directiveStart,_+t.directiveStart])}else(o===null||!o.has(f))&&t.directiveToIndex.set(f.type,d);f.contentQueries!==null&&(t.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(t.flags|=64);let p=f.type.prototype;!c&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),c=!0),!u&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),u=!0),d++}T9(n,t,o)}function T9(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))dN(0,e,i,r),dN(1,e,i,r),hN(e,r,!1);else{let o=t.get(i);fN(0,e,o,r),fN(1,e,o,r),hN(e,r,!0)}}}function dN(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),WF(e,o)}}function fN(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),WF(e,s)}}function WF(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function hN(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||dS(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let l=r[a];if(l===0){a+=4;continue}else if(l===5){a+=2;continue}else if(typeof l=="number")break;if(!t&&i.hasOwnProperty(l)){let c=i[l];for(let u of c)if(u===e){s??=[],s.push(l,r[a+1]);break}}else if(t&&o.hasOwnProperty(l)){let c=o[l];for(let u=0;u<c.length;u+=2)if(c[u]===e){s??=[],s.push(c[u+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function A9(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=ka(i.type,!0)),s=new ac(o,Ho(i),ce,null);n.blueprint[r]=s,t[r]=s,k9(n,e,r,yF(n,t,i.hostVars,$i),i)}function k9(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;R9(s)!=a&&s.push(a),s.push(t,r,o)}}function R9(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function M9(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Ho(e)&&(t[""]=n)}}function O9(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function DS(n,e,t,r,i,o,s,a){let l=e[Oe],c=l.consts,u=yi(c,s),d=gd(l,n,t,r,u);return o&&GF(l,e,d,yi(c,a),i),d.mergedAttrs=ad(d.mergedAttrs,d.attrs),d.attrs!==null&&Xb(d,d.attrs,!1),d.mergedAttrs!==null&&Xb(d,d.mergedAttrs,!0),l.queries!==null&&l.queries.elementStart(l,d),d}function TS(n,e){NN(n,e),OE(e)&&n.queries.elementEnd(e)}function P9(n,e,t,r,i,o){let s=e.consts,a=yi(s,i),l=gd(e,n,t,r,a);if(l.mergedAttrs=ad(l.mergedAttrs,l.attrs),o!=null){let c=yi(s,o);l.localNames=[];for(let u=0;u<c.length;u+=2)l.localNames.push(c[u],-1)}return l.attrs!==null&&Xb(l,l.attrs,!1),l.mergedAttrs!==null&&Xb(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function AS(n){return QF(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function KF(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function QF(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function YF(n,e,t){return n[e]=t}function Vi(n,e,t){if(t===$i)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function N9(n,e,t,r){let i=Vi(n,e,t);return Vi(n,e+1,r)||i}function Hb(n,e,t){return function r(i){let o=Fa(n)?ji(n.index,e):e;IS(o,5);let s=e[Rn],a=pN(e,s,t,i),l=r.__ngNextListenerFn__;for(;l;)a=pN(e,s,l,i)&&a,l=l.__ngNextListenerFn__;return a}}function pN(n,e,t,r){let i=je(null);try{return Bt(6,e,t),t(r)!==!1}catch(o){return X6(n,o),!1}finally{Bt(7,e,t),je(i)}}function ZF(n,e,t,r,i,o,s,a){let l=Ju(n),c=!1,u=null;if(!r&&l&&(u=F9(e,t,o,n.index)),u!==null){let d=u.__ngLastListenerFn__||u;d.__ngNextListenerFn__=s,u.__ngLastListenerFn__=s,c=!0}else{let d=ro(n,t),h=r?r(d):d;Vq(t,h,o,a);let f=i.listen(h,o,a),p=r?g=>r(Li(g[n.index])):n.index;XF(p,e,t,o,a,f,!1)}return c}function F9(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[Zu],l=i[o+2];return a&&a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function XF(n,e,t,r,i,o,s){let a=e.firstCreatePass?$E(e):null,l=VE(t),c=l.length;l.push(i,o),a&&a.push(r,n,c,(c+1)*(s?-1:1))}function mN(n,e,t,r,i,o){let s=e[t],a=e[Oe],c=a.data[t].outputs[r],d=s[c].subscribe(o);XF(n.index,a,e,i,o,d,!0)}var PI=Symbol("BINDING");var Jb=class extends Tp{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=js(e);return new lc(t,this.ngModule)}};function L9(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&pv.SignalBased)!==0};return i&&(o.transform=i),o})}function j9(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function B9(n,e,t){let r=e instanceof cn?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new OI(t,r):t}function V9(n){let e=n.get(zn,null);if(e===null)throw new se(407,!1);let t=n.get(qF,null),r=n.get(Ni,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function $9(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return mF(e,t,t==="svg"?PE:t==="math"?A1:null)}var lc=class extends vv{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=L9(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=j9(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=v6(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){Bt(22);let a=je(null);try{let l=this.componentDef,c=U9(r,l,s,o),u=B9(l,i||this.ngModule,e),d=V9(u),h=d.rendererFactory.createRenderer(null,l),f=r?$6(h,r,l.encapsulation,u):$9(l,h),p=s?.some(gN)||o?.some(y=>typeof y!="function"&&y.bindings.some(gN)),g=hS(null,c,null,512|vF(l),null,null,d,h,u,null,iF(f,u,!0));g[un]=f,Mb(g);let _=null;try{let y=DS(un,g,2,"#host",()=>c.directiveRegistry,!0,0);f&&(bF(h,f,y),ld(f,g)),_v(c,g,y),iS(c,y,g),TS(c,y),t!==void 0&&H9(y,this.ngContentSelectors,t),_=ji(y.index,g),g[Rn]=_[Rn],CS(c,g,null)}catch(y){throw _!==null&&bI(_),bI(g),y}finally{Bt(23),Ob()}return new ev(this.componentType,g,!!p)}finally{je(a)}}};function U9(n,e,t,r){let i=n?["ng-version","20.1.1"]:y6(e.selectors[0]),o=null,s=null,a=0;if(t)for(let u of t)a+=u[PI].requiredVars,u.create&&(u.targetIdx=0,(o??=[]).push(u)),u.update&&(u.targetIdx=0,(s??=[]).push(u));if(r)for(let u=0;u<r.length;u++){let d=r[u];if(typeof d!="function")for(let h of d.bindings){a+=h[PI].requiredVars;let f=u+1;h.create&&(h.targetIdx=f,(o??=[]).push(h)),h.update&&(h.targetIdx=f,(s??=[]).push(h))}}let l=[e];if(r)for(let u of r){let d=typeof u=="function"?u:u.type,h=SE(d);l.push(h)}return fS(0,null,z9(o,s),1,a,l,null,null,null,[i],null)}function z9(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function gN(n){let e=n[PI].kind;return e==="input"||e==="twoWay"}var ev=class extends HF{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=ap(t[Oe],un),this.location=hd(this._tNode,t),this.instance=ji(this._tNode.index,t)[Rn],this.hostView=this.changeDetectorRef=new $a(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=xS(r,i[Oe],i,e,t);this.previousInputValues.set(e,t);let s=ji(r.index,i);IS(s,1)}get injector(){return new sc(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function H9(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var tr=(()=>{class n{static __NG_ELEMENT_ID__=q9}return n})();function q9(){let n=Un();return eL(n,Ve())}var G9=tr,JF=class extends G9{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return hd(this._hostTNode,this._hostLView)}get injector(){return new sc(this._hostTNode,this._hostLView)}get parentInjector(){let e=eS(this._hostTNode,this._hostLView);if(jN(e)){let t=Wb(e,this._hostLView),r=Gb(e),i=t[Oe].data[r+8];return new sc(i,t)}else return new sc(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=_N(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-ur}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Zb(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,cd(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let l=e&&!fq(e),c;if(l)c=t;else{let _=t||{};c=_.index,r=_.injector,i=_.projectableNodes,o=_.environmentInjector||_.ngModuleRef,s=_.directives,a=_.bindings}let u=l?e:new lc(js(e)),d=r||this.parentInjector;if(!o&&u.ngModule==null){let y=(l?d:this.parentInjector).get(cn,null);y&&(o=y)}let h=js(u.componentType??{}),f=Zb(this._lContainer,h?.id??null),p=f?.firstChild??null,g=u.create(d,i,p,o,s,a);return this.insertImpl(g.hostView,c,cd(this._hostTNode,f)),g}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(R1(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=i[Jn],c=new JF(l,l[zr],l[Jn]);c.detach(c.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return Dp(s,i,o,r),e.attachToViewContainerRef(),xE(aI(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=_N(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=bp(this._lContainer,t);r&&(rp(aI(this._lContainer),t),mv(r[Oe],r))}detach(e){let t=this._adjustIndex(e,-1),r=bp(this._lContainer,t);return r&&rp(aI(this._lContainer),t)!=null?new $a(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function _N(n){return n[sp]}function aI(n){return n[sp]||(n[sp]=[])}function eL(n,e){let t,r=e[n.index];return no(r)?t=r:(t=BF(r,e,null,n),e[n.index]=t,pS(e,t)),K9(t,e,n,r),new JF(t,n,e)}function W9(n,e){let t=n[Wt],r=t.createComment(""),i=ro(e,n),o=t.parentNode(i);return Yb(t,o,r,t.nextSibling(i),!1),r}var K9=Z9,Q9=()=>!1;function Y9(n,e,t){return Q9(n,e,t)}function Z9(n,e,t,r){if(n[Na])return;let i;t.type&8?i=Li(r):i=W9(e,t),n[Na]=i}var NI=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},FI=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)RS(e,t).matches!==null&&this.queries[t].setDirty()}},tv=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=nG(e):this.predicate=e}},LI=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},jI=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,X9(t,o)),this.matchTNodeWithReadOption(e,t,Ub(t,e,o,!1,!1))}else r===Ar?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Ub(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===De||i===tr||i===Ar&&t.type&4)this.addMatch(t.index,-2);else{let o=Ub(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function X9(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function J9(n,e){return n.type&11?hd(n,e):n.type&4?bv(n,e):null}function eG(n,e,t,r){return t===-1?J9(e,n):t===-2?tG(n,e,r):gp(n,n[Oe],t,e)}function tG(n,e,t){if(t===De)return hd(e,n);if(t===Ar)return bv(e,n);if(t===tr)return eL(e,n)}function tL(n,e,t,r){let i=e[Uo].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let c=s[l];if(c<0)a.push(null);else{let u=o[c];a.push(eG(e,u,s[l+1],t.metadata.read))}}i.matches=a}return i.matches}function BI(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=tL(n,e,i,t);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)r.push(s[a/2]);else{let c=o[a+1],u=e[-l];for(let d=ur;d<u.length;d++){let h=u[d];h[Pa]===h[Jn]&&BI(h[Oe],h,c,r)}if(u[ec]!==null){let d=u[ec];for(let h=0;h<d.length;h++){let f=d[h];BI(f[Oe],f,c,r)}}}}}return r}function kS(n,e){return n[Uo].queries[e].queryList}function nL(n,e,t){let r=new Bi((t&4)===4);return P1(n,e,r,r.destroy),(e[Uo]??=new FI).queries.push(new NI(r))-1}function rL(n,e,t){let r=on();return r.firstCreatePass&&(oL(r,new tv(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),nL(r,Ve(),e)}function iL(n,e,t,r){let i=on();if(i.firstCreatePass){let o=Un();oL(i,new tv(e,t,r),o.index),rG(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return nL(i,Ve(),t)}function nG(n){return n.split(",").map(e=>e.trim())}function oL(n,e,t){n.queries===null&&(n.queries=new LI),n.queries.track(new jI(e,t))}function rG(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function RS(n,e){return n.queries.getByIndex(e)}function sL(n,e){let t=n[Oe],r=RS(t,e);return r.crossesNgTemplate?BI(t,n,e,[]):tL(t,n,r,e)}function aL(n,e,t){let r,i=Vh(()=>{r._dirtyCounter();let o=iG(r,n);if(e&&o===void 0)throw new se(-951,!1);return o});return r=i[Vn],r._dirtyCounter=kt(0),r._flatValue=void 0,i}function MS(n){return aL(!0,!1,n)}function OS(n){return aL(!0,!0,n)}function lL(n,e){let t=n[Vn];t._lView=Ve(),t._queryIndex=e,t._queryList=kS(t._lView,e),t._queryList.onDirty(()=>t._dirtyCounter.update(r=>r+1))}function iG(n,e){let t=n._lView,r=n._queryIndex;if(t===void 0||r===void 0||t[Ue]&4)return e?void 0:Tr;let i=kS(t,r),o=sL(t,r);return i.reset(o,WN),e?i.first:i._changesDetected||n._flatValue===void 0?n._flatValue=i.toArray():n._flatValue}var bN=new Set;function Gs(n){bN.has(n)||(bN.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Ko=class{},yv=class{};var nv=class extends Ko{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Jb(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=IE(e);this._bootstrapComponents=fF(o.bootstrap),this._r3Injector=eI(e,t,[{provide:Ko,useValue:this},{provide:Tp,useValue:this.componentFactoryResolver},...r],Ns(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},rv=class extends yv{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new nv(this.moduleType,e,[])}};var vp=class extends Ko{injector;componentFactoryResolver=new Jb(this);instance=null;constructor(e){super();let t=new Wl([...e.providers,{provide:Ko,useValue:this},{provide:Tp,useValue:this.componentFactoryResolver}],e.parent||Yu(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Ap(n,e,t=null){return new vp({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var oG=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=DE(!1,t.type),i=r.length>0?Ap([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=K({token:n,providedIn:"environment",factory:()=>new n(de(cn))})}return n})();function xe(n){return fd(()=>{let e=cL(n),t=w(m({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===nS.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(oG).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Us.Emulated,styles:n.styles||Tr,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Gs("NgStandalone"),uL(t);let r=n.dependencies;return t.directiveDefs=vN(r,sG),t.pipeDefs=vN(r,x1),t.id=cG(t),t})}function sG(n){return js(n)||SE(n)}function Re(n){return fd(()=>({type:n.type,bootstrap:n.bootstrap||Tr,declarations:n.declarations||Tr,imports:n.imports||Tr,exports:n.exports||Tr,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function aG(n,e){if(n==null)return Ma;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,l;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,l=i[3]||null):(o=i,s=i,a=pv.None,l=null),t[o]=[r,a,l],e[o]=s}return t}function lG(n){if(n==null)return Ma;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function me(n){return fd(()=>{let e=cL(n);return uL(e),e})}function _d(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function cL(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Ma,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Tr,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:aG(n.inputs,e),outputs:lG(n.outputs),debugInfo:null}}function uL(n){n.features?.forEach(e=>e(n))}function vN(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function cG(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function uG(n){return Object.getPrototypeOf(n.prototype).constructor}function ot(n){let e=uG(n.type),t=!0,r=[n];for(;e;){let i;if(Ho(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new se(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=lI(n.inputs),s.declaredInputs=lI(n.declaredInputs),s.outputs=lI(n.outputs);let a=i.hostBindings;a&&mG(n,a);let l=i.viewQuery,c=i.contentQueries;if(l&&hG(n,l),c&&pG(n,c),dG(n,i),h1(n.outputs,i.outputs),Ho(i)&&i.data.animation){let u=n.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===ot&&(t=!1)}}e=Object.getPrototypeOf(e)}fG(r)}function dG(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function fG(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ad(i.hostAttrs,t=ad(t,i.hostAttrs))}}function lI(n){return n===Ma?{}:n===Tr?[]:n}function hG(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function pG(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function mG(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function dL(n,e,t,r,i,o,s,a){if(t.firstCreatePass){n.mergedAttrs=ad(n.mergedAttrs,n.attrs);let u=n.tView=fS(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),u.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),td(n,!1);let l=_G(t,e,n,r);Pb()&&_S(t,e,l,n),ld(l,e);let c=BF(l,e,l,n);e[r+un]=c,pS(e,c),Y9(c,n,e)}function gG(n,e,t,r,i,o,s,a,l,c,u){let d=t+un,h;return e.firstCreatePass?(h=gd(e,d,4,s||null,a||null),Tb()&&GF(e,n,h,yi(e.consts,c),vS),NN(e,h)):h=e.data[d],dL(h,n,e,t,r,i,o,l),Ju(h)&&_v(e,n,h),c!=null&&Ip(n,h,u),h}function ud(n,e,t,r,i,o,s,a,l,c,u){let d=t+un,h;if(e.firstCreatePass){if(h=gd(e,d,4,s||null,a||null),c!=null){let f=yi(e.consts,c);h.localNames=[];for(let p=0;p<f.length;p+=2)h.localNames.push(f[p],-1)}}else h=e.data[d];return dL(h,n,e,t,r,i,o,l),c!=null&&Ip(n,h,u),h}function ht(n,e,t,r,i,o,s,a){let l=Ve(),c=on(),u=yi(c.consts,o);return gG(l,c,n,e,t,r,i,u,void 0,s,a),ht}function kp(n,e,t,r,i,o,s,a){let l=Ve(),c=on(),u=yi(c.consts,o);return ud(l,c,n,e,t,r,i,u,void 0,s,a),kp}var _G=bG;function bG(n,e,t,r){return fp(!0),e[Wt].createComment("")}var wv=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(wv||{}),Ua=new G(""),fL=!1,VI=class extends re{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,D1()&&(this.destroyRef=x(dr,{optional:!0})??void 0,this.pendingTasks=x(qo,{optional:!0})??void 0)}emit(e){let t=je(null);try{super.next(e)}finally{je(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof lt&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Ie=VI;function hL(n){let e,t;function r(){n=ic;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function yN(n){return queueMicrotask(()=>n()),()=>{n=ic}}var PS="isAngularZone",iv=PS+"_ID",vG=0,he=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Ie(!1);onMicrotaskEmpty=new Ie(!1);onStable=new Ie(!1);onError=new Ie(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=fL}=e;if(typeof Zone>"u")throw new se(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,xG(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(PS)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new se(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new se(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,yG,ic,ic);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},yG={};function NS(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function wG(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){hL(()=>{n.callbackScheduled=!1,$I(n),n.isCheckStableRunning=!0,NS(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),$I(n)}function xG(n){let e=()=>{wG(n)},t=vG++;n._inner=n._inner.fork({name:"angular",properties:{[PS]:!0,[iv]:t,[iv+t]:!0},onInvokeTask:(r,i,o,s,a,l)=>{if(CG(l))return r.invokeTask(o,s,a,l);try{return wN(n),r.invokeTask(o,s,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),xN(n)}},onInvoke:(r,i,o,s,a,l,c)=>{try{return wN(n),r.invoke(o,s,a,l,c)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!EG(l)&&e(),xN(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,$I(n),NS(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function $I(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function wN(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function xN(n){n._nesting--,NS(n)}var ov=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Ie;onMicrotaskEmpty=new Ie;onStable=new Ie;onError=new Ie;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function CG(n){return pL(n,"__ignore_ng_zone__")}function EG(n){return pL(n,"__scheduler_tick__")}function pL(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var xv=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=K({token:n,providedIn:"root",factory:()=>new n})}return n})(),FS=[0,1,2,3],LS=(()=>{class n{ngZone=x(he);scheduler=x(Ni);errorHandler=x(cr,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){x(Ua,{optional:!0})}execute(){let t=this.sequences.size>0;t&&Bt(16),this.executing=!0;for(let r of FS)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&Bt(17)}register(t){let{view:r}=t;r!==void 0?((r[Jl]??=[]).push(t),La(r),r[Ue]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(wv.AFTER_NEXT_RENDER,t):t()}static \u0275prov=K({token:n,providedIn:"root",factory:()=>new n})}return n})(),yp=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Jl];e&&(this.view[Jl]=e.filter(t=>t!==this))}};function Hn(n,e){let t=e?.injector??x(ke);return Gs("NgAfterNextRender"),SG(n,t,e,!0)}function IG(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function SG(n,e,t,r){let i=e.get(xv);i.impl??=e.get(LS);let o=e.get(Ua,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(dr):null,a=e.get(nc,null,{optional:!0}),l=new yp(i.impl,IG(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(l),l}var Cv=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var jS=new G("");function Ws(n){return!!n&&typeof n.then=="function"}function Ev(n){return!!n&&typeof n.subscribe=="function"}var mL=new G("");var BS=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=x(mL,{optional:!0})??[];injector=x(ke);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=yr(this.injector,i);if(Ws(o))t.push(o);else if(Ev(o)){let s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Iv=new G("");function gL(){LC(()=>{let n="";throw new se(600,n)})}function _L(n){return n.isBoundToModule}var DG=10;var qr=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=x(ri);afterRenderManager=x(xv);zonelessEnabled=x(id);rootEffectScheduler=x(hp);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new re;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=x(qo);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(be(t=>!t))}constructor(){x(Ua,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=x(cn);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=ke.NULL){return this._injector.get(he).run(()=>{Bt(10);let s=t instanceof vv;if(!this._injector.get(BS).done){let p="";throw new se(405,p)}let l;s?l=t:l=this._injector.get(Tp).resolveComponentFactory(t),this.componentTypes.push(l.componentType);let c=_L(l)?void 0:this._injector.get(Ko),u=r||l.selector,d=l.create(i,[],u,c),h=d.location.nativeElement,f=d.injector.get(jS,null);return f?.registerApplication(h),d.onDestroy(()=>{this.detachView(d.hostView),mp(this.components,d),f?.unregisterApplication(h)}),this._loadComponent(d),Bt(11,d),d})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Bt(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(wv.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new se(101,!1);let t=je(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,je(t),this.afterTick.next(),Bt(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(zn,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<DG;)Bt(14),this.synchronizeOnce(),Bt(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!lp(i))continue;let o=r&&!this.zonelessEnabled?0:1;ES(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>lp(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;mp(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(Iv,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>mp(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new se(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function mp(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Et(n,e,t,r){let i=Ve(),o=ja();if(Vi(i,o,e)){let s=on(),a=dp();Q6(a,i,n,e,t,r)}return Et}var UI=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,t){this.attach(t,this.detach(e))}};function cI(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function TG(n,e,t){let r,i,o=0,s=n.length-1,a=void 0;if(Array.isArray(e)){let l=e.length-1;for(;o<=s&&o<=l;){let c=n.at(o),u=e[o],d=cI(o,c,o,u,t);if(d!==0){d<0&&n.updateValue(o,u),o++;continue}let h=n.at(s),f=e[l],p=cI(s,h,l,f,t);if(p!==0){p<0&&n.updateValue(s,f),s--,l--;continue}let g=t(o,c),_=t(s,h),y=t(o,u);if(Object.is(y,_)){let E=t(l,f);Object.is(E,g)?(n.swap(o,s),n.updateValue(s,f),l--,s--):n.move(s,o),n.updateValue(o,u),o++;continue}if(r??=new sv,i??=EN(n,o,s,t),zI(n,r,o,y))n.updateValue(o,u),o++,s++;else if(i.has(y))r.set(g,n.detach(o)),s--;else{let E=n.create(o,e[o]);n.attach(o,E),o++,s++}}for(;o<=l;)CN(n,r,t,o,e[o]),o++}else if(e!=null){let l=e[Symbol.iterator](),c=l.next();for(;!c.done&&o<=s;){let u=n.at(o),d=c.value,h=cI(o,u,o,d,t);if(h!==0)h<0&&n.updateValue(o,d),o++,c=l.next();else{r??=new sv,i??=EN(n,o,s,t);let f=t(o,d);if(zI(n,r,o,f))n.updateValue(o,d),o++,s++,c=l.next();else if(!i.has(f))n.attach(o,n.create(o,d)),o++,s++,c=l.next();else{let p=t(o,u);r.set(p,n.detach(o)),s--}}}for(;!c.done;)CN(n,r,t,n.length,c.value),c=l.next()}for(;o<=s;)n.destroy(n.detach(s--));r?.forEach(l=>{n.destroy(l)})}function zI(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function CN(n,e,t,r,i){if(zI(n,e,r,t(r,i)))n.updateValue(r,i);else{let o=n.create(r,i);n.attach(r,o)}}function EN(n,e,t,r){let i=new Set;for(let o=e;o<=t;o++)i.add(r(o,n.at(o)));return i}var sv=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function bt(n,e,t,r,i,o,s,a){Gs("NgControlFlow");let l=Ve(),c=on(),u=yi(c.consts,o);return ud(l,c,n,e,t,r,i,u,256,s,a),VS}function VS(n,e,t,r,i,o,s,a){Gs("NgControlFlow");let l=Ve(),c=on(),u=yi(c.consts,o);return ud(l,c,n,e,t,r,i,u,512,s,a),VS}function vt(n,e){Gs("NgControlFlow");let t=Ve(),r=ja(),i=t[r]!==$i?t[r]:-1,o=i!==-1?av(t,un+i):void 0,s=0;if(Vi(t,r,n)){let a=je(null);try{if(o!==void 0&&$F(o,s),n!==-1){let l=un+n,c=av(t,l),u=WI(t[Oe],l),d=zF(c,u,t),h=Sp(t,u,e,{dehydratedView:d});Dp(c,h,s,cd(u,d))}}finally{je(a)}}else if(o!==void 0){let a=VF(o,s);a!==void 0&&(a[Rn]=e)}}var HI=class{lContainer;$implicit;$index;constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-ur}};function bd(n,e){return e}var qI=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function Yo(n,e,t,r,i,o,s,a,l,c,u,d,h){Gs("NgControlFlow");let f=Ve(),p=on(),g=l!==void 0,_=Ve(),y=a?s.bind(_[Hr][Rn]):s,E=new qI(g,y);_[un+n]=E,ud(f,p,n+1,e,t,r,i,yi(p.consts,o),256),g&&ud(f,p,n+2,l,c,u,d,yi(p.consts,h),512)}var GI=class extends UI{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r}get length(){return this.lContainer.length-ur}at(e){return this.getLView(e)[Rn].$implicit}attach(e,t){let r=t[Ql];this.needsIndexUpdate||=e!==this.length,Dp(this.lContainer,t,e,cd(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,AG(this.lContainer,e)}create(e,t){let r=Zb(this.lContainer,this.templateTNode.tView.ssrId),i=Sp(this.hostLView,this.templateTNode,new HI(this.lContainer,t,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){mv(e[Oe],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[Rn].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Rn].$index=e}getLView(e){return kG(this.lContainer,e)}};function Zo(n){let e=je(null),t=$s();try{let r=Ve(),i=r[Oe],o=r[t],s=t+1,a=av(r,s);if(o.liveCollection===void 0){let c=WI(i,s);o.liveCollection=new GI(a,r,c)}else o.liveCollection.reset();let l=o.liveCollection;if(TG(l,n,o.trackByFn),l.updateIndexes(),o.hasEmptyBlock){let c=ja(),u=l.length===0;if(Vi(r,c,u)){let d=t+2,h=av(r,d);if(u){let f=WI(i,d),p=zF(h,f,r),g=Sp(r,f,void 0,{dehydratedView:p});Dp(h,g,0,cd(f,p))}else i.firstUpdatePass&&y9(h),$F(h,0)}}}finally{je(e)}}function av(n,e){return n[e]}function AG(n,e){return bp(n,e)}function kG(n,e){return VF(n,e)}function WI(n,e){return ap(n,e)}function ue(n,e,t){let r=Ve(),i=ja();if(Vi(r,i,e)){let o=on(),s=dp();TF(s,r,n,e,r[Wt],t)}return ue}function KI(n,e,t,r,i){xS(e,n,t,i?"class":"style",r)}function V(n,e,t,r){let i=Ve(),o=i[Oe],s=n+un,a=o.firstCreatePass?DS(s,i,2,e,vS,Tb(),t,r):o.data[s];if(yS(a,i,n,e,bL),Ju(a)){let l=i[Oe];_v(l,i,a),iS(l,a,i)}return r!=null&&Ip(i,a),V}function z(){let n=on(),e=Un(),t=wS(e);return n.firstCreatePass&&TS(n,t),HE(t)&&qE(),UE(),t.classesWithoutHost!=null&&bq(t)&&KI(n,t,Ve(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&vq(t)&&KI(n,t,Ve(),t.stylesWithoutHost,!1),z}function Pt(n,e,t,r){return V(n,e,t,r),z(),Pt}function wi(n,e,t,r){let i=Ve(),o=i[Oe],s=n+un,a=o.firstCreatePass?P9(s,o,2,e,t,r):o.data[s];return yS(a,i,n,e,bL),r!=null&&Ip(i,a),wi}function Ui(){let n=Un(),e=wS(n);return HE(e)&&qE(),UE(),Ui}function Xo(n,e,t,r){return wi(n,e,t,r),Ui(),Xo}var bL=(n,e,t,r,i)=>(fp(!0),mF(e[Wt],r,K1()));function Sv(n,e,t){let r=Ve(),i=r[Oe],o=n+un,s=i.firstCreatePass?DS(o,r,8,"ng-container",vS,Tb(),e,t):i.data[o];if(yS(s,r,n,"ng-container",RG),Ju(s)){let a=r[Oe];_v(a,r,s),iS(a,s,r)}return t!=null&&Ip(r,s),Sv}function Dv(){let n=on(),e=Un(),t=wS(e);return n.firstCreatePass&&TS(n,t),Dv}var RG=(n,e,t,r,i)=>(fp(!0),C6(e[Wt],""));function Kt(){return Ve()}function so(n,e,t){let r=Ve(),i=ja();if(Vi(r,i,e)){let o=on(),s=dp();AF(s,r,n,e,r[Wt],t)}return so}var oc=void 0;function MG(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var OG=["en",[["a","p"],["AM","PM"],oc],[["AM","PM"],oc,oc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],oc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],oc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",oc,"{1} 'at' {0}",oc],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",MG],uI={};function xi(n){let e=PG(n),t=IN(e);if(t)return t;let r=e.split("-")[0];if(t=IN(r),t)return t;if(r==="en")return OG;throw new se(701,!1)}function IN(n){return n in uI||(uI[n]=$o.ng&&$o.ng.common&&$o.ng.common.locales&&$o.ng.common.locales[n]),uI[n]}var Mn=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Mn||{});function PG(n){return n.toLowerCase().replace(/_/g,"-")}var Rp="en-US";var NG=Rp;function vL(n){typeof n=="string"&&(NG=n.toLowerCase().replace(/_/g,"-"))}function Me(n,e,t){let r=Ve(),i=on(),o=Un();return yL(i,r,r[Wt],o,n,e,t),Me}function vd(n,e,t){let r=Ve(),i=on(),o=Un();return(o.type&3||t)&&ZF(o,i,r,t,r[Wt],n,e,Hb(o,r,e)),vd}function yL(n,e,t,r,i,o,s){let a=!0,l=null;if((r.type&3||s)&&(l??=Hb(r,e,o),ZF(r,n,e,s,t,i,o,l)&&(a=!1)),a){let c=r.outputs?.[i],u=r.hostDirectiveOutputs?.[i];if(u&&u.length)for(let d=0;d<u.length;d+=2){let h=u[d],f=u[d+1];l??=Hb(r,e,o),mN(r,e,h,f,i,l)}if(c&&c.length)for(let d of c)l??=Hb(r,e,o),mN(r,e,d,i,i,l)}}function te(n=1){return W1(n)}function FG(n,e){let t=null,r=p6(n);for(let i=0;i<e.length;i++){let o=e[i];if(o==="*"){t=i;continue}if(r===null?pF(n,o,!0):_6(r,o))return i}return t}function Qt(n){let e=Ve()[Hr][zr];if(!e.projection){let t=n?n.length:1,r=e.projection=y1(t,null),i=r.slice(),o=e.child;for(;o!==null;){if(o.type!==128){let s=n?FG(o,n):0;s!==null&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o)}o=o.next}}}function qe(n,e=0,t,r,i,o){let s=Ve(),a=on(),l=r?n+1:null;l!==null&&ud(s,a,l,r,i,o,null,t);let c=gd(a,un+n,16,null,t||null);c.projection===null&&(c.projection=e),KE();let d=!s[Ql]||zE();s[Hr][zr].projection[c.projection]===null&&l!==null?LG(s,a,l):d&&!dv(c)&&j6(a,s,c)}function LG(n,e,t){let r=un+t,i=e.data[r],o=n[r],s=Zb(o,i.tView.ssrId),a=Sp(n,i,void 0,{dehydratedView:s});Dp(o,a,0,cd(i,s))}function dn(n,e,t,r){iL(n,e,t,r)}function sn(n,e,t){rL(n,e,t)}function Xe(n){let e=Ve(),t=on(),r=Rb();up(r+1);let i=RS(t,r);if(n.dirty&&k1(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=sL(e,r);n.reset(o,WN),n.notifyOnChanges()}return!0}return!1}function Je(){return kS(Ve(),Rb())}function $S(n,e,t,r,i){lL(e,iL(n,t,r,i))}function yd(n,e,t,r){lL(n,rL(e,t,r))}function Tv(n=1){up(Rb()+n)}function ii(n){let e=j1();return Ib(e,un+n)}function Bb(n,e){return n<<17|e<<2}function cc(n){return n>>17&32767}function jG(n){return(n&2)==2}function BG(n,e){return n&131071|e<<17}function QI(n){return n|2}function dd(n){return(n&131068)>>2}function dI(n,e){return n&-131069|e<<2}function VG(n){return(n&1)===1}function YI(n){return n|1}function $G(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=cc(s),l=dd(s);n[r]=t;let c=!1,u;if(Array.isArray(t)){let d=t;u=d[1],(u===null||Qu(d,u)>0)&&(c=!0)}else u=t;if(i)if(l!==0){let h=cc(n[a+1]);n[r+1]=Bb(h,a),h!==0&&(n[h+1]=dI(n[h+1],r)),n[a+1]=BG(n[a+1],r)}else n[r+1]=Bb(a,0),a!==0&&(n[a+1]=dI(n[a+1],r)),a=r;else n[r+1]=Bb(l,0),a===0?a=r:n[l+1]=dI(n[l+1],r),l=r;c&&(n[r+1]=QI(n[r+1])),SN(n,u,r,!0),SN(n,u,r,!1),UG(e,u,n,r,o),s=Bb(a,l),o?e.classBindings=s:e.styleBindings=s}function UG(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Qu(o,e)>=0&&(t[r+1]=YI(t[r+1]))}function SN(n,e,t,r){let i=n[t+1],o=e===null,s=r?cc(i):dd(i),a=!1;for(;s!==0&&(a===!1||o);){let l=n[s],c=n[s+1];zG(l,e)&&(a=!0,n[s+1]=r?YI(c):QI(c)),s=r?cc(c):dd(c)}a&&(n[t+1]=r?QI(i):YI(i))}function zG(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Qu(n,e)>=0:!1}var oo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function HG(n){return n.substring(oo.key,oo.keyEnd)}function qG(n){return GG(n),wL(n,xL(n,0,oo.textEnd))}function wL(n,e){let t=oo.textEnd;return t===e?-1:(e=oo.keyEnd=WG(n,oo.key=e,t),xL(n,e,t))}function GG(n){oo.key=0,oo.keyEnd=0,oo.value=0,oo.valueEnd=0,oo.textEnd=n.length}function xL(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function WG(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function za(n,e,t){return CL(n,e,t,!1),za}function Ge(n,e){return CL(n,e,null,!0),Ge}function Jo(n){QG(tW,KG,n,!0)}function KG(n,e){for(let t=qG(e);t>=0;t=wL(e,t))xb(n,HG(e),!0)}function CL(n,e,t,r){let i=Ve(),o=on(),s=ZE(2);if(o.firstUpdatePass&&IL(o,n,s,r),e!==$i&&Vi(i,s,e)){let a=o.data[$s()];SL(o,a,i,i[Wt],n,i[s+1]=rW(e,t),r,s)}}function QG(n,e,t,r){let i=on(),o=ZE(2);i.firstUpdatePass&&IL(i,null,o,r);let s=Ve();if(t!==$i&&Vi(s,o,t)){let a=i.data[$s()];if(DL(a,r)&&!EL(i,o)){let l=r?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(t=_b(l,t||"")),KI(i,a,s,t,r)}else nW(i,a,s,s[Wt],s[o+1],s[o+1]=eW(n,e,t),r,o)}}function EL(n,e){return e>=n.expandoStartIndex}function IL(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[$s()],s=EL(n,t);DL(o,r)&&e===null&&!s&&(e=!1),e=YG(i,o,e,r),$G(i,o,e,t,s,r)}}function YG(n,e,t,r){let i=z1(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=fI(null,n,e,t,r),t=wp(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=fI(i,n,e,t,r),o===null){let l=ZG(n,e,r);l!==void 0&&Array.isArray(l)&&(l=fI(null,n,e,l[1],r),l=wp(l,e.attrs,r),XG(n,e,r,l))}else o=JG(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function ZG(n,e,t){let r=t?e.classBindings:e.styleBindings;if(dd(r)!==0)return n[cc(r)]}function XG(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[cc(i)]=r}function JG(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=wp(r,s,t)}return wp(r,e.attrs,t)}function fI(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=wp(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function wp(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),xb(n,s,t?!0:e[++o]))}return n===void 0?null:n}function eW(n,e,t){if(t==null||t==="")return Tr;let r=[],i=Hs(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function tW(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&xb(n,r,t)}function nW(n,e,t,r,i,o,s,a){i===$i&&(i=Tr);let l=0,c=0,u=0<i.length?i[0]:null,d=0<o.length?o[0]:null;for(;u!==null||d!==null;){let h=l<i.length?i[l+1]:void 0,f=c<o.length?o[c+1]:void 0,p=null,g;u===d?(l+=2,c+=2,h!==f&&(p=d,g=f)):d===null||u!==null&&u<d?(l+=2,p=u):(c+=2,p=d,g=f),p!==null&&SL(n,e,t,r,p,g,s,a),u=l<i.length?i[l]:null,d=c<o.length?o[c]:null}}function SL(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let l=n.data,c=l[a+1],u=VG(c)?DN(l,e,t,i,dd(c),s):void 0;if(!lv(u)){lv(o)||jG(c)&&(o=DN(l,null,t,i,a,s));let d=NE($s(),t);V6(r,s,d,i,o)}}function DN(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let l=n[i],c=Array.isArray(l),u=c?l[1]:l,d=u===null,h=t[i+1];h===$i&&(h=d?Tr:void 0);let f=d?Cb(h,r):u===r?h:void 0;if(c&&!lv(f)&&(f=Cb(l,r)),lv(f)&&(a=f,s))return a;let p=n[i+1];i=s?cc(p):dd(p)}if(e!==null){let l=o?e.residualClasses:e.residualStyles;l!=null&&(a=Cb(l,r))}return a}function lv(n){return n!==void 0}function rW(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Ns(Hs(n)))),n}function DL(n,e){return(n.flags&(e?8:16))!==0}function ae(n,e=""){let t=Ve(),r=on(),i=n+un,o=r.firstCreatePass?gd(r,i,1,e,null):r.data[i],s=iW(r,t,o,e,n);t[i]=s,Pb()&&_S(r,t,s,o),td(o,!1)}var iW=(n,e,t,r,i)=>(fp(!0),w6(e[Wt],r));function oW(n,e,t,r=""){return Vi(n,ja(),t)?e+vb(t)+r:$i}function Rt(n){return nn("",n),Rt}function nn(n,e,t){let r=Ve(),i=oW(r,n,e,t);return i!==$i&&sW(r,$s(),i),nn}function sW(n,e,t){let r=NE(e,n);x6(n[Wt],r,t)}function Ha(n,e,t){tI(e)&&(e=e());let r=Ve(),i=ja();if(Vi(r,i,e)){let o=on(),s=dp();TF(s,r,n,e,r[Wt],t)}return Ha}function dc(n,e){let t=tI(n);return t&&n.set(e),t}function qa(n,e){let t=Ve(),r=on(),i=Un();return yL(r,t,t[Wt],i,n,e),qa}function aW(n,e,t){let r=on();if(r.firstCreatePass){let i=Ho(n);ZI(t,r.data,r.blueprint,i,!0),ZI(e,r.data,r.blueprint,i,!1)}}function ZI(n,e,t,r,i){if(n=vr(n),Array.isArray(n))for(let o=0;o<n.length;o++)ZI(n[o],e,t,r,i);else{let o=on(),s=Ve(),a=Un(),l=Gl(n)?n:vr(n.provide),c=AE(n),u=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(Gl(n)||!n.multi){let f=new ac(c,i,ce,null),p=pI(l,e,i?u:u+h,d);p===-1?(gI(Qb(a,s),o,l),hI(o,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(f),s.push(f)):(t[p]=f,s[p]=f)}else{let f=pI(l,e,u+h,d),p=pI(l,e,u,u+h),g=f>=0&&t[f],_=p>=0&&t[p];if(i&&!_||!i&&!g){gI(Qb(a,s),o,l);let y=uW(i?cW:lW,t.length,i,r,c,n);!i&&_&&(t[p].providerFactory=y),hI(o,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)}else{let y=TL(t[i?p:f],c,!i&&r);hI(o,n,f>-1?f:p,y)}!i&&r&&_&&t[p].componentProviders++}}}function hI(n,e,t,r){let i=Gl(e),o=S1(e);if(i||o){let l=(o?vr(e.useClass):e).prototype.ngOnDestroy;if(l){let c=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let u=c.indexOf(t);u===-1?c.push(t,[r,l]):c[u+1].push(r,l)}else c.push(t,l)}}}function TL(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function pI(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function lW(n,e,t,r,i){return XI(this.multi,[])}function cW(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,l=gp(r,r[Oe],this.providerFactory.index,i);s=l.slice(0,a),XI(o,s);for(let c=a;c<l.length;c++)s.push(l[c])}else s=[],XI(o,s);return s}function XI(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function uW(n,e,t,r,i,o){let s=new ac(n,t,ce,null);return s.multi=[],s.index=e,s.componentProviders=0,TL(s,i,r&&!t),s}function _t(n,e=[]){return t=>{t.providersResolver=(r,i)=>aW(r,i?i(n):n,e)}}function Mp(n,e,t,r,i){return kL(Ve(),Ab(),n,e,t,r,i)}function AL(n,e){let t=n[e];return t===$i?void 0:t}function dW(n,e,t,r,i,o){let s=e+t;return Vi(n,s,i)?YF(n,s+1,o?r.call(o,i):r(i)):AL(n,s+1)}function kL(n,e,t,r,i,o,s){let a=e+t;return N9(n,a,i,o)?YF(n,a+2,s?r.call(s,i,o):r(i,o)):AL(n,a+2)}function fc(n,e){let t=on(),r,i=n+un;t.firstCreatePass?(r=fW(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=ka(r.type,!0)),s,a=Ur(ce);try{let l=Kb(!1),c=o();return Kb(l),FE(t,Ve(),i,c),c}finally{Ur(a)}}function fW(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Op(n,e,t){let r=n+un,i=Ve(),o=Ib(i,r);return RL(i,r)?dW(i,Ab(),e,o.transform,t,o):o.transform(t)}function US(n,e,t,r){let i=n+un,o=Ve(),s=Ib(o,i);return RL(o,i)?kL(o,Ab(),e,s.transform,t,r,s):s.transform(t,r)}function RL(n,e){return n[Oe].data[e].pure}function Ga(n,e){return bv(n,e)}var cv=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},zS=(()=>{class n{compileModuleSync(t){return new rv(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=IE(t),o=fF(i.declarations).reduce((s,a)=>{let l=js(a);return l&&s.push(new lc(l)),s},[]);return new cv(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var hW=(()=>{class n{zone=x(he);changeDetectionScheduler=x(Ni);applicationRef=x(qr);applicationErrorHandler=x(ri);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ML=new G("",{factory:()=>!1});function HS({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new he(w(m({},GS()),{scheduleInRootZone:t})),[{provide:he,useFactory:n},{provide:Ls,multi:!0,useFactory:()=>{let r=x(hW,{optional:!0});return()=>r.initialize()}},{provide:Ls,multi:!0,useFactory:()=>{let r=x(pW);return()=>{r.initialize()}}},e===!0?{provide:nI,useValue:!0}:[],{provide:rI,useValue:t??fL},{provide:ri,useFactory:()=>{let r=x(he),i=x(cn),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(cr),o.handleError(s))})}}}]}function qS(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=HS({ngZoneFactory:()=>{let i=GS(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&Gs("NgZone_CoalesceEvent"),new he(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return Oa([{provide:ML,useValue:!0},{provide:id,useValue:!1},r])}function GS(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var pW=(()=>{class n{subscription=new lt;initialized=!1;zone=x(he);pendingTasks=x(qo);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{he.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{he.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var OL=(()=>{class n{applicationErrorHandler=x(ri);appRef=x(qr);taskService=x(qo);ngZone=x(he);zonelessEnabled=x(id);tracing=x(Ua,{optional:!0});disableScheduling=x(nI,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new lt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(iv):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(x(rI,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof ov||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?yN:hL;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(iv+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,yN(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function mW(){return typeof $localize<"u"&&$localize.locale||Rp}var Pp=new G("",{providedIn:"root",factory:()=>x(Pp,{optional:!0,skipSelf:!0})||mW()});var Av=class{destroyed=!1;listeners=null;errorHandler=x(cr,{optional:!0});destroyRef=x(dr);constructor(){this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(e){if(this.destroyed)throw new se(953,!1);return(this.listeners??=[]).push(e),{unsubscribe:()=>{let t=this.listeners?.indexOf(e);t!==void 0&&t!==-1&&this.listeners?.splice(t,1)}}}emit(e){if(this.destroyed){console.warn(Fs(953,!1));return}if(this.listeners===null)return;let t=je(null);try{for(let r of this.listeners)try{r(e)}catch(i){this.errorHandler?.handleError(i)}}finally{je(t)}}};function Gr(n){return u1(n)}function Wr(n,e){return Vh(n,e?.equal)}var WS=class{[Vn];constructor(e){this[Vn]=e}destroy(){this[Vn].destroy()}};function wd(n,e){let t=e?.injector??x(ke),r=e?.manualCleanup!==!0?t.get(dr):null,i,o=t.get(nc,null,{optional:!0}),s=t.get(Ni);return o!==null?(i=bW(o.view,s,n),r instanceof tp&&r._lView===o.view&&(r=null)):i=vW(n,t.get(hp),s),i.injector=t,r!==null&&(i.onDestroyFn=r.onDestroy(()=>i.destroy())),new WS(i)}var PL=w(m({},Ca),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,hasRun:!1,cleanupFns:void 0,zone:null,kind:"effect",onDestroyFn:ic,run(){if(this.dirty=!1,this.hasRun&&!jl(this))return;this.hasRun=!0;let n=r=>(this.cleanupFns??=[]).push(r),e=As(this),t=nd(!1);try{this.maybeCleanup(),this.fn(n)}finally{nd(t),Ia(this,e)}},maybeCleanup(){if(!this.cleanupFns?.length)return;let n=je(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],je(n)}}}),gW=w(m({},PL),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){Mu(this),this.onDestroyFn(),this.maybeCleanup(),this.scheduler.remove(this)}}),_W=w(m({},PL),{consumerMarkedDirty(){this.view[Ue]|=8192,La(this.view),this.notifier.notify(13)},destroy(){Mu(this),this.onDestroyFn(),this.maybeCleanup(),this.view[Vs]?.delete(this)}});function bW(n,e,t){let r=Object.create(_W);return r.view=n,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=t,n[Vs]??=new Set,n[Vs].add(r),r.consumerMarkedDirty(r),r}function vW(n,e,t){let r=Object.create(gW);return r.fn=n,r.scheduler=e,r.notifier=t,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.add(r),r.notifier.notify(12),r}var Mv=Symbol("InputSignalNode#UNSET"),UL=w(m({},$h),{transformFn:void 0,applyValueToInputSignal(n,e){Bl(n,e)}});function zL(n,e){let t=Object.create(UL);t.value=n,t.transformFn=e?.transform;function r(){if(Ea(t),t.value===Mv){let i=null;throw new se(-950,i)}return t.value}return r[Vn]=t,r}var Fp=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>tS(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},HL=new G("");HL.__NG_ELEMENT_ID__=n=>{let e=Un();if(e===null)throw new se(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new se(204,!1)};function NL(n,e){return zL(n,e)}function FW(n){return zL(Mv,n)}var qL=(NL.required=FW,NL);function FL(n,e){return MS(e)}function LW(n,e){return OS(e)}var Lp=(FL.required=LW,FL);function LL(n,e){return MS(e)}function jW(n,e){return OS(e)}var GL=(LL.required=jW,LL);function WL(n,e){let t=Object.create(UL),r=new Av;t.value=n;function i(){return Ea(t),jL(t.value),t.value}return i[Vn]=t,i.asReadonly=Nb.bind(i),i.set=o=>{t.equal(t.value,o)||(Bl(t,o),r.emit(o))},i.update=o=>{jL(t.value),i.set(o(t.value))},i.subscribe=r.subscribe.bind(r),i.destroyRef=r.destroyRef,i}function jL(n){if(n===Mv)throw new se(952,!1)}function BL(n,e){return WL(n,e)}function BW(n){return WL(Mv,n)}var jp=(BL.required=BW,BL);var QS=new G(""),VW=new G("");function Np(n){return!n.moduleRef}function $W(n){let e=Np(n)?n.r3Injector:n.moduleRef.injector,t=e.get(he);return t.run(()=>{Np(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(ri),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Np(n)){let o=()=>e.destroy(),s=n.platformInjector.get(QS);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(QS);s.add(o),n.moduleRef.onDestroy(()=>{mp(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return zW(r,t,()=>{let o=e.get(qo),s=o.add(),a=e.get(BS);return a.runInitializers(),a.donePromise.then(()=>{try{let l=e.get(Pp,Rp);if(vL(l||Rp),!e.get(VW,!0))return Np(n)?e.get(qr):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Np(n)){let u=e.get(qr);return n.rootComponent!==void 0&&u.bootstrap(n.rootComponent),u}else return UW?.(n.moduleRef,n.allPlatformModules),n.moduleRef}finally{o.remove(s)}})})})}var UW;function zW(n,e,t){try{let r=t();return Ws(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var kv=null;function HW(n=[],e){return ke.create({name:e,providers:[{provide:ip,useValue:"platform"},{provide:QS,useValue:new Set([()=>kv=null])},...n]})}function qW(n=[]){if(kv)return kv;let e=HW(n);return kv=e,gL(),GW(e),e}function GW(n){let e=n.get(uv,null);yr(n,()=>{e?.forEach(t=>t())})}var _n=(()=>{class n{static __NG_ELEMENT_ID__=WW}return n})();function WW(n){return KW(Un(),Ve(),(n&16)===16)}function KW(n,e,t){if(Fa(n)&&!t){let r=ji(n.index,e);return new $a(r,r)}else if(n.type&175){let r=e[Hr];return new $a(r,e)}return null}var YS=class{constructor(){}supports(e){return AS(e)}create(e){return new ZS(e)}},QW=(n,e)=>e,ZS=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||QW}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<VL(r,i,o)?t:r,a=VL(s,i,o),l=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let c=a-i,u=l-i;if(c!=u){for(let h=0;h<c;h++){let f=h<o.length?o[h]:o[h]=0,p=f+h;u<=p&&p<c&&(o[h]=f+1)}let d=s.previousIndex;o[d]=u-c}}a!==l&&e(s,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!AS(e))throw new se(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,KF(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new XS(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Rv),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Rv),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},XS=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},JS=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Rv=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new JS,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function VL(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function $L(){return new Ov([new YS])}var Ov=(()=>{class n{factories;static \u0275prov=K({token:n,providedIn:"root",factory:$L});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||$L()),deps:[[n,new JI,new xp]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new se(901,!1)}}return n})();function KL(n){Bt(8);try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=qW(r),o=[HS({}),{provide:Ni,useExisting:OL},Y1,...t||[]],s=new vp({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return $W({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{Bt(9)}}function fn(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function tD(n,e=NaN){return!isNaN(parseFloat(n))&&!isNaN(Number(n))?Number(n):e}var KS=Symbol("NOT_SET"),QL=new Set,YW=w(m({},$h),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,value:KS,cleanup:null,consumerMarkedDirty(){if(this.sequence.impl.executing){if(this.sequence.lastPhase===null||this.sequence.lastPhase<this.phase)return;this.sequence.erroredOrDestroyed=!0}this.sequence.scheduler.notify(7)},phaseFn(n){if(this.sequence.lastPhase=this.phase,!this.dirty)return this.signal;if(this.dirty=!1,this.value!==KS&&!jl(this))return this.signal;try{for(let i of this.cleanup??QL)i()}finally{this.cleanup?.clear()}let e=[];n!==void 0&&e.push(n),e.push(this.registerCleanupFn);let t=As(this),r;try{r=this.userFn.apply(null,e)}finally{Ia(this,t)}return(this.value===KS||!this.equal(this.value,r))&&(this.value=r,this.version++),this.signal}}),eD=class extends yp{scheduler;lastPhase=null;nodes=[void 0,void 0,void 0,void 0];constructor(e,t,r,i,o,s=null){super(e,[void 0,void 0,void 0,void 0],r,!1,o,s),this.scheduler=i;for(let a of FS){let l=t[a];if(l===void 0)continue;let c=Object.create(YW);c.sequence=this,c.phase=a,c.userFn=l,c.dirty=!0,c.signal=()=>(Ea(c),c.value),c.signal[Vn]=c,c.registerCleanupFn=u=>(c.cleanup??=new Set).add(u),this.nodes[a]=c,this.hooks[a]=u=>c.phaseFn(u)}}afterRun(){super.afterRun(),this.lastPhase=null}destroy(){super.destroy();for(let e of this.nodes)for(let t of e?.cleanup??QL)t()}};function YL(n,e){let t=e?.injector??x(ke),r=t.get(Ni),i=t.get(xv),o=t.get(Ua,null,{optional:!0});i.impl??=t.get(LS);let s=n;typeof s=="function"&&(s={mixedReadWrite:n});let a=t.get(nc,null,{optional:!0}),l=new eD(i.impl,[s.earlyRead,s.write,s.mixedReadWrite,s.read],a?.view,r,t.get(dr),o?.snapshot(null));return i.impl.register(l),l}function Pv(n,e){let t=js(n),r=e.elementInjector||Yu();return new lc(t).create(r,e.projectableNodes,e.hostElement,e.environmentInjector,e.directives,e.bindings)}var JL=null;function zi(){return JL}function nD(n){JL??=n}var Bp=class{},rD=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:()=>x(ej),providedIn:"platform"})}return n})();var ej=(()=>{class n extends rD{_location;_history;_doc=x(Pe);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return zi().getBaseHref(this._doc)}onPopState(t){let r=zi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=zi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function tj(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function ZL(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Wa(n){return n&&n[0]!=="?"?`?${n}`:n}var Nv=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:()=>x(rj),providedIn:"root"})}return n})(),nj=new G(""),rj=(()=>{class n extends Nv{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??x(Pe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return tj(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Wa(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Wa(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Wa(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(de(rD),de(nj,8))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ka=(()=>{class n{_subject=new re;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=JW(ZL(XL(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Wa(r))}normalize(t){return n.stripTrailingSlash(XW(this._basePath,XL(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Wa(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Wa(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Wa;static joinWithSlash=tj;static stripTrailingSlash=ZL;static \u0275fac=function(r){return new(r||n)(de(Nv))};static \u0275prov=K({token:n,factory:()=>ZW(),providedIn:"root"})}return n})();function ZW(){return new Ka(de(Nv))}function XW(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function XL(n){return n.replace(/\/index.html$/,"")}function JW(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var kr=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(kr||{}),Yt=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(Yt||{}),oi=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(oi||{}),Qs={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function lj(n){return xi(n)[Mn.LocaleId]}function cj(n,e,t){let r=xi(n),i=[r[Mn.DayPeriodsFormat],r[Mn.DayPeriodsStandalone]],o=Hi(i,e);return Hi(o,t)}function uj(n,e,t){let r=xi(n),i=[r[Mn.DaysFormat],r[Mn.DaysStandalone]],o=Hi(i,e);return Hi(o,t)}function dj(n,e,t){let r=xi(n),i=[r[Mn.MonthsFormat],r[Mn.MonthsStandalone]],o=Hi(i,e);return Hi(o,t)}function fj(n,e){let r=xi(n)[Mn.Eras];return Hi(r,e)}function Vp(n,e){let t=xi(n);return Hi(t[Mn.DateFormat],e)}function $p(n,e){let t=xi(n);return Hi(t[Mn.TimeFormat],e)}function Up(n,e){let r=xi(n)[Mn.DateTimeFormat];return Hi(r,e)}function zp(n,e){let t=xi(n),r=t[Mn.NumberSymbols][e];if(typeof r>"u"){if(e===Qs.CurrencyDecimal)return t[Mn.NumberSymbols][Qs.Decimal];if(e===Qs.CurrencyGroup)return t[Mn.NumberSymbols][Qs.Group]}return r}function hj(n){if(!n[Mn.ExtraData])throw new se(2303,!1)}function pj(n){let e=xi(n);return hj(e),(e[Mn.ExtraData][2]||[]).map(r=>typeof r=="string"?iD(r):[iD(r[0]),iD(r[1])])}function mj(n,e,t){let r=xi(n);hj(r);let i=[r[Mn.ExtraData][0],r[Mn.ExtraData][1]],o=Hi(i,e)||[];return Hi(o,t)||[]}function Hi(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new se(2304,!1)}function iD(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var e7=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Fv={},t7=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function gj(n,e,t,r){let i=u7(n);e=Ks(t,e)||e;let s=[],a;for(;e;)if(a=t7.exec(e),a){s=s.concat(a.slice(1));let u=s.pop();if(!u)break;e=u}else{s.push(e);break}let l=i.getTimezoneOffset();r&&(l=bj(r,l),i=c7(i,r));let c="";return s.forEach(u=>{let d=a7(u);c+=d?d(i,t,l):u==="''"?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}function $v(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Ks(n,e){let t=lj(n);if(Fv[t]??={},Fv[t][e])return Fv[t][e];let r="";switch(e){case"shortDate":r=Vp(n,oi.Short);break;case"mediumDate":r=Vp(n,oi.Medium);break;case"longDate":r=Vp(n,oi.Long);break;case"fullDate":r=Vp(n,oi.Full);break;case"shortTime":r=$p(n,oi.Short);break;case"mediumTime":r=$p(n,oi.Medium);break;case"longTime":r=$p(n,oi.Long);break;case"fullTime":r=$p(n,oi.Full);break;case"short":let i=Ks(n,"shortTime"),o=Ks(n,"shortDate");r=Lv(Up(n,oi.Short),[i,o]);break;case"medium":let s=Ks(n,"mediumTime"),a=Ks(n,"mediumDate");r=Lv(Up(n,oi.Medium),[s,a]);break;case"long":let l=Ks(n,"longTime"),c=Ks(n,"longDate");r=Lv(Up(n,oi.Long),[l,c]);break;case"full":let u=Ks(n,"fullTime"),d=Ks(n,"fullDate");r=Lv(Up(n,oi.Full),[u,d]);break}return r&&(Fv[t][e]=r),r}function Lv(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function ao(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function n7(n,e){return ao(n,3).substring(0,e)}function qn(n,e,t=0,r=!1,i=!1){return function(o,s){let a=r7(n,o);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return n7(a,e);let l=zp(s,Qs.MinusSign);return ao(a,e,l,r,i)}}function r7(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new se(2301,!1)}}function an(n,e,t=kr.Format,r=!1){return function(i,o){return i7(i,o,n,e,t,r)}}function i7(n,e,t,r,i,o){switch(t){case 2:return dj(e,i,r)[n.getMonth()];case 1:return uj(e,i,r)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(o){let c=pj(e),u=mj(e,i,r),d=c.findIndex(h=>{if(Array.isArray(h)){let[f,p]=h,g=s>=f.hours&&a>=f.minutes,_=s<p.hours||s===p.hours&&a<p.minutes;if(f.hours<p.hours){if(g&&_)return!0}else if(g||_)return!0}else if(h.hours===s&&h.minutes===a)return!0;return!1});if(d!==-1)return u[d]}return cj(e,i,r)[s<12?0:1];case 3:return fj(e,r)[n.getFullYear()<=0?0:1];default:let l=t;throw new se(2302,!1)}}function jv(n){return function(e,t,r){let i=-1*r,o=zp(t,Qs.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+ao(s,2,o)+ao(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+ao(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+ao(s,2,o)+":"+ao(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+ao(s,2,o)+":"+ao(Math.abs(i%60),2,o);default:throw new se(2302,!1)}}}var o7=0,Vv=4;function s7(n){let e=$v(n,o7,1).getDay();return $v(n,0,1+(e<=Vv?Vv:Vv+7)-e)}function _j(n){let e=n.getDay(),t=e===0?-3:Vv-e;return $v(n.getFullYear(),n.getMonth(),n.getDate()+t)}function oD(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=_j(t),s=s7(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return ao(i,n,zp(r,Qs.MinusSign))}}function Bv(n,e=!1){return function(t,r){let o=_j(t).getFullYear();return ao(o,n,zp(r,Qs.MinusSign),e)}}var sD={};function a7(n){if(sD[n])return sD[n];let e;switch(n){case"G":case"GG":case"GGG":e=an(3,Yt.Abbreviated);break;case"GGGG":e=an(3,Yt.Wide);break;case"GGGGG":e=an(3,Yt.Narrow);break;case"y":e=qn(0,1,0,!1,!0);break;case"yy":e=qn(0,2,0,!0,!0);break;case"yyy":e=qn(0,3,0,!1,!0);break;case"yyyy":e=qn(0,4,0,!1,!0);break;case"Y":e=Bv(1);break;case"YY":e=Bv(2,!0);break;case"YYY":e=Bv(3);break;case"YYYY":e=Bv(4);break;case"M":case"L":e=qn(1,1,1);break;case"MM":case"LL":e=qn(1,2,1);break;case"MMM":e=an(2,Yt.Abbreviated);break;case"MMMM":e=an(2,Yt.Wide);break;case"MMMMM":e=an(2,Yt.Narrow);break;case"LLL":e=an(2,Yt.Abbreviated,kr.Standalone);break;case"LLLL":e=an(2,Yt.Wide,kr.Standalone);break;case"LLLLL":e=an(2,Yt.Narrow,kr.Standalone);break;case"w":e=oD(1);break;case"ww":e=oD(2);break;case"W":e=oD(1,!0);break;case"d":e=qn(2,1);break;case"dd":e=qn(2,2);break;case"c":case"cc":e=qn(7,1);break;case"ccc":e=an(1,Yt.Abbreviated,kr.Standalone);break;case"cccc":e=an(1,Yt.Wide,kr.Standalone);break;case"ccccc":e=an(1,Yt.Narrow,kr.Standalone);break;case"cccccc":e=an(1,Yt.Short,kr.Standalone);break;case"E":case"EE":case"EEE":e=an(1,Yt.Abbreviated);break;case"EEEE":e=an(1,Yt.Wide);break;case"EEEEE":e=an(1,Yt.Narrow);break;case"EEEEEE":e=an(1,Yt.Short);break;case"a":case"aa":case"aaa":e=an(0,Yt.Abbreviated);break;case"aaaa":e=an(0,Yt.Wide);break;case"aaaaa":e=an(0,Yt.Narrow);break;case"b":case"bb":case"bbb":e=an(0,Yt.Abbreviated,kr.Standalone,!0);break;case"bbbb":e=an(0,Yt.Wide,kr.Standalone,!0);break;case"bbbbb":e=an(0,Yt.Narrow,kr.Standalone,!0);break;case"B":case"BB":case"BBB":e=an(0,Yt.Abbreviated,kr.Format,!0);break;case"BBBB":e=an(0,Yt.Wide,kr.Format,!0);break;case"BBBBB":e=an(0,Yt.Narrow,kr.Format,!0);break;case"h":e=qn(3,1,-12);break;case"hh":e=qn(3,2,-12);break;case"H":e=qn(3,1);break;case"HH":e=qn(3,2);break;case"m":e=qn(4,1);break;case"mm":e=qn(4,2);break;case"s":e=qn(5,1);break;case"ss":e=qn(5,2);break;case"S":e=qn(6,1);break;case"SS":e=qn(6,2);break;case"SSS":e=qn(6,3);break;case"Z":case"ZZ":case"ZZZ":e=jv(0);break;case"ZZZZZ":e=jv(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=jv(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=jv(2);break;default:return null}return sD[n]=e,e}function bj(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function l7(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function c7(n,e,t){let i=n.getTimezoneOffset(),o=bj(e,i);return l7(n,-1*(o-i))}function u7(n){if(ij(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return $v(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(e7))return d7(r)}let e=new Date(n);if(!ij(e))throw new se(2302,!1);return e}function d7(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,l=Number(n[6]||0),c=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,l,c),e}function ij(n){return n instanceof Date&&!isNaN(n.valueOf())}var aD=/\s+/,oj=[],Hp=(()=>{class n{_ngEl;_renderer;initialClasses=oj;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(aD):oj}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(aD):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(aD).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(ce(De),ce(tn))};static \u0275dir=me({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var Uv=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},xd=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Uv(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),sj(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);sj(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(ce(tr),ce(Ar),ce(Ov))};static \u0275dir=me({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function sj(n,e){n.context.$implicit=e.item}var Ys=(()=>{class n{_viewContainer;_context=new zv;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){aj(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){aj(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(ce(tr),ce(Ar))};static \u0275dir=me({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),zv=class{$implicit=null;ngIf=null};function aj(n,e){if(n&&!n.createEmbeddedView)throw new se(2020,!1)}var lD=class{_viewContainerRef;_templateRef;_created=!1;constructor(e,t){this._viewContainerRef=e,this._templateRef=t}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}},Hv=(()=>{class n{_defaultViews=[];_defaultUsed=!1;_caseCount=0;_lastCaseCheckIndex=0;_lastCasesMatched=!1;_ngSwitch;set ngSwitch(t){this._ngSwitch=t,this._caseCount===0&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews.push(t)}_matchCase(t){let r=t===this._ngSwitch;return this._lastCasesMatched||=r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(t){if(this._defaultViews.length>0&&t!==this._defaultUsed){this._defaultUsed=t;for(let r of this._defaultViews)r.enforceState(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275dir=me({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}})}return n})(),dD=(()=>{class n{ngSwitch;_view;ngSwitchCase;constructor(t,r,i){this.ngSwitch=i,i._addCase(),this._view=new lD(t,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}static \u0275fac=function(r){return new(r||n)(ce(tr),ce(Ar),ce(Hv,9))};static \u0275dir=me({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}})}return n})();var fD=(()=>{class n{_viewContainerRef;_viewRef=null;ngTemplateOutletContext=null;ngTemplateOutlet=null;ngTemplateOutletInjector=null;constructor(t){this._viewContainerRef=t}ngOnChanges(t){if(this._shouldRecreateView(t)){let r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let i=this._createContextForwardProxy();this._viewRef=r.createEmbeddedView(this.ngTemplateOutlet,i,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(t){return!!t.ngTemplateOutlet||!!t.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(t,r,i)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,r,i):!1,get:(t,r,i)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,r,i)}})}static \u0275fac=function(r){return new(r||n)(ce(tr))};static \u0275dir=me({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},features:[xn]})}return n})();function vj(n,e){return new se(2100,!1)}var cD=class{createSubscription(e,t,r){return Gr(()=>e.subscribe({next:t,error:r}))}dispose(e){Gr(()=>e.unsubscribe())}},uD=class{createSubscription(e,t,r){return e.then(i=>t?.(i),i=>r?.(i)),{unsubscribe:()=>{t=null,r=null}}}dispose(e){e.unsubscribe()}},f7=new uD,h7=new cD,hD=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=x(ri);constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r),r=>this.applicationErrorHandler(r))}_selectStrategy(t){if(Ws(t))return f7;if(Ev(t))return h7;throw vj(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||n)(ce(_n,16))};static \u0275pipe=_d({name:"async",type:n,pure:!1})}return n})();var p7="mediumDate",yj=new G(""),wj=new G(""),pD=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??p7,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return gj(t,s,o||this.locale,a)}catch(s){throw vj(n,s.message)}}static \u0275fac=function(r){return new(r||n)(ce(Pp,16),ce(yj,24),ce(wj,24))};static \u0275pipe=_d({name:"date",type:n,pure:!0})}return n})();var mD=(()=>{class n{transform(t){return JSON.stringify(t,null,2)}static \u0275fac=function(r){return new(r||n)};static \u0275pipe=_d({name:"json",type:n,pure:!1})}return n})();var si=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Re({type:n});static \u0275inj=Se({})}return n})();function qp(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var pc=class{};var gD="browser";function Zs(n){return n===gD}var Wv=new G(""),wD=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new se(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(de(Wv),de(he))};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})(),Gp=class{_doc;constructor(e){this._doc=e}manager},_D="ng-app-id";function xj(n){for(let e of n)e.remove()}function Cj(n,e){let t=e.createElement("style");return t.textContent=n,t}function m7(n,e,t,r){let i=n.head?.querySelectorAll(`style[${_D}="${e}"],link[${_D}="${e}"]`);if(i)for(let o of i)o.removeAttribute(_D),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function vD(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var xD=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,m7(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,Cj);r?.forEach(i=>this.addUsage(i,this.external,vD))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(xj(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])xj(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,Cj(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,vD(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(de(Pe),de(pd),de(md,8),de(Qo))};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})(),bD={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},CD=/%COMP%/g;var Ij="%COMP%",g7=`_nghost-${Ij}`,_7=`_ngcontent-${Ij}`,b7=!0,v7=new G("",{providedIn:"root",factory:()=>b7});function y7(n){return _7.replace(CD,n)}function w7(n){return g7.replace(CD,n)}function Sj(n,e){return e.map(t=>t.replace(CD,n))}var ED=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,l,c=null,u=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=c,this.tracingService=u,this.platformIsServer=!1,this.defaultRenderer=new Wp(t,s,l,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof Gv?i.applyToHost(t):i instanceof Kp&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer,h=this.tracingService;switch(r.encapsulation){case Us.Emulated:o=new Gv(l,c,r,this.appId,u,s,a,d,h);break;case Us.ShadowDom:return new yD(l,c,t,r,s,a,this.nonce,d,h);default:o=new Kp(l,c,r,u,s,a,d,h);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(de(wD),de(xD),de(pd),de(v7),de(Pe),de(Qo),de(he),de(md),de(Ua,8))};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})(),Wp=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(bD[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Ej(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Ej(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new se(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=bD[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=bD[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Wo.DashCase|Wo.Important)?e.style.setProperty(t,r,i&Wo.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Wo.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=zi().getGlobalEventTarget(this.doc,e),!e))throw new se(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function Ej(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var yD=class extends Wp{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,l,c){super(e,o,s,l,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=i.styles;u=Sj(i.id,u);for(let h of u){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=h,this.shadowRoot.appendChild(f)}let d=i.getExternalStyles?.();if(d)for(let h of d){let f=vD(h,o);a&&f.setAttribute("nonce",a),this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Kp=class extends Wp{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,l,c){super(e,o,s,a,l),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let u=r.styles;this.styles=c?Sj(c,u):u,this.styleUrls=r.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Gv=class extends Kp{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,l,c){let u=i+"-"+r.id;super(e,t,r,o,s,a,l,c,u),this.contentAttr=y7(u),this.hostAttr=w7(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Kv=class n extends Bp{supportsDOMEvents=!0;static makeCurrent(){nD(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=x7();return t==null?null:C7(t)}resetBaseElement(){Qp=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return qp(document.cookie,e)}},Qp=null;function x7(){return Qp=Qp||document.head.querySelector("base"),Qp?Qp.getAttribute("href"):null}function C7(n){return new URL(n,document.baseURI).pathname}var E7=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})(),Tj=(()=>{class n extends Gp{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(de(Pe))};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})(),Dj=["alt","control","meta","shift"],I7={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},S7={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Aj=(()=>{class n extends Gp{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>zi().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),Dj.forEach(c=>{let u=r.indexOf(c);u>-1&&(r.splice(u,1),s+=c+".")}),s+=o,r.length!=0||o.length===0)return null;let l={};return l.domEventName=i,l.fullKey=s,l}static matchEventFullKeyCode(t,r){let i=I7[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Dj.forEach(s=>{if(s!==i){let a=S7[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(de(Pe))};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})();function ID(n,e){return KL(m({rootComponent:n},D7(e)))}function D7(n){return{appProviders:[...M7,...n?.providers??[]],platformProviders:R7}}function T7(){Kv.makeCurrent()}function A7(){return new cr}function k7(){return rS(document),document}var R7=[{provide:Qo,useValue:gD},{provide:uv,useValue:T7,multi:!0},{provide:Pe,useFactory:k7}];var M7=[{provide:ip,useValue:"root"},{provide:cr,useFactory:A7},{provide:Wv,useClass:Tj,multi:!0,deps:[Pe]},{provide:Wv,useClass:Aj,multi:!0,deps:[Pe]},ED,xD,wD,{provide:zn,useExisting:ED},{provide:pc,useClass:E7},[]];var Id=class{},Yp=class{},Qa=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=t.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Yv=class{encodeKey(e){return kj(e)}encodeValue(e){return kj(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function O7(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],l=t.get(s)||[];l.push(a),t.set(s,l)}),t}var P7=/%(\d[a-f0-9])/gi,N7={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function kj(n){return encodeURIComponent(n).replace(P7,(e,t)=>N7[t]??e)}function Qv(n){return`${n}`}var Xs=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new Yv,e.fromString){if(e.fromObject)throw new se(2805,!1);this.map=O7(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(Qv):[Qv(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Qv(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Qv(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Zv=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function F7(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Rj(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function Mj(n){return typeof Blob<"u"&&n instanceof Blob}function Oj(n){return typeof FormData<"u"&&n instanceof FormData}function L7(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Pj="Content-Type",Nj="Accept",Lj="X-Request-URL",jj="text/plain",Bj="application/json",j7=`${Bj}, ${jj}, */*`,Cd=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(e,t,r,i){this.url=t,this.method=e.toUpperCase();let o;if(F7(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o){if(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,this.keepalive=!!o.keepalive,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),o.priority&&(this.priority=o.priority),o.cache&&(this.cache=o.cache),o.credentials&&(this.credentials=o.credentials),typeof o.timeout=="number"){if(o.timeout<1||!Number.isInteger(o.timeout))throw new Error("");this.timeout=o.timeout}o.mode&&(this.mode=o.mode),o.redirect&&(this.redirect=o.redirect),this.transferCache=o.transferCache}if(this.headers??=new Qa,this.context??=new Zv,!this.params)this.params=new Xs,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),l=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||Rj(this.body)||Mj(this.body)||Oj(this.body)||L7(this.body)?this.body:this.body instanceof Xs?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Oj(this.body)?null:Mj(this.body)?this.body.type||null:Rj(this.body)?null:typeof this.body=="string"?jj:this.body instanceof Xs?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?Bj:null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.keepalive??this.keepalive,s=e.priority||this.priority,a=e.cache||this.cache,l=e.mode||this.mode,c=e.redirect||this.redirect,u=e.credentials||this.credentials,d=e.transferCache??this.transferCache,h=e.timeout??this.timeout,f=e.body!==void 0?e.body:this.body,p=e.withCredentials??this.withCredentials,g=e.reportProgress??this.reportProgress,_=e.headers||this.headers,y=e.params||this.params,E=e.context??this.context;return e.setHeaders!==void 0&&(_=Object.keys(e.setHeaders).reduce((T,A)=>T.set(A,e.setHeaders[A]),_)),e.setParams&&(y=Object.keys(e.setParams).reduce((T,A)=>T.set(A,e.setParams[A]),y)),new n(t,r,f,{params:y,headers:_,context:E,reportProgress:g,responseType:i,withCredentials:p,transferCache:d,keepalive:o,cache:a,priority:s,timeout:h,mode:l,redirect:c,credentials:u})}},mc=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(mc||{}),Sd=class{headers;status;statusText;url;ok;type;constructor(e,t=200,r="OK"){this.headers=e.headers||new Qa,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Xv=class n extends Sd{constructor(e={}){super(e)}type=mc.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Zp=class n extends Sd{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=mc.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Ed=class extends Sd{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},B7=200,V7=204;function SD(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache,keepalive:n.keepalive,priority:n.priority,cache:n.cache,mode:n.mode,redirect:n.redirect}}var Ya=(()=>{class n{handler;constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof Cd)o=t;else{let l;i.headers instanceof Qa?l=i.headers:l=new Qa(i.headers);let c;i.params&&(i.params instanceof Xs?c=i.params:c=new Xs({fromObject:i.params})),o=new Cd(t,r,i.body!==void 0?i.body:null,{headers:l,context:i.context,params:c,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache,keepalive:i.keepalive,priority:i.priority,cache:i.cache,mode:i.mode,redirect:i.redirect,credentials:i.credentials})}let s=ye(o).pipe(Ta(l=>this.handler.handle(l)));if(t instanceof Cd||i.observe==="events")return s;let a=s.pipe(Ze(l=>l instanceof Zp));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(be(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new se(2806,!1);return l.body}));case"blob":return a.pipe(be(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new se(2807,!1);return l.body}));case"text":return a.pipe(be(l=>{if(l.body!==null&&typeof l.body!="string")throw new se(2808,!1);return l.body}));case"json":default:return a.pipe(be(l=>l.body))}case"response":return a;default:throw new se(2809,!1)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new Xs().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,SD(i,r))}post(t,r,i={}){return this.request("POST",t,SD(i,r))}put(t,r,i={}){return this.request("PUT",t,SD(i,r))}static \u0275fac=function(r){return new(r||n)(de(Id))};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})();var $7=new G("");function Vj(n,e){return e(n)}function U7(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}function z7(n,e,t){return(r,i)=>yr(t,()=>e(r,o=>n(o,i)))}var $j=new G(""),TD=new G(""),Uj=new G(""),AD=new G("",{providedIn:"root",factory:()=>!0});function H7(){let n=null;return(e,t)=>{n===null&&(n=(x($j,{optional:!0})??[]).reduceRight(U7,Vj));let r=x(rc);if(x(AD)){let o=r.add();return n(e,t).pipe(Bo(o))}else return n(e,t)}}var Jv=(()=>{class n extends Id{backend;injector;chain=null;pendingTasks=x(rc);contributeToStability=x(AD);constructor(t,r){super(),this.backend=t,this.injector=r}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(TD),...this.injector.get(Uj,[])]));this.chain=r.reduceRight((i,o)=>z7(i,o,this.injector),Vj)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(Bo(r))}else return this.chain(t,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(de(Yp),de(cn))};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})();var q7=/^\)\]\}',?\n/,G7=RegExp(`^${Lj}:`,"m");function W7(n){return"responseURL"in n&&n.responseURL?n.responseURL:G7.test(n.getAllResponseHeaders())?n.getResponseHeader(Lj):null}var DD=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new se(-2800,!1);let r=this.xhrFactory;return ye(null).pipe($n(()=>new Be(o=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((_,y)=>s.setRequestHeader(_,y.join(","))),t.headers.has(Nj)||s.setRequestHeader(Nj,j7),!t.headers.has(Pj)){let _=t.detectContentTypeHeader();_!==null&&s.setRequestHeader(Pj,_)}if(t.timeout&&(s.timeout=t.timeout),t.responseType){let _=t.responseType.toLowerCase();s.responseType=_!=="json"?_:"text"}let a=t.serializeBody(),l=null,c=()=>{if(l!==null)return l;let _=s.statusText||"OK",y=new Qa(s.getAllResponseHeaders()),E=W7(s)||t.url;return l=new Xv({headers:y,status:s.status,statusText:_,url:E}),l},u=()=>{let{headers:_,status:y,statusText:E,url:T}=c(),A=null;y!==V7&&(A=typeof s.response>"u"?s.responseText:s.response),y===0&&(y=A?B7:0);let P=y>=200&&y<300;if(t.responseType==="json"&&typeof A=="string"){let R=A;A=A.replace(q7,"");try{A=A!==""?JSON.parse(A):null}catch(W){A=R,P&&(P=!1,A={error:W,text:A})}}P?(o.next(new Zp({body:A,headers:_,status:y,statusText:E,url:T||void 0})),o.complete()):o.error(new Ed({error:A,headers:_,status:y,statusText:E,url:T||void 0}))},d=_=>{let{url:y}=c(),E=new Ed({error:_,status:s.status||0,statusText:s.statusText||"Unknown Error",url:y||void 0});o.error(E)},h=d;t.timeout&&(h=_=>{let{url:y}=c(),E=new Ed({error:new DOMException("Request timed out","TimeoutError"),status:s.status||0,statusText:s.statusText||"Request timeout",url:y||void 0});o.error(E)});let f=!1,p=_=>{f||(o.next(c()),f=!0);let y={type:mc.DownloadProgress,loaded:_.loaded};_.lengthComputable&&(y.total=_.total),t.responseType==="text"&&s.responseText&&(y.partialText=s.responseText),o.next(y)},g=_=>{let y={type:mc.UploadProgress,loaded:_.loaded};_.lengthComputable&&(y.total=_.total),o.next(y)};return s.addEventListener("load",u),s.addEventListener("error",d),s.addEventListener("timeout",h),s.addEventListener("abort",d),t.reportProgress&&(s.addEventListener("progress",p),a!==null&&s.upload&&s.upload.addEventListener("progress",g)),s.send(a),o.next({type:mc.Sent}),()=>{s.removeEventListener("error",d),s.removeEventListener("abort",d),s.removeEventListener("load",u),s.removeEventListener("timeout",h),t.reportProgress&&(s.removeEventListener("progress",p),a!==null&&s.upload&&s.upload.removeEventListener("progress",g)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||n)(de(pc))};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})(),zj=new G(""),K7="XSRF-TOKEN",Q7=new G("",{providedIn:"root",factory:()=>K7}),Y7="X-XSRF-TOKEN",Z7=new G("",{providedIn:"root",factory:()=>Y7}),Xp=class{},X7=(()=>{class n{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,r){this.doc=t,this.cookieName=r}getToken(){let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=qp(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(r){return new(r||n)(de(Pe),de(Q7))};static \u0275prov=K({token:n,factory:n.\u0275fac})}return n})();function J7(n,e){let t=n.url.toLowerCase();if(!x(zj)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=x(Xp).getToken(),i=x(Z7);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var kD=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(kD||{});function eK(n,e){return{\u0275kind:n,\u0275providers:e}}function RD(...n){let e=[Ya,DD,Jv,{provide:Id,useExisting:Jv},{provide:Yp,useFactory:()=>x($7,{optional:!0})??x(DD)},{provide:TD,useValue:J7,multi:!0},{provide:zj,useValue:!0},{provide:Xp,useClass:X7}];for(let t of n)e.push(...t.\u0275providers);return Oa(e)}var Fj=new G("");function MD(){return eK(kD.LegacyInterceptors,[{provide:Fj,useFactory:H7},{provide:TD,useExisting:Fj,multi:!0}])}var Hj=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(de(Pe))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Jp=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:function(r){let i=null;return r?i=new(r||n):i=de(nK),i},providedIn:"root"})}return n})(),nK=(()=>{class n extends Jp{_doc;constructor(t){super(),this._doc=t}sanitize(t,r){if(r==null)return null;switch(t){case wr.NONE:return r;case wr.HTML:return uc(r,"HTML")?Hs(r):uS(this._doc,String(r)).toString();case wr.STYLE:return uc(r,"Style")?Hs(r):r;case wr.SCRIPT:if(uc(r,"Script"))return Hs(r);throw new se(5200,!1);case wr.URL:return uc(r,"URL")?Hs(r):hv(String(r));case wr.RESOURCE_URL:if(uc(r,"ResourceURL"))return Hs(r);throw new se(5201,!1);default:throw new se(5202,!1)}}bypassSecurityTrustHtml(t){return oS(t)}bypassSecurityTrustStyle(t){return sS(t)}bypassSecurityTrustScript(t){return aS(t)}bypassSecurityTrustUrl(t){return lS(t)}bypassSecurityTrustResourceUrl(t){return cS(t)}static \u0275fac=function(r){return new(r||n)(de(Pe))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var st="primary",fm=Symbol("RouteTitle"),BD=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Md(n){return new BD(n)}function rK(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function iK(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!es(n[t],e[t]))return!1;return!0}function es(n,e){let t=n?VD(n):void 0,r=e?VD(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!Xj(n[i],e[i]))return!1;return!0}function VD(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Xj(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function Jj(n){return n.length>0?n[n.length-1]:null}function ta(n){return sb(n)?n:Ws(n)?mn(Promise.resolve(n)):ye(n)}var oK={exact:t2,subset:n2},e2={exact:sK,subset:aK,ignored:()=>!0};function qj(n,e,t){return oK[t.paths](n.root,e.root,t.matrixParams)&&e2[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function sK(n,e){return es(n,e)}function t2(n,e,t){if(!_c(n.segments,e.segments)||!ny(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!t2(n.children[r],e.children[r],t))return!1;return!0}function aK(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Xj(n[t],e[t]))}function n2(n,e,t){return r2(n,e,e.segments,t)}function r2(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!_c(i,t)||e.hasChildren()||!ny(i,t,r))}else if(n.segments.length===t.length){if(!_c(n.segments,t)||!ny(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!n2(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!_c(n.segments,i)||!ny(n.segments,i,r)||!n.children[st]?!1:r2(n.children[st],e,o,r)}}function ny(n,e,t){return e.every((r,i)=>e2[t](n[i].parameters,r.parameters))}var ea=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Nt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Md(this.queryParams),this._queryParamMap}toString(){return uK.serialize(this)}},Nt=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ry(this)}},gc=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Md(this.parameters),this._parameterMap}toString(){return o2(this)}};function lK(n,e){return _c(n,e)&&n.every((t,r)=>es(t.parameters,e[r].parameters))}function _c(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function cK(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===st&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==st&&(t=t.concat(e(i,r)))}),t}var my=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:()=>new Od,providedIn:"root"})}return n})(),Od=class{parse(e){let t=new UD(e);return new ea(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${em(e.root,!0)}`,r=hK(e.queryParams),i=typeof e.fragment=="string"?`#${dK(e.fragment)}`:"";return`${t}${r}${i}`}},uK=new Od;function ry(n){return n.segments.map(e=>o2(e)).join("/")}function em(n,e){if(!n.hasChildren())return ry(n);if(e){let t=n.children[st]?em(n.children[st],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==st&&r.push(`${i}:${em(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=cK(n,(r,i)=>i===st?[em(n.children[st],!1)]:[`${i}:${em(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[st]!=null?`${ry(n)}/${t[0]}`:`${ry(n)}/(${t.join("//")})`}}function i2(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ey(n){return i2(n).replace(/%3B/gi,";")}function dK(n){return encodeURI(n)}function $D(n){return i2(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function iy(n){return decodeURIComponent(n)}function Gj(n){return iy(n.replace(/\+/g,"%20"))}function o2(n){return`${$D(n.path)}${fK(n.parameters)}`}function fK(n){return Object.entries(n).map(([e,t])=>`;${$D(e)}=${$D(t)}`).join("")}function hK(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${ey(t)}=${ey(i)}`).join("&"):`${ey(t)}=${ey(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var pK=/^[^\/()?;#]+/;function ND(n){let e=n.match(pK);return e?e[0]:""}var mK=/^[^\/()?;=#]+/;function gK(n){let e=n.match(mK);return e?e[0]:""}var _K=/^[^=?&#]+/;function bK(n){let e=n.match(_K);return e?e[0]:""}var vK=/^[^&#]+/;function yK(n){let e=n.match(vK);return e?e[0]:""}var UD=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Nt([],{}):new Nt([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[st]=new Nt(e,t)),r}parseSegment(){let e=ND(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new se(4009,!1);return this.capture(e),new gc(iy(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=gK(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=ND(this.remaining);i&&(r=i,this.capture(r))}e[iy(t)]=iy(r)}parseQueryParam(e){let t=bK(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=yK(this.remaining);s&&(r=s,this.capture(r))}let i=Gj(t),o=Gj(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=ND(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new se(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=st);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[st]:new Nt([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new se(4011,!1)}};function s2(n){return n.segments.length>0?new Nt([],{[st]:n}):n}function a2(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=a2(i);if(r===st&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Nt(n.segments,e);return wK(t)}function wK(n){if(n.numberOfChildren===1&&n.children[st]){let e=n.children[st];return new Nt(n.segments.concat(e.segments),e.children)}return n}function Pd(n){return n instanceof ea}function xK(n,e,t=null,r=null){let i=l2(n);return c2(i,e,t,r)}function l2(n){let e;function t(o){let s={};for(let l of o.children){let c=t(l);s[l.outlet]=c}let a=new Nt(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=s2(r);return e??i}function c2(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return FD(i,i,i,t,r);let o=CK(e);if(o.toRoot())return FD(i,i,new Nt([],{}),t,r);let s=EK(o,i,n),a=s.processChildren?nm(s.segmentGroup,s.index,o.commands):d2(s.segmentGroup,s.index,o.commands);return FD(i,s.segmentGroup,a,t,r)}function oy(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function om(n){return typeof n=="object"&&n!=null&&n.outlets}function FD(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([l,c])=>{o[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`});let s;n===e?s=t:s=u2(n,e,t);let a=s2(a2(s));return new ea(a,o,i)}function u2(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=u2(o,e,t)}),new Nt(n.segments,r)}var sy=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&oy(r[0]))throw new se(4003,!1);let i=r.find(om);if(i&&i!==Jj(r))throw new se(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function CK(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new sy(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new sy(t,e,r)}var Ad=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function EK(n,e,t){if(n.isAbsolute)return new Ad(e,!0,0);if(!t)return new Ad(e,!1,NaN);if(t.parent===null)return new Ad(t,!0,0);let r=oy(n.commands[0])?0:1,i=t.segments.length-1+r;return IK(t,i,n.numberOfDoubleDots)}function IK(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new se(4005,!1);i=r.segments.length}return new Ad(r,!1,i-o)}function SK(n){return om(n[0])?n[0].outlets:{[st]:n}}function d2(n,e,t){if(n??=new Nt([],{}),n.segments.length===0&&n.hasChildren())return nm(n,e,t);let r=DK(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Nt(n.segments.slice(0,r.pathIndex),{});return o.children[st]=new Nt(n.segments.slice(r.pathIndex),n.children),nm(o,0,i)}else return r.match&&i.length===0?new Nt(n.segments,{}):r.match&&!n.hasChildren()?zD(n,e,t):r.match?nm(n,0,i):zD(n,e,t)}function nm(n,e,t){if(t.length===0)return new Nt(n.segments,{});{let r=SK(t),i={};if(Object.keys(r).some(o=>o!==st)&&n.children[st]&&n.numberOfChildren===1&&n.children[st].segments.length===0){let o=nm(n.children[st],e,t);return new Nt(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=d2(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Nt(n.segments,i)}}function DK(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(om(a))break;let l=`${a}`,c=r<t.length-1?t[r+1]:null;if(i>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!Kj(l,c,s))return o;r+=2}else{if(!Kj(l,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function zD(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(om(o)){let l=TK(o.outlets);return new Nt(r,l)}if(i===0&&oy(t[0])){let l=n.segments[e];r.push(new gc(l.path,Wj(t[0]))),i++;continue}let s=om(o)?o.outlets[st]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&oy(a)?(r.push(new gc(s,Wj(a))),i+=2):(r.push(new gc(s,{})),i++)}return new Nt(r,{})}function TK(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=zD(new Nt([],{}),0,r))}),e}function Wj(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function Kj(n,e,t){return n==t.path&&es(e,t.parameters)}var rm="imperative",xr=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(xr||{}),qi=class{id;url;constructor(e,t){this.id=e,this.url=t}},Nd=class extends qi{type=xr.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Za=class extends qi{urlAfterRedirects;type=xr.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ai=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n}(ai||{}),ay=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(ay||{}),Js=class extends qi{reason;code;type=xr.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Xa=class extends qi{reason;code;type=xr.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},sm=class extends qi{error;target;type=xr.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},ly=class extends qi{urlAfterRedirects;state;type=xr.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},HD=class extends qi{urlAfterRedirects;state;type=xr.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},qD=class extends qi{urlAfterRedirects;state;shouldActivate;type=xr.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},GD=class extends qi{urlAfterRedirects;state;type=xr.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},WD=class extends qi{urlAfterRedirects;state;type=xr.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},KD=class{route;type=xr.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},QD=class{route;type=xr.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},YD=class{snapshot;type=xr.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ZD=class{snapshot;type=xr.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},XD=class{snapshot;type=xr.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},JD=class{snapshot;type=xr.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var am=class{},Fd=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function AK(n){return!(n instanceof am)&&!(n instanceof Fd)}function kK(n,e){return n.providers&&!n._injector&&(n._injector=Ap(n.providers,e,`Route: ${n.path}`)),n._injector??e}function lo(n){return n.outlet||st}function RK(n,e){let t=n.filter(r=>lo(r)===e);return t.push(...n.filter(r=>lo(r)!==e)),t}function jd(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var eT=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return jd(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new hm(this.rootInjector)}},hm=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new eT(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(de(cn))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),cy=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=tT(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=tT(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=nT(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return nT(e,this._root).map(t=>t.value)}};function tT(n,e){if(n===e.value)return e;for(let t of e.children){let r=tT(n,t);if(r)return r}return null}function nT(n,e){if(n===e.value)return[e];for(let t of e.children){let r=nT(n,t);if(r.length)return r.unshift(e),r}return[]}var Ci=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Td(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var uy=class extends cy{snapshot;constructor(e,t){super(e),this.snapshot=t,dT(this,e)}toString(){return this.snapshot.toString()}};function f2(n){let e=MK(n),t=new Lt([new gc("",{})]),r=new Lt({}),i=new Lt({}),o=new Lt({}),s=new Lt(""),a=new bc(t,r,o,s,i,st,n,e.root);return a.snapshot=e.root,new uy(new Ci(a,[]),e)}function MK(n){let e={},t={},r={},i="",o=new kd([],e,r,i,t,st,n,null,{});return new fy("",new Ci(o,[]))}var bc=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(be(c=>c[fm]))??ye(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(be(e=>Md(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(be(e=>Md(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function dy(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:m(m({},e.params),n.params),data:m(m({},e.data),n.data),resolve:m(m(m(m({},n.data),e.data),i?.data),n._resolvedData)}:r={params:m({},n.params),data:m({},n.data),resolve:m(m({},n.data),n._resolvedData??{})},i&&p2(i)&&(r.resolve[fm]=i.title),r}var kd=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[fm]}constructor(e,t,r,i,o,s,a,l,c){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Md(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Md(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},fy=class extends cy{url;constructor(e,t){super(t),this.url=e,dT(this,t)}toString(){return h2(this._root)}};function dT(n,e){e.value._routerState=n,e.children.forEach(t=>dT(n,t))}function h2(n){let e=n.children.length>0?` { ${n.children.map(h2).join(", ")} } `:"";return`${n.value}${e}`}function LD(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,es(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),es(e.params,t.params)||n.paramsSubject.next(t.params),iK(e.url,t.url)||n.urlSubject.next(t.url),es(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function rT(n,e){let t=es(n.params,e.params)&&lK(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||rT(n.parent,e.parent))}function p2(n){return typeof n.title=="string"||n.title===null}var OK=new G(""),m2=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=st;activateEvents=new Ie;deactivateEvents=new Ie;attachEvents=new Ie;detachEvents=new Ie;routerOutletData=qL(void 0);parentContexts=x(hm);location=x(tr);changeDetector=x(_n);inputBinder=x(gy,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new se(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new se(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new se(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new se(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new iT(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=me({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[xn]})}return n})(),iT=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===bc?this.route:e===hm?this.childContexts:e===OK?this.outletData:this.parent.get(e,t)}},gy=new G("");var g2=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=xe({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Pt(0,"router-outlet")},dependencies:[m2],encapsulation:2})}return n})();function fT(n){let e=n.children&&n.children.map(fT),t=e?w(m({},n),{children:e}):m({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==st&&(t.component=g2),t}function PK(n,e,t){let r=lm(n,e._root,t?t._root:void 0);return new uy(r,e)}function lm(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=NK(n,e,t);return new Ci(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>lm(n,a)),s}}let r=FK(e.value),i=e.children.map(o=>lm(n,o));return new Ci(r,i)}}function NK(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return lm(n,r,i);return lm(n,r)})}function FK(n){return new bc(new Lt(n.url),new Lt(n.params),new Lt(n.queryParams),new Lt(n.fragment),new Lt(n.data),n.outlet,n.component,n)}var cm=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},_2="ngNavigationCancelingError";function hy(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Pd(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=b2(!1,ai.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function b2(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[_2]=!0,t.cancellationCode=e,t}function LK(n){return v2(n)&&Pd(n.url)}function v2(n){return!!n&&n[_2]}var jK=(n,e,t,r)=>be(i=>(new oT(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),oT=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),LD(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Td(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Td(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Td(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Td(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new JD(o.value.snapshot))}),e.children.length&&this.forwardEvent(new ZD(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(LD(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),LD(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},py=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Rd=class{component;route;constructor(e,t){this.component=e,this.route=t}};function BK(n,e,t){let r=n._root,i=e?e._root:null;return tm(r,i,t,[r.value])}function VK(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Bd(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!fE(n)?n:e.get(n):r}function tm(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Td(e);return n.children.forEach(s=>{$K(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>im(a,t.getContext(s),i)),i}function $K(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=UK(s,o,o.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new py(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?tm(n,e,a?a.children:null,r,i):tm(n,e,t,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Rd(a.outlet.component,s))}else s&&im(e,a,i),i.canActivateChecks.push(new py(r)),o.component?tm(n,null,a?a.children:null,r,i):tm(n,null,t,r,i);return i}function UK(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!_c(n.url,e.url);case"pathParamsOrQueryParamsChange":return!_c(n.url,e.url)||!es(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!rT(n,e)||!es(n.queryParams,e.queryParams);case"paramsChange":default:return!rT(n,e)}}function im(n,e,t){let r=Td(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?im(s,e.children.getContext(o),t):im(s,null,t):im(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Rd(e.outlet.component,i)):t.canDeactivateChecks.push(new Rd(null,i)):t.canDeactivateChecks.push(new Rd(null,i))}function pm(n){return typeof n=="function"}function zK(n){return typeof n=="boolean"}function HK(n){return n&&pm(n.canLoad)}function qK(n){return n&&pm(n.canActivate)}function GK(n){return n&&pm(n.canActivateChild)}function WK(n){return n&&pm(n.canDeactivate)}function KK(n){return n&&pm(n.canMatch)}function y2(n){return n instanceof Rs||n?.name==="EmptyError"}var ty=Symbol("INITIAL_VALUE");function Ld(){return $n(n=>Uu(n.map(e=>e.pipe(wn(1),Xn(ty)))).pipe(be(e=>{for(let t of e)if(t!==!0){if(t===ty)return ty;if(t===!1||QK(t))return t}return!0}),Ze(e=>e!==ty),wn(1)))}function QK(n){return Pd(n)||n instanceof cm}function YK(n,e){return kn(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?ye(w(m({},t),{guardsResult:!0})):ZK(s,r,i,n).pipe(kn(a=>a&&zK(a)?XK(r,o,n,e):ye(a)),be(a=>w(m({},t),{guardsResult:a})))})}function ZK(n,e,t,r){return mn(n).pipe(kn(i=>rQ(i.component,i.route,t,e,r)),Vo(i=>i!==!0,!0))}function XK(n,e,t,r){return mn(e).pipe(Ta(i=>Da(eQ(i.route.parent,r),JK(i.route,r),nQ(n,i.path,t),tQ(n,i.route,t))),Vo(i=>i!==!0,!0))}function JK(n,e){return n!==null&&e&&e(new XD(n)),ye(!0)}function eQ(n,e){return n!==null&&e&&e(new YD(n)),ye(!0)}function tQ(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ye(!0);let i=r.map(o=>Ms(()=>{let s=jd(e)??t,a=Bd(o,s),l=qK(a)?a.canActivate(e,n):yr(s,()=>a(e,n));return ta(l).pipe(Vo())}));return ye(i).pipe(Ld())}function nQ(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>VK(s)).filter(s=>s!==null).map(s=>Ms(()=>{let a=s.guards.map(l=>{let c=jd(s.node)??t,u=Bd(l,c),d=GK(u)?u.canActivateChild(r,n):yr(c,()=>u(r,n));return ta(d).pipe(Vo())});return ye(a).pipe(Ld())}));return ye(o).pipe(Ld())}function rQ(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return ye(!0);let s=o.map(a=>{let l=jd(e)??i,c=Bd(a,l),u=WK(c)?c.canDeactivate(n,e,t,r):yr(l,()=>c(n,e,t,r));return ta(u).pipe(Vo())});return ye(s).pipe(Ld())}function iQ(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return ye(!0);let o=i.map(s=>{let a=Bd(s,n),l=HK(a)?a.canLoad(e,t):yr(n,()=>a(e,t));return ta(l)});return ye(o).pipe(Ld(),w2(r))}function w2(n){return qC(gn(e=>{if(typeof e!="boolean")throw hy(n,e)}),be(e=>e===!0))}function oQ(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return ye(!0);let o=i.map(s=>{let a=Bd(s,n),l=KK(a)?a.canMatch(e,t):yr(n,()=>a(e,t));return ta(l)});return ye(o).pipe(Ld(),w2(r))}var um=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},dm=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Dd(n){return Sa(new um(n))}function sQ(n){return Sa(new se(4e3,!1))}function aQ(n){return Sa(b2(!1,ai.GuardRejected))}var sT=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ye(r);if(i.numberOfChildren>1||!i.children[st])return sQ(`${e.redirectTo}`);i=i.children[st]}}applyRedirectCommands(e,t,r,i,o){return lQ(t,i,o).pipe(be(s=>{if(s instanceof ea)throw new dm(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new dm(a);return a}))}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new ea(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(e,l,r,i)}),new Nt(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new se(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function lQ(n,e,t){if(typeof n=="string")return ye(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:l,params:c,data:u,title:d}=e;return ta(yr(t,()=>r({params:c,data:u,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:l,title:d})))}var aT={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function cQ(n,e,t,r,i){let o=x2(n,e,t);return o.matched?(r=kK(e,r),oQ(r,e,t,i).pipe(be(s=>s===!0?o:m({},aT)))):ye(o)}function x2(n,e,t){if(e.path==="**")return uQ(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?m({},aT):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||rK)(t,n,e);if(!i)return m({},aT);let o={};Object.entries(i.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=i.consumed.length>0?m(m({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function uQ(n){return{matched:!0,parameters:n.length>0?Jj(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function Qj(n,e,t,r){return t.length>0&&hQ(n,t,r)?{segmentGroup:new Nt(e,fQ(r,new Nt(t,n.children))),slicedSegments:[]}:t.length===0&&pQ(n,t,r)?{segmentGroup:new Nt(n.segments,dQ(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Nt(n.segments,n.children),slicedSegments:t}}function dQ(n,e,t,r){let i={};for(let o of t)if(_y(n,e,o)&&!r[lo(o)]){let s=new Nt([],{});i[lo(o)]=s}return m(m({},r),i)}function fQ(n,e){let t={};t[st]=e;for(let r of n)if(r.path===""&&lo(r)!==st){let i=new Nt([],{});t[lo(r)]=i}return t}function hQ(n,e,t){return t.some(r=>_y(n,e,r)&&lo(r)!==st)}function pQ(n,e,t){return t.some(r=>_y(n,e,r))}function _y(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function mQ(n,e,t){return e.length===0&&!n.children[t]}var lT=class{};function gQ(n,e,t,r,i,o,s="emptyOnly"){return new cT(n,e,t,r,i,s,o).recognize()}var _Q=31,cT=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new sT(this.urlSerializer,this.urlTree)}noMatchError(e){return new se(4002,`'${e.segmentGroup}'`)}recognize(){let e=Qj(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(be(({children:t,rootSnapshot:r})=>{let i=new Ci(r,t),o=new fy("",i),s=xK(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new kd([],Object.freeze({}),Object.freeze(m({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),st,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,st,t).pipe(be(r=>({children:r,rootSnapshot:t})),Pi(r=>{if(r instanceof dm)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof um?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(be(s=>s instanceof Ci?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return mn(o).pipe(Ta(s=>{let a=r.children[s],l=RK(t,s);return this.processSegmentGroup(e,l,a,s,i)}),ZC((s,a)=>(s.push(...a),s)),Aa(null),YC(),kn(s=>{if(s===null)return Dd(r);let a=C2(s);return bQ(a),ye(a)}))}processSegment(e,t,r,i,o,s,a){return mn(t).pipe(Ta(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,r,i,o,s,a).pipe(Pi(c=>{if(c instanceof um)return ye(null);throw c}))),Vo(l=>!!l),Pi(l=>{if(y2(l))return mQ(r,i,o)?ye(new lT):Dd(r);throw l}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,l){return lo(r)!==s&&(s===st||!_y(i,o,r))?Dd(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,l):Dd(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:l,parameters:c,consumedSegments:u,positionalParamSegments:d,remainingSegments:h}=x2(t,i,o);if(!l)return Dd(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>_Q&&(this.allowRedirects=!1));let f=new kd(o,c,Object.freeze(m({},this.urlTree.queryParams)),this.urlTree.fragment,Yj(i),lo(i),i.component??i._loadedComponent??null,i,Zj(i)),p=dy(f,a,this.paramsInheritanceStrategy);return f.params=Object.freeze(p.params),f.data=Object.freeze(p.data),this.applyRedirects.applyRedirectCommands(u,i.redirectTo,d,f,e).pipe($n(_=>this.applyRedirects.lineralizeSegments(i,_)),kn(_=>this.processSegment(e,r,t,_.concat(h),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=cQ(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe($n(l=>l.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe($n(({routes:c})=>{let u=r._loadedInjector??e,{parameters:d,consumedSegments:h,remainingSegments:f}=l,p=new kd(h,d,Object.freeze(m({},this.urlTree.queryParams)),this.urlTree.fragment,Yj(r),lo(r),r.component??r._loadedComponent??null,r,Zj(r)),g=dy(p,s,this.paramsInheritanceStrategy);p.params=Object.freeze(g.params),p.data=Object.freeze(g.data);let{segmentGroup:_,slicedSegments:y}=Qj(t,h,f,c);if(y.length===0&&_.hasChildren())return this.processChildren(u,c,_,p).pipe(be(T=>new Ci(p,T)));if(c.length===0&&y.length===0)return ye(new Ci(p,[]));let E=lo(r)===o;return this.processSegment(u,c,_,y,E?st:o,!0,p).pipe(be(T=>new Ci(p,T instanceof Ci?[T]:[])))}))):Dd(t)))}getChildConfig(e,t,r){return t.children?ye({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?ye({routes:t._loadedRoutes,injector:t._loadedInjector}):iQ(e,t,r,this.urlSerializer).pipe(kn(i=>i?this.configLoader.loadChildren(e,t).pipe(gn(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):aQ(t))):ye({routes:[],injector:e})}};function bQ(n){n.sort((e,t)=>e.value.outlet===st?-1:t.value.outlet===st?1:e.value.outlet.localeCompare(t.value.outlet))}function vQ(n){let e=n.value.routeConfig;return e&&e.path===""}function C2(n){let e=[],t=new Set;for(let r of n){if(!vQ(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=C2(r.children);e.push(new Ci(r.value,i))}return e.filter(r=>!t.has(r))}function Yj(n){return n.data||{}}function Zj(n){return n.resolve||{}}function yQ(n,e,t,r,i,o){return kn(s=>gQ(n,e,t,r,s.extractedUrl,i,o).pipe(be(({state:a,tree:l})=>w(m({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function wQ(n,e){return kn(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ye(t);let o=new Set(i.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let c of E2(l))s.add(c);let a=0;return mn(s).pipe(Ta(l=>o.has(l)?xQ(l,r,n,e):(l.data=dy(l,l.parent,n).resolve,ye(void 0))),gn(()=>a++),Gu(1),kn(l=>a===s.size?ye(t):lr))})}function E2(n){let e=n.children.map(t=>E2(t)).flat();return[n,...e]}function xQ(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!p2(i)&&(o[fm]=i.title),Ms(()=>(n.data=dy(n,n.parent,t).resolve,CQ(o,n,e,r).pipe(be(s=>(n._resolvedData=s,n.data=m(m({},n.data),s),null)))))}function CQ(n,e,t,r){let i=VD(n);if(i.length===0)return ye({});let o={};return mn(i).pipe(kn(s=>EQ(n[s],e,t,r).pipe(Vo(),gn(a=>{if(a instanceof cm)throw hy(new Od,a);o[s]=a}))),Gu(1),be(()=>o),Pi(s=>y2(s)?lr:Sa(s)))}function EQ(n,e,t,r){let i=jd(e)??r,o=Bd(n,i),s=o.resolve?o.resolve(e,t):yr(i,()=>o(e,t));return ta(s)}function jD(n){return $n(e=>{let t=n(e);return t?mn(t).pipe(be(()=>e)):ye(e)})}var I2=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===st);return r}getResolvedTitleForRoute(t){return t.data[fm]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:()=>x(IQ),providedIn:"root"})}return n})(),IQ=(()=>{class n extends I2{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(de(Hj))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),by=new G("",{providedIn:"root",factory:()=>({})}),vy=new G(""),S2=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=x(zS);loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return ye(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=ta(yr(t,()=>r.loadComponent())).pipe(be(D2),gn(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Bo(()=>{this.componentLoaders.delete(r)})),o=new ju(i,()=>new re).pipe(Lu());return this.componentLoaders.set(r,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ye({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=SQ(r,this.compiler,t,this.onLoadEndListener).pipe(Bo(()=>{this.childrenLoaders.delete(r)})),s=new ju(o,()=>new re).pipe(Lu());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function SQ(n,e,t,r){return ta(yr(t,()=>n.loadChildren())).pipe(be(D2),kn(i=>i instanceof yv||Array.isArray(i)?ye(i):mn(e.compileModuleAsync(i))),be(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(vy,[],{optional:!0,self:!0}).flat()),{routes:s.map(fT),injector:o}}))}function DQ(n){return n&&typeof n=="object"&&"default"in n}function D2(n){return DQ(n)?n.default:n}var hT=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:()=>x(TQ),providedIn:"root"})}return n})(),TQ=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),T2=new G("");var A2=new G(""),k2=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new re;transitionAbortWithErrorSubject=new re;configLoader=x(S2);environmentInjector=x(cn);destroyRef=x(dr);urlSerializer=x(my);rootContexts=x(hm);location=x(Ka);inputBindingEnabled=x(gy,{optional:!0})!==null;titleStrategy=x(I2);options=x(by,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=x(hT);createViewTransition=x(T2,{optional:!0});navigationErrorHandler=x(A2,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>ye(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new KD(i)),r=i=>this.events.next(new QD(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(w(m({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))}setupNavigations(t){return this.transitions=new Lt(null),this.transitions.pipe(Ze(r=>r!==null),$n(r=>{let i=!1;return ye(r).pipe($n(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",ai.SupersededByNewNavigation),lr;this.currentTransition=r,this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?w(m({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()};let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&a!=="reload"){let l="";return this.events.next(new Xa(o.id,this.urlSerializer.serialize(o.rawUrl),l,ay.IgnoredSameUrlNavigation)),o.resolve(!1),lr}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return ye(o).pipe($n(l=>(this.events.next(new Nd(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?lr:Promise.resolve(l))),yQ(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),gn(l=>{r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation=w(m({},this.currentNavigation),{finalUrl:l.urlAfterRedirects});let c=new ly(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:l,extractedUrl:c,source:u,restoredState:d,extras:h}=o,f=new Nd(l,this.urlSerializer.serialize(c),u,d);this.events.next(f);let p=f2(this.rootComponentType).snapshot;return this.currentTransition=r=w(m({},o),{targetSnapshot:p,urlAfterRedirects:c,extras:w(m({},h),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=c,ye(r)}else{let l="";return this.events.next(new Xa(o.id,this.urlSerializer.serialize(o.extractedUrl),l,ay.IgnoredByUrlHandlingStrategy)),o.resolve(!1),lr}}),gn(o=>{let s=new HD(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),be(o=>(this.currentTransition=r=w(m({},o),{guards:BK(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),YK(this.environmentInjector,o=>this.events.next(o)),gn(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw hy(this.urlSerializer,o.guardsResult);let s=new qD(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),Ze(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",ai.GuardRejected),!1)),jD(o=>{if(o.guards.canActivateChecks.length!==0)return ye(o).pipe(gn(s=>{let a=new GD(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),$n(s=>{let a=!1;return ye(s).pipe(wQ(this.paramsInheritanceStrategy,this.environmentInjector),gn({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",ai.NoDataFromResolver)}}))}),gn(s=>{let a=new WD(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),jD(o=>{let s=a=>{let l=[];if(a.routeConfig?.loadComponent&&!a.routeConfig._loadedComponent){let c=jd(a)??this.environmentInjector;l.push(this.configLoader.loadComponent(c,a.routeConfig).pipe(gn(u=>{a.component=u}),be(()=>{})))}for(let c of a.children)l.push(...s(c));return l};return Uu(s(o.targetSnapshot.root)).pipe(Aa(null),wn(1))}),jD(()=>this.afterPreactivation()),$n(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?mn(a).pipe(be(()=>r)):ye(r)}),be(o=>{let s=PK(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=w(m({},o),{targetRouterState:s}),this.currentNavigation.targetRouterState=s,r}),gn(()=>{this.events.next(new am)}),jK(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),wn(1),Gt(new Be(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(Ze(()=>!i&&!r.targetRouterState),gn(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",ai.Aborted)}))),gn({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Za(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Gt(this.transitionAbortWithErrorSubject.pipe(gn(o=>{throw o}))),Bo(()=>{i||this.cancelNavigationTransition(r,"",ai.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),Pi(o=>{if(this.destroyed)return r.resolve(!1),lr;if(i=!0,v2(o))this.events.next(new Js(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),LK(o)?this.events.next(new Fd(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new sm(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=yr(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof cm){let{message:l,cancellationCode:c}=hy(this.urlSerializer,a);this.events.next(new Js(r.id,this.urlSerializer.serialize(r.extractedUrl),l,c)),this.events.next(new Fd(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return lr}))}))}cancelNavigationTransition(t,r,i){let o=new Js(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function AQ(n){return n!==rm}var kQ=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:()=>x(RQ),providedIn:"root"})}return n})(),uT=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},RQ=(()=>{class n extends uT{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Vt(n)))(i||n)}})();static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),R2=(()=>{class n{urlSerializer=x(my);options=x(by,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=x(Ka);urlHandlingStrategy=x(hT);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new ea;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof ea?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=f2(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:()=>x(MQ),providedIn:"root"})}return n})(),MQ=(()=>{class n extends R2{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Nd?this.updateStateMemento():t instanceof Xa?this.commitTransition(r):t instanceof ly?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof am?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Js&&t.code!==ai.SupersededByNewNavigation&&t.code!==ai.Redirect?this.restoreHistory(r):t instanceof sm?this.restoreHistory(r,!0):t instanceof Za&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,l=m(m({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",l)}else{let a=m(m({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Vt(n)))(i||n)}})();static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function M2(n,e){n.events.pipe(Ze(t=>t instanceof Za||t instanceof Js||t instanceof sm||t instanceof Xa),be(t=>t instanceof Za||t instanceof Xa?0:(t instanceof Js?t.code===ai.Redirect||t.code===ai.SupersededByNewNavigation:!1)?2:1),Ze(t=>t!==2),wn(1)).subscribe(()=>{e()})}var OQ={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},PQ={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},pT=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=x(Cv);stateManager=x(R2);options=x(by,{optional:!0})||{};pendingTasks=x(qo);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=x(k2);urlSerializer=x(my);location=x(Ka);urlHandlingStrategy=x(hT);injector=x(cn);_events=new re;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=x(kQ);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=x(vy,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!x(gy,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new lt;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Js&&r.code!==ai.Redirect&&r.code!==ai.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Za)this.navigated=!0;else if(r instanceof Fd){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l=m({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||AQ(i.source)},s);this.scheduleNavigation(a,rm,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}AK(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),rm,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let l=m({},i);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(l=>{this.disposed||this.injector.get(ri)(l)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(fT),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=r,c=l?this.currentUrlTree.fragment:s,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=m(m({},this.currentUrlTree.queryParams),o);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let h=i?i.snapshot:this.routerState.snapshot.root;d=l2(h)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),d=this.currentUrlTree.root}return c2(d,t,u,c??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Pd(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,rm,null,r)}navigate(t,r={skipLocationChange:!1}){return NQ(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=m({},OQ):r===!1?i=m({},PQ):i=r,Pd(t))return qj(this.currentUrlTree,t,i);let o=this.parseUrl(t);return qj(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,c;s?(a=s.resolve,l=s.reject,c=s.promise):c=new Promise((d,h)=>{a=d,l=h});let u=this.pendingTasks.add();return M2(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function NQ(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new se(4008,!1)}var FQ=new G("");function mT(n,...e){return Oa([{provide:vy,multi:!0,useValue:n},[],{provide:bc,useFactory:LQ,deps:[pT]},{provide:Iv,multi:!0,useFactory:jQ},e.map(t=>t.\u0275providers)])}function LQ(n){return n.routerState.root}function jQ(){let n=x(ke);return e=>{let t=n.get(qr);if(e!==t.components[0])return;let r=n.get(pT),i=n.get(BQ);n.get(VQ)===1&&r.initialNavigation(),n.get($Q,null,{optional:!0})?.setUpPreloading(),n.get(FQ,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var BQ=new G("",{factory:()=>new re}),VQ=new G("",{providedIn:"root",factory:()=>1});var $Q=new G("");var O2=[];function P2(n,e){let r=!e?.manualCleanup?e?.injector?.get(dr)??x(dr):null,i=zQ(e?.equal),o;e?.requireSync?o=kt({kind:0},{equal:i}):o=kt({kind:1,value:e?.initialValue},{equal:i});let s,a=n.subscribe({next:l=>o.set({kind:1,value:l}),error:l=>{o.set({kind:2,error:l}),s?.()},complete:()=>{s?.()}});if(e?.requireSync&&o().kind===0)throw new se(601,!1);return s=r?.onDestroy(a.unsubscribe.bind(a)),Wr(()=>{let l=o();switch(l.kind){case 1:return l.value;case 2:throw l.error;case 0:throw new se(601,!1)}},{equal:e?.equal})}function zQ(n=Object.is){return(e,t)=>e.kind===1&&t.kind===1&&n(e.value,t.value)}function vT(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var yc=vT();function V2(n){yc=n}var _m={exec:()=>null};function Ft(n,e=""){let t=typeof n=="string"?n:n.source,r={replace:(i,o)=>{let s=typeof o=="string"?o:o.source;return s=s.replace(Kr.caret,"$1"),t=t.replace(i,s),r},getRegex:()=>new RegExp(t,e)};return r}var Kr={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:n=>new RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}#`),htmlBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}<(?:[a-z].*>|!--)`,"i")},HQ=/^(?:[ \t]*(?:\n|$))+/,qQ=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,GQ=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,bm=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,WQ=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,yT=/(?:[*+-]|\d{1,9}[.)])/,$2=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,U2=Ft($2).replace(/bull/g,yT).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),KQ=Ft($2).replace(/bull/g,yT).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),wT=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,QQ=/^[^\n]+/,xT=/(?!\s*\])(?:\\.|[^\[\]\\])+/,YQ=Ft(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",xT).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),ZQ=Ft(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,yT).getRegex(),Ey="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",CT=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,XQ=Ft("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",CT).replace("tag",Ey).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),z2=Ft(wT).replace("hr",bm).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ey).getRegex(),JQ=Ft(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",z2).getRegex(),ET={blockquote:JQ,code:qQ,def:YQ,fences:GQ,heading:WQ,hr:bm,html:XQ,lheading:U2,list:ZQ,newline:HQ,paragraph:z2,table:_m,text:QQ},N2=Ft("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",bm).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ey).getRegex(),eY=w(m({},ET),{lheading:KQ,table:N2,paragraph:Ft(wT).replace("hr",bm).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",N2).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ey).getRegex()}),tY=w(m({},ET),{html:Ft(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",CT).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:_m,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Ft(wT).replace("hr",bm).replace("heading",` *#{1,6} *[^
]`).replace("lheading",U2).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()}),nY=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,rY=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,H2=/^( {2,}|\\)\n(?!\s*$)/,iY=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Iy=/[\p{P}\p{S}]/u,IT=/[\s\p{P}\p{S}]/u,q2=/[^\s\p{P}\p{S}]/u,oY=Ft(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,IT).getRegex(),G2=/(?!~)[\p{P}\p{S}]/u,sY=/(?!~)[\s\p{P}\p{S}]/u,aY=/(?:[^\s\p{P}\p{S}]|~)/u,lY=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,W2=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,cY=Ft(W2,"u").replace(/punct/g,Iy).getRegex(),uY=Ft(W2,"u").replace(/punct/g,G2).getRegex(),K2="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",dY=Ft(K2,"gu").replace(/notPunctSpace/g,q2).replace(/punctSpace/g,IT).replace(/punct/g,Iy).getRegex(),fY=Ft(K2,"gu").replace(/notPunctSpace/g,aY).replace(/punctSpace/g,sY).replace(/punct/g,G2).getRegex(),hY=Ft("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,q2).replace(/punctSpace/g,IT).replace(/punct/g,Iy).getRegex(),pY=Ft(/\\(punct)/,"gu").replace(/punct/g,Iy).getRegex(),mY=Ft(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),gY=Ft(CT).replace("(?:-->|$)","-->").getRegex(),_Y=Ft("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",gY).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),xy=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,bY=Ft(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",xy).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Q2=Ft(/^!?\[(label)\]\[(ref)\]/).replace("label",xy).replace("ref",xT).getRegex(),Y2=Ft(/^!?\[(ref)\](?:\[\])?/).replace("ref",xT).getRegex(),vY=Ft("reflink|nolink(?!\\()","g").replace("reflink",Q2).replace("nolink",Y2).getRegex(),ST={_backpedal:_m,anyPunctuation:pY,autolink:mY,blockSkip:lY,br:H2,code:rY,del:_m,emStrongLDelim:cY,emStrongRDelimAst:dY,emStrongRDelimUnd:hY,escape:nY,link:bY,nolink:Y2,punctuation:oY,reflink:Q2,reflinkSearch:vY,tag:_Y,text:iY,url:_m},yY=w(m({},ST),{link:Ft(/^!?\[(label)\]\((.*?)\)/).replace("label",xy).getRegex(),reflink:Ft(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",xy).getRegex()}),gT=w(m({},ST),{emStrongRDelimAst:fY,emStrongLDelim:uY,url:Ft(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),wY=w(m({},gT),{br:Ft(H2).replace("{2,}","*").getRegex(),text:Ft(gT.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),yy={normal:ET,gfm:eY,pedantic:tY},mm={normal:ST,gfm:gT,breaks:wY,pedantic:yY},xY={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},F2=n=>xY[n];function ts(n,e){if(e){if(Kr.escapeTest.test(n))return n.replace(Kr.escapeReplace,F2)}else if(Kr.escapeTestNoEncode.test(n))return n.replace(Kr.escapeReplaceNoEncode,F2);return n}function L2(n){try{n=encodeURI(n).replace(Kr.percentDecode,"%")}catch{return null}return n}function j2(n,e){let t=n.replace(Kr.findPipe,(o,s,a)=>{let l=!1,c=s;for(;--c>=0&&a[c]==="\\";)l=!l;return l?"|":" |"}),r=t.split(Kr.splitPipe),i=0;if(r[0].trim()||r.shift(),r.length>0&&!r.at(-1)?.trim()&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(Kr.slashPipe,"|");return r}function gm(n,e,t){let r=n.length;if(r===0)return"";let i=0;for(;i<r;){let o=n.charAt(r-i-1);if(o===e&&!t)i++;else if(o!==e&&t)i++;else break}return n.slice(0,r-i)}function CY(n,e){if(n.indexOf(e[1])===-1)return-1;let t=0;for(let r=0;r<n.length;r++)if(n[r]==="\\")r++;else if(n[r]===e[0])t++;else if(n[r]===e[1]&&(t--,t<0))return r;return t>0?-2:-1}function B2(n,e,t,r,i){let o=e.href,s=e.title||null,a=n[1].replace(i.other.outputLinkReplace,"$1");r.state.inLink=!0;let l={type:n[0].charAt(0)==="!"?"image":"link",raw:t,href:o,title:s,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,l}function EY(n,e,t){let r=n.match(t.other.indentCodeCompensation);if(r===null)return e;let i=r[1];return e.split(`
`).map(o=>{let s=o.match(t.other.beginningSpace);if(s===null)return o;let[a]=s;return a.length>=i.length?o.slice(i.length):o}).join(`
`)}var Cy=class{options;rules;lexer;constructor(n){this.options=n||yc}space(n){let e=this.rules.block.newline.exec(n);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(n){let e=this.rules.block.code.exec(n);if(e){let t=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?t:gm(t,`
`)}}}fences(n){let e=this.rules.block.fences.exec(n);if(e){let t=e[0],r=EY(t,e[3]||"",this.rules);return{type:"code",raw:t,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:r}}}heading(n){let e=this.rules.block.heading.exec(n);if(e){let t=e[2].trim();if(this.rules.other.endingHash.test(t)){let r=gm(t,"#");(this.options.pedantic||!r||this.rules.other.endingSpaceChar.test(r))&&(t=r.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:t,tokens:this.lexer.inline(t)}}}hr(n){let e=this.rules.block.hr.exec(n);if(e)return{type:"hr",raw:gm(e[0],`
`)}}blockquote(n){let e=this.rules.block.blockquote.exec(n);if(e){let t=gm(e[0],`
`).split(`
`),r="",i="",o=[];for(;t.length>0;){let s=!1,a=[],l;for(l=0;l<t.length;l++)if(this.rules.other.blockquoteStart.test(t[l]))a.push(t[l]),s=!0;else if(!s)a.push(t[l]);else break;t=t.slice(l);let c=a.join(`
`),u=c.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");r=r?`${r}
${c}`:c,i=i?`${i}
${u}`:u;let d=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(u,o,!0),this.lexer.state.top=d,t.length===0)break;let h=o.at(-1);if(h?.type==="code")break;if(h?.type==="blockquote"){let f=h,p=f.raw+`
`+t.join(`
`),g=this.blockquote(p);o[o.length-1]=g,r=r.substring(0,r.length-f.raw.length)+g.raw,i=i.substring(0,i.length-f.text.length)+g.text;break}else if(h?.type==="list"){let f=h,p=f.raw+`
`+t.join(`
`),g=this.list(p);o[o.length-1]=g,r=r.substring(0,r.length-h.raw.length)+g.raw,i=i.substring(0,i.length-f.raw.length)+g.raw,t=p.substring(o.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:o,text:i}}}list(n){let e=this.rules.block.list.exec(n);if(e){let t=e[1].trim(),r=t.length>1,i={type:"list",raw:"",ordered:r,start:r?+t.slice(0,-1):"",loose:!1,items:[]};t=r?`\\d{1,9}\\${t.slice(-1)}`:`\\${t}`,this.options.pedantic&&(t=r?t:"[*+-]");let o=this.rules.other.listItemRegex(t),s=!1;for(;n;){let l=!1,c="",u="";if(!(e=o.exec(n))||this.rules.block.hr.test(n))break;c=e[0],n=n.substring(c.length);let d=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,y=>" ".repeat(3*y.length)),h=n.split(`
`,1)[0],f=!d.trim(),p=0;if(this.options.pedantic?(p=2,u=d.trimStart()):f?p=e[1].length+1:(p=e[2].search(this.rules.other.nonSpaceChar),p=p>4?1:p,u=d.slice(p),p+=e[1].length),f&&this.rules.other.blankLine.test(h)&&(c+=h+`
`,n=n.substring(h.length+1),l=!0),!l){let y=this.rules.other.nextBulletRegex(p),E=this.rules.other.hrRegex(p),T=this.rules.other.fencesBeginRegex(p),A=this.rules.other.headingBeginRegex(p),P=this.rules.other.htmlBeginRegex(p);for(;n;){let R=n.split(`
`,1)[0],W;if(h=R,this.options.pedantic?(h=h.replace(this.rules.other.listReplaceNesting,"  "),W=h):W=h.replace(this.rules.other.tabCharGlobal,"    "),T.test(h)||A.test(h)||P.test(h)||y.test(h)||E.test(h))break;if(W.search(this.rules.other.nonSpaceChar)>=p||!h.trim())u+=`
`+W.slice(p);else{if(f||d.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||T.test(d)||A.test(d)||E.test(d))break;u+=`
`+h}!f&&!h.trim()&&(f=!0),c+=R+`
`,n=n.substring(R.length+1),d=W.slice(p)}}i.loose||(s?i.loose=!0:this.rules.other.doubleBlankLine.test(c)&&(s=!0));let g=null,_;this.options.gfm&&(g=this.rules.other.listIsTask.exec(u),g&&(_=g[0]!=="[ ] ",u=u.replace(this.rules.other.listReplaceTask,""))),i.items.push({type:"list_item",raw:c,task:!!g,checked:_,loose:!1,text:u,tokens:[]}),i.raw+=c}let a=i.items.at(-1);if(a)a.raw=a.raw.trimEnd(),a.text=a.text.trimEnd();else return;i.raw=i.raw.trimEnd();for(let l=0;l<i.items.length;l++)if(this.lexer.state.top=!1,i.items[l].tokens=this.lexer.blockTokens(i.items[l].text,[]),!i.loose){let c=i.items[l].tokens.filter(d=>d.type==="space"),u=c.length>0&&c.some(d=>this.rules.other.anyLine.test(d.raw));i.loose=u}if(i.loose)for(let l=0;l<i.items.length;l++)i.items[l].loose=!0;return i}}html(n){let e=this.rules.block.html.exec(n);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(n){let e=this.rules.block.def.exec(n);if(e){let t=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:t,raw:e[0],href:r,title:i}}}table(n){let e=this.rules.block.table.exec(n);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;let t=j2(e[1]),r=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),i=e[3]?.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],o={type:"table",raw:e[0],header:[],align:[],rows:[]};if(t.length===r.length){for(let s of r)this.rules.other.tableAlignRight.test(s)?o.align.push("right"):this.rules.other.tableAlignCenter.test(s)?o.align.push("center"):this.rules.other.tableAlignLeft.test(s)?o.align.push("left"):o.align.push(null);for(let s=0;s<t.length;s++)o.header.push({text:t[s],tokens:this.lexer.inline(t[s]),header:!0,align:o.align[s]});for(let s of i)o.rows.push(j2(s,o.header.length).map((a,l)=>({text:a,tokens:this.lexer.inline(a),header:!1,align:o.align[l]})));return o}}lheading(n){let e=this.rules.block.lheading.exec(n);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(n){let e=this.rules.block.paragraph.exec(n);if(e){let t=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:t,tokens:this.lexer.inline(t)}}}text(n){let e=this.rules.block.text.exec(n);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(n){let e=this.rules.inline.escape.exec(n);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(n){let e=this.rules.inline.tag.exec(n);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(n){let e=this.rules.inline.link.exec(n);if(e){let t=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(t)){if(!this.rules.other.endAngleBracket.test(t))return;let o=gm(t.slice(0,-1),"\\");if((t.length-o.length)%2===0)return}else{let o=CY(e[2],"()");if(o===-2)return;if(o>-1){let a=(e[0].indexOf("!")===0?5:4)+e[1].length+o;e[2]=e[2].substring(0,o),e[0]=e[0].substring(0,a).trim(),e[3]=""}}let r=e[2],i="";if(this.options.pedantic){let o=this.rules.other.pedanticHrefTitle.exec(r);o&&(r=o[1],i=o[3])}else i=e[3]?e[3].slice(1,-1):"";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(t)?r=r.slice(1):r=r.slice(1,-1)),B2(e,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(n,e){let t;if((t=this.rules.inline.reflink.exec(n))||(t=this.rules.inline.nolink.exec(n))){let r=(t[2]||t[1]).replace(this.rules.other.multipleSpaceGlobal," "),i=e[r.toLowerCase()];if(!i){let o=t[0].charAt(0);return{type:"text",raw:o,text:o}}return B2(t,i,t[0],this.lexer,this.rules)}}emStrong(n,e,t=""){let r=this.rules.inline.emStrongLDelim.exec(n);if(!r||r[3]&&t.match(this.rules.other.unicodeAlphaNumeric))return;if(!(r[1]||r[2]||"")||!t||this.rules.inline.punctuation.exec(t)){let o=[...r[0]].length-1,s,a,l=o,c=0,u=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,e=e.slice(-1*n.length+o);(r=u.exec(e))!=null;){if(s=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!s)continue;if(a=[...s].length,r[3]||r[4]){l+=a;continue}else if((r[5]||r[6])&&o%3&&!((o+a)%3)){c+=a;continue}if(l-=a,l>0)continue;a=Math.min(a,a+l+c);let d=[...r[0]][0].length,h=n.slice(0,o+r.index+d+a);if(Math.min(o,a)%2){let p=h.slice(1,-1);return{type:"em",raw:h,text:p,tokens:this.lexer.inlineTokens(p)}}let f=h.slice(2,-2);return{type:"strong",raw:h,text:f,tokens:this.lexer.inlineTokens(f)}}}}codespan(n){let e=this.rules.inline.code.exec(n);if(e){let t=e[2].replace(this.rules.other.newLineCharGlobal," "),r=this.rules.other.nonSpaceChar.test(t),i=this.rules.other.startingSpaceChar.test(t)&&this.rules.other.endingSpaceChar.test(t);return r&&i&&(t=t.substring(1,t.length-1)),{type:"codespan",raw:e[0],text:t}}}br(n){let e=this.rules.inline.br.exec(n);if(e)return{type:"br",raw:e[0]}}del(n){let e=this.rules.inline.del.exec(n);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(n){let e=this.rules.inline.autolink.exec(n);if(e){let t,r;return e[2]==="@"?(t=e[1],r="mailto:"+t):(t=e[1],r=t),{type:"link",raw:e[0],text:t,href:r,tokens:[{type:"text",raw:t,text:t}]}}}url(n){let e;if(e=this.rules.inline.url.exec(n)){let t,r;if(e[2]==="@")t=e[0],r="mailto:"+t;else{let i;do i=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])?.[0]??"";while(i!==e[0]);t=e[0],e[1]==="www."?r="http://"+e[0]:r=e[0]}return{type:"link",raw:e[0],text:t,href:r,tokens:[{type:"text",raw:t,text:t}]}}}inlineText(n){let e=this.rules.inline.text.exec(n);if(e){let t=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:t}}}},na=class _T{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||yc,this.options.tokenizer=this.options.tokenizer||new Cy,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={other:Kr,block:yy.normal,inline:mm.normal};this.options.pedantic?(t.block=yy.pedantic,t.inline=mm.pedantic):this.options.gfm&&(t.block=yy.gfm,this.options.breaks?t.inline=mm.breaks:t.inline=mm.gfm),this.tokenizer.rules=t}static get rules(){return{block:yy,inline:mm}}static lex(e,t){return new _T(t).lex(e)}static lexInline(e,t){return new _T(t).inlineTokens(e)}lex(e){e=e.replace(Kr.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){let r=this.inlineQueue[t];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],r=!1){for(this.options.pedantic&&(e=e.replace(Kr.tabCharGlobal,"    ").replace(Kr.spaceLine,""));e;){let i;if(this.options.extensions?.block?.some(s=>(i=s.call({lexer:this},e,t))?(e=e.substring(i.raw.length),t.push(i),!0):!1))continue;if(i=this.tokenizer.space(e)){e=e.substring(i.raw.length);let s=t.at(-1);i.raw.length===1&&s!==void 0?s.raw+=`
`:t.push(i);continue}if(i=this.tokenizer.code(e)){e=e.substring(i.raw.length);let s=t.at(-1);s?.type==="paragraph"||s?.type==="text"?(s.raw+=`
`+i.raw,s.text+=`
`+i.text,this.inlineQueue.at(-1).src=s.text):t.push(i);continue}if(i=this.tokenizer.fences(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.heading(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.hr(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.blockquote(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.list(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.html(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.def(e)){e=e.substring(i.raw.length);let s=t.at(-1);s?.type==="paragraph"||s?.type==="text"?(s.raw+=`
`+i.raw,s.text+=`
`+i.raw,this.inlineQueue.at(-1).src=s.text):this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title});continue}if(i=this.tokenizer.table(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.lheading(e)){e=e.substring(i.raw.length),t.push(i);continue}let o=e;if(this.options.extensions?.startBlock){let s=1/0,a=e.slice(1),l;this.options.extensions.startBlock.forEach(c=>{l=c.call({lexer:this},a),typeof l=="number"&&l>=0&&(s=Math.min(s,l))}),s<1/0&&s>=0&&(o=e.substring(0,s+1))}if(this.state.top&&(i=this.tokenizer.paragraph(o))){let s=t.at(-1);r&&s?.type==="paragraph"?(s.raw+=`
`+i.raw,s.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=s.text):t.push(i),r=o.length!==e.length,e=e.substring(i.raw.length);continue}if(i=this.tokenizer.text(e)){e=e.substring(i.raw.length);let s=t.at(-1);s?.type==="text"?(s.raw+=`
`+i.raw,s.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=s.text):t.push(i);continue}if(e){let s="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(s);break}else throw new Error(s)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let r=e,i=null;if(this.tokens.links){let a=Object.keys(this.tokens.links);if(a.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)a.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,i.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(i=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let o=!1,s="";for(;e;){o||(s=""),o=!1;let a;if(this.options.extensions?.inline?.some(c=>(a=c.call({lexer:this},e,t))?(e=e.substring(a.raw.length),t.push(a),!0):!1))continue;if(a=this.tokenizer.escape(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.tag(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.link(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(a.raw.length);let c=t.at(-1);a.type==="text"&&c?.type==="text"?(c.raw+=a.raw,c.text+=a.text):t.push(a);continue}if(a=this.tokenizer.emStrong(e,r,s)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.codespan(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.br(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.del(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.autolink(e)){e=e.substring(a.raw.length),t.push(a);continue}if(!this.state.inLink&&(a=this.tokenizer.url(e))){e=e.substring(a.raw.length),t.push(a);continue}let l=e;if(this.options.extensions?.startInline){let c=1/0,u=e.slice(1),d;this.options.extensions.startInline.forEach(h=>{d=h.call({lexer:this},u),typeof d=="number"&&d>=0&&(c=Math.min(c,d))}),c<1/0&&c>=0&&(l=e.substring(0,c+1))}if(a=this.tokenizer.inlineText(l)){e=e.substring(a.raw.length),a.raw.slice(-1)!=="_"&&(s=a.raw.slice(-1)),o=!0;let c=t.at(-1);c?.type==="text"?(c.raw+=a.raw,c.text+=a.text):t.push(a);continue}if(e){let c="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return t}},Ja=class{options;parser;constructor(n){this.options=n||yc}space(n){return""}code({text:n,lang:e,escaped:t}){let r=(e||"").match(Kr.notSpaceStart)?.[0],i=n.replace(Kr.endingNewline,"")+`
`;return r?'<pre><code class="language-'+ts(r)+'">'+(t?i:ts(i,!0))+`</code></pre>
`:"<pre><code>"+(t?i:ts(i,!0))+`</code></pre>
`}blockquote({tokens:n}){return`<blockquote>
${this.parser.parse(n)}</blockquote>
`}html({text:n}){return n}heading({tokens:n,depth:e}){return`<h${e}>${this.parser.parseInline(n)}</h${e}>
`}hr(n){return`<hr>
`}list(n){let e=n.ordered,t=n.start,r="";for(let s=0;s<n.items.length;s++){let a=n.items[s];r+=this.listitem(a)}let i=e?"ol":"ul",o=e&&t!==1?' start="'+t+'"':"";return"<"+i+o+`>
`+r+"</"+i+`>
`}listitem(n){let e="";if(n.task){let t=this.checkbox({checked:!!n.checked});n.loose?n.tokens[0]?.type==="paragraph"?(n.tokens[0].text=t+" "+n.tokens[0].text,n.tokens[0].tokens&&n.tokens[0].tokens.length>0&&n.tokens[0].tokens[0].type==="text"&&(n.tokens[0].tokens[0].text=t+" "+ts(n.tokens[0].tokens[0].text),n.tokens[0].tokens[0].escaped=!0)):n.tokens.unshift({type:"text",raw:t+" ",text:t+" ",escaped:!0}):e+=t+" "}return e+=this.parser.parse(n.tokens,!!n.loose),`<li>${e}</li>
`}checkbox({checked:n}){return"<input "+(n?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:n}){return`<p>${this.parser.parseInline(n)}</p>
`}table(n){let e="",t="";for(let i=0;i<n.header.length;i++)t+=this.tablecell(n.header[i]);e+=this.tablerow({text:t});let r="";for(let i=0;i<n.rows.length;i++){let o=n.rows[i];t="";for(let s=0;s<o.length;s++)t+=this.tablecell(o[s]);r+=this.tablerow({text:t})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+r+`</table>
`}tablerow({text:n}){return`<tr>
${n}</tr>
`}tablecell(n){let e=this.parser.parseInline(n.tokens),t=n.header?"th":"td";return(n.align?`<${t} align="${n.align}">`:`<${t}>`)+e+`</${t}>
`}strong({tokens:n}){return`<strong>${this.parser.parseInline(n)}</strong>`}em({tokens:n}){return`<em>${this.parser.parseInline(n)}</em>`}codespan({text:n}){return`<code>${ts(n,!0)}</code>`}br(n){return"<br>"}del({tokens:n}){return`<del>${this.parser.parseInline(n)}</del>`}link({href:n,title:e,tokens:t}){let r=this.parser.parseInline(t),i=L2(n);if(i===null)return r;n=i;let o='<a href="'+n+'"';return e&&(o+=' title="'+ts(e)+'"'),o+=">"+r+"</a>",o}image({href:n,title:e,text:t,tokens:r}){r&&(t=this.parser.parseInline(r,this.parser.textRenderer));let i=L2(n);if(i===null)return ts(t);n=i;let o=`<img src="${n}" alt="${t}"`;return e&&(o+=` title="${ts(e)}"`),o+=">",o}text(n){return"tokens"in n&&n.tokens?this.parser.parseInline(n.tokens):"escaped"in n&&n.escaped?n.text:ts(n.text)}},DT=class{strong({text:n}){return n}em({text:n}){return n}codespan({text:n}){return n}del({text:n}){return n}html({text:n}){return n}text({text:n}){return n}link({text:n}){return""+n}image({text:n}){return""+n}br(){return""}},ra=class bT{options;renderer;textRenderer;constructor(e){this.options=e||yc,this.options.renderer=this.options.renderer||new Ja,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new DT}static parse(e,t){return new bT(t).parse(e)}static parseInline(e,t){return new bT(t).parseInline(e)}parse(e,t=!0){let r="";for(let i=0;i<e.length;i++){let o=e[i];if(this.options.extensions?.renderers?.[o.type]){let a=o,l=this.options.extensions.renderers[a.type].call({parser:this},a);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(a.type)){r+=l||"";continue}}let s=o;switch(s.type){case"space":{r+=this.renderer.space(s);continue}case"hr":{r+=this.renderer.hr(s);continue}case"heading":{r+=this.renderer.heading(s);continue}case"code":{r+=this.renderer.code(s);continue}case"table":{r+=this.renderer.table(s);continue}case"blockquote":{r+=this.renderer.blockquote(s);continue}case"list":{r+=this.renderer.list(s);continue}case"html":{r+=this.renderer.html(s);continue}case"paragraph":{r+=this.renderer.paragraph(s);continue}case"text":{let a=s,l=this.renderer.text(a);for(;i+1<e.length&&e[i+1].type==="text";)a=e[++i],l+=`
`+this.renderer.text(a);t?r+=this.renderer.paragraph({type:"paragraph",raw:l,text:l,tokens:[{type:"text",raw:l,text:l,escaped:!0}]}):r+=l;continue}default:{let a='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return r}parseInline(e,t=this.renderer){let r="";for(let i=0;i<e.length;i++){let o=e[i];if(this.options.extensions?.renderers?.[o.type]){let a=this.options.extensions.renderers[o.type].call({parser:this},o);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)){r+=a||"";continue}}let s=o;switch(s.type){case"escape":{r+=t.text(s);break}case"html":{r+=t.html(s);break}case"link":{r+=t.link(s);break}case"image":{r+=t.image(s);break}case"strong":{r+=t.strong(s);break}case"em":{r+=t.em(s);break}case"codespan":{r+=t.codespan(s);break}case"br":{r+=t.br(s);break}case"del":{r+=t.del(s);break}case"text":{r+=t.text(s);break}default:{let a='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return r}},wy=class{options;block;constructor(e){this.options=e||yc}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?na.lex:na.lexInline}provideParser(){return this.block?ra.parse:ra.parseInline}},IY=class{defaults=vT();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=ra;Renderer=Ja;TextRenderer=DT;Lexer=na;Tokenizer=Cy;Hooks=wy;constructor(...n){this.use(...n)}walkTokens(n,e){let t=[];for(let r of n)switch(t=t.concat(e.call(this,r)),r.type){case"table":{let i=r;for(let o of i.header)t=t.concat(this.walkTokens(o.tokens,e));for(let o of i.rows)for(let s of o)t=t.concat(this.walkTokens(s.tokens,e));break}case"list":{let i=r;t=t.concat(this.walkTokens(i.items,e));break}default:{let i=r;this.defaults.extensions?.childTokens?.[i.type]?this.defaults.extensions.childTokens[i.type].forEach(o=>{let s=i[o].flat(1/0);t=t.concat(this.walkTokens(s,e))}):i.tokens&&(t=t.concat(this.walkTokens(i.tokens,e)))}}return t}use(...n){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return n.forEach(t=>{let r=m({},t);if(r.async=this.defaults.async||r.async||!1,t.extensions&&(t.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){let o=e.renderers[i.name];o?e.renderers[i.name]=function(...s){let a=i.renderer.apply(this,s);return a===!1&&(a=o.apply(this,s)),a}:e.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let o=e[i.level];o?o.unshift(i.tokenizer):e[i.level]=[i.tokenizer],i.start&&(i.level==="block"?e.startBlock?e.startBlock.push(i.start):e.startBlock=[i.start]:i.level==="inline"&&(e.startInline?e.startInline.push(i.start):e.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(e.childTokens[i.name]=i.childTokens)}),r.extensions=e),t.renderer){let i=this.defaults.renderer||new Ja(this.defaults);for(let o in t.renderer){if(!(o in i))throw new Error(`renderer '${o}' does not exist`);if(["options","parser"].includes(o))continue;let s=o,a=t.renderer[s],l=i[s];i[s]=(...c)=>{let u=a.apply(i,c);return u===!1&&(u=l.apply(i,c)),u||""}}r.renderer=i}if(t.tokenizer){let i=this.defaults.tokenizer||new Cy(this.defaults);for(let o in t.tokenizer){if(!(o in i))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;let s=o,a=t.tokenizer[s],l=i[s];i[s]=(...c)=>{let u=a.apply(i,c);return u===!1&&(u=l.apply(i,c)),u}}r.tokenizer=i}if(t.hooks){let i=this.defaults.hooks||new wy;for(let o in t.hooks){if(!(o in i))throw new Error(`hook '${o}' does not exist`);if(["options","block"].includes(o))continue;let s=o,a=t.hooks[s],l=i[s];wy.passThroughHooks.has(o)?i[s]=c=>{if(this.defaults.async)return Promise.resolve(a.call(i,c)).then(d=>l.call(i,d));let u=a.call(i,c);return l.call(i,u)}:i[s]=(...c)=>{let u=a.apply(i,c);return u===!1&&(u=l.apply(i,c)),u}}r.hooks=i}if(t.walkTokens){let i=this.defaults.walkTokens,o=t.walkTokens;r.walkTokens=function(s){let a=[];return a.push(o.call(this,s)),i&&(a=a.concat(i.call(this,s))),a}}this.defaults=m(m({},this.defaults),r)}),this}setOptions(n){return this.defaults=m(m({},this.defaults),n),this}lexer(n,e){return na.lex(n,e??this.defaults)}parser(n,e){return ra.parse(n,e??this.defaults)}parseMarkdown(n){return(t,r)=>{let i=m({},r),o=m(m({},this.defaults),i),s=this.onError(!!o.silent,!!o.async);if(this.defaults.async===!0&&i.async===!1)return s(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||t===null)return s(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return s(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));o.hooks&&(o.hooks.options=o,o.hooks.block=n);let a=o.hooks?o.hooks.provideLexer():n?na.lex:na.lexInline,l=o.hooks?o.hooks.provideParser():n?ra.parse:ra.parseInline;if(o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(t):t).then(c=>a(c,o)).then(c=>o.hooks?o.hooks.processAllTokens(c):c).then(c=>o.walkTokens?Promise.all(this.walkTokens(c,o.walkTokens)).then(()=>c):c).then(c=>l(c,o)).then(c=>o.hooks?o.hooks.postprocess(c):c).catch(s);try{o.hooks&&(t=o.hooks.preprocess(t));let c=a(t,o);o.hooks&&(c=o.hooks.processAllTokens(c)),o.walkTokens&&this.walkTokens(c,o.walkTokens);let u=l(c,o);return o.hooks&&(u=o.hooks.postprocess(u)),u}catch(c){return s(c)}}}onError(n,e){return t=>{if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,n){let r="<p>An error occurred:</p><pre>"+ts(t.message+"",!0)+"</pre>";return e?Promise.resolve(r):r}if(e)return Promise.reject(t);throw t}}},vc=new IY;function Dt(n,e){return vc.parse(n,e)}Dt.options=Dt.setOptions=function(n){return vc.setOptions(n),Dt.defaults=vc.defaults,V2(Dt.defaults),Dt};Dt.getDefaults=vT;Dt.defaults=yc;Dt.use=function(...n){return vc.use(...n),Dt.defaults=vc.defaults,V2(Dt.defaults),Dt};Dt.walkTokens=function(n,e){return vc.walkTokens(n,e)};Dt.parseInline=vc.parseInline;Dt.Parser=ra;Dt.parser=ra.parse;Dt.Renderer=Ja;Dt.TextRenderer=DT;Dt.Lexer=na;Dt.lexer=na.lex;Dt.Tokenizer=Cy;Dt.Hooks=wy;Dt.parse=Dt;var tEe=Dt.options,nEe=Dt.setOptions,rEe=Dt.use,iEe=Dt.walkTokens,oEe=Dt.parseInline;var sEe=ra.parse,aEe=na.lex;var SY=["*"],DY="Copy",TY="Copied",AY=(()=>{let e=class e{constructor(){this._buttonClick$=new re,this.copied=P2(this._buttonClick$.pipe($n(()=>$r(ye(!0),Kh(3e3).pipe(Hu(!1)))),qu(),Wu(1))),this.copiedText=Wr(()=>this.copied()?TY:DY)}onCopyToClipboardClick(){this._buttonClick$.next()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=xe({type:e,selectors:[["markdown-clipboard"]],decls:2,vars:3,consts:[[1,"markdown-clipboard-button",3,"click"]],template:function(i,o){i&1&&(wi(0,"button",0),vd("click",function(){return o.onCopyToClipboardClick()}),ae(1),Ui()),i&2&&(Ge("copied",o.copied()),B(),Rt(o.copiedText()))},encapsulation:2,changeDetection:0});let n=e;return n})(),kY=new G("CLIPBOARD_OPTIONS");var TT=function(n){return n.CommandLine="command-line",n.LineHighlight="line-highlight",n.LineNumbers="line-numbers",n}(TT||{}),RY=new G("MARKED_EXTENSIONS"),MY=new G("MARKED_OPTIONS"),OY=new G("MERMAID_OPTIONS"),PY="[ngx-markdown] When using the `emoji` attribute you *have to* include Emoji-Toolkit files to `angular.json` or use imports. See README for more information",NY="[ngx-markdown] When using the `katex` attribute you *have to* include KaTeX files to `angular.json` or use imports. See README for more information",FY="[ngx-markdown] When using the `mermaid` attribute you *have to* include Mermaid files to `angular.json` or use imports. See README for more information",LY="[ngx-markdown] When using the `clipboard` attribute you *have to* include Clipboard files to `angular.json` or use imports. See README for more information",jY="[ngx-markdown] When using the `clipboard` attribute you *have to* provide the `viewContainerRef` parameter to `MarkdownService.render()` function",BY="[ngx-markdown] When using the `src` attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information",Z2=new G("SECURITY_CONTEXT");var X2=(()=>{let e=class e{get options(){return this._options}set options(r){this._options=m(m({},this.DEFAULT_MARKED_OPTIONS),r)}get renderer(){return this.options.renderer}set renderer(r){this.options.renderer=r}constructor(r,i,o,s,a,l,c,u){this.clipboardOptions=r,this.extensions=i,this.mermaidOptions=s,this.platform=a,this.securityContext=l,this.http=c,this.sanitizer=u,this.DEFAULT_MARKED_OPTIONS={renderer:new Ja},this.DEFAULT_KATEX_OPTIONS={delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\[",right:"\\]",display:!0}]},this.DEFAULT_MERMAID_OPTIONS={startOnLoad:!1},this.DEFAULT_CLIPBOARD_OPTIONS={buttonComponent:void 0},this.DEFAULT_PARSE_OPTIONS={decodeHtml:!1,inline:!1,emoji:!1,mermaid:!1,markedOptions:void 0,disableSanitizer:!1},this.DEFAULT_RENDER_OPTIONS={clipboard:!1,clipboardOptions:void 0,katex:!1,katexOptions:void 0,mermaid:!1,mermaidOptions:void 0},this._reload$=new re,this.reload$=this._reload$.asObservable(),this.options=o}parse(r,i=this.DEFAULT_PARSE_OPTIONS){let{decodeHtml:o,inline:s,emoji:a,mermaid:l,disableSanitizer:c}=i,u=m(m({},this.options),i.markedOptions),d=u.renderer||this.renderer||new Ja;this.extensions&&(this.renderer=this.extendsRendererForExtensions(d)),l&&(this.renderer=this.extendsRendererForMermaid(d));let h=this.trimIndentation(r),f=o?this.decodeHtml(h):h,p=a?this.parseEmoji(f):f,g=this.parseMarked(p,u,s);return(c?g:this.sanitizer.sanitize(this.securityContext,g))||""}render(r,i=this.DEFAULT_RENDER_OPTIONS,o){let{clipboard:s,clipboardOptions:a,katex:l,katexOptions:c,mermaid:u,mermaidOptions:d}=i;l&&this.renderKatex(r,m(m({},this.DEFAULT_KATEX_OPTIONS),c)),u&&this.renderMermaid(r,m(m(m({},this.DEFAULT_MERMAID_OPTIONS),this.mermaidOptions),d)),s&&this.renderClipboard(r,o,m(m(m({},this.DEFAULT_CLIPBOARD_OPTIONS),this.clipboardOptions),a)),this.highlight(r)}reload(){this._reload$.next()}getSource(r){if(!this.http)throw new Error(BY);return this.http.get(r,{responseType:"text"}).pipe(be(i=>this.handleExtension(r,i)))}highlight(r){if(!Zs(this.platform)||typeof Prism>"u"||typeof Prism.highlightAllUnder>"u")return;r||(r=document);let i=r.querySelectorAll('pre code:not([class*="language-"])');Array.prototype.forEach.call(i,o=>o.classList.add("language-none")),Prism.highlightAllUnder(r)}decodeHtml(r){if(!Zs(this.platform))return r;let i=document.createElement("textarea");return i.innerHTML=r,i.value}extendsRendererForExtensions(r){let i=r;return i.\u0275NgxMarkdownRendererExtendedForExtensions===!0||(this.extensions?.length>0&&Dt.use(...this.extensions),i.\u0275NgxMarkdownRendererExtendedForExtensions=!0),r}extendsRendererForMermaid(r){let i=r;if(i.\u0275NgxMarkdownRendererExtendedForMermaid===!0)return r;let o=r.code;return r.code=s=>s.lang==="mermaid"?`<div class="mermaid">${s.text}</div>`:o(s),i.\u0275NgxMarkdownRendererExtendedForMermaid=!0,r}handleExtension(r,i){let o=r.lastIndexOf("://"),s=o>-1?r.substring(o+4):r,a=s.lastIndexOf("/"),l=a>-1?s.substring(a+1).split("?")[0]:"",c=l.lastIndexOf("."),u=c>-1?l.substring(c+1):"";return u&&u!=="md"?"```"+u+`
`+i+"\n```":i}parseMarked(r,i,o=!1){if(i.renderer){let s=m({},i.renderer);delete s.\u0275NgxMarkdownRendererExtendedForExtensions,delete s.\u0275NgxMarkdownRendererExtendedForMermaid,delete i.renderer,Dt.use({renderer:s})}return o?Dt.parseInline(r,i):Dt.parse(r,i)}parseEmoji(r){if(!Zs(this.platform))return r;if(typeof joypixels>"u"||typeof joypixels.shortnameToUnicode>"u")throw new Error(PY);return joypixels.shortnameToUnicode(r)}renderKatex(r,i){if(Zs(this.platform)){if(typeof katex>"u"||typeof renderMathInElement>"u")throw new Error(NY);renderMathInElement(r,i)}}renderClipboard(r,i,o){if(!Zs(this.platform))return;if(typeof ClipboardJS>"u")throw new Error(LY);if(!i)throw new Error(jY);let{buttonComponent:s,buttonTemplate:a}=o,l=r.querySelectorAll("pre");for(let c=0;c<l.length;c++){let u=l.item(c),d=document.createElement("div");d.style.position="relative",u.parentNode.insertBefore(d,u),d.appendChild(u);let h=document.createElement("div");h.classList.add("markdown-clipboard-toolbar"),h.style.position="absolute",h.style.top=".5em",h.style.right=".5em",h.style.zIndex="1",d.insertAdjacentElement("beforeend",h),d.onmouseenter=()=>h.classList.add("hover"),d.onmouseleave=()=>h.classList.remove("hover");let f;if(s){let g=i.createComponent(s);f=g.hostView,g.changeDetectorRef.markForCheck()}else if(a)f=i.createEmbeddedView(a);else{let g=i.createComponent(AY);f=g.hostView,g.changeDetectorRef.markForCheck()}let p;f.rootNodes.forEach(g=>{h.appendChild(g),p=new ClipboardJS(g,{text:()=>u.innerText})}),f.onDestroy(()=>p.destroy())}}renderMermaid(r,i=this.DEFAULT_MERMAID_OPTIONS){if(!Zs(this.platform))return;if(typeof mermaid>"u"||typeof mermaid.initialize>"u")throw new Error(FY);let o=r.querySelectorAll(".mermaid");o.length!==0&&(mermaid.initialize(i),mermaid.run({nodes:o}))}trimIndentation(r){if(!r)return"";let i;return r.split(`
`).map(o=>{let s=i;return o.length>0&&(s=isNaN(s)?o.search(/\S|$/):Math.min(o.search(/\S|$/),s)),isNaN(i)&&(i=s),s?o.substring(s):o}).join(`
`)}};e.\u0275fac=function(i){return new(i||e)(de(kY,8),de(RY,8),de(MY,8),de(OY,8),de(Qo),de(Z2),de(Ya,8),de(Jp))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),J2=(()=>{let e=class e{get disableSanitizer(){return this._disableSanitizer}set disableSanitizer(r){this._disableSanitizer=this.coerceBooleanProperty(r)}get inline(){return this._inline}set inline(r){this._inline=this.coerceBooleanProperty(r)}get clipboard(){return this._clipboard}set clipboard(r){this._clipboard=this.coerceBooleanProperty(r)}get emoji(){return this._emoji}set emoji(r){this._emoji=this.coerceBooleanProperty(r)}get katex(){return this._katex}set katex(r){this._katex=this.coerceBooleanProperty(r)}get mermaid(){return this._mermaid}set mermaid(r){this._mermaid=this.coerceBooleanProperty(r)}get lineHighlight(){return this._lineHighlight}set lineHighlight(r){this._lineHighlight=this.coerceBooleanProperty(r)}get lineNumbers(){return this._lineNumbers}set lineNumbers(r){this._lineNumbers=this.coerceBooleanProperty(r)}get commandLine(){return this._commandLine}set commandLine(r){this._commandLine=this.coerceBooleanProperty(r)}constructor(r,i,o){this.element=r,this.markdownService=i,this.viewContainerRef=o,this.error=new Ie,this.load=new Ie,this.ready=new Ie,this._clipboard=!1,this._commandLine=!1,this._disableSanitizer=!1,this._emoji=!1,this._inline=!1,this._katex=!1,this._lineHighlight=!1,this._lineNumbers=!1,this._mermaid=!1,this.destroyed$=new re}ngOnChanges(){this.loadContent()}loadContent(){if(this.data!=null){this.handleData();return}if(this.src!=null){this.handleSrc();return}}ngAfterViewInit(){!this.data&&!this.src&&this.handleTransclusion(),this.markdownService.reload$.pipe(Gt(this.destroyed$)).subscribe(()=>this.loadContent())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}render(r,i=!1){return v(this,null,function*(){let o={decodeHtml:i,inline:this.inline,emoji:this.emoji,mermaid:this.mermaid,disableSanitizer:this.disableSanitizer},s={clipboard:this.clipboard,clipboardOptions:this.getClipboardOptions(),katex:this.katex,katexOptions:this.katexOptions,mermaid:this.mermaid,mermaidOptions:this.mermaidOptions},a=yield this.markdownService.parse(r,o);this.element.nativeElement.innerHTML=a,this.handlePlugins(),this.markdownService.render(this.element.nativeElement,s,this.viewContainerRef),this.ready.emit()})}coerceBooleanProperty(r){return r!=null&&`${String(r)}`!="false"}getClipboardOptions(){if(this.clipboardButtonComponent||this.clipboardButtonTemplate)return{buttonComponent:this.clipboardButtonComponent,buttonTemplate:this.clipboardButtonTemplate}}handleData(){this.render(this.data)}handleSrc(){this.markdownService.getSource(this.src).subscribe({next:r=>{this.render(r).then(()=>{this.load.emit(r)})},error:r=>this.error.emit(r)})}handleTransclusion(){this.render(this.element.nativeElement.innerHTML,!0)}handlePlugins(){this.commandLine&&(this.setPluginClass(this.element.nativeElement,TT.CommandLine),this.setPluginOptions(this.element.nativeElement,{dataFilterOutput:this.filterOutput,dataHost:this.host,dataPrompt:this.prompt,dataOutput:this.output,dataUser:this.user})),this.lineHighlight&&this.setPluginOptions(this.element.nativeElement,{dataLine:this.line,dataLineOffset:this.lineOffset}),this.lineNumbers&&(this.setPluginClass(this.element.nativeElement,TT.LineNumbers),this.setPluginOptions(this.element.nativeElement,{dataStart:this.start}))}setPluginClass(r,i){let o=r.querySelectorAll("pre");for(let s=0;s<o.length;s++){let a=i instanceof Array?i:[i];o.item(s).classList.add(...a)}}setPluginOptions(r,i){let o=r.querySelectorAll("pre");for(let s=0;s<o.length;s++)Object.keys(i).forEach(a=>{let l=i[a];if(l){let c=this.toLispCase(a);o.item(s).setAttribute(c,l.toString())}})}toLispCase(r){let i=r.match(/([A-Z])/g);if(!i)return r;let o=r.toString();for(let s=0,a=i.length;s<a;s++)o=o.replace(new RegExp(i[s]),"-"+i[s].toLowerCase());return o.slice(0,1)==="-"&&(o=o.slice(1)),o}};e.\u0275fac=function(i){return new(i||e)(ce(De),ce(X2),ce(tr))},e.\u0275cmp=xe({type:e,selectors:[["markdown"],["","markdown",""]],inputs:{data:"data",src:"src",disableSanitizer:"disableSanitizer",inline:"inline",clipboard:"clipboard",clipboardButtonComponent:"clipboardButtonComponent",clipboardButtonTemplate:"clipboardButtonTemplate",emoji:"emoji",katex:"katex",katexOptions:"katexOptions",mermaid:"mermaid",mermaidOptions:"mermaidOptions",lineHighlight:"lineHighlight",line:"line",lineOffset:"lineOffset",lineNumbers:"lineNumbers",start:"start",commandLine:"commandLine",filterOutput:"filterOutput",host:"host",prompt:"prompt",output:"output",user:"user"},outputs:{error:"error",load:"load",ready:"ready"},features:[xn],ngContentSelectors:SY,decls:1,vars:0,template:function(i,o){i&1&&(Qt(),qe(0))},encapsulation:2});let n=e;return n})();function AT(n){return[X2,n?.loader??[],n?.clipboardOptions??[],n?.markedOptions??[],n?.mermaidOptions??[],n?.markedExtensions??[],{provide:Z2,useValue:n?.sanitize??wr.HTML}]}var eB=(()=>{let e=class e{static forRoot(r){return{ngModule:e,providers:[AT(r)]}}static forChild(){return{ngModule:e}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Re({type:e}),e.\u0275inj=Se({});let n=e;return n})();var tB={providers:[qS({eventCoalescing:!0}),mT(O2),AT(),RD(MD())]};var Vd="2025-06-18";var nB=[Vd,"2025-03-26","2024-11-05","2024-10-07"],Sy="2.0",rB=b.union([b.string(),b.number().int()]),iB=b.string(),$Y=b.object({progressToken:b.optional(rB)}).passthrough(),Wi=b.object({_meta:b.optional($Y)}).passthrough(),li=b.object({method:b.string(),params:b.optional(Wi)}),vm=b.object({_meta:b.optional(b.object({}).passthrough())}).passthrough(),ns=b.object({method:b.string(),params:b.optional(vm)}),Ki=b.object({_meta:b.optional(b.object({}).passthrough())}).passthrough(),Dy=b.union([b.string(),b.number().int()]),oB=b.object({jsonrpc:b.literal(Sy),id:Dy}).merge(li).strict(),Ty=n=>oB.safeParse(n).success,sB=b.object({jsonrpc:b.literal(Sy)}).merge(ns).strict(),aB=n=>sB.safeParse(n).success,lB=b.object({jsonrpc:b.literal(Sy),id:Dy,result:Ki}).strict(),ym=n=>lB.safeParse(n).success,co=function(n){return n[n.ConnectionClosed=-32e3]="ConnectionClosed",n[n.RequestTimeout=-32001]="RequestTimeout",n[n.ParseError=-32700]="ParseError",n[n.InvalidRequest=-32600]="InvalidRequest",n[n.MethodNotFound=-32601]="MethodNotFound",n[n.InvalidParams=-32602]="InvalidParams",n[n.InternalError=-32603]="InternalError",n}(co||{}),cB=b.object({jsonrpc:b.literal(Sy),id:Dy,error:b.object({code:b.number().int(),message:b.string(),data:b.optional(b.unknown())})}).strict(),uB=n=>cB.safeParse(n).success,Ay=b.union([oB,sB,lB,cB]),wc=Ki.strict(),ky=ns.extend({method:b.literal("notifications/cancelled"),params:vm.extend({requestId:Dy,reason:b.string().optional()})}),wm=b.object({name:b.string(),title:b.optional(b.string())}).passthrough(),dB=wm.extend({version:b.string()}),UY=b.object({experimental:b.optional(b.object({}).passthrough()),sampling:b.optional(b.object({}).passthrough()),elicitation:b.optional(b.object({}).passthrough()),roots:b.optional(b.object({listChanged:b.optional(b.boolean())}).passthrough())}).passthrough(),zY=li.extend({method:b.literal("initialize"),params:Wi.extend({protocolVersion:b.string(),capabilities:UY,clientInfo:dB})});var HY=b.object({experimental:b.optional(b.object({}).passthrough()),logging:b.optional(b.object({}).passthrough()),completions:b.optional(b.object({}).passthrough()),prompts:b.optional(b.object({listChanged:b.optional(b.boolean())}).passthrough()),resources:b.optional(b.object({subscribe:b.optional(b.boolean()),listChanged:b.optional(b.boolean())}).passthrough()),tools:b.optional(b.object({listChanged:b.optional(b.boolean())}).passthrough())}).passthrough(),kT=Ki.extend({protocolVersion:b.string(),capabilities:HY,serverInfo:dB,instructions:b.optional(b.string())}),fB=ns.extend({method:b.literal("notifications/initialized")}),hB=n=>fB.safeParse(n).success,Ry=li.extend({method:b.literal("ping")}),qY=b.object({progress:b.number(),total:b.optional(b.number()),message:b.optional(b.string())}).passthrough(),$d=ns.extend({method:b.literal("notifications/progress"),params:vm.merge(qY).extend({progressToken:rB})}),My=li.extend({params:Wi.extend({cursor:b.optional(iB)}).optional()}),Oy=Ki.extend({nextCursor:b.optional(iB)}),pB=b.object({uri:b.string(),mimeType:b.optional(b.string()),_meta:b.optional(b.object({}).passthrough())}).passthrough(),mB=pB.extend({text:b.string()}),gB=pB.extend({blob:b.string().base64()}),_B=wm.extend({uri:b.string(),description:b.optional(b.string()),mimeType:b.optional(b.string()),_meta:b.optional(b.object({}).passthrough())}),GY=wm.extend({uriTemplate:b.string(),description:b.optional(b.string()),mimeType:b.optional(b.string()),_meta:b.optional(b.object({}).passthrough())}),WY=My.extend({method:b.literal("resources/list")}),Ud=Oy.extend({resources:b.array(_B)}),KY=My.extend({method:b.literal("resources/templates/list")}),RT=Oy.extend({resourceTemplates:b.array(GY)}),QY=li.extend({method:b.literal("resources/read"),params:Wi.extend({uri:b.string()})}),xm=Ki.extend({contents:b.array(b.union([mB,gB]))}),MT=ns.extend({method:b.literal("notifications/resources/list_changed")}),YY=li.extend({method:b.literal("resources/subscribe"),params:Wi.extend({uri:b.string()})}),ZY=li.extend({method:b.literal("resources/unsubscribe"),params:Wi.extend({uri:b.string()})}),XY=ns.extend({method:b.literal("notifications/resources/updated"),params:vm.extend({uri:b.string()})}),JY=b.object({name:b.string(),description:b.optional(b.string()),required:b.optional(b.boolean())}).passthrough(),eZ=wm.extend({description:b.optional(b.string()),arguments:b.optional(b.array(JY)),_meta:b.optional(b.object({}).passthrough())}),tZ=My.extend({method:b.literal("prompts/list")}),Cm=Oy.extend({prompts:b.array(eZ)}),nZ=li.extend({method:b.literal("prompts/get"),params:Wi.extend({name:b.string(),arguments:b.optional(b.record(b.string()))})}),OT=b.object({type:b.literal("text"),text:b.string(),_meta:b.optional(b.object({}).passthrough())}).passthrough(),PT=b.object({type:b.literal("image"),data:b.string().base64(),mimeType:b.string(),_meta:b.optional(b.object({}).passthrough())}).passthrough(),NT=b.object({type:b.literal("audio"),data:b.string().base64(),mimeType:b.string(),_meta:b.optional(b.object({}).passthrough())}).passthrough(),rZ=b.object({type:b.literal("resource"),resource:b.union([mB,gB]),_meta:b.optional(b.object({}).passthrough())}).passthrough(),iZ=_B.extend({type:b.literal("resource_link")}),bB=b.union([OT,PT,NT,iZ,rZ]),oZ=b.object({role:b.enum(["user","assistant"]),content:bB}).passthrough(),Em=Ki.extend({description:b.optional(b.string()),messages:b.array(oZ)}),sZ=ns.extend({method:b.literal("notifications/prompts/list_changed")}),aZ=b.object({title:b.optional(b.string()),readOnlyHint:b.optional(b.boolean()),destructiveHint:b.optional(b.boolean()),idempotentHint:b.optional(b.boolean()),openWorldHint:b.optional(b.boolean())}).passthrough(),lZ=wm.extend({description:b.optional(b.string()),inputSchema:b.object({type:b.literal("object"),properties:b.optional(b.object({}).passthrough()),required:b.optional(b.array(b.string()))}).passthrough(),outputSchema:b.optional(b.object({type:b.literal("object"),properties:b.optional(b.object({}).passthrough()),required:b.optional(b.array(b.string()))}).passthrough()),annotations:b.optional(aZ),_meta:b.optional(b.object({}).passthrough())}),cZ=My.extend({method:b.literal("tools/list")}),Im=Oy.extend({tools:b.array(lZ)}),ia=Ki.extend({content:b.array(bB).default([]),structuredContent:b.object({}).passthrough().optional(),isError:b.optional(b.boolean())}),VEe=ia.or(Ki.extend({toolResult:b.unknown()})),uZ=li.extend({method:b.literal("tools/call"),params:Wi.extend({name:b.string(),arguments:b.optional(b.record(b.unknown()))})}),dZ=ns.extend({method:b.literal("notifications/tools/list_changed")}),vB=b.enum(["debug","info","notice","warning","error","critical","alert","emergency"]),fZ=li.extend({method:b.literal("logging/setLevel"),params:Wi.extend({level:vB})}),FT=ns.extend({method:b.literal("notifications/message"),params:vm.extend({level:vB,logger:b.optional(b.string()),data:b.unknown()})}),hZ=b.object({name:b.string().optional()}).passthrough(),pZ=b.object({hints:b.optional(b.array(hZ)),costPriority:b.optional(b.number().min(0).max(1)),speedPriority:b.optional(b.number().min(0).max(1)),intelligencePriority:b.optional(b.number().min(0).max(1))}).passthrough(),mZ=b.object({role:b.enum(["user","assistant"]),content:b.union([OT,PT,NT])}).passthrough(),LT=li.extend({method:b.literal("sampling/createMessage"),params:Wi.extend({messages:b.array(mZ),systemPrompt:b.optional(b.string()),includeContext:b.optional(b.enum(["none","thisServer","allServers"])),temperature:b.optional(b.number()),maxTokens:b.number().int(),stopSequences:b.optional(b.array(b.string())),metadata:b.optional(b.object({}).passthrough()),modelPreferences:b.optional(pZ)})}),gZ=Ki.extend({model:b.string(),stopReason:b.optional(b.enum(["endTurn","stopSequence","maxTokens"]).or(b.string())),role:b.enum(["user","assistant"]),content:b.discriminatedUnion("type",[OT,PT,NT])}),_Z=b.object({type:b.literal("boolean"),title:b.optional(b.string()),description:b.optional(b.string()),default:b.optional(b.boolean())}).passthrough(),bZ=b.object({type:b.literal("string"),title:b.optional(b.string()),description:b.optional(b.string()),minLength:b.optional(b.number()),maxLength:b.optional(b.number()),format:b.optional(b.enum(["email","uri","date","date-time"]))}).passthrough(),vZ=b.object({type:b.enum(["number","integer"]),title:b.optional(b.string()),description:b.optional(b.string()),minimum:b.optional(b.number()),maximum:b.optional(b.number())}).passthrough(),yZ=b.object({type:b.literal("string"),title:b.optional(b.string()),description:b.optional(b.string()),enum:b.array(b.string()),enumNames:b.optional(b.array(b.string()))}).passthrough(),wZ=b.union([_Z,bZ,vZ,yZ]),jT=li.extend({method:b.literal("elicitation/create"),params:Wi.extend({message:b.string(),requestedSchema:b.object({type:b.literal("object"),properties:b.record(b.string(),wZ),required:b.optional(b.array(b.string()))}).passthrough()})}),BT=Ki.extend({action:b.enum(["accept","decline","cancel"]),content:b.optional(b.record(b.string(),b.unknown()))}),xZ=b.object({type:b.literal("ref/resource"),uri:b.string()}).passthrough();var CZ=b.object({type:b.literal("ref/prompt"),name:b.string()}).passthrough(),EZ=li.extend({method:b.literal("completion/complete"),params:Wi.extend({ref:b.union([CZ,xZ]),argument:b.object({name:b.string(),value:b.string()}).passthrough(),context:b.optional(b.object({arguments:b.optional(b.record(b.string(),b.string()))}))})}),VT=Ki.extend({completion:b.object({values:b.array(b.string()).max(100),total:b.optional(b.number().int()),hasMore:b.optional(b.boolean())}).passthrough()}),IZ=b.object({uri:b.string().startsWith("file://"),name:b.optional(b.string()),_meta:b.optional(b.object({}).passthrough())}).passthrough(),SZ=li.extend({method:b.literal("roots/list")}),DZ=Ki.extend({roots:b.array(IZ)}),TZ=ns.extend({method:b.literal("notifications/roots/list_changed")}),$Ee=b.union([Ry,zY,EZ,fZ,nZ,tZ,WY,KY,QY,YY,ZY,uZ,cZ]),UEe=b.union([ky,$d,fB,TZ]),zEe=b.union([wc,gZ,BT,DZ]),HEe=b.union([Ry,LT,jT,SZ]),qEe=b.union([ky,$d,FT,XY,MT,dZ,sZ]),GEe=b.union([wc,kT,VT,Em,Cm,Ud,RT,xm,ia,Im]),Gi=class extends Error{constructor(e,t,r){super(`MCP error ${e}: ${t}`),this.code=e,this.data=r,this.name="McpError"}};var AZ=6e4,Py=class{constructor(e){this._options=e,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this.setNotificationHandler(ky,t=>{let r=this._requestHandlerAbortControllers.get(t.params.requestId);r?.abort(t.params.reason)}),this.setNotificationHandler($d,t=>{this._onprogress(t)}),this.setRequestHandler(Ry,t=>({}))}_setupTimeout(e,t,r,i,o=!1){this._timeoutInfo.set(e,{timeoutId:setTimeout(i,t),startTime:Date.now(),timeout:t,maxTotalTimeout:r,resetTimeoutOnProgress:o,onTimeout:i})}_resetTimeout(e){let t=this._timeoutInfo.get(e);if(!t)return!1;let r=Date.now()-t.startTime;if(t.maxTotalTimeout&&r>=t.maxTotalTimeout)throw this._timeoutInfo.delete(e),new Gi(co.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:t.maxTotalTimeout,totalElapsed:r});return clearTimeout(t.timeoutId),t.timeoutId=setTimeout(t.onTimeout,t.timeout),!0}_cleanupTimeout(e){let t=this._timeoutInfo.get(e);t&&(clearTimeout(t.timeoutId),this._timeoutInfo.delete(e))}connect(e){return v(this,null,function*(){var t,r,i;this._transport=e;let o=(t=this.transport)===null||t===void 0?void 0:t.onclose;this._transport.onclose=()=>{o?.(),this._onclose()};let s=(r=this.transport)===null||r===void 0?void 0:r.onerror;this._transport.onerror=l=>{s?.(l),this._onerror(l)};let a=(i=this._transport)===null||i===void 0?void 0:i.onmessage;this._transport.onmessage=(l,c)=>{a?.(l,c),ym(l)||uB(l)?this._onresponse(l):Ty(l)?this._onrequest(l,c):aB(l)?this._onnotification(l):this._onerror(new Error(`Unknown message type: ${JSON.stringify(l)}`))},yield this._transport.start()})}_onclose(){var e;let t=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._transport=void 0,(e=this.onclose)===null||e===void 0||e.call(this);let r=new Gi(co.ConnectionClosed,"Connection closed");for(let i of t.values())i(r)}_onerror(e){var t;(t=this.onerror)===null||t===void 0||t.call(this,e)}_onnotification(e){var t;let r=(t=this._notificationHandlers.get(e.method))!==null&&t!==void 0?t:this.fallbackNotificationHandler;r!==void 0&&Promise.resolve().then(()=>r(e)).catch(i=>this._onerror(new Error(`Uncaught error in notification handler: ${i}`)))}_onrequest(e,t){var r,i,o,s;let a=(r=this._requestHandlers.get(e.method))!==null&&r!==void 0?r:this.fallbackRequestHandler;if(a===void 0){(i=this._transport)===null||i===void 0||i.send({jsonrpc:"2.0",id:e.id,error:{code:co.MethodNotFound,message:"Method not found"}}).catch(u=>this._onerror(new Error(`Failed to send an error response: ${u}`)));return}let l=new AbortController;this._requestHandlerAbortControllers.set(e.id,l);let c={signal:l.signal,sessionId:(o=this._transport)===null||o===void 0?void 0:o.sessionId,_meta:(s=e.params)===null||s===void 0?void 0:s._meta,sendNotification:u=>this.notification(u,{relatedRequestId:e.id}),sendRequest:(u,d,h)=>this.request(u,d,w(m({},h),{relatedRequestId:e.id})),authInfo:t?.authInfo,requestId:e.id,requestInfo:t?.requestInfo};Promise.resolve().then(()=>a(e,c)).then(u=>{var d;if(!l.signal.aborted)return(d=this._transport)===null||d===void 0?void 0:d.send({result:u,jsonrpc:"2.0",id:e.id})},u=>{var d,h;if(!l.signal.aborted)return(d=this._transport)===null||d===void 0?void 0:d.send({jsonrpc:"2.0",id:e.id,error:{code:Number.isSafeInteger(u.code)?u.code:co.InternalError,message:(h=u.message)!==null&&h!==void 0?h:"Internal error"}})}).catch(u=>this._onerror(new Error(`Failed to send response: ${u}`))).finally(()=>{this._requestHandlerAbortControllers.delete(e.id)})}_onprogress(e){let l=e.params,{progressToken:t}=l,r=Ae(l,["progressToken"]),i=Number(t),o=this._progressHandlers.get(i);if(!o){this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(e)}`));return}let s=this._responseHandlers.get(i),a=this._timeoutInfo.get(i);if(a&&s&&a.resetTimeoutOnProgress)try{this._resetTimeout(i)}catch(c){s(c);return}o(r)}_onresponse(e){let t=Number(e.id),r=this._responseHandlers.get(t);if(r===void 0){this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(e)}`));return}if(this._responseHandlers.delete(t),this._progressHandlers.delete(t),this._cleanupTimeout(t),ym(e))r(e);else{let i=new Gi(e.error.code,e.error.message,e.error.data);r(i)}}get transport(){return this._transport}close(){return v(this,null,function*(){var e;yield(e=this._transport)===null||e===void 0?void 0:e.close()})}request(e,t,r){let{relatedRequestId:i,resumptionToken:o,onresumptiontoken:s}=r??{};return new Promise((a,l)=>{var c,u,d,h,f,p;if(!this._transport){l(new Error("Not connected"));return}((c=this._options)===null||c===void 0?void 0:c.enforceStrictCapabilities)===!0&&this.assertCapabilityForMethod(e.method),(u=r?.signal)===null||u===void 0||u.throwIfAborted();let g=this._requestMessageId++,_=w(m({},e),{jsonrpc:"2.0",id:g});r?.onprogress&&(this._progressHandlers.set(g,r.onprogress),_.params=w(m({},e.params),{_meta:w(m({},((d=e.params)===null||d===void 0?void 0:d._meta)||{}),{progressToken:g})}));let y=A=>{var P;this._responseHandlers.delete(g),this._progressHandlers.delete(g),this._cleanupTimeout(g),(P=this._transport)===null||P===void 0||P.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:g,reason:String(A)}},{relatedRequestId:i,resumptionToken:o,onresumptiontoken:s}).catch(R=>this._onerror(new Error(`Failed to send cancellation: ${R}`))),l(A)};this._responseHandlers.set(g,A=>{var P;if(!(!((P=r?.signal)===null||P===void 0)&&P.aborted)){if(A instanceof Error)return l(A);try{let R=t.parse(A.result);a(R)}catch(R){l(R)}}}),(h=r?.signal)===null||h===void 0||h.addEventListener("abort",()=>{var A;y((A=r?.signal)===null||A===void 0?void 0:A.reason)});let E=(f=r?.timeout)!==null&&f!==void 0?f:AZ,T=()=>y(new Gi(co.RequestTimeout,"Request timed out",{timeout:E}));this._setupTimeout(g,E,r?.maxTotalTimeout,T,(p=r?.resetTimeoutOnProgress)!==null&&p!==void 0?p:!1),this._transport.send(_,{relatedRequestId:i,resumptionToken:o,onresumptiontoken:s}).catch(A=>{this._cleanupTimeout(g),l(A)})})}notification(e,t){return v(this,null,function*(){if(!this._transport)throw new Error("Not connected");this.assertNotificationCapability(e.method);let r=w(m({},e),{jsonrpc:"2.0"});yield this._transport.send(r,t)})}setRequestHandler(e,t){let r=e.shape.method.value;this.assertRequestHandlerCapability(r),this._requestHandlers.set(r,(i,o)=>Promise.resolve(t(e.parse(i),o)))}removeRequestHandler(e){this._requestHandlers.delete(e)}assertCanSetRequestHandler(e){if(this._requestHandlers.has(e))throw new Error(`A request handler for ${e} already exists, which would be overridden`)}setNotificationHandler(e,t){this._notificationHandlers.set(e.shape.method.value,r=>Promise.resolve(t(e.parse(r))))}removeNotificationHandler(e){this._notificationHandlers.delete(e)}};function yB(n,e){return Object.entries(e).reduce((t,[r,i])=>(i&&typeof i=="object"?t[r]=t[r]?m(m({},t[r]),i):i:t[r]=i,t),m({},n))}var x$=MO(w$(),1);var Jy=class n extends Py{constructor(e,t){var r;super(t),this._clientInfo=e,this._cachedToolOutputValidators=new Map,this._capabilities=(r=t?.capabilities)!==null&&r!==void 0?r:{},this._ajv=new x$.default}registerCapabilities(e){if(this.transport)throw new Error("Cannot register capabilities after connecting to transport");this._capabilities=yB(this._capabilities,e)}assertCapability(e,t){var r;if(!(!((r=this._serverCapabilities)===null||r===void 0)&&r[e]))throw new Error(`Server does not support ${e} (required for ${t})`)}connect(e,t){return v(this,null,function*(){if(yield sr(n.prototype,this,"connect").call(this,e),e.sessionId===void 0)try{let r=yield this.request({method:"initialize",params:{protocolVersion:Vd,capabilities:this._capabilities,clientInfo:this._clientInfo}},kT,t);if(r===void 0)throw new Error(`Server sent invalid initialize result: ${r}`);if(!nB.includes(r.protocolVersion))throw new Error(`Server's protocol version is not supported: ${r.protocolVersion}`);this._serverCapabilities=r.capabilities,this._serverVersion=r.serverInfo,e.setProtocolVersion&&e.setProtocolVersion(r.protocolVersion),this._instructions=r.instructions,yield this.notification({method:"notifications/initialized"})}catch(r){throw this.close(),r}})}getServerCapabilities(){return this._serverCapabilities}getServerVersion(){return this._serverVersion}getInstructions(){return this._instructions}assertCapabilityForMethod(e){var t,r,i,o,s;switch(e){case"logging/setLevel":if(!(!((t=this._serverCapabilities)===null||t===void 0)&&t.logging))throw new Error(`Server does not support logging (required for ${e})`);break;case"prompts/get":case"prompts/list":if(!(!((r=this._serverCapabilities)===null||r===void 0)&&r.prompts))throw new Error(`Server does not support prompts (required for ${e})`);break;case"resources/list":case"resources/templates/list":case"resources/read":case"resources/subscribe":case"resources/unsubscribe":if(!(!((i=this._serverCapabilities)===null||i===void 0)&&i.resources))throw new Error(`Server does not support resources (required for ${e})`);if(e==="resources/subscribe"&&!this._serverCapabilities.resources.subscribe)throw new Error(`Server does not support resource subscriptions (required for ${e})`);break;case"tools/call":case"tools/list":if(!(!((o=this._serverCapabilities)===null||o===void 0)&&o.tools))throw new Error(`Server does not support tools (required for ${e})`);break;case"completion/complete":if(!(!((s=this._serverCapabilities)===null||s===void 0)&&s.completions))throw new Error(`Server does not support completions (required for ${e})`);break;case"initialize":break;case"ping":break}}assertNotificationCapability(e){var t;switch(e){case"notifications/roots/list_changed":if(!(!((t=this._capabilities.roots)===null||t===void 0)&&t.listChanged))throw new Error(`Client does not support roots list changed notifications (required for ${e})`);break;case"notifications/initialized":break;case"notifications/cancelled":break;case"notifications/progress":break}}assertRequestHandlerCapability(e){switch(e){case"sampling/createMessage":if(!this._capabilities.sampling)throw new Error(`Client does not support sampling capability (required for ${e})`);break;case"elicitation/create":if(!this._capabilities.elicitation)throw new Error(`Client does not support elicitation capability (required for ${e})`);break;case"roots/list":if(!this._capabilities.roots)throw new Error(`Client does not support roots capability (required for ${e})`);break;case"ping":break}}ping(e){return v(this,null,function*(){return this.request({method:"ping"},wc,e)})}complete(e,t){return v(this,null,function*(){return this.request({method:"completion/complete",params:e},VT,t)})}setLoggingLevel(e,t){return v(this,null,function*(){return this.request({method:"logging/setLevel",params:{level:e}},wc,t)})}getPrompt(e,t){return v(this,null,function*(){return this.request({method:"prompts/get",params:e},Em,t)})}listPrompts(e,t){return v(this,null,function*(){return this.request({method:"prompts/list",params:e},Cm,t)})}listResources(e,t){return v(this,null,function*(){return this.request({method:"resources/list",params:e},Ud,t)})}listResourceTemplates(e,t){return v(this,null,function*(){return this.request({method:"resources/templates/list",params:e},RT,t)})}readResource(e,t){return v(this,null,function*(){return this.request({method:"resources/read",params:e},xm,t)})}subscribeResource(e,t){return v(this,null,function*(){return this.request({method:"resources/subscribe",params:e},wc,t)})}unsubscribeResource(e,t){return v(this,null,function*(){return this.request({method:"resources/unsubscribe",params:e},wc,t)})}callTool(i){return v(this,arguments,function*(e,t=ia,r){let o=yield this.request({method:"tools/call",params:e},t,r),s=this.getToolOutputValidator(e.name);if(s){if(!o.structuredContent&&!o.isError)throw new Gi(co.InvalidRequest,`Tool ${e.name} has an output schema but did not return structured content`);if(o.structuredContent)try{if(!s(o.structuredContent))throw new Gi(co.InvalidParams,`Structured content does not match the tool's output schema: ${this._ajv.errorsText(s.errors)}`)}catch(a){throw a instanceof Gi?a:new Gi(co.InvalidParams,`Failed to validate structured content: ${a instanceof Error?a.message:String(a)}`)}}return o})}cacheToolOutputSchemas(e){this._cachedToolOutputValidators.clear();for(let t of e)if(t.outputSchema)try{let r=this._ajv.compile(t.outputSchema);this._cachedToolOutputValidators.set(t.name,r)}catch{}}getToolOutputValidator(e){return this._cachedToolOutputValidators.get(e)}listTools(e,t){return v(this,null,function*(){let r=yield this.request({method:"tools/list",params:e},Im,t);return this.cacheToolOutputSchemas(r.tools),r})}sendRootsListChanged(){return v(this,null,function*(){return this.notification({method:"notifications/roots/list_changed"})})}};var dA;dA=globalThis.crypto;function lJ(n){return v(this,null,function*(){return(yield dA).getRandomValues(new Uint8Array(n))})}function cJ(n){return v(this,null,function*(){let e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-._~",t="",r=yield lJ(n);for(let i=0;i<n;i++){let o=r[i]%e.length;t+=e[o]}return t})}function uJ(n){return v(this,null,function*(){return yield cJ(n)})}function dJ(n){return v(this,null,function*(){let e=yield(yield dA).subtle.digest("SHA-256",new TextEncoder().encode(n));return btoa(String.fromCharCode(...new Uint8Array(e))).replace(/\//g,"_").replace(/\+/g,"-").replace(/=/g,"")})}function fA(n){return v(this,null,function*(){if(n||(n=43),n<43||n>128)throw`Expected a length between 43 and 128. Received ${n}.`;let e=yield uJ(n),t=yield dJ(e);return{code_verifier:e,code_challenge:t}})}var C$=b.object({resource:b.string().url(),authorization_servers:b.array(b.string().url()).optional(),jwks_uri:b.string().url().optional(),scopes_supported:b.array(b.string()).optional(),bearer_methods_supported:b.array(b.string()).optional(),resource_signing_alg_values_supported:b.array(b.string()).optional(),resource_name:b.string().optional(),resource_documentation:b.string().optional(),resource_policy_uri:b.string().url().optional(),resource_tos_uri:b.string().url().optional(),tls_client_certificate_bound_access_tokens:b.boolean().optional(),authorization_details_types_supported:b.array(b.string()).optional(),dpop_signing_alg_values_supported:b.array(b.string()).optional(),dpop_bound_access_tokens_required:b.boolean().optional()}).passthrough(),E$=b.object({issuer:b.string(),authorization_endpoint:b.string(),token_endpoint:b.string(),registration_endpoint:b.string().optional(),scopes_supported:b.array(b.string()).optional(),response_types_supported:b.array(b.string()),response_modes_supported:b.array(b.string()).optional(),grant_types_supported:b.array(b.string()).optional(),token_endpoint_auth_methods_supported:b.array(b.string()).optional(),token_endpoint_auth_signing_alg_values_supported:b.array(b.string()).optional(),service_documentation:b.string().optional(),revocation_endpoint:b.string().optional(),revocation_endpoint_auth_methods_supported:b.array(b.string()).optional(),revocation_endpoint_auth_signing_alg_values_supported:b.array(b.string()).optional(),introspection_endpoint:b.string().optional(),introspection_endpoint_auth_methods_supported:b.array(b.string()).optional(),introspection_endpoint_auth_signing_alg_values_supported:b.array(b.string()).optional(),code_challenge_methods_supported:b.array(b.string()).optional()}).passthrough(),hA=b.object({access_token:b.string(),token_type:b.string(),expires_in:b.number().optional(),scope:b.string().optional(),refresh_token:b.string().optional()}).strip(),QIe=b.object({error:b.string(),error_description:b.string().optional(),error_uri:b.string().optional()}),fJ=b.object({redirect_uris:b.array(b.string()).refine(n=>n.every(e=>URL.canParse(e)),{message:"redirect_uris must contain valid URLs"}),token_endpoint_auth_method:b.string().optional(),grant_types:b.array(b.string()).optional(),response_types:b.array(b.string()).optional(),client_name:b.string().optional(),client_uri:b.string().optional(),logo_uri:b.string().optional(),scope:b.string().optional(),contacts:b.array(b.string()).optional(),tos_uri:b.string().optional(),policy_uri:b.string().optional(),jwks_uri:b.string().optional(),jwks:b.any().optional(),software_id:b.string().optional(),software_version:b.string().optional(),software_statement:b.string().optional()}).strip(),hJ=b.object({client_id:b.string(),client_secret:b.string().optional(),client_id_issued_at:b.number().optional(),client_secret_expires_at:b.number().optional()}).strip(),I$=fJ.merge(hJ),YIe=b.object({error:b.string(),error_description:b.string().optional()}).strip(),ZIe=b.object({token:b.string(),token_type_hint:b.string().optional()}).strip();function S$(n){let e=typeof n=="string"?new URL(n):new URL(n.href);return e.hash="",e}function D$({requestedResource:n,configuredResource:e}){let t=typeof n=="string"?new URL(n):new URL(n.href),r=typeof e=="string"?new URL(e):new URL(e.href);if(t.origin!==r.origin||t.pathname.length<r.pathname.length)return!1;let i=t.pathname.endsWith("/")?t.pathname:t.pathname+"/",o=r.pathname.endsWith("/")?r.pathname:r.pathname+"/";return i.startsWith(o)}var rl=class extends Error{constructor(e){super(e??"Unauthorized")}};function A$(n,e){let t=n.client_secret!==void 0;return e.length===0?t?"client_secret_post":"none":t&&e.includes("client_secret_basic")?"client_secret_basic":t&&e.includes("client_secret_post")?"client_secret_post":e.includes("none")?"none":t?"client_secret_post":"none"}function k$(n,e,t,r){let{client_id:i,client_secret:o}=e;switch(n){case"client_secret_basic":pJ(i,o,t);return;case"client_secret_post":mJ(i,o,r);return;case"none":gJ(i,r);return;default:throw new Error(`Unsupported client authentication method: ${n}`)}}function pJ(n,e,t){if(!e)throw new Error("client_secret_basic authentication requires a client_secret");let r=btoa(`${n}:${e}`);t.set("Authorization",`Basic ${r}`)}function mJ(n,e,t){t.set("client_id",n),e&&t.set("client_secret",e)}function gJ(n,e){e.set("client_id",n)}function e0(o,s){return v(this,arguments,function*(n,{serverUrl:e,authorizationCode:t,scope:r,resourceMetadataUrl:i}){let a,l=e;try{a=yield bJ(e,{resourceMetadataUrl:i}),a.authorization_servers&&a.authorization_servers.length>0&&(l=a.authorization_servers[0])}catch{}let c=yield _J(e,n,a),u=yield wJ(e,{authorizationServerUrl:l}),d=yield Promise.resolve(n.clientInformation());if(!d){if(t!==void 0)throw new Error("Existing OAuth client information is required when exchanging an authorization code");if(!n.saveClientInformation)throw new Error("OAuth client information must be saveable for dynamic registration");let _=yield IJ(l,{metadata:u,clientMetadata:n.clientMetadata});yield n.saveClientInformation(_),d=_}if(t!==void 0){let _=yield n.codeVerifier(),y=yield CJ(l,{metadata:u,clientInformation:d,authorizationCode:t,codeVerifier:_,redirectUri:n.redirectUrl,resource:c,addClientAuthentication:n.addClientAuthentication});return yield n.saveTokens(y),"AUTHORIZED"}let h=yield n.tokens();if(h?.refresh_token)try{let _=yield EJ(l,{metadata:u,clientInformation:d,refreshToken:h.refresh_token,resource:c,addClientAuthentication:n.addClientAuthentication});return yield n.saveTokens(_),"AUTHORIZED"}catch{}let f=n.state?yield n.state():void 0,{authorizationUrl:p,codeVerifier:g}=yield xJ(l,{metadata:u,clientInformation:d,state:f,redirectUrl:n.redirectUrl,scope:r||n.clientMetadata.scope,resource:c});return yield n.saveCodeVerifier(g),yield n.redirectToAuthorization(p),"REDIRECT"})}function _J(n,e,t){return v(this,null,function*(){let r=S$(n);if(e.validateResourceURL)return yield e.validateResourceURL(r,t?.resource);if(t){if(!D$({requestedResource:r,configuredResource:t.resource}))throw new Error(`Protected resource ${t.resource} does not match expected ${r} (or origin)`);return new URL(t.resource)}})}function R$(n){let e=n.headers.get("WWW-Authenticate");if(!e)return;let[t,r]=e.split(" ");if(t.toLowerCase()!=="bearer"||!r)return;let o=/resource_metadata="([^"]*)"/.exec(e);if(o)try{return new URL(o[1])}catch{return}}function bJ(n,e){return v(this,null,function*(){let t=yield O$(n,"oauth-protected-resource",{protocolVersion:e?.protocolVersion,metadataUrl:e?.resourceMetadataUrl});if(!t||t.status===404)throw new Error("Resource server does not implement OAuth 2.0 Protected Resource Metadata.");if(!t.ok)throw new Error(`HTTP ${t.status} trying to load well-known OAuth protected resource metadata.`);return C$.parse(yield t.json())})}function M$(n,e){return v(this,null,function*(){try{return yield fetch(n,{headers:e})}catch(t){if(t instanceof TypeError)return e?M$(n):void 0;throw t}})}function vJ(n,e){let t=`/.well-known/${n}${e}`;return e.endsWith("/")&&(t=t.slice(0,-1)),t}function T$(n,e){return v(this,null,function*(){return yield M$(n,{"MCP-Protocol-Version":e})})}function yJ(n,e){return!n||n.status===404&&e!=="/"}function O$(n,e,t){return v(this,null,function*(){var r,i;let o=new URL(n),s=(r=t?.protocolVersion)!==null&&r!==void 0?r:Vd,a;if(t?.metadataUrl)a=new URL(t.metadataUrl);else{let c=vJ(e,o.pathname);a=new URL(c,(i=t?.metadataServerUrl)!==null&&i!==void 0?i:o),a.search=o.search}let l=yield T$(a,s);if(!t?.metadataUrl&&yJ(l,o.pathname)){let c=new URL(`/.well-known/${e}`,o);l=yield T$(c,s)}return l})}function wJ(r){return v(this,arguments,function*(n,{authorizationServerUrl:e,protocolVersion:t}={}){typeof n=="string"&&(n=new URL(n)),e||(e=n),typeof e=="string"&&(e=new URL(e)),t??(t=Vd);let i=yield O$(n,"oauth-authorization-server",{protocolVersion:t,metadataServerUrl:e});if(!(!i||i.status===404)){if(!i.ok)throw new Error(`HTTP ${i.status} trying to load well-known OAuth metadata`);return E$.parse(yield i.json())}})}function xJ(a,l){return v(this,arguments,function*(n,{metadata:e,clientInformation:t,redirectUrl:r,scope:i,state:o,resource:s}){let c="code",u="S256",d;if(e){if(d=new URL(e.authorization_endpoint),!e.response_types_supported.includes(c))throw new Error(`Incompatible auth server: does not support response type ${c}`);if(!e.code_challenge_methods_supported||!e.code_challenge_methods_supported.includes(u))throw new Error(`Incompatible auth server: does not support code challenge method ${u}`)}else d=new URL("/authorize",n);let h=yield fA(),f=h.code_verifier,p=h.code_challenge;return d.searchParams.set("response_type",c),d.searchParams.set("client_id",t.client_id),d.searchParams.set("code_challenge",p),d.searchParams.set("code_challenge_method",u),d.searchParams.set("redirect_uri",String(r)),o&&d.searchParams.set("state",o),i&&d.searchParams.set("scope",i),s&&d.searchParams.set("resource",s.href),{authorizationUrl:d,codeVerifier:f}})}function CJ(l,c){return v(this,arguments,function*(n,{metadata:e,clientInformation:t,authorizationCode:r,codeVerifier:i,redirectUri:o,resource:s,addClientAuthentication:a}){var u;let d="authorization_code",h=e?.token_endpoint?new URL(e.token_endpoint):new URL("/token",n);if(e?.grant_types_supported&&!e.grant_types_supported.includes(d))throw new Error(`Incompatible auth server: does not support grant type ${d}`);let f=new Headers({"Content-Type":"application/x-www-form-urlencoded"}),p=new URLSearchParams({grant_type:d,code:r,code_verifier:i,redirect_uri:String(o)});if(a)a(f,p,n,e);else{let _=(u=e?.token_endpoint_auth_methods_supported)!==null&&u!==void 0?u:[],y=A$(t,_);k$(y,t,f,p)}s&&p.set("resource",s.href);let g=yield fetch(h,{method:"POST",headers:f,body:p});if(!g.ok)throw new Error(`Token exchange failed: HTTP ${g.status}`);return hA.parse(yield g.json())})}function EJ(s,a){return v(this,arguments,function*(n,{metadata:e,clientInformation:t,refreshToken:r,resource:i,addClientAuthentication:o}){var l;let c="refresh_token",u;if(e){if(u=new URL(e.token_endpoint),e.grant_types_supported&&!e.grant_types_supported.includes(c))throw new Error(`Incompatible auth server: does not support grant type ${c}`)}else u=new URL("/token",n);let d=new Headers({"Content-Type":"application/x-www-form-urlencoded"}),h=new URLSearchParams({grant_type:c,refresh_token:r});if(o)o(d,h,n,e);else{let p=(l=e?.token_endpoint_auth_methods_supported)!==null&&l!==void 0?l:[],g=A$(t,p);k$(g,t,d,h)}i&&h.set("resource",i.href);let f=yield fetch(u,{method:"POST",headers:d,body:h});if(!f.ok)throw new Error(`Token refresh failed: HTTP ${f.status}`);return hA.parse(m({refresh_token:r},yield f.json()))})}function IJ(r,i){return v(this,arguments,function*(n,{metadata:e,clientMetadata:t}){let o;if(e){if(!e.registration_endpoint)throw new Error("Incompatible auth server: does not support dynamic client registration");o=new URL(e.registration_endpoint)}else o=new URL("/register",n);let s=yield fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok)throw new Error(`Dynamic client registration failed: HTTP ${s.status}`);return I$.parse(yield s.json())})}var t0=class extends Error{constructor(e,t){super(e),this.name="ParseError",this.type=t.type,this.field=t.field,this.value=t.value,this.line=t.line}};function pA(n){}function P$(n){if(typeof n=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");let{onEvent:e=pA,onError:t=pA,onRetry:r=pA,onComment:i}=n,o="",s=!0,a,l="",c="";function u(g){let _=s?g.replace(/^\xEF\xBB\xBF/,""):g,[y,E]=SJ(`${o}${_}`);for(let T of y)d(T);o=E,s=!1}function d(g){if(g===""){f();return}if(g.startsWith(":")){i&&i(g.slice(g.startsWith(": ")?2:1));return}let _=g.indexOf(":");if(_!==-1){let y=g.slice(0,_),E=g[_+1]===" "?2:1,T=g.slice(_+E);h(y,T,g);return}h(g,"",g)}function h(g,_,y){switch(g){case"event":c=_;break;case"data":l=`${l}${_}
`;break;case"id":a=_.includes("\0")?void 0:_;break;case"retry":/^\d+$/.test(_)?r(parseInt(_,10)):t(new t0(`Invalid \`retry\` value: "${_}"`,{type:"invalid-retry",value:_,line:y}));break;default:t(new t0(`Unknown field "${g.length>20?`${g.slice(0,20)}\u2026`:g}"`,{type:"unknown-field",field:g,value:_,line:y}));break}}function f(){l.length>0&&e({id:a,event:c||void 0,data:l.endsWith(`
`)?l.slice(0,-1):l}),a=void 0,l="",c=""}function p(g={}){o&&g.consume&&d(o),s=!0,a=void 0,l="",c="",o=""}return{feed:u,reset:p}}function SJ(n){let e=[],t="",r=0;for(;r<n.length;){let i=n.indexOf("\r",r),o=n.indexOf(`
`,r),s=-1;if(i!==-1&&o!==-1?s=Math.min(i,o):i!==-1?s=i:o!==-1&&(s=o),s===-1){t=n.slice(r);break}else{let a=n.slice(r,s);e.push(a),r=s+1,n[r-1]==="\r"&&n[r]===`
`&&r++}}return[e,t]}var n0=class extends TransformStream{constructor({onError:e,onRetry:t,onComment:r}={}){let i;super({start(o){i=P$({onEvent:s=>{o.enqueue(s)},onError(s){e==="terminate"?o.error(s):typeof e=="function"&&e(s)},onRetry:t,onComment:r})},transform(o){i.feed(o)}})}};var DJ={initialReconnectionDelay:1e3,maxReconnectionDelay:3e4,reconnectionDelayGrowFactor:1.5,maxRetries:2},Dm=class extends Error{constructor(e,t){super(`Streamable HTTP error: ${t}`),this.code=e}},r0=class{constructor(e,t){var r;this._url=e,this._resourceMetadataUrl=void 0,this._requestInit=t?.requestInit,this._authProvider=t?.authProvider,this._fetch=t?.fetch,this._sessionId=t?.sessionId,this._reconnectionOptions=(r=t?.reconnectionOptions)!==null&&r!==void 0?r:DJ}_authThenStart(){return v(this,null,function*(){var e;if(!this._authProvider)throw new rl("No auth provider");let t;try{t=yield e0(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl})}catch(r){throw(e=this.onerror)===null||e===void 0||e.call(this,r),r}if(t!=="AUTHORIZED")throw new rl;return yield this._startOrAuthSse({resumptionToken:void 0})})}_commonHeaders(){return v(this,null,function*(){var e;let t={};if(this._authProvider){let i=yield this._authProvider.tokens();i&&(t.Authorization=`Bearer ${i.access_token}`)}this._sessionId&&(t["mcp-session-id"]=this._sessionId),this._protocolVersion&&(t["mcp-protocol-version"]=this._protocolVersion);let r=this._normalizeHeaders((e=this._requestInit)===null||e===void 0?void 0:e.headers);return new Headers(m(m({},t),r))})}_startOrAuthSse(e){return v(this,null,function*(){var t,r,i;let{resumptionToken:o}=e;try{let s=yield this._commonHeaders();s.set("Accept","text/event-stream"),o&&s.set("last-event-id",o);let a=yield((t=this._fetch)!==null&&t!==void 0?t:fetch)(this._url,{method:"GET",headers:s,signal:(r=this._abortController)===null||r===void 0?void 0:r.signal});if(!a.ok){if(a.status===401&&this._authProvider)return yield this._authThenStart();if(a.status===405)return;throw new Dm(a.status,`Failed to open SSE stream: ${a.statusText}`)}this._handleSseStream(a.body,e)}catch(s){throw(i=this.onerror)===null||i===void 0||i.call(this,s),s}})}_getNextReconnectionDelay(e){let t=this._reconnectionOptions.initialReconnectionDelay,r=this._reconnectionOptions.reconnectionDelayGrowFactor,i=this._reconnectionOptions.maxReconnectionDelay;return Math.min(t*Math.pow(r,e),i)}_normalizeHeaders(e){return e?e instanceof Headers?Object.fromEntries(e.entries()):Array.isArray(e)?Object.fromEntries(e):m({},e):{}}_scheduleReconnection(e,t=0){var r;let i=this._reconnectionOptions.maxRetries;if(i>0&&t>=i){(r=this.onerror)===null||r===void 0||r.call(this,new Error(`Maximum reconnection attempts (${i}) exceeded.`));return}let o=this._getNextReconnectionDelay(t);setTimeout(()=>{this._startOrAuthSse(e).catch(s=>{var a;(a=this.onerror)===null||a===void 0||a.call(this,new Error(`Failed to reconnect SSE stream: ${s instanceof Error?s.message:String(s)}`)),this._scheduleReconnection(e,t+1)})},o)}_handleSseStream(e,t){if(!e)return;let{onresumptiontoken:r,replayMessageId:i}=t,o;v(this,null,function*(){var a,l,c,u;try{let d=e.pipeThrough(new TextDecoderStream).pipeThrough(new n0).getReader();for(;;){let{value:h,done:f}=yield d.read();if(f)break;if(h.id&&(o=h.id,r?.(h.id)),!h.event||h.event==="message")try{let p=Ay.parse(JSON.parse(h.data));i!==void 0&&ym(p)&&(p.id=i),(a=this.onmessage)===null||a===void 0||a.call(this,p)}catch(p){(l=this.onerror)===null||l===void 0||l.call(this,p)}}}catch(d){if((c=this.onerror)===null||c===void 0||c.call(this,new Error(`SSE stream disconnected: ${d}`)),this._abortController&&!this._abortController.signal.aborted&&o!==void 0)try{this._scheduleReconnection({resumptionToken:o,onresumptiontoken:r,replayMessageId:i},0)}catch(h){(u=this.onerror)===null||u===void 0||u.call(this,new Error(`Failed to reconnect: ${h instanceof Error?h.message:String(h)}`))}}})}start(){return v(this,null,function*(){if(this._abortController)throw new Error("StreamableHTTPClientTransport already started! If using Client class, note that connect() calls start() automatically.");this._abortController=new AbortController})}finishAuth(e){return v(this,null,function*(){if(!this._authProvider)throw new rl("No auth provider");if((yield e0(this._authProvider,{serverUrl:this._url,authorizationCode:e,resourceMetadataUrl:this._resourceMetadataUrl}))!=="AUTHORIZED")throw new rl("Failed to authorize")})}close(){return v(this,null,function*(){var e,t;(e=this._abortController)===null||e===void 0||e.abort(),(t=this.onclose)===null||t===void 0||t.call(this)})}send(e,t){return v(this,null,function*(){var r,i,o,s;try{let{resumptionToken:a,onresumptiontoken:l}=t||{};if(a){this._startOrAuthSse({resumptionToken:a,replayMessageId:Ty(e)?e.id:void 0}).catch(_=>{var y;return(y=this.onerror)===null||y===void 0?void 0:y.call(this,_)});return}let c=yield this._commonHeaders();c.set("content-type","application/json"),c.set("accept","application/json, text/event-stream");let u=w(m({},this._requestInit),{method:"POST",headers:c,body:JSON.stringify(e),signal:(r=this._abortController)===null||r===void 0?void 0:r.signal}),d=yield((i=this._fetch)!==null&&i!==void 0?i:fetch)(this._url,u),h=d.headers.get("mcp-session-id");if(h&&(this._sessionId=h),!d.ok){if(d.status===401&&this._authProvider){if(this._resourceMetadataUrl=R$(d),(yield e0(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl}))!=="AUTHORIZED")throw new rl;return this.send(e)}let _=yield d.text().catch(()=>null);throw new Error(`Error POSTing to endpoint (HTTP ${d.status}): ${_}`)}if(d.status===202){hB(e)&&this._startOrAuthSse({resumptionToken:void 0}).catch(_=>{var y;return(y=this.onerror)===null||y===void 0?void 0:y.call(this,_)});return}let p=(Array.isArray(e)?e:[e]).filter(_=>"method"in _&&"id"in _&&_.id!==void 0).length>0,g=d.headers.get("content-type");if(p)if(g?.includes("text/event-stream"))this._handleSseStream(d.body,{onresumptiontoken:l});else if(g?.includes("application/json")){let _=yield d.json(),y=Array.isArray(_)?_.map(E=>Ay.parse(E)):[Ay.parse(_)];for(let E of y)(o=this.onmessage)===null||o===void 0||o.call(this,E)}else throw new Dm(-1,`Unexpected content type: ${g}`)}catch(a){throw(s=this.onerror)===null||s===void 0||s.call(this,a),a}})}get sessionId(){return this._sessionId}terminateSession(){return v(this,null,function*(){var e,t,r;if(this._sessionId)try{let i=yield this._commonHeaders(),o=w(m({},this._requestInit),{method:"DELETE",headers:i,signal:(e=this._abortController)===null||e===void 0?void 0:e.signal}),s=yield((t=this._fetch)!==null&&t!==void 0?t:fetch)(this._url,o);if(!s.ok&&s.status!==405)throw new Dm(s.status,`Failed to terminate session: ${s.statusText}`);this._sessionId=void 0}catch(i){throw(r=this.onerror)===null||r===void 0||r.call(this,i),i}})}setProtocolVersion(e){this._protocolVersion=e}get protocolVersion(){return this._protocolVersion}};function i0(n){var e;if(n.title!==void 0&&n.title!=="")return n.title;if("annotations"in n){let t=n;if(!((e=t.annotations)===null||e===void 0)&&e.title)return t.annotations.title}return n.name}var o0=class n{formatToolForOpenAI(e){let t={};return Object.entries(e.inputSchema.properties).forEach(([r,i])=>{let o="";e.annotations&&e.annotations[r]&&e.annotations[r].description&&(o=e.annotations[r]?e.annotations[r].description:null),t[r]={type:i.type,description:o||`user questions on ${e.title}`}}),{type:"function",function:{name:e.name,description:e.description.trim(),parameters:{type:"object",properties:t,required:e.inputSchema.required}}}}formatMultipleTools(e){return e.map(t=>this.formatToolForOpenAI(t))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})};var fr=class n{constructor(e){this.toolformatterService=e}client=null;transport=null;sessionId=void 0;notificationCount=0;connectionStatusSubject=new Lt(!1);notificationsSubject=new re;elicitRequestSubject=new re;connectionStatus$=this.connectionStatusSubject.asObservable();notifications$=this.notificationsSubject.asObservable();elicitRequests$=this.elicitRequestSubject.asObservable();toolsSubject=new Lt([]);promptsSubject=new Lt([]);resourceSubject=new Lt([]);tools$=this.toolsSubject.asObservable();promtps$=this.promptsSubject.asObservable();resources$=this.resourceSubject.asObservable();messageSource=new Lt(!1);currentMessage$=this.messageSource.asObservable();currentRequest=null;elicitResponseSubject=new re;elicitResponses$=this.elicitResponseSubject.asObservable();notificationsToolLastEventId=void 0;connect(e){return v(this,null,function*(){let t=e;this.client&&(yield this.disconnect()),console.log(`Connecting to ${t}...`);try{this.client=new Jy({name:"angular-mcp-client",version:"1.0.0"},{capabilities:{elicitation:{},sampling:{}}}),this.transport=new r0(new URL(t),{sessionId:localStorage.getItem("mcp_session_id")||void 0,requestInit:{headers:new Headers({Accept:"application/json","Content-Type":"application/json, text/event-stream"}),cache:"no-store"},reconnectionOptions:{maxReconnectionDelay:3e4,initialReconnectionDelay:1e3,reconnectionDelayGrowFactor:1.5,maxRetries:3}}),this.transport.onerror=r=>v(this,null,function*(){console.error("Transport error:",r),r.message.includes("session")&&(localStorage.removeItem("mcp_session_id"),this.connectionStatusSubject.next(!1),this.messageSource.next(!1))}),this.client.onerror=r=>v(this,null,function*(){console.error("Client error:",r),this.notificationsSubject.next({type:"error",message:r.message}),this.connectionStatusSubject.next(!1),this.messageSource.next(!1),localStorage.removeItem("mcp_session_id")}),this.initializeElicitationHandler(this.client),this.samplingCapability(this.client),this.progressNotificationHandler(this.client),this.loggingNotificationHandler(this.client),this.resourceListChangingHandler(this.client),yield this.client.connect(this.transport),this.sessionId=this.transport.sessionId,this.sessionId&&localStorage.setItem("mcp_session_id",this.sessionId),console.log("Transport created with session ID:",this.sessionId),console.log("Connected to MCP server"),this.connectionStatusSubject.next(!0),this.messageSource.next(!0),this.listTools(),this.listPrompts(),this.listResources()}catch(r){throw console.error("Failed to connect:",r),this.client=null,this.transport=null,this.connectionStatusSubject.next(!1),this.messageSource.next(!1),this.toolsSubject.next([]),this.promptsSubject.next([]),this.resourceSubject.next([]),r}})}resourceListChangingHandler(e){e.setNotificationHandler(MT,t=>v(this,null,function*(){console.log("Resource list changed notification received"),this.notificationsSubject.next({type:"resource-change",message:"Resource list has changed"});try{if(!this.client){console.log("Client disconnected, cannot fetch resources");return}let r=yield this.client.request({method:"resources/list",params:{}},Ud);this.notificationsSubject.next({type:"resource-list",resources:r.resources})}catch(r){console.log("Failed to list resources after change notification",r),this.notificationsSubject.next({type:"error",message:"Failed to fetch updated resources"})}}))}loggingNotificationHandler(e){e.setNotificationHandler(FT,t=>{this.notificationCount++;let r={type:"log",level:t.params.level,message:t.params.data,count:this.notificationCount};console.log("MCP Notification:",r),this.notificationsSubject.next(r)})}progressNotificationHandler(e){e.setNotificationHandler($d,t=>{console.log("On progress : ",t),this.notificationCount++;let r={type:"log",progress:t.params.progress,total:t.params.total,message:t.params.message,progressToken:t.params.progressToken,count:this.notificationCount};console.log("MCP Notification:",r),this.notificationsSubject.next(r)})}initializeElicitationHandler(e){e.setRequestHandler(jT,t=>(this.handleElicitRequest(t),new Promise(r=>{let i=this.elicitResponses$.subscribe({next:o=>{i.unsubscribe(),console.log("resp : ",o),r({action:o?.action||"cancel",content:o?.content||{}})},error:()=>{i.unsubscribe(),r({action:"decline"})}})})))}reconnect(){return v(this,null,function*(){let e=localStorage.getItem("mcp_session_id"),t=localStorage.getItem("mcp_server");if(e&&t)this.sessionId=e,yield this.connect(t);else throw new Error("No stored session ID found")})}samplingCapability(e){e.setRequestHandler(LT,()=>({model:"test-model",role:"assistant",content:{type:"text",text:"Test response"}}))}handleElicitRequest(e){let t=e.params.requestedSchema,r=this.parseSchemaToFields(t);this.elicitRequestSubject.next({message:e.params.message,schema:t,fields:r})}parseSchemaToFields(e){let t=e.properties,r=e.required||[];return Object.entries(t).map(([i,o])=>({name:i,title:o.title||i,description:o.description,type:o.type||"string",required:r.includes(i),enum:o.enum,minimum:o.minimum,maximum:o.maximum,minLength:o.minLength,maxLength:o.maxLength,format:o.format,default:o.default}))}submitElicitResponse(e){this.elicitResponseSubject.next(e)}listTools(){return v(this,null,function*(){if(!this.client)throw new Error("Client not connected");let e=yield this.client.request({method:"tools/list",params:{}},Im);for(let t of e.tools)t.displayName=i0(t);this.toolsSubject.next(e.tools),console.log("Tools : ",e.tools)})}createOpenAiToolSchema(e){return this.toolformatterService.formatMultipleTools(e)}listPrompts(){return v(this,null,function*(){if(!this.client)throw new Error("Client not connected");let e=yield this.client.request({method:"prompts/list",params:{}},Cm);for(let t of e.prompts)t.displayName=i0(t);console.log("Prompt : ",e.prompts),this.promptsSubject.next(e.prompts)})}getPrompt(e){return v(this,null,function*(){if(!this.client)throw new Error("Client not connected");return yield this.client.request({method:"prompts/get",params:{promptId:e}},Em)})}callElicitation(e,t=null){return v(this,null,function*(){if(!this.client)throw new Error("Client not connected");return yield this.client.request({method:"elicitation/create",params:{message:e,requestedSchema:t}},BT)})}listResources(){return v(this,null,function*(){if(!this.client)throw new Error("Client not connected");let e=yield this.client.request({method:"resources/list",params:{}},Ud);for(let t of e.resources)t.displayName=i0(t);this.resourceSubject.next(e.resources)})}readResource(e){if(!this.client)throw new Error("Client not connected");return this.client.request({method:"resources/read",params:{resourceLink:e}},xm)}disconnect(){return v(this,null,function*(){if(this.client&&this.transport)try{if(this.transport.sessionId)try{console.log("Terminating session before exit..."),yield this.transport.terminateSession(),console.log("Session terminated successfully")}catch(e){console.error("Error terminating session:",e)}yield this.transport?.close(),this.client=null,this.transport=null,this.sessionId=void 0,this.connectionStatusSubject.next(!1),this.messageSource.next(!1),localStorage.removeItem("mcp_session_id")}catch(e){console.error("Error during disconnect:",e)}})}callTool(e,t){return v(this,null,function*(){let r=this.generateProgressToken();if(!this.client)throw new Error("Client not connected");return yield this.client.request({method:"tools/call",params:{name:e,arguments:t,_meta:{stream:!0,progressToken:r}}},ia)})}longRunningTool(e,t){return v(this,null,function*(){let r=this,i=this.generateProgressToken(),o=s=>{r.notificationsToolLastEventId=s,console.log(`Updated resumption token: ${s}`),console.log(`Updated resumption token: ${r.notificationsToolLastEventId}`)};if(!this.client)throw new Error("Client not connected");return yield this.client.request({method:"tools/call",params:{name:e,arguments:t,_meta:{stream:!0,progressToken:i}}},ia,{resumptionToken:r.notificationsToolLastEventId,onresumptiontoken:o})})}callToolWithStream(e,t){let r=this.generateProgressToken(),i=new re,o="";if(!this.client)throw new Error("Client not connected");return this.client.request({method:"tools/call",params:{name:e,arguments:t,_meta:{progressToken:r,stream:!0}}},ia).then(s=>{this.isComplete(s)?(o+=this.extractContent(s),i.next({content:o,progress:100}),i.complete()):this.handleStreamingResponse(s,i,o)}).catch(s=>{i.error(s)}),i.asObservable()}handleStreamingResponse(e,t,r){e.stream?(e.stream.on("data",i=>{r+=this.extractContent(i),t.next({content:r,progress:this.extractProgress(i)})}),e.stream.on("end",()=>{t.complete()}),e.stream.on("error",i=>{t.error(i)})):e._meta?.streamId?console.log(e._meta?.streamId):(r+=this.extractContent(e),t.next({content:r,progress:100}),t.complete())}handleToolResponse(e,t,r){let i=this.extractContent(e);r+=i,console.log("streaming output : ",r),t.next({content:r,progress:this.extractProgress(e)}),this.isComplete(e)?t.complete():setTimeout(()=>{if(!this.client)throw new Error("Client not connected");this.client.request({method:"tools/call",params:{name:"get_progress",arguments:{progressToken:e._meta?.progressToken}}},ia).then(o=>{this.handleToolResponse(o,t,r)}).catch(o=>{t.error(o)})},500)}extractContent(e){return e.structuredContent?.result||e.output||""}extractProgress(e){return e._meta?.progress||e.progress}isComplete(e){return e._meta?.complete||e.status==="completed"}generateProgressToken(){return Math.random().toString(36).substring(2)+Date.now().toString(36)}static \u0275fac=function(t){return new(t||n)(de(o0))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})};var H$=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(ce(tn),ce(De))};static \u0275dir=me({type:n})}return n})(),Pm=(()=>{class n extends H${static \u0275fac=(()=>{let t;return function(i){return(t||(t=Vt(n)))(i||n)}})();static \u0275dir=me({type:n,features:[ot]})}return n})(),Ec=new G(""),AJ={provide:Ec,useExisting:er(()=>bA),multi:!0},bA=(()=>{class n extends Pm{writeValue(t){this.setProperty("checked",t)}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Vt(n)))(i||n)}})();static \u0275dir=me({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&Me("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},standalone:!1,features:[_t([AJ]),ot]})}return n})(),kJ={provide:Ec,useExisting:er(()=>ol),multi:!0};function RJ(){let n=zi()?zi().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var MJ=new G(""),ol=(()=>{class n extends H${_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!RJ())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(ce(tn),ce(De),ce(MJ,8))};static \u0275dir=me({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Me("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[_t([kJ]),ot]})}return n})();function vA(n){return n==null||yA(n)===0}function yA(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Kd=new G(""),_0=new G(""),OJ=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,uo=class{static min(e){return q$(e)}static max(e){return G$(e)}static required(e){return PJ(e)}static requiredTrue(e){return NJ(e)}static email(e){return FJ(e)}static minLength(e){return LJ(e)}static maxLength(e){return jJ(e)}static pattern(e){return BJ(e)}static nullValidator(e){return a0()}static compose(e){return X$(e)}static composeAsync(e){return J$(e)}};function q$(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function G$(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function PJ(n){return vA(n.value)?{required:!0}:null}function NJ(n){return n.value===!0?null:{required:!0}}function FJ(n){return vA(n.value)||OJ.test(n.value)?null:{email:!0}}function LJ(n){return e=>{let t=e.value?.length??yA(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function jJ(n){return e=>{let t=e.value?.length??yA(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function BJ(n){if(!n)return a0;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(vA(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function a0(n){return null}function W$(n){return n!=null}function K$(n){return Ws(n)?mn(n):n}function Q$(n){let e={};return n.forEach(t=>{e=t!=null?m(m({},e),t):e}),Object.keys(e).length===0?null:e}function Y$(n,e){return e.map(t=>t(n))}function VJ(n){return!n.validate}function Z$(n){return n.map(e=>VJ(e)?e:t=>e.validate(t))}function X$(n){if(!n)return null;let e=n.filter(W$);return e.length==0?null:function(t){return Q$(Y$(t,e))}}function wA(n){return n!=null?X$(Z$(n)):null}function J$(n){if(!n)return null;let e=n.filter(W$);return e.length==0?null:function(t){let r=Y$(t,e).map(K$);return Gh(r).pipe(be(Q$))}}function xA(n){return n!=null?J$(Z$(n)):null}function N$(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function eU(n){return n._rawValidators}function tU(n){return n._rawAsyncValidators}function mA(n){return n?Array.isArray(n)?n:[n]:[]}function l0(n,e){return Array.isArray(n)?n.includes(e):n===e}function F$(n,e){let t=mA(e);return mA(n).forEach(i=>{l0(t,i)||t.push(i)}),t}function L$(n,e){return mA(e).filter(t=>!l0(n,t))}var c0=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=wA(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=xA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},oa=class extends c0{name;get formDirective(){return null}get path(){return null}},sa=class extends c0{_parent=null;name=null;valueAccessor=null},u0=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},$J={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},QSe=w(m({},$J),{"[class.ng-submitted]":"isSubmitted"}),Qd=(()=>{class n extends u0{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(ce(sa,2))};static \u0275dir=me({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Ge("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[ot]})}return n})(),nU=(()=>{class n extends u0{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(ce(oa,10))};static \u0275dir=me({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Ge("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[ot]})}return n})();var Tm="VALID",s0="INVALID",Hd="PENDING",Am="DISABLED",il=class{},d0=class extends il{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Rm=class extends il{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Mm=class extends il{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},qd=class extends il{status;source;constructor(e,t){super(),this.status=e,this.source=t}},f0=class extends il{source;constructor(e){super(),this.source=e}},h0=class extends il{source;constructor(e){super(),this.source=e}};function CA(n){return(b0(n)?n.validators:n)||null}function UJ(n){return Array.isArray(n)?wA(n):n||null}function EA(n,e){return(b0(e)?e.asyncValidators:n)||null}function zJ(n){return Array.isArray(n)?xA(n):n||null}function b0(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function rU(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new se(1e3,"");if(!r[t])throw new se(1001,"")}function iU(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new se(1002,"")})}var Gd=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Gr(this.statusReactive)}set status(e){Gr(()=>this.statusReactive.set(e))}_status=Wr(()=>this.statusReactive());statusReactive=kt(void 0);get valid(){return this.status===Tm}get invalid(){return this.status===s0}get pending(){return this.status==Hd}get disabled(){return this.status===Am}get enabled(){return this.status!==Am}errors;get pristine(){return Gr(this.pristineReactive)}set pristine(e){Gr(()=>this.pristineReactive.set(e))}_pristine=Wr(()=>this.pristineReactive());pristineReactive=kt(!0);get dirty(){return!this.pristine}get touched(){return Gr(this.touchedReactive)}set touched(e){Gr(()=>this.touchedReactive.set(e))}_touched=Wr(()=>this.touchedReactive());touchedReactive=kt(!1);get untouched(){return!this.touched}_events=new re;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(F$(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(F$(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(L$(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(L$(e,this._rawAsyncValidators))}hasValidator(e){return l0(this._rawValidators,e)}hasAsyncValidator(e){return l0(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(w(m({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Mm(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Mm(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(w(m({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Rm(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Rm(!0,r))}markAsPending(e={}){this.status=Hd;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new qd(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(w(m({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Am,this.errors=null,this._forEachChild(i=>{i.disable(w(m({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new d0(this.value,r)),this._events.next(new qd(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(w(m({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Tm,this._forEachChild(r=>{r.enable(w(m({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(w(m({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Tm||this.status===Hd)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new d0(this.value,t)),this._events.next(new qd(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(w(m({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Am:Tm}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Hd,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=K$(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new qd(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Ie,this.statusChanges=new Ie}_calculateStatus(){return this._allControlsDisabled()?Am:this.errors?s0:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Hd)?Hd:this._anyControlsHaveStatus(s0)?s0:Tm}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Rm(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Mm(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){b0(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=UJ(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=zJ(this._rawAsyncValidators)}},Wd=class extends Gd{constructor(e,t,r){super(CA(t),EA(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){iU(this,!0,e),Object.keys(e).forEach(r=>{rU(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var gA=class extends Wd{};var Nm=new G("",{providedIn:"root",factory:()=>v0}),v0="always";function oU(n,e){return[...e.path,n]}function p0(n,e,t=v0){IA(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),qJ(n,e),WJ(n,e),GJ(n,e),HJ(n,e)}function j$(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),g0(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function m0(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function HJ(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function IA(n,e){let t=eU(n);e.validator!==null?n.setValidators(N$(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=tU(n);e.asyncValidator!==null?n.setAsyncValidators(N$(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();m0(e._rawValidators,i),m0(e._rawAsyncValidators,i)}function g0(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=eU(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let i=tU(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}let r=()=>{};return m0(e._rawValidators,r),m0(e._rawAsyncValidators,r),t}function qJ(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&sU(n,e)})}function GJ(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&sU(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function sU(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function WJ(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function aU(n,e){n==null,IA(n,e)}function KJ(n,e){return g0(n,e)}function lU(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function QJ(n){return Object.getPrototypeOf(n.constructor)===Pm}function cU(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function uU(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===ol?t=o:QJ(o)?r=o:i=o}),i||r||t||null}function YJ(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var ZJ={provide:oa,useExisting:er(()=>SA)},km=Promise.resolve(),SA=(()=>{class n extends oa{callSetDisabledState;get submitted(){return Gr(this.submittedReactive)}_submitted=Wr(()=>this.submittedReactive());submittedReactive=kt(!1);_directives=new Set;form;ngSubmit=new Ie;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new Wd({},wA(t),xA(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){km.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),p0(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){km.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){km.then(()=>{let r=this._findContainer(t.path),i=new Wd({});aU(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){km.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){km.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),cU(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new f0(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1),this.form._events.next(new h0(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(ce(Kd,10),ce(_0,10),ce(Nm,8))};static \u0275dir=me({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Me("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[_t([ZJ]),ot]})}return n})();function B$(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function V$(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Om=class extends Gd{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(CA(t),EA(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),b0(t)&&(t.nonNullable||t.initialValueIsDefault)&&(V$(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){B$(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){B$(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){V$(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var XJ=n=>n instanceof Om;var JJ={provide:sa,useExisting:er(()=>Fm)},$$=Promise.resolve(),Fm=(()=>{class n extends sa{_changeDetectorRef;callSetDisabledState;control=new Om;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Ie;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=uU(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),lU(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){p0(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){$$.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&fn(r);$$.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?oU(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(ce(oa,9),ce(Kd,10),ce(_0,10),ce(Ec,10),ce(_n,8),ce(Nm,8))};static \u0275dir=me({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[_t([JJ]),ot,xn]})}return n})();var dU=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=me({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),eee={provide:Ec,useExisting:er(()=>DA),multi:!0},DA=(()=>{class n extends Pm{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Vt(n)))(i||n)}})();static \u0275dir=me({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&Me("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[_t([eee]),ot]})}return n})();var fU=new G("");var tee={provide:oa,useExisting:er(()=>Lm)},Lm=(()=>{class n extends oa{callSetDisabledState;get submitted(){return Gr(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=Wr(()=>this._submittedReactive());_submittedReactive=kt(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new Ie;constructor(t,r,i){super(),this.callSetDisabledState=i,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(g0(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return p0(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){j$(t.control||null,t,!1),YJ(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),cU(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new f0(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0,r={}){this.form.reset(t,r),this._submittedReactive.set(!1),r?.emitEvent!==!1&&this.form._events.next(new h0(this.form))}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(j$(r||null,t),XJ(i)&&(p0(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);aU(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&KJ(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){IA(this.form,this),this._oldForm&&g0(this._oldForm,this)}static \u0275fac=function(r){return new(r||n)(ce(Kd,10),ce(_0,10),ce(Nm,8))};static \u0275dir=me({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&Me("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[_t([tee]),ot,xn]})}return n})();var nee={provide:sa,useExisting:er(()=>TA)},TA=(()=>{class n extends sa{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new Ie;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=uU(this,o)}ngOnChanges(t){this._added||this._setUpControl(),lU(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return oU(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(ce(oa,13),ce(Kd,10),ce(_0,10),ce(Ec,10),ce(fU,8))};static \u0275dir=me({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[_t([nee]),ot,xn]})}return n})();var ree={provide:Ec,useExisting:er(()=>y0),multi:!0};function hU(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function iee(n){return n.split(":")[0]}var y0=(()=>{class n extends Pm{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=x(qr).injector;appRefDestroyRef=this.appRefInjector.get(dr);destroyRef=x(dr);cdr=x(_n);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefDestroyRef.destroyed||(this._queuedWrite=!0,Hn({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let r=this._getOptionId(t),i=hU(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=iee(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Vt(n)))(i||n)}})();static \u0275dir=me({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&Me("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[_t([ree]),ot]})}return n})(),pU=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(hU(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||n)(ce(De),ce(tn),ce(y0,9))};static \u0275dir=me({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),oee={provide:Ec,useExisting:er(()=>mU),multi:!0};function U$(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function see(n){return n.split(":")[0]}var mU=(()=>{class n extends Pm{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let l=s[a],c=this._getOptionValue(l.value);i.push(c)}}else{let s=r.options;for(let a=0;a<s.length;a++){let l=s[a];if(l.selected){let c=this._getOptionValue(l.value);i.push(c)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=see(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Vt(n)))(i||n)}})();static \u0275dir=me({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&Me("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[_t([oee]),ot]})}return n})(),gU=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(U$(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(U$(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(ce(De),ce(tn),ce(mU,9))};static \u0275dir=me({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function _U(n){return typeof n=="number"?n:parseFloat(n)}var bU=(()=>{class n{_validator=a0;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):a0,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=me({type:n,features:[xn]})}return n})(),aee={provide:Kd,useExisting:er(()=>AA),multi:!0},AA=(()=>{class n extends bU{max;inputName="max";normalizeInput=t=>_U(t);createValidator=t=>G$(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=Vt(n)))(i||n)}})();static \u0275dir=me({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Et("max",i._enabled?i.max:null)},inputs:{max:"max"},standalone:!1,features:[_t([aee]),ot]})}return n})(),lee={provide:Kd,useExisting:er(()=>kA),multi:!0},kA=(()=>{class n extends bU{min;inputName="min";normalizeInput=t=>_U(t);createValidator=t=>q$(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=Vt(n)))(i||n)}})();static \u0275dir=me({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Et("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[_t([lee]),ot]})}return n})();var vU=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Re({type:n});static \u0275inj=Se({})}return n})(),_A=class extends Gd{constructor(e,t,r){super(CA(t),EA(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){iU(this,!1,e),e.forEach((r,i)=>{rU(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function z$(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var yU=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),o={};return z$(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new Wd(i,o)}record(t,r=null){let i=this._reduceControls(t);return new gA(i,r)}control(t,r,i){let o={};return this.useNonNullable?(z$(r)?o=r:(o.validators=r,o.asyncValidators=i),new Om(t,w(m({},o),{nonNullable:!0}))):new Om(t,r,i)}array(t,r,i){let o=t.map(s=>this._createControl(s));return new _A(o,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof Om)return t;if(t instanceof Gd)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(r,i,o)}else return this.control(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var rs=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Nm,useValue:t.callSetDisabledState??v0}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Re({type:n});static \u0275inj=Se({imports:[vU]})}return n})(),w0=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:fU,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Nm,useValue:t.callSetDisabledState??v0}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Re({type:n});static \u0275inj=Se({imports:[vU]})}return n})();function Ic(n){return n.buttons===0||n.detail===0}function Sc(n){let e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var RA;function wU(){if(RA==null){let n=typeof document<"u"?document.head:null;RA=!!(n&&(n.createShadowRoot||n.attachShadow))}return RA}function MA(n){if(wU()){let e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Yd(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){let e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function ci(n){return n.composedPath?n.composedPath()[0]:n.target}var OA;try{OA=typeof Intl<"u"&&Intl.v8BreakIterator}catch{OA=!1}var yt=(()=>{class n{_platformId=x(Qo);isBrowser=this._platformId?Zs(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||OA)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var jm;function xU(){if(jm==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>jm=!0}))}finally{jm=jm||!1}return jm}function Zd(n){return xU()?n:!!n.capture}function Qr(n,e=0){return CU(n)?Number(n):arguments.length===2?e:0}function CU(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}function Yr(n){return n instanceof De?n.nativeElement:n}var EU=new G("cdk-input-modality-detector-options"),IU={ignoreKeys:[18,17,224,91,16]},SU=650,PA={passive:!0,capture:!0},DU=(()=>{class n{_platform=x(yt);_listenerCleanups;modalityDetected;modalityChanged;get mostRecentModality(){return this._modality.value}_mostRecentTarget=null;_modality=new Lt(null);_options;_lastTouchMs=0;_onKeydown=t=>{this._options?.ignoreKeys?.some(r=>r===t.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=ci(t))};_onMousedown=t=>{Date.now()-this._lastTouchMs<SU||(this._modality.next(Ic(t)?"keyboard":"mouse"),this._mostRecentTarget=ci(t))};_onTouchstart=t=>{if(Sc(t)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=ci(t)};constructor(){let t=x(he),r=x(Pe),i=x(EU,{optional:!0});if(this._options=m(m({},IU),i),this.modalityDetected=this._modality.pipe(Yh(1)),this.modalityChanged=this.modalityDetected.pipe(qu()),this._platform.isBrowser){let o=x(zn).createRenderer(null,null);this._listenerCleanups=t.runOutsideAngular(()=>[o.listen(r,"keydown",this._onKeydown,PA),o.listen(r,"mousedown",this._onMousedown,PA),o.listen(r,"touchstart",this._onTouchstart,PA)])}}ngOnDestroy(){this._modality.complete(),this._listenerCleanups?.forEach(t=>t())}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Bm=function(n){return n[n.IMMEDIATE=0]="IMMEDIATE",n[n.EVENTUAL=1]="EVENTUAL",n}(Bm||{}),TU=new G("cdk-focus-monitor-default-options"),C0=Zd({passive:!0,capture:!0}),is=(()=>{class n{_ngZone=x(he);_platform=x(yt);_inputModalityDetector=x(DU);_origin=null;_lastFocusOrigin;_windowFocused=!1;_windowFocusTimeoutId;_originTimeoutId;_originFromTouchInteraction=!1;_elementInfo=new Map;_monitoredElementCount=0;_rootNodeFocusListenerCount=new Map;_detectionMode;_windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)};_document=x(Pe);_stopInputModalityDetector=new re;constructor(){let t=x(TU,{optional:!0});this._detectionMode=t?.detectionMode||Bm.IMMEDIATE}_rootNodeFocusAndBlurListener=t=>{let r=ci(t);for(let i=r;i;i=i.parentElement)t.type==="focus"?this._onFocus(t,i):this._onBlur(t,i)};monitor(t,r=!1){let i=Yr(t);if(!this._platform.isBrowser||i.nodeType!==1)return ye();let o=MA(i)||this._document,s=this._elementInfo.get(i);if(s)return r&&(s.checkChildren=!0),s.subject;let a={checkChildren:r,subject:new re,rootNode:o};return this._elementInfo.set(i,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){let r=Yr(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){let o=Yr(t),s=this._document.activeElement;o===s?this._getClosestElementsInfo(o).forEach(([a,l])=>this._originChanged(a,r,l)):(this._setOrigin(r),typeof o.focus=="function"&&o.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getWindow(){return this._document.defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return this._detectionMode===Bm.EVENTUAL||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused",r==="touch"),t.classList.toggle("cdk-keyboard-focused",r==="keyboard"),t.classList.toggle("cdk-mouse-focused",r==="mouse"),t.classList.toggle("cdk-program-focused",r==="program")}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=t,this._originFromTouchInteraction=t==="touch"&&r,this._detectionMode===Bm.IMMEDIATE){clearTimeout(this._originTimeoutId);let i=this._originFromTouchInteraction?SU:1;this._originTimeoutId=setTimeout(()=>this._origin=null,i)}})}_onFocus(t,r){let i=this._elementInfo.get(r),o=ci(t);!i||!i.checkChildren&&r!==o||this._originChanged(r,this._getFocusOrigin(o),i)}_onBlur(t,r){let i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i,null))}_emitOrigin(t,r){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;let r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,C0),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,C0)}),this._rootNodeFocusListenerCount.set(r,i+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Gt(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(t){let r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){let i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,C0),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,C0),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){let r=[];return this._elementInfo.forEach((i,o)=>{(o===t||i.checkChildren&&o.contains(t))&&r.push([o,i])}),r}_isLastInteractionFromInputLabel(t){let{_mostRecentTarget:r,mostRecentModality:i}=this._inputModalityDetector;if(i!=="mouse"||!r||r===t||t.nodeName!=="INPUT"&&t.nodeName!=="TEXTAREA"||t.disabled)return!1;let o=t.labels;if(o){for(let s=0;s<o.length;s++)if(o[s].contains(r))return!0}return!1}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var E0=new WeakMap,Cr=(()=>{class n{_appRef;_injector=x(ke);_environmentInjector=x(cn);load(t){let r=this._appRef=this._appRef||this._injector.get(qr),i=E0.get(r);i||(i={loaders:new Set,refs:[]},E0.set(r,i),r.onDestroy(()=>{E0.get(r)?.refs.forEach(o=>o.destroy()),E0.delete(r)})),i.loaders.has(t)||(i.loaders.add(t),i.refs.push(Pv(t,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var AU=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=xe({type:n,selectors:[["ng-component"]],exportAs:["cdkVisuallyHidden"],decls:0,vars:0,template:function(r,i){},styles:[`.cdk-visually-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap;outline:0;-webkit-appearance:none;-moz-appearance:none;left:0}[dir=rtl] .cdk-visually-hidden{left:auto;right:0}
`],encapsulation:2,changeDetection:0})}return n})();function Xd(n){return Array.isArray(n)?n:[n]}var kU=new Set,Dc,I0=(()=>{class n{_platform=x(yt);_nonce=x(md,{optional:!0});_matchMedia;constructor(){this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):uee}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&cee(t,this._nonce),this._matchMedia(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function cee(n,e){if(!kU.has(n))try{Dc||(Dc=document.createElement("style"),e&&Dc.setAttribute("nonce",e),Dc.setAttribute("type","text/css"),document.head.appendChild(Dc)),Dc.sheet&&(Dc.sheet.insertRule(`@media ${n} {body{ }}`,0),kU.add(n))}catch(t){console.error(t)}}function uee(n){return{matches:n==="all"||n==="",media:n,addListener:()=>{},removeListener:()=>{}}}var NA=(()=>{class n{_mediaMatcher=x(I0);_zone=x(he);_queries=new Map;_destroySubject=new re;constructor(){}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return RU(Xd(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let i=RU(Xd(t)).map(s=>this._registerQuery(s).observable),o=Uu(i);return o=Da(o.pipe(wn(1)),o.pipe(Yh(1),Os(0))),o.pipe(be(s=>{let a={matches:!1,breakpoints:{}};return s.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);let r=this._mediaMatcher.matchMedia(t),o={observable:new Be(s=>{let a=l=>this._zone.run(()=>s.next(l));return r.addListener(a),()=>{r.removeListener(a)}}).pipe(Xn(r),be(({matches:s})=>({query:t,matches:s})),Gt(this._destroySubject)),mql:r};return this._queries.set(t,o),o}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function RU(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function dee(n){if(n.type==="characterData"&&n.target instanceof Comment)return!0;if(n.type==="childList"){for(let e=0;e<n.addedNodes.length;e++)if(!(n.addedNodes[e]instanceof Comment))return!1;for(let e=0;e<n.removedNodes.length;e++)if(!(n.removedNodes[e]instanceof Comment))return!1;return!0}return!1}var MU=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),fee=(()=>{class n{_mutationObserverFactory=x(MU);_observedElements=new Map;_ngZone=x(he);constructor(){}ngOnDestroy(){this._observedElements.forEach((t,r)=>this._cleanupObserver(r))}observe(t){let r=Yr(t);return new Be(i=>{let s=this._observeElement(r).pipe(be(a=>a.filter(l=>!dee(l))),Ze(a=>!!a.length)).subscribe(a=>{this._ngZone.run(()=>{i.next(a)})});return()=>{s.unsubscribe(),this._unobserveElement(r)}})}_observeElement(t){return this._ngZone.runOutsideAngular(()=>{if(this._observedElements.has(t))this._observedElements.get(t).count++;else{let r=new re,i=this._mutationObserverFactory.create(o=>r.next(o));i&&i.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:i,stream:r,count:1})}return this._observedElements.get(t).stream})}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){let{observer:r,stream:i}=this._observedElements.get(t);r&&r.disconnect(),i.complete(),this._observedElements.delete(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),OU=(()=>{class n{_contentObserver=x(fee);_elementRef=x(De);event=new Ie;get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._disabled?this._unsubscribe():this._subscribe()}_disabled=!1;get debounce(){return this._debounce}set debounce(t){this._debounce=Qr(t),this._subscribe()}_debounce;_currentSubscription=null;constructor(){}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();let t=this._contentObserver.observe(this._elementRef);this._currentSubscription=(this.debounce?t.pipe(Os(this.debounce)):t).subscribe(this.event)}_unsubscribe(){this._currentSubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275dir=me({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:[2,"cdkObserveContentDisabled","disabled",fn],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]})}return n})(),S0=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Re({type:n});static \u0275inj=Se({providers:[MU]})}return n})();var Jd=(()=>{class n{_platform=x(yt);constructor(){}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return pee(t)&&getComputedStyle(t).visibility==="visible"}isTabbable(t){if(!this._platform.isBrowser)return!1;let r=hee(xee(t));if(r&&(PU(r)===-1||!this.isVisible(r)))return!1;let i=t.nodeName.toLowerCase(),o=PU(t);return t.hasAttribute("contenteditable")?o!==-1:i==="iframe"||i==="object"||this._platform.WEBKIT&&this._platform.IOS&&!yee(t)?!1:i==="audio"?t.hasAttribute("controls")?o!==-1:!1:i==="video"?o===-1?!1:o!==null?!0:this._platform.FIREFOX||t.hasAttribute("controls"):t.tabIndex>=0}isFocusable(t,r){return wee(t)&&!this.isDisabled(t)&&(r?.ignoreVisibility||this.isVisible(t))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function hee(n){try{return n.frameElement}catch{return null}}function pee(n){return!!(n.offsetWidth||n.offsetHeight||typeof n.getClientRects=="function"&&n.getClientRects().length)}function mee(n){let e=n.nodeName.toLowerCase();return e==="input"||e==="select"||e==="button"||e==="textarea"}function gee(n){return bee(n)&&n.type=="hidden"}function _ee(n){return vee(n)&&n.hasAttribute("href")}function bee(n){return n.nodeName.toLowerCase()=="input"}function vee(n){return n.nodeName.toLowerCase()=="a"}function LU(n){if(!n.hasAttribute("tabindex")||n.tabIndex===void 0)return!1;let e=n.getAttribute("tabindex");return!!(e&&!isNaN(parseInt(e,10)))}function PU(n){if(!LU(n))return null;let e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}function yee(n){let e=n.nodeName.toLowerCase(),t=e==="input"&&n.type;return t==="text"||t==="password"||e==="select"||e==="textarea"}function wee(n){return gee(n)?!1:mee(n)||_ee(n)||n.hasAttribute("contenteditable")||LU(n)}function xee(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}var D0=class{_element;_checker;_ngZone;_document;_injector;_startAnchor;_endAnchor;_hasAttached=!1;startAnchorListener=()=>this.focusLastTabbableElement();endAnchorListener=()=>this.focusFirstTabbableElement();get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_enabled=!0;constructor(e,t,r,i,o=!1,s){this._element=e,this._checker=t,this._ngZone=r,this._document=i,this._injector=s,o||this.attachAnchors()}destroy(){let e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){let t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return e=="start"?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){let t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){let r=this._getFirstTabbableElement(t);return r?.focus(e),!!r}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){let t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){let t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children;for(let r=0;r<t.length;r++){let i=t[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[r]):null;if(i)return i}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children;for(let r=t.length-1;r>=0;r--){let i=t[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[r]):null;if(i)return i}return null}_createAnchor(){let e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._injector?Hn(e,{injector:this._injector}):setTimeout(e)}},Vm=(()=>{class n{_checker=x(Jd);_ngZone=x(he);_document=x(Pe);_injector=x(ke);constructor(){x(Cr).load(AU)}create(t,r=!1){return new D0(t,this._checker,this._ngZone,this._document,r,this._injector)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var sl=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(sl||{}),NU="cdk-high-contrast-black-on-white",FU="cdk-high-contrast-white-on-black",FA="cdk-high-contrast-active",LA=(()=>{class n{_platform=x(yt);_hasCheckedHighContrastMode;_document=x(Pe);_breakpointSubscription;constructor(){this._breakpointSubscription=x(NA).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return sl.NONE;let t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);let r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,o=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return sl.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return sl.BLACK_ON_WHITE}return sl.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let t=this._document.body.classList;t.remove(FA,NU,FU),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===sl.BLACK_ON_WHITE?t.add(FA,NU):r===sl.WHITE_ON_BLACK&&t.add(FA,FU)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var jA={},ui=(()=>{class n{_appId=x(pd);getId(t){return this._appId!=="ng"&&(t+=this._appId),jA.hasOwnProperty(t)||(jA[t]=0),`${t}${jA[t]++}`}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Cee=200,T0=class{_letterKeyStream=new re;_items=[];_selectedItemIndex=-1;_pressedLetters=[];_skipPredicateFn;_selectedItem=new re;selectedItem=this._selectedItem;constructor(e,t){let r=typeof t?.debounceInterval=="number"?t.debounceInterval:Cee;t?.skipPredicate&&(this._skipPredicateFn=t.skipPredicate),this.setItems(e),this._setupKeyHandler(r)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(e){this._selectedItemIndex=e}setItems(e){this._items=e}handleKey(e){let t=e.keyCode;e.key&&e.key.length===1?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(e){this._letterKeyStream.pipe(gn(t=>this._pressedLetters.push(t)),Os(e),Ze(()=>this._pressedLetters.length>0),be(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(t=>{for(let r=1;r<this._items.length+1;r++){let i=(this._selectedItemIndex+r)%this._items.length,o=this._items[i];if(!this._skipPredicateFn?.(o)&&o.getLabel?.().toLocaleUpperCase().trim().indexOf(t)===0){this._selectedItem.next(o);break}}this._pressedLetters=[]})}};function os(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}var A0=class{_items;_activeItemIndex=kt(-1);_activeItem=kt(null);_wrap=!1;_typeaheadSubscription=lt.EMPTY;_itemChangesSubscription;_vertical=!0;_horizontal;_allowedModifierKeys=[];_homeAndEnd=!1;_pageUpAndDown={enabled:!1,delta:10};_effectRef;_typeahead;_skipPredicateFn=e=>e.disabled;constructor(e,t){this._items=e,e instanceof Bi?this._itemChangesSubscription=e.changes.subscribe(r=>this._itemsChanged(r.toArray())):Va(e)&&(this._effectRef=wd(()=>this._itemsChanged(e()),{injector:t}))}tabOut=new re;change=new re;skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){this._typeaheadSubscription.unsubscribe();let t=this._getItemsArray();return this._typeahead=new T0(t,{debounceInterval:typeof e=="number"?e:void 0,skipPredicate:r=>this._skipPredicateFn(r)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(r=>{this.setActiveItem(r)}),this}cancelTypeahead(){return this._typeahead?.reset(),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}withPageUpDown(e=!0,t=10){return this._pageUpAndDown={enabled:e,delta:t},this}setActiveItem(e){let t=this._activeItem();this.updateActiveItem(e),this._activeItem()!==t&&this.change.next(this._activeItemIndex())}onKeydown(e){let t=e.keyCode,i=["altKey","ctrlKey","metaKey","shiftKey"].every(o=>!e[o]||this._allowedModifierKeys.indexOf(o)>-1);switch(t){case 9:this.tabOut.next();return;case 40:if(this._vertical&&i){this.setNextItemActive();break}else return;case 38:if(this._vertical&&i){this.setPreviousItemActive();break}else return;case 39:if(this._horizontal&&i){this._horizontal==="rtl"?this.setPreviousItemActive():this.setNextItemActive();break}else return;case 37:if(this._horizontal&&i){this._horizontal==="rtl"?this.setNextItemActive():this.setPreviousItemActive();break}else return;case 36:if(this._homeAndEnd&&i){this.setFirstItemActive();break}else return;case 35:if(this._homeAndEnd&&i){this.setLastItemActive();break}else return;case 33:if(this._pageUpAndDown.enabled&&i){let o=this._activeItemIndex()-this._pageUpAndDown.delta;this._setActiveItemByIndex(o>0?o:0,1);break}else return;case 34:if(this._pageUpAndDown.enabled&&i){let o=this._activeItemIndex()+this._pageUpAndDown.delta,s=this._getItemsArray().length;this._setActiveItemByIndex(o<s?o:s-1,-1);break}else return;default:(i||os(e,"shiftKey"))&&this._typeahead?.handleKey(e);return}this._typeahead?.reset(),e.preventDefault()}get activeItemIndex(){return this._activeItemIndex()}get activeItem(){return this._activeItem()}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex()<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex()<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){let t=this._getItemsArray(),r=typeof e=="number"?e:t.indexOf(e),i=t[r];this._activeItem.set(i??null),this._activeItemIndex.set(r),this._typeahead?.setCurrentSelectedItemIndex(r)}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._typeahead?.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){let t=this._getItemsArray();for(let r=1;r<=t.length;r++){let i=(this._activeItemIndex()+e*r+t.length)%t.length,o=t[i];if(!this._skipPredicateFn(o)){this.setActiveItem(i);return}}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex()+e,e)}_setActiveItemByIndex(e,t){let r=this._getItemsArray();if(r[e]){for(;this._skipPredicateFn(r[e]);)if(e+=t,!r[e])return;this.setActiveItem(e)}}_getItemsArray(){return Va(this._items)?this._items():this._items instanceof Bi?this._items.toArray():this._items}_itemsChanged(e){this._typeahead?.setItems(e);let t=this._activeItem();if(t){let r=e.indexOf(t);r>-1&&r!==this._activeItemIndex()&&(this._activeItemIndex.set(r),this._typeahead?.setCurrentSelectedItemIndex(r))}}};var $m=class extends A0{_origin="program";setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}};var ef=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=xe({type:n,selectors:[["structural-styles"]],decls:0,vars:0,template:function(r,i){},styles:[`.mat-focus-indicator{position:relative}.mat-focus-indicator::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;display:var(--mat-focus-indicator-display, none);border-width:var(--mat-focus-indicator-border-width, 3px);border-style:var(--mat-focus-indicator-border-style, solid);border-color:var(--mat-focus-indicator-border-color, transparent);border-radius:var(--mat-focus-indicator-border-radius, 4px)}.mat-focus-indicator:focus::before{content:""}@media(forced-colors: active){html{--mat-focus-indicator-display: block}}
`],encapsulation:2,changeDetection:0})}return n})();var fo=function(n){return n[n.NORMAL=0]="NORMAL",n[n.NEGATED=1]="NEGATED",n[n.INVERTED=2]="INVERTED",n}(fo||{}),k0,Tc;function R0(){if(Tc==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return Tc=!1,Tc;if("scrollBehavior"in document.documentElement.style)Tc=!0;else{let n=Element.prototype.scrollTo;n?Tc=!/\{\s*\[native code\]\s*\}/.test(n.toString()):Tc=!1}}return Tc}function tf(){if(typeof document!="object"||!document)return fo.NORMAL;if(k0==null){let n=document.createElement("div"),e=n.style;n.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";let t=document.createElement("div"),r=t.style;r.width="2px",r.height="1px",n.appendChild(t),document.body.appendChild(n),k0=fo.NORMAL,n.scrollLeft===0&&(n.scrollLeft=1,k0=n.scrollLeft===0?fo.NEGATED:fo.INVERTED),n.remove()}return k0}function $A(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var nf,VU=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function UA(){if(nf)return nf;if(typeof document!="object"||!document)return nf=new Set(VU),nf;let n=document.createElement("input");return nf=new Set(VU.filter(e=>(n.setAttribute("type",e),n.type===e))),nf}function On(n){return n==null?"":typeof n=="string"?n:`${n}px`}function nr(n){return n!=null&&`${n}`!="false"}var Iee=new G("MATERIAL_ANIMATIONS");function hr(){return x(Iee,{optional:!0})?.animationsDisabled||x(Cp,{optional:!0})==="NoopAnimations"?!0:x(I0).matchMedia("(prefers-reduced-motion)").matches}var Qi=function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n}(Qi||{}),zA=class{_renderer;element;config;_animationForciblyDisabledThroughCss;state=Qi.HIDDEN;constructor(e,t,r,i=!1){this._renderer=e,this.element=t,this.config=r,this._animationForciblyDisabledThroughCss=i}fadeOut(){this._renderer.fadeOutRipple(this)}},$U=Zd({passive:!0,capture:!0}),HA=class{_events=new Map;addHandler(e,t,r,i){let o=this._events.get(t);if(o){let s=o.get(r);s?s.add(i):o.set(r,new Set([i]))}else this._events.set(t,new Map([[r,new Set([i])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,$U)})}removeHandler(e,t,r){let i=this._events.get(e);if(!i)return;let o=i.get(t);o&&(o.delete(r),o.size===0&&i.delete(t),i.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,$U)))}_delegateEventHandler=e=>{let t=ci(e);t&&this._events.get(e.type)?.forEach((r,i)=>{(i===t||i.contains(t))&&r.forEach(o=>o.handleEvent(e))})}},Um={enterDuration:225,exitDuration:150},See=800,UU=Zd({passive:!0,capture:!0}),zU=["mousedown","touchstart"],HU=["mouseup","mouseleave","touchend","touchcancel"],Dee=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=xe({type:n,selectors:[["ng-component"]],hostAttrs:["mat-ripple-style-loader",""],decls:0,vars:0,template:function(r,i){},styles:[`.mat-ripple{overflow:hidden;position:relative}.mat-ripple:not(:empty){transform:translateZ(0)}.mat-ripple.mat-ripple-unbounded{overflow:visible}.mat-ripple-element{position:absolute;border-radius:50%;pointer-events:none;transition:opacity,transform 0ms cubic-bezier(0, 0, 0.2, 1);transform:scale3d(0, 0, 0);background-color:var(--mat-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface) 10%, transparent))}@media(forced-colors: active){.mat-ripple-element{display:none}}.cdk-drag-preview .mat-ripple-element,.cdk-drag-placeholder .mat-ripple-element{display:none}
`],encapsulation:2,changeDetection:0})}return n})(),Ac=class n{_target;_ngZone;_platform;_containerElement;_triggerElement;_isPointerDown=!1;_activeRipples=new Map;_mostRecentTransientRipple;_lastTouchStartEvent;_pointerUpEventsRegistered=!1;_containerRect;static _eventManager=new HA;constructor(e,t,r,i,o){this._target=e,this._ngZone=t,this._platform=i,i.isBrowser&&(this._containerElement=Yr(r)),o&&o.get(Cr).load(Dee)}fadeInRipple(e,t,r={}){let i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=m(m({},Um),r.animation);r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);let s=r.radius||Tee(e,t,i),a=e-i.left,l=t-i.top,c=o.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=`${a-s}px`,u.style.top=`${l-s}px`,u.style.height=`${s*2}px`,u.style.width=`${s*2}px`,r.color!=null&&(u.style.backgroundColor=r.color),u.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(u);let d=window.getComputedStyle(u),h=d.transitionProperty,f=d.transitionDuration,p=h==="none"||f==="0s"||f==="0s, 0s"||i.width===0&&i.height===0,g=new zA(this,u,r,p);u.style.transform="scale3d(1, 1, 1)",g.state=Qi.FADING_IN,r.persistent||(this._mostRecentTransientRipple=g);let _=null;return!p&&(c||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let y=()=>{_&&(_.fallbackTimer=null),clearTimeout(T),this._finishRippleTransition(g)},E=()=>this._destroyRipple(g),T=setTimeout(E,c+100);u.addEventListener("transitionend",y),u.addEventListener("transitioncancel",E),_={onTransitionEnd:y,onTransitionCancel:E,fallbackTimer:T}}),this._activeRipples.set(g,_),(p||!c)&&this._finishRippleTransition(g),g}fadeOutRipple(e){if(e.state===Qi.FADING_OUT||e.state===Qi.HIDDEN)return;let t=e.element,r=m(m({},Um),e.config.animation);t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=Qi.FADING_OUT,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let t=Yr(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,zU.forEach(r=>{n._eventManager.addHandler(this._ngZone,r,t,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{HU.forEach(t=>{this._triggerElement.addEventListener(t,this,UU)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===Qi.FADING_IN?this._startFadeOutTransition(e):e.state===Qi.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=Qi.VISIBLE,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=Qi.HIDDEN,t!==null&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel),t.fallbackTimer!==null&&clearTimeout(t.fallbackTimer)),e.element.remove()}_onMousedown(e){let t=Ic(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+See;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!Sc(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let t=e.changedTouches;if(t)for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let t=e.state===Qi.VISIBLE||e.config.terminateOnPointerUp&&e.state===Qi.FADING_IN;!e.config.persistent&&t&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(zU.forEach(t=>n._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&(HU.forEach(t=>e.removeEventListener(t,this,UU)),this._pointerUpEventsRegistered=!1))}};function Tee(n,e,t){let r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}var zm=new G("mat-ripple-global-options"),qU=(()=>{class n{_elementRef=x(De);_animationsDisabled=hr();color;unbounded;centered;radius=0;animation;get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}_disabled=!1;get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}_trigger;_rippleRenderer;_globalOptions;_isInitialized=!1;constructor(){let t=x(he),r=x(yt),i=x(zm,{optional:!0}),o=x(ke);this._globalOptions=i||{},this._rippleRenderer=new Ac(this,t,this._elementRef,r,o)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:m(m(m({},this._globalOptions.animation),this._animationsDisabled?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,i){return typeof t=="number"?this._rippleRenderer.fadeInRipple(t,r,m(m({},this.rippleConfig),i)):this._rippleRenderer.fadeInRipple(0,0,m(m({},this.rippleConfig),t))}static \u0275fac=function(r){return new(r||n)};static \u0275dir=me({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(r,i){r&2&&Ge("mat-ripple-unbounded",i.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"]})}return n})();var Hm=class{_attachedHost;attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},rf=class extends Hm{component;viewContainerRef;injector;projectableNodes;constructor(e,t,r,i){super(),this.component=e,this.viewContainerRef=t,this.injector=r,this.projectableNodes=i}},al=class extends Hm{templateRef;viewContainerRef;context;injector;constructor(e,t,r,i){super(),this.templateRef=e,this.viewContainerRef=t,this.context=r,this.injector=i}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}},qA=class extends Hm{element;constructor(e){super(),this.element=e instanceof De?e.nativeElement:e}},of=class{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof rf)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof al)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof qA)return this._attachedPortal=e,this.attachDomPortal(e)}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}},qm=class extends of{outletElement;_appRef;_defaultInjector;constructor(e,t,r){super(),this.outletElement=e,this._appRef=t,this._defaultInjector=r}attachComponentPortal(e){let t;if(e.viewContainerRef){let r=e.injector||e.viewContainerRef.injector,i=r.get(Ko,null,{optional:!0})||void 0;t=e.viewContainerRef.createComponent(e.component,{index:e.viewContainerRef.length,injector:r,ngModuleRef:i,projectableNodes:e.projectableNodes||void 0}),this.setDisposeFn(()=>t.destroy())}else{let r=this._appRef,i=e.injector||this._defaultInjector||ke.NULL,o=i.get(cn,r.injector);t=Pv(e.component,{elementInjector:i,environmentInjector:o,projectableNodes:e.projectableNodes||void 0}),r.attachView(t.hostView),this.setDisposeFn(()=>{r.viewCount>0&&r.detachView(t.hostView),t.destroy()})}return this.outletElement.appendChild(this._getComponentRootNode(t)),this._attachedPortal=e,t}attachTemplatePortal(e){let t=e.viewContainerRef,r=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=t.indexOf(r);i!==-1&&t.remove(i)}),this._attachedPortal=e,r}attachDomPortal=e=>{let t=e.element;t.parentNode;let r=this.outletElement.ownerDocument.createComment("dom-portal");t.parentNode.insertBefore(r,t),this.outletElement.appendChild(t),this._attachedPortal=e,super.setDisposeFn(()=>{r.parentNode&&r.parentNode.replaceChild(t,r)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}};var Gm=(()=>{class n extends of{_moduleRef=x(Ko,{optional:!0});_document=x(Pe);_viewContainerRef=x(tr);_isInitialized=!1;_attachedRef;constructor(){super()}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}attached=new Ie;get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);let r=t.viewContainerRef!=null?t.viewContainerRef:this._viewContainerRef,i=r.createComponent(t.component,{index:r.length,injector:t.injector||r.injector,projectableNodes:t.projectableNodes||void 0,ngModuleRef:this._moduleRef||void 0});return r!==this._viewContainerRef&&this._getRootNode().appendChild(i.hostView.rootNodes[0]),super.setDisposeFn(()=>i.destroy()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}attachTemplatePortal(t){t.setAttachedHost(this);let r=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}attachDomPortal=t=>{let r=t.element;r.parentNode;let i=this._document.createComment("dom-portal");t.setAttachedHost(this),r.parentNode.insertBefore(i,r),this._getRootNode().appendChild(r),this._attachedPortal=t,super.setDisposeFn(()=>{i.parentNode&&i.parentNode.replaceChild(r,i)})};_getRootNode(){let t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}static \u0275fac=function(r){return new(r||n)};static \u0275dir=me({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[ot]})}return n})();var M0=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Re({type:n});static \u0275inj=Se({})}return n})();var Aee=new G("cdk-dir-doc",{providedIn:"root",factory:kee});function kee(){return x(Pe)}var Ree=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function GU(n){let e=n?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?Ree.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var di=(()=>{class n{get value(){return this.valueSignal()}valueSignal=kt("ltr");change=new Ie;constructor(){let t=x(Aee,{optional:!0});if(t){let r=t.body?t.body.dir:null,i=t.documentElement?t.documentElement.dir:null;this.valueSignal.set(GU(r||i||"ltr"))}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ll=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Re({type:n});static \u0275inj=Se({})}return n})();var Mee=20,Rc=(()=>{class n{_ngZone=x(he);_platform=x(yt);_renderer=x(zn).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new re;_scrolledCount=0;scrollContainers=new Map;register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){let r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=Mee){return this._platform.isBrowser?new Be(r=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let i=t>0?this._scrolled.pipe(zu(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):ye()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){let i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(Ze(o=>!o||i.indexOf(o)>-1))}getAncestorScrollContainers(t){let r=[];return this.scrollContainers.forEach((i,o)=>{this._scrollableContainsElement(o,t)&&r.push(o)}),r}_scrollableContainsElement(t,r){let i=Yr(r),o=t.getElementRef().nativeElement;do if(i==o)return!0;while(i=i.parentElement);return!1}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),sf=(()=>{class n{elementRef=x(De);scrollDispatcher=x(Rc);ngZone=x(he);dir=x(di,{optional:!0});_scrollElement=this.elementRef.nativeElement;_destroyed=new re;_renderer=x(tn);_cleanupScroll;_elementScrolled=new re;constructor(){}ngOnInit(){this._cleanupScroll=this.ngZone.runOutsideAngular(()=>this._renderer.listen(this._scrollElement,"scroll",t=>this._elementScrolled.next(t))),this.scrollDispatcher.register(this)}ngOnDestroy(){this._cleanupScroll?.(),this._elementScrolled.complete(),this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){let r=this.elementRef.nativeElement,i=this.dir&&this.dir.value=="rtl";t.left==null&&(t.left=i?t.end:t.start),t.right==null&&(t.right=i?t.start:t.end),t.bottom!=null&&(t.top=r.scrollHeight-r.clientHeight-t.bottom),i&&tf()!=fo.NORMAL?(t.left!=null&&(t.right=r.scrollWidth-r.clientWidth-t.left),tf()==fo.INVERTED?t.left=t.right:tf()==fo.NEGATED&&(t.left=t.right?-t.right:t.right)):t.right!=null&&(t.left=r.scrollWidth-r.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){let r=this.elementRef.nativeElement;R0()?r.scrollTo(t):(t.top!=null&&(r.scrollTop=t.top),t.left!=null&&(r.scrollLeft=t.left))}measureScrollOffset(t){let r="left",i="right",o=this.elementRef.nativeElement;if(t=="top")return o.scrollTop;if(t=="bottom")return o.scrollHeight-o.clientHeight-o.scrollTop;let s=this.dir&&this.dir.value=="rtl";return t=="start"?t=s?i:r:t=="end"&&(t=s?r:i),s&&tf()==fo.INVERTED?t==r?o.scrollWidth-o.clientWidth-o.scrollLeft:o.scrollLeft:s&&tf()==fo.NEGATED?t==r?o.scrollLeft+o.scrollWidth-o.clientWidth:-o.scrollLeft:t==r?o.scrollLeft:o.scrollWidth-o.clientWidth-o.scrollLeft}static \u0275fac=function(r){return new(r||n)};static \u0275dir=me({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]})}return n})(),Oee=20,cl=(()=>{class n{_platform=x(yt);_listeners;_viewportSize;_change=new re;_document=x(Pe);constructor(){let t=x(he),r=x(zn).createRenderer(null,null);t.runOutsideAngular(()=>{if(this._platform.isBrowser){let i=o=>this._change.next(o);this._listeners=[r.listen("window","resize",i),r.listen("window","orientationchange",i)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(t=>t()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){let t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let t=this._document,r=this._getWindow(),i=t.documentElement,o=i.getBoundingClientRect(),s=-o.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,a=-o.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0;return{top:s,left:a}}change(t=Oee){return t>0?this._change.pipe(zu(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var kc=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Re({type:n});static \u0275inj=Se({})}return n})(),GA=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Re({type:n});static \u0275inj=Se({imports:[ll,kc,ll,kc]})}return n})();var WU=R0();function lf(n){return new O0(n.get(cl),n.get(Pe))}var O0=class{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(e,t){this._viewportRuler=e,this._document=t}attach(){}enable(){if(this._canBeEnabled()){let e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=On(-this._previousScrollPosition.left),e.style.top=On(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let e=this._document.documentElement,t=this._document.body,r=e.style,i=t.style,o=r.scrollBehavior||"",s=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),WU&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),WU&&(r.scrollBehavior=o,i.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let t=this._document.documentElement,r=this._viewportRuler.getViewportSize();return t.scrollHeight>r.height||t.scrollWidth>r.width}};function ez(n,e){return new P0(n.get(Rc),n.get(he),n.get(cl),e)}var P0=class{_scrollDispatcher;_ngZone;_viewportRuler;_config;_scrollSubscription=null;_overlayRef;_initialScrollPosition;constructor(e,t,r,i){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=r,this._config=i}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(this._scrollSubscription)return;let e=this._scrollDispatcher.scrolled(0).pipe(Ze(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{let t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}_detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}};var Wm=class{enable(){}disable(){}attach(){}};function WA(n,e){return e.some(t=>{let r=n.bottom<t.top,i=n.top>t.bottom,o=n.right<t.left,s=n.left>t.right;return r||i||o||s})}function KU(n,e){return e.some(t=>{let r=n.top<t.top,i=n.bottom>t.bottom,o=n.left<t.left,s=n.right>t.right;return r||i||o||s})}function Oc(n,e){return new N0(n.get(Rc),n.get(cl),n.get(he),e)}var N0=class{_scrollDispatcher;_viewportRuler;_ngZone;_config;_scrollSubscription=null;_overlayRef;constructor(e,t,r,i){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=r,this._config=i}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(!this._scrollSubscription){let e=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(e).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();WA(t,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},tz=(()=>{class n{_injector=x(ke);constructor(){}noop=()=>new Wm;close=t=>ez(this._injector,t);block=()=>lf(this._injector);reposition=t=>Oc(this._injector,t);static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ul=class{positionStrategy;scrollStrategy=new Wm;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";disableAnimations;width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;constructor(e){if(e){let t=Object.keys(e);for(let r of t)e[r]!==void 0&&(this[r]=e[r])}}};var F0=class{connectionPair;scrollableViewProperties;constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}};var nz=(()=>{class n{_attachedOverlays=[];_document=x(Pe);_isAttached;constructor(){}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){let r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),this._attachedOverlays.length===0&&this.detach()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),rz=(()=>{class n extends nz{_ngZone=x(he);_renderer=x(zn).createRenderer(null,null);_cleanupKeydown;add(t){super.add(t),this._isAttached||(this._ngZone.runOutsideAngular(()=>{this._cleanupKeydown=this._renderer.listen("body","keydown",this._keydownListener)}),this._isAttached=!0)}detach(){this._isAttached&&(this._cleanupKeydown?.(),this._isAttached=!1)}_keydownListener=t=>{let r=this._attachedOverlays;for(let i=r.length-1;i>-1;i--)if(r[i]._keydownEvents.observers.length>0){this._ngZone.run(()=>r[i]._keydownEvents.next(t));break}};static \u0275fac=(()=>{let t;return function(i){return(t||(t=Vt(n)))(i||n)}})();static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),iz=(()=>{class n extends nz{_platform=x(yt);_ngZone=x(he);_renderer=x(zn).createRenderer(null,null);_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget;_cleanups;add(t){if(super.add(t),!this._isAttached){let r=this._document.body,i={capture:!0},o=this._renderer;this._cleanups=this._ngZone.runOutsideAngular(()=>[o.listen(r,"pointerdown",this._pointerDownListener,i),o.listen(r,"click",this._clickListener,i),o.listen(r,"auxclick",this._clickListener,i),o.listen(r,"contextmenu",this._clickListener,i)]),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){this._isAttached&&(this._cleanups?.forEach(t=>t()),this._cleanups=void 0,this._platform.IOS&&this._cursorStyleIsSet&&(this._document.body.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1)}_pointerDownListener=t=>{this._pointerDownEventTarget=ci(t)};_clickListener=t=>{let r=ci(t),i=t.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:r;this._pointerDownEventTarget=null;let o=this._attachedOverlays.slice();for(let s=o.length-1;s>-1;s--){let a=o[s];if(a._outsidePointerEvents.observers.length<1||!a.hasAttached())continue;if(QU(a.overlayElement,r)||QU(a.overlayElement,i))break;let l=a._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>l.next(t)):l.next(t)}};static \u0275fac=(()=>{let t;return function(i){return(t||(t=Vt(n)))(i||n)}})();static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function QU(n,e){let t=typeof ShadowRoot<"u"&&ShadowRoot,r=e;for(;r;){if(r===n)return!0;r=t&&r instanceof ShadowRoot?r.host:r.parentNode}return!1}var oz=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=xe({type:n,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],decls:0,vars:0,template:function(r,i){},styles:[`.cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0;touch-action:manipulation}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}@media(prefers-reduced-motion){.cdk-overlay-backdrop{transition-duration:1ms}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}
`],encapsulation:2,changeDetection:0})}return n})(),B0=(()=>{class n{_platform=x(yt);_containerElement;_document=x(Pe);_styleLoader=x(Cr);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let t="cdk-overlay-container";if(this._platform.isBrowser||$A()){let i=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let o=0;o<i.length;o++)i[o].remove()}let r=this._document.createElement("div");r.classList.add(t),$A()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}_loadStyles(){this._styleLoader.load(oz)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),KA=class{_renderer;_ngZone;element;_cleanupClick;_cleanupTransitionEnd;_fallbackTimeout;constructor(e,t,r,i){this._renderer=t,this._ngZone=r,this.element=e.createElement("div"),this.element.classList.add("cdk-overlay-backdrop"),this._cleanupClick=t.listen(this.element,"click",i)}detach(){this._ngZone.runOutsideAngular(()=>{let e=this.element;clearTimeout(this._fallbackTimeout),this._cleanupTransitionEnd?.(),this._cleanupTransitionEnd=this._renderer.listen(e,"transitionend",this.dispose),this._fallbackTimeout=setTimeout(this.dispose,500),e.style.pointerEvents="none",e.classList.remove("cdk-overlay-backdrop-showing")})}dispose=()=>{clearTimeout(this._fallbackTimeout),this._cleanupClick?.(),this._cleanupTransitionEnd?.(),this._cleanupClick=this._cleanupTransitionEnd=this._fallbackTimeout=void 0,this.element.remove()}},af=class{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_renderer;_backdropClick=new re;_attachments=new re;_detachments=new re;_positionStrategy;_scrollStrategy;_locationChanges=lt.EMPTY;_backdropRef=null;_detachContentMutationObserver;_detachContentAfterRenderRef;_previousHostParent;_keydownEvents=new re;_outsidePointerEvents=new re;_afterNextRenderRef;constructor(e,t,r,i,o,s,a,l,c,u=!1,d,h){this._portalOutlet=e,this._host=t,this._pane=r,this._config=i,this._ngZone=o,this._keyboardDispatcher=s,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=u,this._injector=d,this._renderer=h,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropRef?.element||null}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=Hn(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._completeDetachContent(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof t?.onDestroy=="function"&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let e=this._portalOutlet.detach();return this._detachments.next(),this._completeDetachContent(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){let e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._backdropRef?.dispose(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=this._backdropRef=null,e&&this._detachments.next(),this._detachments.complete(),this._completeDetachContent()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=m(m({},this._config),e),this._updateElementSize()}setDirection(e){this._config=w(m({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){let e=this._config.direction;return e?typeof e=="string"?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let e=this._pane.style;e.width=On(this._config.width),e.height=On(this._config.height),e.minWidth=On(this._config.minWidth),e.minHeight=On(this._config.minHeight),e.maxWidth=On(this._config.maxWidth),e.maxHeight=On(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){let e="cdk-overlay-backdrop-showing";this._backdropRef?.dispose(),this._backdropRef=new KA(this._document,this._renderer,this._ngZone,t=>{this._backdropClick.next(t)}),this._animationsDisabled&&this._backdropRef.element.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropRef.element,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropRef.element,this._host),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._backdropRef?.element.classList.add(e))}):this._backdropRef.element.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){this._animationsDisabled?(this._backdropRef?.dispose(),this._backdropRef=null):this._backdropRef?.detach()}_toggleClasses(e,t,r){let i=Xd(t||[]).filter(o=>!!o);i.length&&(r?e.classList.add(...i):e.classList.remove(...i))}_detachContentWhenEmpty(){let e=!1;try{this._detachContentAfterRenderRef=Hn(()=>{e=!0,this._detachContent()},{injector:this._injector})}catch(t){if(e)throw t;this._detachContent()}globalThis.MutationObserver&&this._pane&&(this._detachContentMutationObserver||=new globalThis.MutationObserver(()=>{this._detachContent()}),this._detachContentMutationObserver.observe(this._pane,{childList:!0}))}_detachContent(){(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),this._completeDetachContent())}_completeDetachContent(){this._detachContentAfterRenderRef?.destroy(),this._detachContentAfterRenderRef=void 0,this._detachContentMutationObserver?.disconnect()}_disposeScrollStrategy(){let e=this._scrollStrategy;e?.disable(),e?.detach?.()}},YU="cdk-overlay-connected-position-bounding-box",Pee=/([A-Za-z%]+)$/;function V0(n,e){return new L0(e,n.get(cl),n.get(Pe),n.get(yt),n.get(B0))}var L0=class{_viewportRuler;_document;_platform;_overlayContainer;_overlayRef;_isInitialRender;_lastBoundingBoxSize={width:0,height:0};_isPushed=!1;_canPush=!0;_growAfterOpen=!1;_hasFlexibleDimensions=!0;_positionLocked=!1;_originRect;_overlayRect;_viewportRect;_containerRect;_viewportMargin=0;_scrollables=[];_preferredPositions=[];_origin;_pane;_isDisposed;_boundingBox;_lastPosition;_lastScrollVisibility;_positionChanges=new re;_resizeSubscription=lt.EMPTY;_offsetX=0;_offsetY=0;_transformOriginSelector;_appliedPanelClasses=[];_previousPushAmount;positionChanges=this._positionChanges;get positions(){return this._preferredPositions}constructor(e,t,r,i,o){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=o,this.setOrigin(e)}attach(e){this._overlayRef&&this._overlayRef,this._validatePositions(),e.hostElement.classList.add(YU),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._originRect,t=this._overlayRect,r=this._viewportRect,i=this._containerRect,o=[],s;for(let a of this._preferredPositions){let l=this._getOriginPoint(e,i,a),c=this._getOverlayPoint(l,t,a),u=this._getOverlayFit(c,t,r,a);if(u.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,l);return}if(this._canFitWithFlexibleDimensions(u,c,r)){o.push({position:a,origin:l,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(l,a)});continue}(!s||s.overlayFit.visibleArea<u.visibleArea)&&(s={overlayFit:u,overlayPoint:c,originPoint:l,position:a,overlayRect:t})}if(o.length){let a=null,l=-1;for(let c of o){let u=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);u>l&&(l=u,a=c)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(s.position,s.originPoint);return}this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Mc(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(YU),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,e.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,r){let i;if(r.originX=="center")i=e.left+e.width/2;else{let s=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;i=r.originX=="start"?s:a}t.left<0&&(i-=t.left);let o;return r.originY=="center"?o=e.top+e.height/2:o=r.originY=="top"?e.top:e.bottom,t.top<0&&(o-=t.top),{x:i,y:o}}_getOverlayPoint(e,t,r){let i;r.overlayX=="center"?i=-t.width/2:r.overlayX==="start"?i=this._isRtl()?-t.width:0:i=this._isRtl()?0:-t.width;let o;return r.overlayY=="center"?o=-t.height/2:o=r.overlayY=="top"?0:-t.height,{x:e.x+i,y:e.y+o}}_getOverlayFit(e,t,r,i){let o=XU(t),{x:s,y:a}=e,l=this._getOffset(i,"x"),c=this._getOffset(i,"y");l&&(s+=l),c&&(a+=c);let u=0-s,d=s+o.width-r.width,h=0-a,f=a+o.height-r.height,p=this._subtractOverflows(o.width,u,d),g=this._subtractOverflows(o.height,h,f),_=p*g;return{visibleArea:_,isCompletelyWithinViewport:o.width*o.height===_,fitsInViewportVertically:g===o.height,fitsInViewportHorizontally:p==o.width}}_canFitWithFlexibleDimensions(e,t,r){if(this._hasFlexibleDimensions){let i=r.bottom-t.y,o=r.right-t.x,s=ZU(this._overlayRef.getConfig().minHeight),a=ZU(this._overlayRef.getConfig().minWidth),l=e.fitsInViewportVertically||s!=null&&s<=i,c=e.fitsInViewportHorizontally||a!=null&&a<=o;return l&&c}return!1}_pushOverlayOnScreen(e,t,r){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};let i=XU(t),o=this._viewportRect,s=Math.max(e.x+i.width-o.width,0),a=Math.max(e.y+i.height-o.height,0),l=Math.max(o.top-r.top-e.y,0),c=Math.max(o.left-r.left-e.x,0),u=0,d=0;return i.width<=o.width?u=c||-s:u=e.x<this._viewportMargin?o.left-r.left-e.x:0,i.height<=o.height?d=l||-a:d=e.y<this._viewportMargin?o.top-r.top-e.y:0,this._previousPushAmount={x:u,y:d},{x:e.x+u,y:e.y+d}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){let r=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!Nee(this._lastScrollVisibility,r)){let i=new F0(e,r);this._positionChanges.next(i)}this._lastScrollVisibility=r}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;let t=this._boundingBox.querySelectorAll(this._transformOriginSelector),r,i=e.overlayY;e.overlayX==="center"?r="center":this._isRtl()?r=e.overlayX==="start"?"right":"left":r=e.overlayX==="start"?"left":"right";for(let o=0;o<t.length;o++)t[o].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(e,t){let r=this._viewportRect,i=this._isRtl(),o,s,a;if(t.overlayY==="top")s=e.y,o=r.height-s+this._viewportMargin;else if(t.overlayY==="bottom")a=r.height-e.y+this._viewportMargin*2,o=r.height-a+this._viewportMargin;else{let f=Math.min(r.bottom-e.y+r.top,e.y),p=this._lastBoundingBoxSize.height;o=f*2,s=e.y-f,o>p&&!this._isInitialRender&&!this._growAfterOpen&&(s=e.y-p/2)}let l=t.overlayX==="start"&&!i||t.overlayX==="end"&&i,c=t.overlayX==="end"&&!i||t.overlayX==="start"&&i,u,d,h;if(c)h=r.width-e.x+this._viewportMargin*2,u=e.x-this._viewportMargin;else if(l)d=e.x,u=r.right-e.x;else{let f=Math.min(r.right-e.x+r.left,e.x),p=this._lastBoundingBoxSize.width;u=f*2,d=e.x-f,u>p&&!this._isInitialRender&&!this._growAfterOpen&&(d=e.x-p/2)}return{top:s,left:d,bottom:a,right:h,width:u,height:o}}_setBoundingBoxStyles(e,t){let r=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));let i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{let o=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;i.height=On(r.height),i.top=On(r.top),i.bottom=On(r.bottom),i.width=On(r.width),i.left=On(r.left),i.right=On(r.right),t.overlayX==="center"?i.alignItems="center":i.alignItems=t.overlayX==="end"?"flex-end":"flex-start",t.overlayY==="center"?i.justifyContent="center":i.justifyContent=t.overlayY==="bottom"?"flex-end":"flex-start",o&&(i.maxHeight=On(o)),s&&(i.maxWidth=On(s))}this._lastBoundingBoxSize=r,Mc(this._boundingBox.style,i)}_resetBoundingBoxStyles(){Mc(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Mc(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){let r={},i=this._hasExactPosition(),o=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(i){let u=this._viewportRuler.getViewportScrollPosition();Mc(r,this._getExactOverlayY(t,e,u)),Mc(r,this._getExactOverlayX(t,e,u))}else r.position="static";let a="",l=this._getOffset(t,"x"),c=this._getOffset(t,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),r.transform=a.trim(),s.maxHeight&&(i?r.maxHeight=On(s.maxHeight):o&&(r.maxHeight="")),s.maxWidth&&(i?r.maxWidth=On(s.maxWidth):o&&(r.maxWidth="")),Mc(this._pane.style,r)}_getExactOverlayY(e,t,r){let i={top:"",bottom:""},o=this._getOverlayPoint(t,this._overlayRect,e);if(this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,r)),e.overlayY==="bottom"){let s=this._document.documentElement.clientHeight;i.bottom=`${s-(o.y+this._overlayRect.height)}px`}else i.top=On(o.y);return i}_getExactOverlayX(e,t,r){let i={left:"",right:""},o=this._getOverlayPoint(t,this._overlayRect,e);this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,r));let s;if(this._isRtl()?s=e.overlayX==="end"?"left":"right":s=e.overlayX==="end"?"right":"left",s==="right"){let a=this._document.documentElement.clientWidth;i.right=`${a-(o.x+this._overlayRect.width)}px`}else i.left=On(o.x);return i}_getScrollVisibility(){let e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:KU(e,r),isOriginOutsideView:WA(e,r),isOverlayClipped:KU(t,r),isOverlayOutsideView:WA(t,r)}}_subtractOverflows(e,...t){return t.reduce((r,i)=>r-Math.max(i,0),e)}_getNarrowedViewportRect(){let e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+e-this._viewportMargin,bottom:r.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return t==="x"?e.offsetX==null?this._offsetX:e.offsetX:e.offsetY==null?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&Xd(e).forEach(t=>{t!==""&&this._appliedPanelClasses.indexOf(t)===-1&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){let e=this._origin;if(e instanceof De)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();let t=e.width||0,r=e.height||0;return{top:e.y,bottom:e.y+r,left:e.x,right:e.x+t,height:r,width:t}}};function Mc(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function ZU(n){if(typeof n!="number"&&n!=null){let[e,t]=n.split(Pee);return!t||t==="px"?parseFloat(e):null}return n||null}function XU(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}function Nee(n,e){return n===e?!0:n.isOriginClipped===e.isOriginClipped&&n.isOriginOutsideView===e.isOriginOutsideView&&n.isOverlayClipped===e.isOverlayClipped&&n.isOverlayOutsideView===e.isOverlayOutsideView}var JU="cdk-global-overlay-wrapper";function cf(n){return new j0}var j0=class{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(e){let t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(JU),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:o,maxWidth:s,maxHeight:a}=r,l=(i==="100%"||i==="100vw")&&(!s||s==="100%"||s==="100vw"),c=(o==="100%"||o==="100vh")&&(!a||a==="100%"||a==="100vh"),u=this._xPosition,d=this._xOffset,h=this._overlayRef.getConfig().direction==="rtl",f="",p="",g="";l?g="flex-start":u==="center"?(g="center",h?p=d:f=d):h?u==="left"||u==="end"?(g="flex-end",f=d):(u==="right"||u==="start")&&(g="flex-start",p=d):u==="left"||u==="start"?(g="flex-start",f=d):(u==="right"||u==="end")&&(g="flex-end",p=d),e.position=this._cssPosition,e.marginLeft=l?"0":f,e.marginTop=c?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=l?"0":p,t.justifyContent=g,t.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,r=t.style;t.classList.remove(JU),r.justifyContent=r.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}},sz=(()=>{class n{_injector=x(ke);constructor(){}global(){return cf()}flexibleConnectedTo(t){return V0(this._injector,t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function uf(n,e){n.get(Cr).load(oz);let t=n.get(B0),r=n.get(Pe),i=n.get(ui),o=n.get(qr),s=n.get(di),a=r.createElement("div"),l=r.createElement("div");l.id=i.getId("cdk-overlay-"),l.classList.add("cdk-overlay-pane"),a.appendChild(l),t.getContainerElement().appendChild(a);let c=new qm(l,o,n),u=new ul(e),d=n.get(tn,null,{optional:!0})||n.get(zn).createRenderer(null,null);return u.direction=u.direction||s.value,new af(c,a,l,u,n.get(he),n.get(rz),r,n.get(Ka),n.get(iz),e?.disableAnimations??n.get(Cp,null,{optional:!0})==="NoopAnimations",n.get(cn),d)}var az=(()=>{class n{scrollStrategies=x(tz);_positionBuilder=x(sz);_injector=x(ke);constructor(){}create(t){return uf(this._injector,t)}position(){return this._positionBuilder}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Fee=new G("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let n=x(ke);return()=>Oc(n)}});function Lee(n){let e=x(ke);return()=>Oc(e)}var jee={provide:Fee,useFactory:Lee},Km=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Re({type:n});static \u0275inj=Se({providers:[az,jee],imports:[ll,M0,GA,GA]})}return n})();var gt=(()=>{class n{constructor(){x(LA)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Re({type:n});static \u0275inj=Se({imports:[ll,ll]})}return n})();var dl=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Re({type:n});static \u0275inj=Se({imports:[gt,gt]})}return n})();var Vee=["mat-menu-item",""],$ee=[[["mat-icon"],["","matMenuItemIcon",""]],"*"],Uee=["mat-icon, [matMenuItemIcon]","*"];function zee(n,e){n&1&&(rd(),V(0,"svg",2),Pt(1,"polygon",3),z())}var Hee=["*"];function qee(n,e){if(n&1){let t=Kt();wi(0,"div",0),vd("click",function(){tt(t);let i=te();return nt(i.closed.emit("click"))})("animationstart",function(i){tt(t);let o=te();return nt(o._onAnimationStart(i.animationName))})("animationend",function(i){tt(t);let o=te();return nt(o._onAnimationDone(i.animationName))})("animationcancel",function(i){tt(t);let o=te();return nt(o._onAnimationDone(i.animationName))}),wi(1,"div",1),qe(2),Ui()()}if(n&2){let t=te();Jo(t._classList),Ge("mat-menu-panel-animations-disabled",t._animationsDisabled)("mat-menu-panel-exit-animation",t._panelAnimationState==="void")("mat-menu-panel-animating",t._isAnimating),so("id",t.panelId),Et("aria-label",t.ariaLabel||null)("aria-labelledby",t.ariaLabelledby||null)("aria-describedby",t.ariaDescribedby||null)}}var ZA=new G("MAT_MENU_PANEL"),Ym=(()=>{class n{_elementRef=x(De);_document=x(Pe);_focusMonitor=x(is);_parentMenu=x(ZA,{optional:!0});_changeDetectorRef=x(_n);role="menuitem";disabled=!1;disableRipple=!1;_hovered=new re;_focused=new re;_highlighted=!1;_triggersSubmenu=!1;constructor(){x(Cr).load(ef),this._parentMenu?.addItem?.(this)}focus(t,r){this._focusMonitor&&t?this._focusMonitor.focusVia(this._getHostElement(),t,r):this._getHostElement().focus(r),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(t){this.disabled&&(t.preventDefault(),t.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){let t=this._elementRef.nativeElement.cloneNode(!0),r=t.querySelectorAll("mat-icon, .material-icons");for(let i=0;i<r.length;i++)r[i].remove();return t.textContent?.trim()||""}_setHighlighted(t){this._highlighted=t,this._changeDetectorRef.markForCheck()}_setTriggersSubmenu(t){this._triggersSubmenu=t,this._changeDetectorRef.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=xe({type:n,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-mdc-menu-item","mat-focus-indicator"],hostVars:8,hostBindings:function(r,i){r&1&&Me("click",function(s){return i._checkDisabled(s)})("mouseenter",function(){return i._handleMouseEnter()}),r&2&&(Et("role",i.role)("tabindex",i._getTabIndex())("aria-disabled",i.disabled)("disabled",i.disabled||null),Ge("mat-mdc-menu-item-highlighted",i._highlighted)("mat-mdc-menu-item-submenu-trigger",i._triggersSubmenu))},inputs:{role:"role",disabled:[2,"disabled","disabled",fn],disableRipple:[2,"disableRipple","disableRipple",fn]},exportAs:["matMenuItem"],attrs:Vee,ngContentSelectors:Uee,decls:5,vars:3,consts:[[1,"mat-mdc-menu-item-text"],["matRipple","",1,"mat-mdc-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["viewBox","0 0 5 10","focusable","false","aria-hidden","true",1,"mat-mdc-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(r,i){r&1&&(Qt($ee),qe(0),V(1,"span",0),qe(2,1),z(),Pt(3,"div",1),bt(4,zee,2,0,":svg:svg",2)),r&2&&(B(3),ue("matRippleDisabled",i.disableRipple||i.disabled)("matRippleTrigger",i._getHostElement()),B(),vt(i._triggersSubmenu?4:-1))},dependencies:[qU],encapsulation:2,changeDetection:0})}return n})();var Gee=new G("MatMenuContent");var Wee=new G("mat-menu-default-options",{providedIn:"root",factory:Kee});function Kee(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}var QA="_mat-menu-enter",$0="_mat-menu-exit",df=(()=>{class n{_elementRef=x(De);_changeDetectorRef=x(_n);_injector=x(ke);_keyManager;_xPosition;_yPosition;_firstItemFocusRef;_exitFallbackTimeout;_animationsDisabled=hr();_allItems;_directDescendantItems=new Bi;_classList={};_panelAnimationState="void";_animationDone=new re;_isAnimating=!1;parentMenu;direction;overlayPanelClass;backdropClass;ariaLabel;ariaLabelledby;ariaDescribedby;get xPosition(){return this._xPosition}set xPosition(t){this._xPosition=t,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(t){this._yPosition=t,this.setPositionClasses()}templateRef;items;lazyContent;overlapTrigger;hasBackdrop;set panelClass(t){let r=this._previousPanelClass,i=m({},this._classList);r&&r.length&&r.split(" ").forEach(o=>{i[o]=!1}),this._previousPanelClass=t,t&&t.length&&(t.split(" ").forEach(o=>{i[o]=!0}),this._elementRef.nativeElement.className=""),this._classList=i}_previousPanelClass;get classList(){return this.panelClass}set classList(t){this.panelClass=t}closed=new Ie;close=this.closed;panelId=x(ui).getId("mat-menu-panel-");constructor(){let t=x(Wee);this.overlayPanelClass=t.overlayPanelClass||"",this._xPosition=t.xPosition,this._yPosition=t.yPosition,this.backdropClass=t.backdropClass,this.overlapTrigger=t.overlapTrigger,this.hasBackdrop=t.hasBackdrop}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new $m(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(Xn(this._directDescendantItems),$n(t=>$r(...t.map(r=>r._focused)))).subscribe(t=>this._keyManager.updateActiveItem(t)),this._directDescendantItems.changes.subscribe(t=>{let r=this._keyManager;if(this._panelAnimationState==="enter"&&r.activeItem?._hasFocus()){let i=t.toArray(),o=Math.max(0,Math.min(i.length-1,r.activeItemIndex||0));i[o]&&!i[o].disabled?r.setActiveItem(o):r.setNextItemActive()}})}ngOnDestroy(){this._keyManager?.destroy(),this._directDescendantItems.destroy(),this.closed.complete(),this._firstItemFocusRef?.destroy(),clearTimeout(this._exitFallbackTimeout)}_hovered(){return this._directDescendantItems.changes.pipe(Xn(this._directDescendantItems),$n(r=>$r(...r.map(i=>i._hovered))))}addItem(t){}removeItem(t){}_handleKeydown(t){let r=t.keyCode,i=this._keyManager;switch(r){case 27:os(t)||(t.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&this.direction==="ltr"&&this.closed.emit("keydown");break;case 39:this.parentMenu&&this.direction==="rtl"&&this.closed.emit("keydown");break;default:(r===38||r===40)&&i.setFocusOrigin("keyboard"),i.onKeydown(t);return}}focusFirstItem(t="program"){this._firstItemFocusRef?.destroy(),this._firstItemFocusRef=Hn(()=>{let r=this._resolvePanel();if(!r||!r.contains(document.activeElement)){let i=this._keyManager;i.setFocusOrigin(t).setFirstItemActive(),!i.activeItem&&r&&r.focus()}},{injector:this._injector})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(t){}setPositionClasses(t=this.xPosition,r=this.yPosition){this._classList=w(m({},this._classList),{"mat-menu-before":t==="before","mat-menu-after":t==="after","mat-menu-above":r==="above","mat-menu-below":r==="below"}),this._changeDetectorRef.markForCheck()}_onAnimationDone(t){let r=t===$0;(r||t===QA)&&(r&&(clearTimeout(this._exitFallbackTimeout),this._exitFallbackTimeout=void 0),this._animationDone.next(r?"void":"enter"),this._isAnimating=!1)}_onAnimationStart(t){(t===QA||t===$0)&&(this._isAnimating=!0)}_setIsOpen(t){if(this._panelAnimationState=t?"enter":"void",t){if(this._keyManager.activeItemIndex===0){let r=this._resolvePanel();r&&(r.scrollTop=0)}}else this._animationsDisabled||(this._exitFallbackTimeout=setTimeout(()=>this._onAnimationDone($0),200));this._animationsDisabled&&setTimeout(()=>{this._onAnimationDone(t?QA:$0)}),this._changeDetectorRef.markForCheck()}_updateDirectDescendants(){this._allItems.changes.pipe(Xn(this._allItems)).subscribe(t=>{this._directDescendantItems.reset(t.filter(r=>r._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}_resolvePanel(){let t=null;return this._directDescendantItems.length&&(t=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),t}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=xe({type:n,selectors:[["mat-menu"]],contentQueries:function(r,i,o){if(r&1&&(dn(o,Gee,5),dn(o,Ym,5),dn(o,Ym,4)),r&2){let s;Xe(s=Je())&&(i.lazyContent=s.first),Xe(s=Je())&&(i._allItems=s),Xe(s=Je())&&(i.items=s)}},viewQuery:function(r,i){if(r&1&&sn(Ar,5),r&2){let o;Xe(o=Je())&&(i.templateRef=o.first)}},hostVars:3,hostBindings:function(r,i){r&2&&Et("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},inputs:{backdropClass:"backdropClass",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:[2,"overlapTrigger","overlapTrigger",fn],hasBackdrop:[2,"hasBackdrop","hasBackdrop",t=>t==null?null:fn(t)],panelClass:[0,"class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"},exportAs:["matMenu"],features:[_t([{provide:ZA,useExisting:n}])],ngContentSelectors:Hee,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-mdc-menu-panel",3,"click","animationstart","animationend","animationcancel","id"],[1,"mat-mdc-menu-content"]],template:function(r,i){r&1&&(Qt(),kp(0,qee,3,12,"ng-template"))},styles:[`mat-menu{display:none}.mat-mdc-menu-content{margin:0;padding:8px 0;outline:0}.mat-mdc-menu-content,.mat-mdc-menu-content .mat-mdc-menu-item .mat-mdc-menu-item-text{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;flex:1;white-space:normal;font-family:var(--mat-menu-item-label-text-font, var(--mat-sys-label-large-font));line-height:var(--mat-menu-item-label-text-line-height, var(--mat-sys-label-large-line-height));font-size:var(--mat-menu-item-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-menu-item-label-text-tracking, var(--mat-sys-label-large-tracking));font-weight:var(--mat-menu-item-label-text-weight, var(--mat-sys-label-large-weight))}@keyframes _mat-menu-enter{from{opacity:0;transform:scale(0.8)}to{opacity:1;transform:none}}@keyframes _mat-menu-exit{from{opacity:1}to{opacity:0}}.mat-mdc-menu-panel{min-width:112px;max-width:280px;overflow:auto;box-sizing:border-box;outline:0;animation:_mat-menu-enter 120ms cubic-bezier(0, 0, 0.2, 1);border-radius:var(--mat-menu-container-shape, var(--mat-sys-corner-extra-small));background-color:var(--mat-menu-container-color, var(--mat-sys-surface-container));box-shadow:var(--mat-menu-container-elevation-shadow, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12));will-change:transform,opacity}.mat-mdc-menu-panel.mat-menu-panel-exit-animation{animation:_mat-menu-exit 100ms 25ms linear forwards}.mat-mdc-menu-panel.mat-menu-panel-animations-disabled{animation:none}.mat-mdc-menu-panel.mat-menu-panel-animating{pointer-events:none}.mat-mdc-menu-panel.mat-menu-panel-animating:has(.mat-mdc-menu-content:empty){display:none}@media(forced-colors: active){.mat-mdc-menu-panel{outline:solid 1px}}.mat-mdc-menu-panel .mat-divider{color:var(--mat-menu-divider-color, var(--mat-sys-surface-variant));margin-bottom:var(--mat-menu-divider-bottom-spacing, 8px);margin-top:var(--mat-menu-divider-top-spacing, 8px)}.mat-mdc-menu-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;cursor:pointer;width:100%;text-align:left;box-sizing:border-box;color:inherit;font-size:inherit;background:none;text-decoration:none;margin:0;min-height:48px;padding-left:var(--mat-menu-item-leading-spacing, 12px);padding-right:var(--mat-menu-item-trailing-spacing, 12px);-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-menu-item::-moz-focus-inner{border:0}[dir=rtl] .mat-mdc-menu-item{padding-left:var(--mat-menu-item-trailing-spacing, 12px);padding-right:var(--mat-menu-item-leading-spacing, 12px)}.mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon]){padding-left:var(--mat-menu-item-with-icon-leading-spacing, 12px);padding-right:var(--mat-menu-item-with-icon-trailing-spacing, 12px)}[dir=rtl] .mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon]){padding-left:var(--mat-menu-item-with-icon-trailing-spacing, 12px);padding-right:var(--mat-menu-item-with-icon-leading-spacing, 12px)}.mat-mdc-menu-item,.mat-mdc-menu-item:visited,.mat-mdc-menu-item:link{color:var(--mat-menu-item-label-text-color, var(--mat-sys-on-surface))}.mat-mdc-menu-item .mat-icon-no-color,.mat-mdc-menu-item .mat-mdc-menu-submenu-icon{color:var(--mat-menu-item-icon-color, var(--mat-sys-on-surface-variant))}.mat-mdc-menu-item[disabled]{cursor:default;opacity:.38}.mat-mdc-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.mat-mdc-menu-item:focus{outline:0}.mat-mdc-menu-item .mat-icon{flex-shrink:0;margin-right:var(--mat-menu-item-spacing, 12px);height:var(--mat-menu-item-icon-size, 24px);width:var(--mat-menu-item-icon-size, 24px)}[dir=rtl] .mat-mdc-menu-item{text-align:right}[dir=rtl] .mat-mdc-menu-item .mat-icon{margin-right:0;margin-left:var(--mat-menu-item-spacing, 12px)}.mat-mdc-menu-item:not([disabled]):hover{background-color:var(--mat-menu-item-hover-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-hover-state-layer-opacity) * 100%), transparent))}.mat-mdc-menu-item:not([disabled]).cdk-program-focused,.mat-mdc-menu-item:not([disabled]).cdk-keyboard-focused,.mat-mdc-menu-item:not([disabled]).mat-mdc-menu-item-highlighted{background-color:var(--mat-menu-item-focus-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-focus-state-layer-opacity) * 100%), transparent))}@media(forced-colors: active){.mat-mdc-menu-item{margin-top:1px}}.mat-mdc-menu-submenu-icon{width:var(--mat-menu-item-icon-size, 24px);height:10px;fill:currentColor;padding-left:var(--mat-menu-item-spacing, 12px)}[dir=rtl] .mat-mdc-menu-submenu-icon{padding-right:var(--mat-menu-item-spacing, 12px);padding-left:0}[dir=rtl] .mat-mdc-menu-submenu-icon polygon{transform:scaleX(-1);transform-origin:center}@media(forced-colors: active){.mat-mdc-menu-submenu-icon{fill:CanvasText}}.mat-mdc-menu-item .mat-mdc-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}
`],encapsulation:2,changeDetection:0})}return n})(),lz=new G("mat-menu-scroll-strategy",{providedIn:"root",factory:()=>{let n=x(ke);return()=>Oc(n)}});function Qee(n){let e=x(ke);return()=>Oc(e)}var Yee={provide:lz,deps:[],useFactory:Qee};var Qm=new WeakMap,Zee=(()=>{class n{_canHaveBackdrop;_element=x(De);_viewContainerRef=x(tr);_menuItemInstance=x(Ym,{optional:!0,self:!0});_dir=x(di,{optional:!0});_focusMonitor=x(is);_ngZone=x(he);_injector=x(ke);_scrollStrategy=x(lz);_changeDetectorRef=x(_n);_animationsDisabled=hr();_portal;_overlayRef=null;_menuOpen=!1;_closingActionsSubscription=lt.EMPTY;_menuCloseSubscription=lt.EMPTY;_pendingRemoval;_parentMaterialMenu;_parentInnerPadding;_openedBy=void 0;get _menu(){return this._menuInternal}set _menu(t){t!==this._menuInternal&&(this._menuInternal=t,this._menuCloseSubscription.unsubscribe(),t&&(this._parentMaterialMenu,this._menuCloseSubscription=t.close.subscribe(r=>{this._destroyMenu(r),(r==="click"||r==="tab")&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(r)})),this._menuItemInstance?._setTriggersSubmenu(this._triggersSubmenu()))}_menuInternal;constructor(t){this._canHaveBackdrop=t;let r=x(ZA,{optional:!0});this._parentMaterialMenu=r instanceof df?r:void 0}ngOnDestroy(){this._menu&&this._ownsMenu(this._menu)&&Qm.delete(this._menu),this._pendingRemoval?.unsubscribe(),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null)}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_triggersSubmenu(){return!!(this._menuItemInstance&&this._parentMaterialMenu&&this._menu)}_closeMenu(){this._menu?.close.emit()}_openMenu(t){let r=this._menu;if(this._menuOpen||!r)return;this._pendingRemoval?.unsubscribe();let i=Qm.get(r);Qm.set(r,this),i&&i!==this&&i._closeMenu();let o=this._createOverlay(r),s=o.getConfig(),a=s.positionStrategy;this._setPosition(r,a),this._canHaveBackdrop?s.hasBackdrop=r.hasBackdrop==null?!this._triggersSubmenu():r.hasBackdrop:s.hasBackdrop=!1,o.hasAttached()||(o.attach(this._getPortal(r)),r.lazyContent?.attach(this.menuData)),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this._closeMenu()),r.parentMenu=this._triggersSubmenu()?this._parentMaterialMenu:void 0,r.direction=this.dir,t&&r.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0),r instanceof df&&(r._setIsOpen(!0),r._directDescendantItems.changes.pipe(Gt(r.close)).subscribe(()=>{a.withLockedPosition(!1).reapplyLastPosition(),a.withLockedPosition(!0)}))}focus(t,r){this._focusMonitor&&t?this._focusMonitor.focusVia(this._element,t,r):this._element.nativeElement.focus(r)}_destroyMenu(t){let r=this._overlayRef,i=this._menu;!r||!this.menuOpen||(this._closingActionsSubscription.unsubscribe(),this._pendingRemoval?.unsubscribe(),i instanceof df&&this._ownsMenu(i)?(this._pendingRemoval=i._animationDone.pipe(wn(1)).subscribe(()=>{r.detach(),i.lazyContent?.detach()}),i._setIsOpen(!1)):(r.detach(),i?.lazyContent?.detach()),i&&this._ownsMenu(i)&&Qm.delete(i),this.restoreFocus&&(t==="keydown"||!this._openedBy||!this._triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,this._setIsMenuOpen(!1))}_setIsMenuOpen(t){t!==this._menuOpen&&(this._menuOpen=t,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this._triggersSubmenu()&&this._menuItemInstance._setHighlighted(t),this._changeDetectorRef.markForCheck())}_createOverlay(t){if(!this._overlayRef){let r=this._getOverlayConfig(t);this._subscribeToPositions(t,r.positionStrategy),this._overlayRef=uf(this._injector,r),this._overlayRef.keydownEvents().subscribe(i=>{this._menu instanceof df&&this._menu._handleKeydown(i)})}return this._overlayRef}_getOverlayConfig(t){return new ul({positionStrategy:V0(this._injector,this._getOverlayOrigin()).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:t.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:t.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir||"ltr",disableAnimations:this._animationsDisabled})}_subscribeToPositions(t,r){t.setPositionClasses&&r.positionChanges.subscribe(i=>{this._ngZone.run(()=>{let o=i.connectionPair.overlayX==="start"?"after":"before",s=i.connectionPair.overlayY==="top"?"below":"above";t.setPositionClasses(o,s)})})}_setPosition(t,r){let[i,o]=t.xPosition==="before"?["end","start"]:["start","end"],[s,a]=t.yPosition==="above"?["bottom","top"]:["top","bottom"],[l,c]=[s,a],[u,d]=[i,o],h=0;if(this._triggersSubmenu()){if(d=i=t.xPosition==="before"?"start":"end",o=u=i==="end"?"start":"end",this._parentMaterialMenu){if(this._parentInnerPadding==null){let f=this._parentMaterialMenu.items.first;this._parentInnerPadding=f?f._getHostElement().offsetTop:0}h=s==="bottom"?this._parentInnerPadding:-this._parentInnerPadding}}else t.overlapTrigger||(l=s==="top"?"bottom":"top",c=a==="top"?"bottom":"top");r.withPositions([{originX:i,originY:l,overlayX:u,overlayY:s,offsetY:h},{originX:o,originY:l,overlayX:d,overlayY:s,offsetY:h},{originX:i,originY:c,overlayX:u,overlayY:a,offsetY:-h},{originX:o,originY:c,overlayX:d,overlayY:a,offsetY:-h}])}_menuClosingActions(){let t=this._getOutsideClickStream(this._overlayRef),r=this._overlayRef.detachments(),i=this._parentMaterialMenu?this._parentMaterialMenu.closed:ye(),o=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(Ze(s=>this._menuOpen&&s!==this._menuItemInstance)):ye();return $r(t,i,o,r)}_getPortal(t){return(!this._portal||this._portal.templateRef!==t.templateRef)&&(this._portal=new al(t.templateRef,this._viewContainerRef)),this._portal}_ownsMenu(t){return Qm.get(t)===this}static \u0275fac=function(r){SS()};static \u0275dir=me({type:n})}return n})(),cz=(()=>{class n extends Zee{_cleanupTouchstart;_hoverSubscription=lt.EMPTY;get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(t){this.menu=t}get menu(){return this._menu}set menu(t){this._menu=t}menuData;restoreFocus=!0;menuOpened=new Ie;onMenuOpen=this.menuOpened;menuClosed=new Ie;onMenuClose=this.menuClosed;constructor(){super(!0);let t=x(tn);this._cleanupTouchstart=t.listen(this._element.nativeElement,"touchstart",r=>{Sc(r)||(this._openedBy="touch")},{passive:!0})}triggersSubmenu(){return super._triggersSubmenu()}toggleMenu(){return this.menuOpen?this.closeMenu():this.openMenu()}openMenu(){this._openMenu(!0)}closeMenu(){this._closeMenu()}updatePosition(){this._overlayRef?.updatePosition()}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){super.ngOnDestroy(),this._cleanupTouchstart(),this._hoverSubscription.unsubscribe()}_getOverlayOrigin(){return this._element}_getOutsideClickStream(t){return t.backdropClick()}_handleMousedown(t){Ic(t)||(this._openedBy=t.button===0?"mouse":void 0,this.triggersSubmenu()&&t.preventDefault())}_handleKeydown(t){let r=t.keyCode;(r===13||r===32)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(r===39&&this.dir==="ltr"||r===37&&this.dir==="rtl")&&(this._openedBy="keyboard",this.openMenu())}_handleClick(t){this.triggersSubmenu()?(t.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){this.triggersSubmenu()&&this._parentMaterialMenu&&(this._hoverSubscription=this._parentMaterialMenu._hovered().subscribe(t=>{t===this._menuItemInstance&&!t.disabled&&(this._openedBy="mouse",this._openMenu(!1))}))}static \u0275fac=function(r){return new(r||n)};static \u0275dir=me({type:n,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-mdc-menu-trigger"],hostVars:3,hostBindings:function(r,i){r&1&&Me("click",function(s){return i._handleClick(s)})("mousedown",function(s){return i._handleMousedown(s)})("keydown",function(s){return i._handleKeydown(s)}),r&2&&Et("aria-haspopup",i.menu?"menu":null)("aria-expanded",i.menuOpen)("aria-controls",i.menuOpen?i.menu==null?null:i.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:[0,"mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:[0,"matMenuTriggerFor","menu"],menuData:[0,"matMenuTriggerData","menuData"],restoreFocus:[0,"matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"},exportAs:["matMenuTrigger"],features:[ot]})}return n})();var uz=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Re({type:n});static \u0275inj=Se({providers:[Yee],imports:[dl,gt,Km,kc,gt]})}return n})(),dz={transformMenu:{type:7,name:"transformMenu",definitions:[{type:0,name:"void",styles:{type:6,styles:{opacity:0,transform:"scale(0.8)"},offset:null}},{type:1,expr:"void => enter",animation:{type:4,styles:{type:6,styles:{opacity:1,transform:"scale(1)"},offset:null},timings:"120ms cubic-bezier(0, 0, 0.2, 1)"},options:null},{type:1,expr:"* => void",animation:{type:4,styles:{type:6,styles:{opacity:0},offset:null},timings:"100ms 25ms linear"},options:null}],options:{}},fadeInItems:{type:7,name:"fadeInItems",definitions:[{type:0,name:"showing",styles:{type:6,styles:{opacity:1},offset:null}},{type:1,expr:"void => *",animation:[{type:6,styles:{opacity:0},offset:null},{type:4,styles:null,timings:"400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)"}],options:null}],options:{}}},uRe=dz.fadeInItems,dRe=dz.transformMenu;var U0;function Jee(){if(U0===void 0&&(U0=null,typeof window<"u")){let n=window;n.trustedTypes!==void 0&&(U0=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return U0}function Zm(n){return Jee()?.createHTML(n)||n}function fz(n){return Error(`Unable to find icon with the name "${n}"`)}function ete(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}function hz(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function pz(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}var aa=class{url;svgText;options;svgElement;constructor(e,t,r){this.url=e,this.svgText=t,this.options=r}},gz=(()=>{class n{_httpClient;_sanitizer;_errorHandler;_document;_svgIconConfigs=new Map;_iconSetConfigs=new Map;_cachedIconsByUrl=new Map;_inProgressUrlFetches=new Map;_fontCssClassesByAlias=new Map;_resolvers=[];_defaultFontSetClass=["material-icons","mat-ligature-font"];constructor(t,r,i,o){this._httpClient=t,this._sanitizer=r,this._errorHandler=o,this._document=i}addSvgIcon(t,r,i){return this.addSvgIconInNamespace("",t,r,i)}addSvgIconLiteral(t,r,i){return this.addSvgIconLiteralInNamespace("",t,r,i)}addSvgIconInNamespace(t,r,i,o){return this._addSvgIconConfig(t,r,new aa(i,null,o))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,r,i,o){let s=this._sanitizer.sanitize(wr.HTML,i);if(!s)throw pz(i);let a=Zm(s);return this._addSvgIconConfig(t,r,new aa("",a,o))}addSvgIconSet(t,r){return this.addSvgIconSetInNamespace("",t,r)}addSvgIconSetLiteral(t,r){return this.addSvgIconSetLiteralInNamespace("",t,r)}addSvgIconSetInNamespace(t,r,i){return this._addSvgIconSetConfig(t,new aa(r,null,i))}addSvgIconSetLiteralInNamespace(t,r,i){let o=this._sanitizer.sanitize(wr.HTML,r);if(!o)throw pz(r);let s=Zm(o);return this._addSvgIconSetConfig(t,new aa("",s,i))}registerFontClassAlias(t,r=t){return this._fontCssClassesByAlias.set(t,r),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){let r=this._sanitizer.sanitize(wr.RESOURCE_URL,t);if(!r)throw hz(t);let i=this._cachedIconsByUrl.get(r);return i?ye(z0(i)):this._loadSvgIconFromConfig(new aa(t,null)).pipe(gn(o=>this._cachedIconsByUrl.set(r,o)),be(o=>z0(o)))}getNamedSvgIcon(t,r=""){let i=mz(r,t),o=this._svgIconConfigs.get(i);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(r,t),o)return this._svgIconConfigs.set(i,o),this._getSvgFromConfig(o);let s=this._iconSetConfigs.get(r);return s?this._getSvgFromIconSetConfigs(t,s):Sa(fz(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?ye(z0(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(be(r=>z0(r)))}_getSvgFromIconSetConfigs(t,r){let i=this._extractIconWithNameFromAnySet(t,r);if(i)return ye(i);let o=r.filter(s=>!s.svgText).map(s=>this._loadSvgIconSetFromConfig(s).pipe(Pi(a=>{let c=`Loading icon set URL: ${this._sanitizer.sanitize(wr.RESOURCE_URL,s.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(c)),ye(null)})));return Gh(o).pipe(be(()=>{let s=this._extractIconWithNameFromAnySet(t,r);if(!s)throw fz(t);return s}))}_extractIconWithNameFromAnySet(t,r){for(let i=r.length-1;i>=0;i--){let o=r[i];if(o.svgText&&o.svgText.toString().indexOf(t)>-1){let s=this._svgElementFromConfig(o),a=this._extractSvgIconFromSet(s,t,o.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(gn(r=>t.svgText=r),be(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?ye(null):this._fetchIcon(t).pipe(gn(r=>t.svgText=r))}_extractSvgIconFromSet(t,r,i){let o=t.querySelector(`[id="${r}"]`);if(!o)return null;let s=o.cloneNode(!0);if(s.removeAttribute("id"),s.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(s,i);if(s.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(s),i);let a=this._svgElementFromString(Zm("<svg></svg>"));return a.appendChild(s),this._setSvgAttributes(a,i)}_svgElementFromString(t){let r=this._document.createElement("DIV");r.innerHTML=t;let i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(t){let r=this._svgElementFromString(Zm("<svg></svg>")),i=t.attributes;for(let o=0;o<i.length;o++){let{name:s,value:a}=i[o];s!=="id"&&r.setAttribute(s,a)}for(let o=0;o<t.childNodes.length;o++)t.childNodes[o].nodeType===this._document.ELEMENT_NODE&&r.appendChild(t.childNodes[o].cloneNode(!0));return r}_setSvgAttributes(t,r){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),r&&r.viewBox&&t.setAttribute("viewBox",r.viewBox),t}_fetchIcon(t){let{url:r,options:i}=t,o=i?.withCredentials??!1;if(!this._httpClient)throw ete();if(r==null)throw Error(`Cannot fetch icon from URL "${r}".`);let s=this._sanitizer.sanitize(wr.RESOURCE_URL,r);if(!s)throw hz(r);let a=this._inProgressUrlFetches.get(s);if(a)return a;let l=this._httpClient.get(s,{responseType:"text",withCredentials:o}).pipe(be(c=>Zm(c)),Bo(()=>this._inProgressUrlFetches.delete(s)),Qh());return this._inProgressUrlFetches.set(s,l),l}_addSvgIconConfig(t,r,i){return this._svgIconConfigs.set(mz(t,r),i),this}_addSvgIconSetConfig(t,r){let i=this._iconSetConfigs.get(t);return i?i.push(r):this._iconSetConfigs.set(t,[r]),this}_svgElementFromConfig(t){if(!t.svgElement){let r=this._svgElementFromString(t.svgText);this._setSvgAttributes(r,t.options),t.svgElement=r}return t.svgElement}_getIconConfigFromResolvers(t,r){for(let i=0;i<this._resolvers.length;i++){let o=this._resolvers[i](r,t);if(o)return tte(o)?new aa(o.url,null,o.options):new aa(o,null)}}static \u0275fac=function(r){return new(r||n)(de(Ya,8),de(Jp),de(Pe,8),de(cr))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function z0(n){return n.cloneNode(!0)}function mz(n,e){return n+":"+e}function tte(n){return!!(n.url&&n.options)}var nte=["*"],rte=new G("MAT_ICON_DEFAULT_OPTIONS"),ite=new G("mat-icon-location",{providedIn:"root",factory:ote});function ote(){let n=x(Pe),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}var _z=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],ste=_z.map(n=>`[${n}]`).join(", "),ate=/^url\(['"]?#(.*?)['"]?\)$/,hf=(()=>{class n{_elementRef=x(De);_iconRegistry=x(gz);_location=x(ite);_errorHandler=x(cr);_defaultColor;get color(){return this._color||this._defaultColor}set color(t){this._color=t}_color;inline=!1;get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}_svgIcon;get fontSet(){return this._fontSet}set fontSet(t){let r=this._cleanupFontValue(t);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}_fontSet;get fontIcon(){return this._fontIcon}set fontIcon(t){let r=this._cleanupFontValue(t);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}_fontIcon;_previousFontSetClass=[];_previousFontIconClass;_svgName;_svgNamespace;_previousPath;_elementsWithExternalReferences;_currentIconFetch=lt.EMPTY;constructor(){let t=x(new Fp("aria-hidden"),{optional:!0}),r=x(rte,{optional:!0});r&&(r.color&&(this.color=this._defaultColor=r.color),r.fontSet&&(this.fontSet=r.fontSet)),t||this._elementRef.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];let r=t.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let t=this._elementsWithExternalReferences;if(t&&t.size){let r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();let r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){let t=this._elementRef.nativeElement,r=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){let i=t.childNodes[r];(i.nodeType!==1||i.nodeName.toLowerCase()==="svg")&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let t=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(i=>i.length>0);this._previousFontSetClass.forEach(i=>t.classList.remove(i)),r.forEach(i=>t.classList.add(i)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return typeof t=="string"?t.trim().split(" ")[0]:t}_prependPathToReferences(t){let r=this._elementsWithExternalReferences;r&&r.forEach((i,o)=>{i.forEach(s=>{o.setAttribute(s.name,`url('${t}#${s.value}')`)})})}_cacheChildrenWithExternalReferences(t){let r=t.querySelectorAll(ste),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<r.length;o++)_z.forEach(s=>{let a=r[o],l=a.getAttribute(s),c=l?l.match(ate):null;if(c){let u=i.get(a);u||(u=[],i.set(a,u)),u.push({name:s,value:c[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){let[r,i]=this._splitIconName(t);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe(wn(1)).subscribe(o=>this._setSvgElement(o),o=>{let s=`Error retrieving icon ${r}:${i}! ${o.message}`;this._errorHandler.handleError(new Error(s))})}}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=xe({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(r,i){r&2&&(Et("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet)("fontIcon",i._usingFontIcon()?i.fontIcon:null),Jo(i.color?"mat-"+i.color:""),Ge("mat-icon-inline",i.inline)("mat-icon-no-color",i.color!=="primary"&&i.color!=="accent"&&i.color!=="warn"))},inputs:{color:"color",inline:[2,"inline","inline",fn],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],ngContentSelectors:nte,decls:1,vars:0,template:function(r,i){r&1&&(Qt(),qe(0))},styles:[`mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color, inherit)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}
`],encapsulation:2,changeDetection:0})}return n})(),pf=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Re({type:n});static \u0275inj=Se({imports:[gt,gt]})}return n})();var bz=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=xe({type:n,selectors:[["ng-component"]],hostAttrs:["cdk-text-field-style-loader",""],decls:0,vars:0,template:function(r,i){},styles:[`textarea.cdk-textarea-autosize{resize:none}textarea.cdk-textarea-autosize-measuring{padding:2px 0 !important;box-sizing:content-box !important;height:auto !important;overflow:hidden !important}textarea.cdk-textarea-autosize-measuring-firefox{padding:2px 0 !important;box-sizing:content-box !important;height:0 !important}@keyframes cdk-text-field-autofill-start{/*!*/}@keyframes cdk-text-field-autofill-end{/*!*/}.cdk-text-field-autofill-monitored:-webkit-autofill{animation:cdk-text-field-autofill-start 0s 1ms}.cdk-text-field-autofill-monitored:not(:-webkit-autofill){animation:cdk-text-field-autofill-end 0s 1ms}
`],encapsulation:2,changeDetection:0})}return n})(),lte={passive:!0},vz=(()=>{class n{_platform=x(yt);_ngZone=x(he);_renderer=x(zn).createRenderer(null,null);_styleLoader=x(Cr);_monitoredElements=new Map;constructor(){}monitor(t){if(!this._platform.isBrowser)return lr;this._styleLoader.load(bz);let r=Yr(t),i=this._monitoredElements.get(r);if(i)return i.subject;let o=new re,s="cdk-text-field-autofilled",a=c=>{c.animationName==="cdk-text-field-autofill-start"&&!r.classList.contains(s)?(r.classList.add(s),this._ngZone.run(()=>o.next({target:c.target,isAutofilled:!0}))):c.animationName==="cdk-text-field-autofill-end"&&r.classList.contains(s)&&(r.classList.remove(s),this._ngZone.run(()=>o.next({target:c.target,isAutofilled:!1})))},l=this._ngZone.runOutsideAngular(()=>(r.classList.add("cdk-text-field-autofill-monitored"),this._renderer.listen(r,"animationstart",a,lte)));return this._monitoredElements.set(r,{subject:o,unlisten:l}),o}stopMonitoring(t){let r=Yr(t),i=this._monitoredElements.get(r);i&&(i.unlisten(),i.subject.complete(),r.classList.remove("cdk-text-field-autofill-monitored"),r.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(r))}ngOnDestroy(){this._monitoredElements.forEach((t,r)=>this.stopMonitoring(r))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var yz=(()=>{class n{_elementRef=x(De);_platform=x(yt);_ngZone=x(he);_renderer=x(tn);_resizeEvents=new re;_previousValue;_initialHeight;_destroyed=new re;_listenerCleanups;_minRows;_maxRows;_enabled=!0;_previousMinRows=-1;_textareaElement;get minRows(){return this._minRows}set minRows(t){this._minRows=Qr(t),this._setMinHeight()}get maxRows(){return this._maxRows}set maxRows(t){this._maxRows=Qr(t),this._setMaxHeight()}get enabled(){return this._enabled}set enabled(t){this._enabled!==t&&((this._enabled=t)?this.resizeToFitContent(!0):this.reset())}get placeholder(){return this._textareaElement.placeholder}set placeholder(t){this._cachedPlaceholderHeight=void 0,t?this._textareaElement.setAttribute("placeholder",t):this._textareaElement.removeAttribute("placeholder"),this._cacheTextareaPlaceholderHeight()}_cachedLineHeight;_cachedPlaceholderHeight;_cachedScrollTop;_document=x(Pe);_hasFocus;_isViewInited=!1;constructor(){x(Cr).load(bz),this._textareaElement=this._elementRef.nativeElement}_setMinHeight(){let t=this.minRows&&this._cachedLineHeight?`${this.minRows*this._cachedLineHeight}px`:null;t&&(this._textareaElement.style.minHeight=t)}_setMaxHeight(){let t=this.maxRows&&this._cachedLineHeight?`${this.maxRows*this._cachedLineHeight}px`:null;t&&(this._textareaElement.style.maxHeight=t)}ngAfterViewInit(){this._platform.isBrowser&&(this._initialHeight=this._textareaElement.style.height,this.resizeToFitContent(),this._ngZone.runOutsideAngular(()=>{this._listenerCleanups=[this._renderer.listen("window","resize",()=>this._resizeEvents.next()),this._renderer.listen(this._textareaElement,"focus",this._handleFocusEvent),this._renderer.listen(this._textareaElement,"blur",this._handleFocusEvent)],this._resizeEvents.pipe(zu(16)).subscribe(()=>{this._cachedLineHeight=this._cachedPlaceholderHeight=void 0,this.resizeToFitContent(!0)})}),this._isViewInited=!0,this.resizeToFitContent(!0))}ngOnDestroy(){this._listenerCleanups?.forEach(t=>t()),this._resizeEvents.complete(),this._destroyed.next(),this._destroyed.complete()}_cacheTextareaLineHeight(){if(this._cachedLineHeight)return;let t=this._textareaElement.cloneNode(!1),r=t.style;t.rows=1,r.position="absolute",r.visibility="hidden",r.border="none",r.padding="0",r.height="",r.minHeight="",r.maxHeight="",r.top=r.bottom=r.left=r.right="auto",r.overflow="hidden",this._textareaElement.parentNode.appendChild(t),this._cachedLineHeight=t.clientHeight,t.remove(),this._setMinHeight(),this._setMaxHeight()}_measureScrollHeight(){let t=this._textareaElement,r=t.style.marginBottom||"",i=this._platform.FIREFOX,o=i&&this._hasFocus,s=i?"cdk-textarea-autosize-measuring-firefox":"cdk-textarea-autosize-measuring";o&&(t.style.marginBottom=`${t.clientHeight}px`),t.classList.add(s);let a=t.scrollHeight-4;return t.classList.remove(s),o&&(t.style.marginBottom=r),a}_cacheTextareaPlaceholderHeight(){if(!this._isViewInited||this._cachedPlaceholderHeight!=null)return;if(!this.placeholder){this._cachedPlaceholderHeight=0;return}let t=this._textareaElement.value;this._textareaElement.value=this._textareaElement.placeholder,this._cachedPlaceholderHeight=this._measureScrollHeight(),this._textareaElement.value=t}_handleFocusEvent=t=>{this._hasFocus=t.type==="focus"};ngDoCheck(){this._platform.isBrowser&&this.resizeToFitContent()}resizeToFitContent(t=!1){if(!this._enabled||(this._cacheTextareaLineHeight(),this._cacheTextareaPlaceholderHeight(),this._cachedScrollTop=this._textareaElement.scrollTop,!this._cachedLineHeight))return;let r=this._elementRef.nativeElement,i=r.value;if(!t&&this._minRows===this._previousMinRows&&i===this._previousValue)return;let o=this._measureScrollHeight(),s=Math.max(o,this._cachedPlaceholderHeight||0);r.style.height=`${s}px`,this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame<"u"?requestAnimationFrame(()=>this._scrollToCaretPosition(r)):setTimeout(()=>this._scrollToCaretPosition(r))}),this._previousValue=i,this._previousMinRows=this._minRows}reset(){this._initialHeight!==void 0&&(this._textareaElement.style.height=this._initialHeight)}_noopInputHandler(){}_scrollToCaretPosition(t){let{selectionStart:r,selectionEnd:i}=t;!this._destroyed.isStopped&&this._hasFocus&&(t.setSelectionRange(r,i),t.scrollTop=this._cachedScrollTop)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=me({type:n,selectors:[["textarea","cdkTextareaAutosize",""]],hostAttrs:["rows","1",1,"cdk-textarea-autosize"],hostBindings:function(r,i){r&1&&Me("input",function(){return i._noopInputHandler()})},inputs:{minRows:[0,"cdkAutosizeMinRows","minRows"],maxRows:[0,"cdkAutosizeMaxRows","maxRows"],enabled:[2,"cdkTextareaAutosize","enabled",fn],placeholder:"placeholder"},exportAs:["cdkTextareaAutosize"]})}return n})(),H0=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Re({type:n});static \u0275inj=Se({})}return n})();var wz=new G("MAT_INPUT_VALUE_ACCESSOR");var JA=class{_box;_destroyed=new re;_resizeSubject=new re;_resizeObserver;_elementObservables=new Map;constructor(e){this._box=e,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(t=>this._resizeSubject.next(t)))}observe(e){return this._elementObservables.has(e)||this._elementObservables.set(e,new Be(t=>{let r=this._resizeSubject.subscribe(t);return this._resizeObserver?.observe(e,{box:this._box}),()=>{this._resizeObserver?.unobserve(e),r.unsubscribe(),this._elementObservables.delete(e)}}).pipe(Ze(t=>t.some(r=>r.target===e)),Wu({bufferSize:1,refCount:!0}),Gt(this._destroyed))),this._elementObservables.get(e)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}},xz=(()=>{class n{_cleanupErrorListener;_observers=new Map;_ngZone=x(he);constructor(){typeof ResizeObserver<"u"}ngOnDestroy(){for(let[,t]of this._observers)t.destroy();this._observers.clear(),this._cleanupErrorListener?.()}observe(t,r){let i=r?.box||"content-box";return this._observers.has(i)||this._observers.set(i,new JA(i)),this._observers.get(i).observe(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ute=["notch"],dte=["matFormFieldNotchedOutline",""],fte=["*"],Cz=["iconPrefixContainer"],Ez=["textPrefixContainer"],Iz=["iconSuffixContainer"],Sz=["textSuffixContainer"],hte=["textField"],pte=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],mte=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];function gte(n,e){n&1&&Pt(0,"span",20)}function _te(n,e){if(n&1&&(V(0,"label",19),qe(1,1),bt(2,gte,1,0,"span",20),z()),n&2){let t=te(2);ue("floating",t._shouldLabelFloat())("monitorResize",t._hasOutline())("id",t._labelId),Et("for",t._control.disableAutomaticLabeling?null:t._control.id),B(2),vt(!t.hideRequiredMarker&&t._control.required?2:-1)}}function bte(n,e){if(n&1&&bt(0,_te,3,5,"label",19),n&2){let t=te();vt(t._hasFloatingLabel()?0:-1)}}function vte(n,e){n&1&&Pt(0,"div",7)}function yte(n,e){}function wte(n,e){if(n&1&&ht(0,yte,0,0,"ng-template",13),n&2){te(2);let t=ii(1);ue("ngTemplateOutlet",t)}}function xte(n,e){if(n&1&&(V(0,"div",9),bt(1,wte,1,1,null,13),z()),n&2){let t=te();ue("matFormFieldNotchedOutlineOpen",t._shouldLabelFloat()),B(),vt(t._forceDisplayInfixLabel()?-1:1)}}function Cte(n,e){n&1&&(V(0,"div",10,2),qe(2,2),z())}function Ete(n,e){n&1&&(V(0,"div",11,3),qe(2,3),z())}function Ite(n,e){}function Ste(n,e){if(n&1&&ht(0,Ite,0,0,"ng-template",13),n&2){te();let t=ii(1);ue("ngTemplateOutlet",t)}}function Dte(n,e){n&1&&(V(0,"div",14,4),qe(2,4),z())}function Tte(n,e){n&1&&(V(0,"div",15,5),qe(2,5),z())}function Ate(n,e){n&1&&Pt(0,"div",16)}function kte(n,e){n&1&&qe(0,6)}function Rte(n,e){if(n&1&&(V(0,"mat-hint",21),ae(1),z()),n&2){let t=te(2);ue("id",t._hintLabelId),B(),Rt(t.hintLabel)}}function Mte(n,e){if(n&1&&(bt(0,Rte,2,2,"mat-hint",21),qe(1,7),Pt(2,"div",22),qe(3,8)),n&2){let t=te();vt(t.hintLabel?0:-1)}}var ek=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=me({type:n,selectors:[["mat-label"]]})}return n})(),Ote=new G("MatError");var tk=(()=>{class n{align="start";id=x(ui).getId("mat-mdc-hint-");static \u0275fac=function(r){return new(r||n)};static \u0275dir=me({type:n,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(r,i){r&2&&(so("id",i.id),Et("align",null),Ge("mat-mdc-form-field-hint-end",i.align==="end"))},inputs:{align:"align",id:"id"}})}return n})(),Pte=new G("MatPrefix");var Nte=new G("MatSuffix");var Oz=new G("FloatingLabelParent"),Dz=(()=>{class n{_elementRef=x(De);get floating(){return this._floating}set floating(t){this._floating=t,this.monitorResize&&this._handleResize()}_floating=!1;get monitorResize(){return this._monitorResize}set monitorResize(t){this._monitorResize=t,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}_monitorResize=!1;_resizeObserver=x(xz);_ngZone=x(he);_parent=x(Oz);_resizeSubscription=new lt;constructor(){}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return Fte(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}static \u0275fac=function(r){return new(r||n)};static \u0275dir=me({type:n,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(r,i){r&2&&Ge("mdc-floating-label--float-above",i.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"}})}return n})();function Fte(n){let e=n;if(e.offsetParent!==null)return e.scrollWidth;let t=e.cloneNode(!0);t.style.setProperty("position","absolute"),t.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(t);let r=t.scrollWidth;return t.remove(),r}var Tz="mdc-line-ripple--active",q0="mdc-line-ripple--deactivating",Az=(()=>{class n{_elementRef=x(De);_cleanupTransitionEnd;constructor(){let t=x(he),r=x(tn);t.runOutsideAngular(()=>{this._cleanupTransitionEnd=r.listen(this._elementRef.nativeElement,"transitionend",this._handleTransitionEnd)})}activate(){let t=this._elementRef.nativeElement.classList;t.remove(q0),t.add(Tz)}deactivate(){this._elementRef.nativeElement.classList.add(q0)}_handleTransitionEnd=t=>{let r=this._elementRef.nativeElement.classList,i=r.contains(q0);t.propertyName==="opacity"&&i&&r.remove(Tz,q0)};ngOnDestroy(){this._cleanupTransitionEnd()}static \u0275fac=function(r){return new(r||n)};static \u0275dir=me({type:n,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]})}return n})(),kz=(()=>{class n{_elementRef=x(De);_ngZone=x(he);open=!1;_notch;ngAfterViewInit(){let t=this._elementRef.nativeElement,r=t.querySelector(".mdc-floating-label");r?(t.classList.add("mdc-notched-outline--upgraded"),typeof requestAnimationFrame=="function"&&(r.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>r.style.transitionDuration="")}))):t.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(t){let r=this._notch.nativeElement;!this.open||!t?r.style.width="":r.style.width=`calc(${t}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`}_setMaxWidth(t){this._notch.nativeElement.style.setProperty("--mat-form-field-notch-max-width",`calc(100% - ${t}px)`)}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=xe({type:n,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(r,i){if(r&1&&sn(ute,5),r&2){let o;Xe(o=Je())&&(i._notch=o.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(r,i){r&2&&Ge("mdc-notched-outline--notched",i.open)},inputs:{open:[0,"matFormFieldNotchedOutlineOpen","open"]},attrs:dte,ngContentSelectors:fte,decls:5,vars:0,consts:[["notch",""],[1,"mat-mdc-notch-piece","mdc-notched-outline__leading"],[1,"mat-mdc-notch-piece","mdc-notched-outline__notch"],[1,"mat-mdc-notch-piece","mdc-notched-outline__trailing"]],template:function(r,i){r&1&&(Qt(),Xo(0,"div",1),wi(1,"div",2,0),qe(3),Ui(),Xo(4,"div",3))},encapsulation:2,changeDetection:0})}return n})(),nk=(()=>{class n{value;stateChanges;id;placeholder;ngControl;focused;empty;shouldLabelFloat;required;disabled;errorState;controlType;autofilled;userAriaDescribedBy;disableAutomaticLabeling;describedByIds;static \u0275fac=function(r){return new(r||n)};static \u0275dir=me({type:n})}return n})();var rk=new G("MatFormField"),Lte=new G("MAT_FORM_FIELD_DEFAULT_OPTIONS"),Rz="fill",jte="auto",Mz="fixed",Bte="translateY(-50%)",Xm=(()=>{class n{_elementRef=x(De);_changeDetectorRef=x(_n);_dir=x(di);_platform=x(yt);_idGenerator=x(ui);_ngZone=x(he);_defaults=x(Lte,{optional:!0});_textField;_iconPrefixContainer;_textPrefixContainer;_iconSuffixContainer;_textSuffixContainer;_floatingLabel;_notchedOutline;_lineRipple;_iconPrefixContainerSignal=Lp("iconPrefixContainer");_textPrefixContainerSignal=Lp("textPrefixContainer");_iconSuffixContainerSignal=Lp("iconSuffixContainer");_textSuffixContainerSignal=Lp("textSuffixContainer");_prefixSuffixContainers=Wr(()=>[this._iconPrefixContainerSignal(),this._textPrefixContainerSignal(),this._iconSuffixContainerSignal(),this._textSuffixContainerSignal()].map(t=>t?.nativeElement).filter(t=>t!==void 0));_formFieldControl;_prefixChildren;_suffixChildren;_errorChildren;_hintChildren;_labelChild=GL(ek);get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=nr(t)}_hideRequiredMarker=!1;color="primary";get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||jte}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t,this._changeDetectorRef.markForCheck())}_floatLabel;get appearance(){return this._appearanceSignal()}set appearance(t){let r=t||this._defaults?.appearance||Rz;this._appearanceSignal.set(r)}_appearanceSignal=kt(Rz);get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||Mz}set subscriptSizing(t){this._subscriptSizing=t||this._defaults?.subscriptSizing||Mz}_subscriptSizing=null;get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}_hintLabel="";_hasIconPrefix=!1;_hasTextPrefix=!1;_hasIconSuffix=!1;_hasTextSuffix=!1;_labelId=this._idGenerator.getId("mat-mdc-form-field-label-");_hintLabelId=this._idGenerator.getId("mat-mdc-hint-");_describedByIds;get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(t){this._explicitFormFieldControl=t}_destroyed=new re;_isFocused=null;_explicitFormFieldControl;_previousControl=null;_previousControlValidatorFn=null;_stateChanges;_valueChanges;_describedByChanges;_animationsDisabled=hr();constructor(){let t=this._defaults;t&&(t.appearance&&(this.appearance=t.appearance),this._hideRequiredMarker=!!t?.hideRequiredMarker,t.color&&(this.color=t.color)),this._syncOutlineLabelOffset()}ngAfterViewInit(){this._updateFocusState(),this._animationsDisabled||this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{this._elementRef.nativeElement.classList.add("mat-form-field-animations-enabled")},300)}),this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeSubscript(),this._initializePrefixAndSuffix()}ngAfterContentChecked(){this._assertFormFieldControl(),this._control!==this._previousControl&&(this._initializeControl(this._previousControl),this._control.ngControl&&this._control.ngControl.control&&(this._previousControlValidatorFn=this._control.ngControl.control.validator),this._previousControl=this._control),this._control.ngControl&&this._control.ngControl.control&&this._control.ngControl.control.validator!==this._previousControlValidatorFn&&this._changeDetectorRef.markForCheck()}ngOnDestroy(){this._outlineLabelOffsetResizeObserver?.disconnect(),this._stateChanges?.unsubscribe(),this._valueChanges?.unsubscribe(),this._describedByChanges?.unsubscribe(),this._destroyed.next(),this._destroyed.complete()}getLabelId=Wr(()=>this._hasFloatingLabel()?this._labelId:null);getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(t){let r=this._control,i="mat-mdc-form-field-type-";t&&this._elementRef.nativeElement.classList.remove(i+t.controlType),r.controlType&&this._elementRef.nativeElement.classList.add(i+r.controlType),this._stateChanges?.unsubscribe(),this._stateChanges=r.stateChanges.subscribe(()=>{this._updateFocusState(),this._changeDetectorRef.markForCheck()}),this._describedByChanges?.unsubscribe(),this._describedByChanges=r.stateChanges.pipe(Xn([void 0,void 0]),be(()=>[r.errorState,r.userAriaDescribedBy]),db(),Ze(([[o,s],[a,l]])=>o!==a||s!==l)).subscribe(()=>this._syncDescribedByIds()),this._valueChanges?.unsubscribe(),r.ngControl&&r.ngControl.valueChanges&&(this._valueChanges=r.ngControl.valueChanges.pipe(Gt(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()))}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(t=>!t._isText),this._hasTextPrefix=!!this._prefixChildren.find(t=>t._isText),this._hasIconSuffix=!!this._suffixChildren.find(t=>!t._isText),this._hasTextSuffix=!!this._suffixChildren.find(t=>t._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),$r(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){this._control}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||this._isFocused===null)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_outlineLabelOffsetResizeObserver=null;_syncOutlineLabelOffset(){YL({earlyRead:()=>{if(this._appearanceSignal()!=="outline")return this._outlineLabelOffsetResizeObserver?.disconnect(),null;if(globalThis.ResizeObserver){this._outlineLabelOffsetResizeObserver||=new globalThis.ResizeObserver(()=>{this._writeOutlinedLabelStyles(this._getOutlinedLabelOffset())});for(let t of this._prefixSuffixContainers())this._outlineLabelOffsetResizeObserver.observe(t,{box:"border-box"})}return this._getOutlinedLabelOffset()},write:t=>this._writeOutlinedLabelStyles(t())})}_shouldAlwaysFloat(){return this.floatLabel==="always"}_hasOutline(){return this.appearance==="outline"}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel=Wr(()=>!!this._labelChild());_shouldLabelFloat(){return this._hasFloatingLabel()?this._control.shouldLabelFloat||this._shouldAlwaysFloat():!1}_shouldForward(t){let r=this._control?this._control.ngControl:null;return r&&r[t]}_getSubscriptMessageType(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||!this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(0):this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){this._hintChildren}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&typeof this._control.userAriaDescribedBy=="string"&&t.push(...this._control.userAriaDescribedBy.split(" ")),this._getSubscriptMessageType()==="hint"){let o=this._hintChildren?this._hintChildren.find(a=>a.align==="start"):null,s=this._hintChildren?this._hintChildren.find(a=>a.align==="end"):null;o?t.push(o.id):this._hintLabel&&t.push(this._hintLabelId),s&&t.push(s.id)}else this._errorChildren&&t.push(...this._errorChildren.map(o=>o.id));let r=this._control.describedByIds,i;if(r){let o=this._describedByIds||t;i=t.concat(r.filter(s=>s&&!o.includes(s)))}else i=t;this._control.setDescribedByIds(i),this._describedByIds=t}}_getOutlinedLabelOffset(){let t=this._dir.valueSignal();if(!this._hasOutline()||!this._floatingLabel)return null;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return["",null];if(!this._isAttachedToDom())return null;let r=this._iconPrefixContainer?.nativeElement,i=this._textPrefixContainer?.nativeElement,o=this._iconSuffixContainer?.nativeElement,s=this._textSuffixContainer?.nativeElement,a=r?.getBoundingClientRect().width??0,l=i?.getBoundingClientRect().width??0,c=o?.getBoundingClientRect().width??0,u=s?.getBoundingClientRect().width??0,d=t==="rtl"?"-1":"1",h=`${a+l}px`,p=`calc(${d} * (${h} + var(--mat-mdc-form-field-label-offset-x, 0px)))`,g=`var(--mat-mdc-form-field-label-transform, ${Bte} translateX(${p}))`,_=a+l+c+u;return[g,_]}_writeOutlinedLabelStyles(t){if(t!==null){let[r,i]=t;this._floatingLabel&&(this._floatingLabel.element.style.transform=r),i!==null&&this._notchedOutline?._setMaxWidth(i)}}_isAttachedToDom(){let t=this._elementRef.nativeElement;if(t.getRootNode){let r=t.getRootNode();return r&&r!==t}return document.documentElement.contains(t)}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=xe({type:n,selectors:[["mat-form-field"]],contentQueries:function(r,i,o){if(r&1&&($S(o,i._labelChild,ek,5),dn(o,nk,5),dn(o,Pte,5),dn(o,Nte,5),dn(o,Ote,5),dn(o,tk,5)),r&2){Tv();let s;Xe(s=Je())&&(i._formFieldControl=s.first),Xe(s=Je())&&(i._prefixChildren=s),Xe(s=Je())&&(i._suffixChildren=s),Xe(s=Je())&&(i._errorChildren=s),Xe(s=Je())&&(i._hintChildren=s)}},viewQuery:function(r,i){if(r&1&&(yd(i._iconPrefixContainerSignal,Cz,5),yd(i._textPrefixContainerSignal,Ez,5),yd(i._iconSuffixContainerSignal,Iz,5),yd(i._textSuffixContainerSignal,Sz,5),sn(hte,5),sn(Cz,5),sn(Ez,5),sn(Iz,5),sn(Sz,5),sn(Dz,5),sn(kz,5),sn(Az,5)),r&2){Tv(4);let o;Xe(o=Je())&&(i._textField=o.first),Xe(o=Je())&&(i._iconPrefixContainer=o.first),Xe(o=Je())&&(i._textPrefixContainer=o.first),Xe(o=Je())&&(i._iconSuffixContainer=o.first),Xe(o=Je())&&(i._textSuffixContainer=o.first),Xe(o=Je())&&(i._floatingLabel=o.first),Xe(o=Je())&&(i._notchedOutline=o.first),Xe(o=Je())&&(i._lineRipple=o.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:40,hostBindings:function(r,i){r&2&&Ge("mat-mdc-form-field-label-always-float",i._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",i._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",i._hasIconSuffix)("mat-form-field-invalid",i._control.errorState)("mat-form-field-disabled",i._control.disabled)("mat-form-field-autofilled",i._control.autofilled)("mat-form-field-appearance-fill",i.appearance=="fill")("mat-form-field-appearance-outline",i.appearance=="outline")("mat-form-field-hide-placeholder",i._hasFloatingLabel()&&!i._shouldLabelFloat())("mat-focused",i._control.focused)("mat-primary",i.color!=="accent"&&i.color!=="warn")("mat-accent",i.color==="accent")("mat-warn",i.color==="warn")("ng-untouched",i._shouldForward("untouched"))("ng-touched",i._shouldForward("touched"))("ng-pristine",i._shouldForward("pristine"))("ng-dirty",i._shouldForward("dirty"))("ng-valid",i._shouldForward("valid"))("ng-invalid",i._shouldForward("invalid"))("ng-pending",i._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[_t([{provide:rk,useExisting:n},{provide:Oz,useExisting:n}])],ngContentSelectors:mte,decls:19,vars:25,consts:[["labelTemplate",""],["textField",""],["iconPrefixContainer",""],["textPrefixContainer",""],["textSuffixContainer",""],["iconSuffixContainer",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],[1,"mat-mdc-form-field-focus-overlay"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[1,"mat-mdc-form-field-icon-prefix"],[1,"mat-mdc-form-field-text-prefix"],[1,"mat-mdc-form-field-infix"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align"],["aria-atomic","true","aria-live","polite"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[3,"id"],[1,"mat-mdc-form-field-hint-spacer"]],template:function(r,i){if(r&1){let o=Kt();Qt(pte),ht(0,bte,1,1,"ng-template",null,0,Ga),V(2,"div",6,1),Me("click",function(a){return tt(o),nt(i._control.onContainerClick(a))}),bt(4,vte,1,0,"div",7),V(5,"div",8),bt(6,xte,2,2,"div",9),bt(7,Cte,3,0,"div",10),bt(8,Ete,3,0,"div",11),V(9,"div",12),bt(10,Ste,1,1,null,13),qe(11),z(),bt(12,Dte,3,0,"div",14),bt(13,Tte,3,0,"div",15),z(),bt(14,Ate,1,0,"div",16),z(),V(15,"div",17)(16,"div",18),bt(17,kte,1,0)(18,Mte,4,1),z()()}if(r&2){let o;B(2),Ge("mdc-text-field--filled",!i._hasOutline())("mdc-text-field--outlined",i._hasOutline())("mdc-text-field--no-label",!i._hasFloatingLabel())("mdc-text-field--disabled",i._control.disabled)("mdc-text-field--invalid",i._control.errorState),B(2),vt(!i._hasOutline()&&!i._control.disabled?4:-1),B(2),vt(i._hasOutline()?6:-1),B(),vt(i._hasIconPrefix?7:-1),B(),vt(i._hasTextPrefix?8:-1),B(2),vt(!i._hasOutline()||i._forceDisplayInfixLabel()?10:-1),B(2),vt(i._hasTextSuffix?12:-1),B(),vt(i._hasIconSuffix?13:-1),B(),vt(i._hasOutline()?-1:14),B(),Ge("mat-mdc-form-field-subscript-dynamic-size",i.subscriptSizing==="dynamic");let s=i._getSubscriptMessageType();B(),Ge("mat-mdc-form-field-error-wrapper",s==="error")("mat-mdc-form-field-hint-wrapper",s==="hint"),B(),vt((o=s)==="error"?17:o==="hint"?18:-1)}},dependencies:[Dz,kz,fD,Az,tk],styles:[`.mdc-text-field{display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color;border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field__input{width:100%;min-width:0;border:none;border-radius:0;background:none;padding:0;-moz-appearance:none;-webkit-appearance:none;height:28px}.mdc-text-field__input::-webkit-calendar-picker-indicator,.mdc-text-field__input::-webkit-search-cancel-button{display:none}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}.mdc-text-field__input::placeholder{opacity:0}.mdc-text-field__input::-moz-placeholder{opacity:0}.mdc-text-field__input::-webkit-input-placeholder{opacity:0}.mdc-text-field__input:-ms-input-placeholder{opacity:0}.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::-moz-placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::-webkit-input-placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive:-ms-input-placeholder{opacity:0}.mdc-text-field--outlined .mdc-text-field__input,.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mat-form-field-filled-input-text-color, var(--mat-sys-on-surface));caret-color:var(--mat-form-field-filled-caret-color, var(--mat-sys-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mat-form-field-filled-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-filled-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-filled-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-filled-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mat-form-field-outlined-input-text-color, var(--mat-sys-on-surface));caret-color:var(--mat-form-field-outlined-caret-color, var(--mat-sys-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mat-form-field-outlined-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-outlined-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-outlined-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-outlined-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mat-form-field-filled-error-caret-color, var(--mat-sys-error))}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mat-form-field-outlined-error-caret-color, var(--mat-sys-error))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mat-form-field-filled-disabled-input-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mat-form-field-outlined-disabled-input-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}@media(forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}}.mdc-text-field--filled{height:56px;border-bottom-right-radius:0;border-bottom-left-radius:0;border-top-left-radius:var(--mat-form-field-filled-container-shape, var(--mat-sys-corner-extra-small));border-top-right-radius:var(--mat-form-field-filled-container-shape, var(--mat-sys-corner-extra-small))}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mat-form-field-filled-container-color, var(--mat-sys-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mat-form-field-filled-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 4%, transparent))}.mdc-text-field--outlined{height:56px;overflow:visible;padding-right:max(16px,var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small)));padding-left:max(16px,var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small)) + 4px)}[dir=rtl] .mdc-text-field--outlined{padding-right:max(16px,var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small)) + 4px);padding-left:max(16px,var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small)))}.mdc-floating-label{position:absolute;left:0;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label{right:0;left:auto;transform-origin:right top;text-align:right}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:auto}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label{left:auto;right:4px}.mdc-text-field--filled .mdc-floating-label{left:16px;right:auto}[dir=rtl] .mdc-text-field--filled .mdc-floating-label{left:auto;right:16px}.mdc-text-field--disabled .mdc-floating-label{cursor:default}@media(forced-colors: active){.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mat-form-field-filled-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mat-form-field-filled-focus-label-text-color, var(--mat-sys-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mat-form-field-filled-hover-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label{color:var(--mat-form-field-filled-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mat-form-field-filled-error-label-text-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mat-form-field-filled-error-focus-label-text-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mat-form-field-filled-error-hover-label-text-color, var(--mat-sys-on-error-container))}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mat-form-field-filled-label-text-font, var(--mat-sys-body-large-font));font-size:var(--mat-form-field-filled-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-form-field-filled-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-form-field-filled-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mat-form-field-outlined-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mat-form-field-outlined-focus-label-text-color, var(--mat-sys-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mat-form-field-outlined-hover-label-text-color, var(--mat-sys-on-surface))}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label{color:var(--mat-form-field-outlined-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mat-form-field-outlined-error-label-text-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mat-form-field-outlined-error-focus-label-text-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mat-form-field-outlined-error-hover-label-text-color, var(--mat-sys-on-error-container))}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mat-form-field-outlined-label-text-font, var(--mat-sys-body-large-font));font-size:var(--mat-form-field-outlined-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-form-field-outlined-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-form-field-outlined-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-floating-label--float-above{cursor:auto;transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1);font-size:.75rem}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline{text-align:right}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mat-mdc-notch-piece{box-sizing:border-box;height:100%;pointer-events:none;border-top:1px solid;border-bottom:1px solid}.mdc-text-field--focused .mat-mdc-notch-piece{border-width:2px}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-outline-color, var(--mat-sys-outline));border-width:var(--mat-form-field-outlined-outline-width, 1px)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-hover-outline-color, var(--mat-sys-on-surface))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-focus-outline-color, var(--mat-sys-primary))}.mdc-text-field--outlined.mdc-text-field--disabled .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-error-outline-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-notched-outline .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-error-hover-outline-color, var(--mat-sys-on-error-container))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mat-form-field-outlined-error-focus-outline-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mat-mdc-notch-piece{border-width:var(--mat-form-field-outlined-focus-outline-width, 2px)}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small));border-bottom-left-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small)))}[dir=rtl] .mdc-notched-outline__leading{border-left:none;border-right:1px solid;border-bottom-left-radius:0;border-top-left-radius:0;border-top-right-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small));border-bottom-right-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))}.mdc-notched-outline__trailing{flex-grow:1;border-left:none;border-right:1px solid;border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small));border-bottom-right-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))}[dir=rtl] .mdc-notched-outline__trailing{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small));border-bottom-left-radius:var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:min(var(--mat-form-field-notch-max-width, 100%),calc(100% - max(12px, var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))) * 2))}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{max-width:min(100%,calc(100% - max(12px, var(--mat-form-field-outlined-container-shape, var(--mat-sys-corner-extra-small))) * 2))}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1;border-bottom-width:var(--mat-form-field-filled-active-indicator-height, 1px)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mat-form-field-filled-active-indicator-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mat-form-field-filled-hover-active-indicator-color, var(--mat-sys-on-surface))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mat-form-field-filled-disabled-active-indicator-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-line-ripple::before{border-bottom-color:var(--mat-form-field-filled-error-active-indicator-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mat-form-field-filled-error-hover-active-indicator-color, var(--mat-sys-on-error-container))}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mat-form-field-filled-focus-active-indicator-height, 2px)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mat-form-field-filled-focus-active-indicator-color, var(--mat-sys-primary))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mat-form-field-filled-error-focus-active-indicator-color, var(--mat-sys-error))}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-text-field--disabled{pointer-events:none}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all;will-change:auto}.mat-mdc-form-field:not(.mat-form-field-disabled) .mat-mdc-floating-label.mdc-floating-label{cursor:inherit}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto;will-change:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:1px solid rgba(0,0,0,0)}[dir=rtl] .mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:none;border-right:1px solid rgba(0,0,0,0)}.mat-mdc-form-field-infix{min-height:var(--mat-form-field-container-height, 56px);padding-top:var(--mat-form-field-filled-with-label-container-padding-top, 24px);padding-bottom:var(--mat-form-field-filled-with-label-container-padding-bottom, 8px)}.mdc-text-field--outlined .mat-mdc-form-field-infix,.mdc-text-field--no-label .mat-mdc-form-field-infix{padding-top:var(--mat-form-field-container-vertical-padding, 16px);padding-bottom:var(--mat-form-field-container-vertical-padding, 16px)}.mat-mdc-text-field-wrapper .mat-mdc-form-field-flex .mat-mdc-floating-label{top:calc(var(--mat-form-field-container-height, 56px)/2)}.mdc-text-field--filled .mat-mdc-floating-label{display:var(--mat-form-field-filled-label-display, block)}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{--mat-mdc-form-field-label-transform: translateY(calc(calc(6.75px + var(--mat-form-field-container-height, 56px) / 2) * -1)) scale(var(--mat-mdc-form-field-floating-label-scale, 0.75));transform:var(--mat-mdc-form-field-label-transform)}@keyframes _mat-form-field-subscript-animation{from{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translateY(0)}}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px;opacity:1;transform:translateY(0);animation:_mat-form-field-subscript-animation 0ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block;color:var(--mat-form-field-error-text-color, var(--mat-sys-error))}.mat-mdc-form-field-subscript-wrapper,.mat-mdc-form-field-bottom-align::before{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-subscript-text-font, var(--mat-sys-body-small-font));line-height:var(--mat-form-field-subscript-text-line-height, var(--mat-sys-body-small-line-height));font-size:var(--mat-form-field-subscript-text-size, var(--mat-sys-body-small-size));letter-spacing:var(--mat-form-field-subscript-text-tracking, var(--mat-sys-body-small-tracking));font-weight:var(--mat-form-field-subscript-text-weight, var(--mat-sys-body-small-weight))}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none;background-color:var(--mat-form-field-state-layer-color, var(--mat-sys-on-surface))}.mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-form-field.mat-focused .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-focus-state-layer-opacity, 0)}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option{color:var(--mat-form-field-select-option-text-color, var(--mat-sys-neutral10))}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option:disabled{color:var(--mat-form-field-select-disabled-option-text-color, color-mix(in srgb, var(--mat-sys-neutral10) 38%, transparent))}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none;color:var(--mat-form-field-enabled-select-arrow-color, var(--mat-sys-on-surface-variant))}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select.mat-focused .mat-mdc-form-field-infix::after{color:var(--mat-form-field-focus-select-arrow-color, var(--mat-sys-primary))}.mat-mdc-form-field-type-mat-native-select.mat-form-field-disabled .mat-mdc-form-field-infix::after{color:var(--mat-form-field-disabled-select-arrow-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}@media(forced-colors: active){.mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}}@media(forced-colors: active){.mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}}@media(forced-colors: active){.mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}}@media(forced-colors: active){.mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-form-field-container-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-form-field-container-text-size, var(--mat-sys-body-large-size));letter-spacing:var(--mat-form-field-container-text-tracking, var(--mat-sys-body-large-tracking));font-weight:var(--mat-form-field-container-text-weight, var(--mat-sys-body-large-weight))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size)*var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%;z-index:0}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:0 12px;box-sizing:content-box}.mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-leading-icon-color, var(--mat-sys-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-disabled-leading-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-trailing-icon-color, var(--mat-sys-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-disabled-trailing-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-invalid .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-trailing-icon-color, var(--mat-sys-error))}.mat-form-field-invalid:not(.mat-focused):not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-hover-trailing-icon-color, var(--mat-sys-on-error-container))}.mat-form-field-invalid.mat-focused .mat-mdc-text-field-wrapper .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-focus-trailing-icon-color, var(--mat-sys-error))}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field-infix:has(textarea[cols]){width:auto}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input{transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input::placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input::-moz-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input::-webkit-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--focused .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mat-mdc-form-field.mat-form-field-animations-enabled.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field.mat-form-field-animations-enabled .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field.mat-form-field-animations-enabled .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field.mat-form-field-animations-enabled .mat-mdc-form-field-error-wrapper{animation-duration:300ms}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}
`],encapsulation:2,changeDetection:0})}return n})();var G0=(()=>{class n{isErrorState(t,r){return!!(t&&t.invalid&&(t.touched||r&&r.submitted))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var W0=class{_defaultMatcher;ngControl;_parentFormGroup;_parentForm;_stateChanges;errorState=!1;matcher;constructor(e,t,r,i,o){this._defaultMatcher=e,this.ngControl=t,this._parentFormGroup=r,this._parentForm=i,this._stateChanges=o}updateErrorState(){let e=this.errorState,t=this._parentFormGroup||this._parentForm,r=this.matcher||this._defaultMatcher,i=this.ngControl?this.ngControl.control:null,o=r?.isErrorState(i,t)??!1;o!==e&&(this.errorState=o,this._stateChanges.next())}};var fl=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Re({type:n});static \u0275inj=Se({imports:[gt,S0,Xm,gt]})}return n})();var Vte=["button","checkbox","file","hidden","image","radio","range","reset","submit"],$te=new G("MAT_INPUT_CONFIG"),K0=(()=>{class n{_elementRef=x(De);_platform=x(yt);ngControl=x(sa,{optional:!0,self:!0});_autofillMonitor=x(vz);_ngZone=x(he);_formField=x(rk,{optional:!0});_renderer=x(tn);_uid=x(ui).getId("mat-input-");_previousNativeValue;_inputValueAccessor;_signalBasedValueAccessor;_previousPlaceholder;_errorStateTracker;_config=x($te,{optional:!0});_cleanupIosKeyup;_cleanupWebkitWheel;_isServer;_isNativeSelect;_isTextarea;_isInFormField;focused=!1;stateChanges=new re;controlType="mat-input";autofilled=!1;get disabled(){return this._disabled}set disabled(t){this._disabled=nr(t),this.focused&&(this.focused=!1,this.stateChanges.next())}_disabled=!1;get id(){return this._id}set id(t){this._id=t||this._uid}_id;placeholder;name;get required(){return this._required??this.ngControl?.control?.hasValidator(uo.required)??!1}set required(t){this._required=nr(t)}_required;get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&UA().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}_type="text";get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(t){this._errorStateTracker.matcher=t}userAriaDescribedBy;get value(){return this._signalBasedValueAccessor?this._signalBasedValueAccessor.value():this._inputValueAccessor.value}set value(t){t!==this.value&&(this._signalBasedValueAccessor?this._signalBasedValueAccessor.value.set(t):this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=nr(t)}_readonly=!1;disabledInteractive;get errorState(){return this._errorStateTracker.errorState}set errorState(t){this._errorStateTracker.errorState=t}_neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(t=>UA().has(t));constructor(){let t=x(SA,{optional:!0}),r=x(Lm,{optional:!0}),i=x(G0),o=x(wz,{optional:!0,self:!0}),s=this._elementRef.nativeElement,a=s.nodeName.toLowerCase();o?Va(o.value)?this._signalBasedValueAccessor=o:this._inputValueAccessor=o:this._inputValueAccessor=s,this._previousNativeValue=this.value,this.id=this.id,this._platform.IOS&&this._ngZone.runOutsideAngular(()=>{this._cleanupIosKeyup=this._renderer.listen(s,"keyup",this._iOSKeyupListener)}),this._errorStateTracker=new W0(i,this.ngControl,r,t,this.stateChanges),this._isServer=!this._platform.isBrowser,this._isNativeSelect=a==="select",this._isTextarea=a==="textarea",this._isInFormField=!!this._formField,this.disabledInteractive=this._config?.disabledInteractive||!1,this._isNativeSelect&&(this.controlType=s.multiple?"mat-native-select-multiple":"mat-native-select"),this._signalBasedValueAccessor&&wd(()=>{this._signalBasedValueAccessor.value(),this.stateChanges.next()})}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._cleanupIosKeyup?.(),this._cleanupWebkitWheel?.()}ngDoCheck(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==null&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}updateErrorState(){this._errorStateTracker.updateErrorState()}_focusChanged(t){if(t!==this.focused){if(!this._isNativeSelect&&t&&this.disabled&&this.disabledInteractive){let r=this._elementRef.nativeElement;r.type==="number"?(r.type="text",r.setSelectionRange(0,0),r.type="number"):r.setSelectionRange(0,0)}this.focused=t,this.stateChanges.next()}}_onInput(){}_dirtyCheckNativeValue(){let t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_dirtyCheckPlaceholder(){let t=this._getPlaceholder();if(t!==this._previousPlaceholder){let r=this._elementRef.nativeElement;this._previousPlaceholder=t,t?r.setAttribute("placeholder",t):r.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){Vte.indexOf(this._type)>-1}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!this._isNeverEmpty()&&!this._elementRef.nativeElement.value&&!this._isBadInput()&&!this.autofilled}get shouldLabelFloat(){if(this._isNativeSelect){let t=this._elementRef.nativeElement,r=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&r&&r.label)}else return this.focused&&!this.disabled||!this.empty}get describedByIds(){return this._elementRef.nativeElement.getAttribute("aria-describedby")?.split(" ")||[]}setDescribedByIds(t){let r=this._elementRef.nativeElement;t.length?r.setAttribute("aria-describedby",t.join(" ")):r.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){let t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}_iOSKeyupListener=t=>{let r=t.target;!r.value&&r.selectionStart===0&&r.selectionEnd===0&&(r.setSelectionRange(1,1),r.setSelectionRange(0,0))};_getReadonlyAttribute(){return this._isNativeSelect?null:this.readonly||this.disabled&&this.disabledInteractive?"true":null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=me({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:21,hostBindings:function(r,i){r&1&&Me("focus",function(){return i._focusChanged(!0)})("blur",function(){return i._focusChanged(!1)})("input",function(){return i._onInput()}),r&2&&(so("id",i.id)("disabled",i.disabled&&!i.disabledInteractive)("required",i.required),Et("name",i.name||null)("readonly",i._getReadonlyAttribute())("aria-disabled",i.disabled&&i.disabledInteractive?"true":null)("aria-invalid",i.empty&&i.required?null:i.errorState)("aria-required",i.required)("id",i.id),Ge("mat-input-server",i._isServer)("mat-mdc-form-field-textarea-control",i._isInFormField&&i._isTextarea)("mat-mdc-form-field-input-control",i._isInFormField)("mat-mdc-input-disabled-interactive",i.disabledInteractive)("mdc-text-field__input",i._isInFormField)("mat-mdc-native-select-inline",i._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:[0,"aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly",disabledInteractive:[2,"disabledInteractive","disabledInteractive",fn]},exportAs:["matInput"],features:[_t([{provide:nk,useExisting:n}]),xn]})}return n})(),Q0=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Re({type:n});static \u0275inj=Se({imports:[gt,fl,fl,H0,gt]})}return n})();var Ute={capture:!0},zte=["focus","mousedown","mouseenter","touchstart"],ik="mat-ripple-loader-uninitialized",ok="mat-ripple-loader-class-name",Nz="mat-ripple-loader-centered",Y0="mat-ripple-loader-disabled",Fz=(()=>{class n{_document=x(Pe);_animationsDisabled=hr();_globalRippleOptions=x(zm,{optional:!0});_platform=x(yt);_ngZone=x(he);_injector=x(ke);_eventCleanups;_hosts=new Map;constructor(){let t=x(zn).createRenderer(null,null);this._eventCleanups=this._ngZone.runOutsideAngular(()=>zte.map(r=>t.listen(this._document,r,this._onInteraction,Ute)))}ngOnDestroy(){let t=this._hosts.keys();for(let r of t)this.destroyRipple(r);this._eventCleanups.forEach(r=>r())}configureRipple(t,r){t.setAttribute(ik,this._globalRippleOptions?.namespace??""),(r.className||!t.hasAttribute(ok))&&t.setAttribute(ok,r.className||""),r.centered&&t.setAttribute(Nz,""),r.disabled&&t.setAttribute(Y0,"")}setDisabled(t,r){let i=this._hosts.get(t);i?(i.target.rippleDisabled=r,!r&&!i.hasSetUpEvents&&(i.hasSetUpEvents=!0,i.renderer.setupTriggerEvents(t))):r?t.setAttribute(Y0,""):t.removeAttribute(Y0)}_onInteraction=t=>{let r=ci(t);if(r instanceof HTMLElement){let i=r.closest(`[${ik}="${this._globalRippleOptions?.namespace??""}"]`);i&&this._createRipple(i)}};_createRipple(t){if(!this._document||this._hosts.has(t))return;t.querySelector(".mat-ripple")?.remove();let r=this._document.createElement("span");r.classList.add("mat-ripple",t.getAttribute(ok)),t.append(r);let i=this._globalRippleOptions,o=this._animationsDisabled?0:i?.animation?.enterDuration??Um.enterDuration,s=this._animationsDisabled?0:i?.animation?.exitDuration??Um.exitDuration,a={rippleDisabled:this._animationsDisabled||i?.disabled||t.hasAttribute(Y0),rippleConfig:{centered:t.hasAttribute(Nz),terminateOnPointerUp:i?.terminateOnPointerUp,animation:{enterDuration:o,exitDuration:s}}},l=new Ac(a,this._ngZone,r,this._platform,this._injector),c=!a.rippleDisabled;c&&l.setupTriggerEvents(t),this._hosts.set(t,{target:a,renderer:l,hasSetUpEvents:c}),t.removeAttribute(ik)}destroyRipple(t){let r=this._hosts.get(t);r&&(r.renderer._removeTriggerEvents(),this._hosts.delete(t))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Hte=new G("mat-chips-default-options",{providedIn:"root",factory:()=>({separatorKeyCodes:[13]})});var Lz=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Re({type:n});static \u0275inj=Se({providers:[G0,{provide:Hte,useValue:{separatorKeyCodes:[13]}}],imports:[gt,dl,gt]})}return n})();var qte=["autosize"],sk=(n,e)=>e.name;function Gte(n,e){if(n&1){let t=Kt();V(0,"button",16),Me("click",function(){let i=tt(t).$implicit,o=te();return nt(o.selectTool(i))}),V(1,"mat-icon",17),ae(2,"build"),z(),V(3,"span"),ae(4),z()()}if(n&2){let t=e.$implicit;B(4),Rt(t.displayName)}}function Wte(n,e){if(n&1){let t=Kt();V(0,"button",16),Me("click",function(){let i=tt(t).$implicit,o=te();return nt(o.selectResource(i))}),V(1,"mat-icon",17),ae(2,"collections_bookmark"),z(),V(3,"span"),ae(4),z()()}if(n&2){let t=e.$implicit;B(4),Rt(t.displayName)}}function Kte(n,e){if(n&1){let t=Kt();V(0,"button",16),Me("click",function(){let i=tt(t).$implicit,o=te();return nt(o.selectPrompt(i))}),V(1,"mat-icon",17),ae(2,"lightbulb"),z(),V(3,"span"),ae(4),z()()}if(n&2){let t=e.$implicit;B(4),Rt(t.displayName)}}function Qte(n,e){if(n&1){let t=Kt();V(0,"span",19),Me("click",function(){tt(t);let i=te(2);return nt(i.clearSelection("tool",i.selectedTool))}),V(1,"mat-icon",20),ae(2,"build"),z(),ae(3),V(4,"span",21),ae(5,"\xD7"),z()()}if(n&2){let t=te(2);B(3),nn(" ",t.selectedTool.displayName," ")}}function Yte(n,e){if(n&1){let t=Kt();V(0,"span",19),Me("click",function(){tt(t);let i=te(2);return nt(i.clearSelection("resource",i.selectedResource))}),V(1,"mat-icon",20),ae(2,"collections_bookmark"),z(),ae(3),V(4,"span",21),ae(5,"\xD7"),z()()}if(n&2){let t=te(2);B(3),nn(" ",t.selectedResource.displayName," ")}}function Zte(n,e){if(n&1){let t=Kt();V(0,"span",19),Me("click",function(){tt(t);let i=te(2);return nt(i.clearSelection("prompt",i.selectedPrompt))}),V(1,"mat-icon",20),ae(2,"lightbulb"),z(),ae(3),V(4,"span",21),ae(5,"X"),z()()}if(n&2){let t=te(2);B(3),nn(" ",t.selectedPrompt.displayName," ")}}function Xte(n,e){if(n&1&&(V(0,"div",15),bt(1,Qte,6,1,"span",18),bt(2,Yte,6,1,"span",18),bt(3,Zte,6,1,"span",18),z()),n&2){let t=te();B(),vt(t.selectedTool?1:-1),B(),vt(t.selectedResource?2:-1),B(),vt(t.selectedPrompt?3:-1)}}var Z0=class n{constructor(e){this.mcpService=e}_injector=x(ke);autosize;sendMessage=new Ie;sendTool=new Ie;sendResource=new Ie;sendPrompt=new Ie;message="";showToolsMenu=!1;showResourcesMenu=!1;showPromptsMenu=!1;tools=[];resources=[];prompts=[];selectedTool=null;selectedResource=null;selectedPrompt=null;isConnected=!1;subs=new lt;ngOnInit(){this.subs.add(this.mcpService.connectionStatus$.pipe(Ze(e=>e===!0)).subscribe(e=>{console.log("mcp input-box : ",e),this.subs.add(this.mcpService.tools$.subscribe(t=>this.tools=t)),this.subs.add(this.mcpService.promtps$.subscribe(t=>this.prompts=t)),this.subs.add(this.mcpService.resources$.subscribe(t=>this.resources=t))})),this.triggerResize()}triggerResize(){Hn(()=>{this.autosize.resizeToFitContent(!0)},{injector:this._injector})}submitMessage(){this.message.trim()&&(console.log("Message sent:",this.message.trim()),this.sendMessage.emit(this.message.trim()),this.message="")}selectTool(e){this.selectedTool&&this.tools.push(this.selectedTool),this.tools=this.tools.filter(t=>t.name!==e.name),this.selectedTool=e,this.showToolsMenu=!1,this.sendTool.emit(this.selectedTool)}selectResource(e){this.selectedResource&&this.resources.push(this.selectedResource),this.resources=this.resources.filter(t=>t.name!==e.name),this.selectedResource=e,this.showResourcesMenu=!1}selectPrompt(e){this.selectedPrompt&&this.prompts.push(this.selectedPrompt),this.prompts=this.prompts.filter(t=>t.name!==e.name),this.selectedPrompt=e,this.showPromptsMenu=!1}ngOnDestroy(){this.subs.unsubscribe()}clearSelection(e,t){switch(e){case"prompt":this.selectedPrompt=null,this.prompts.push(t);break;case"resource":this.selectedResource=null,this.resources.push(t);break;case"tool":this.selectedTool=null,this.tools.push(t),this.sendTool.emit(this.selectedTool);break;default:break}}static \u0275fac=function(t){return new(t||n)(ce(fr))};static \u0275cmp=xe({type:n,selectors:[["app-input-box"]],viewQuery:function(t,r){if(t&1&&sn(qte,5),t&2){let i;Xe(i=Je())&&(r.autosize=i.first)}},outputs:{sendMessage:"sendMessage",sendTool:"sendTool",sendResource:"sendResource",sendPrompt:"sendPrompt"},decls:31,vars:6,consts:[["autosize","cdkTextareaAutosize"],["toolsMenu","matMenu"],["resourcesMenu","matMenu"],["promptsMenu","matMenu"],[1,"input-container"],[1,"input-box"],["appearance","fill",1,"full-width"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","25","placeholder","Message...",3,"ngModelChange","keydown.enter","ngModel"],["mat-icon-button","",1,"send-button",3,"click","disabled"],[1,"icon-small"],["mat-icon-button","","matTooltip","Tools",1,"action-button",3,"matMenuTriggerFor"],[1,"enhanced-menu"],["mat-menu-item",""],["mat-icon-button","","matTooltip","Resources",1,"action-button",3,"matMenuTriggerFor"],["mat-icon-button","","matTooltip","Prompts",1,"action-button",3,"matMenuTriggerFor"],[1,"selected-items"],["mat-menu-item","",3,"click"],[1,"menu-icon"],[1,"selected-item"],[1,"selected-item",3,"click"],[1,"icon-xsmall"],[1,"chip-close"]],template:function(t,r){if(t&1){let i=Kt();V(0,"div",4)(1,"div",5)(2,"mat-form-field",6)(3,"textarea",7,0),qa("ngModelChange",function(s){return tt(i),dc(r.message,s)||(r.message=s),nt(s)}),Me("keydown.enter",function(){return tt(i),nt(r.submitMessage())}),z()(),V(5,"button",8),Me("click",function(){return tt(i),nt(r.submitMessage())}),V(6,"mat-icon",9),ae(7,"send"),z()()(),V(8,"div")(9,"button",10)(10,"mat-icon",9),ae(11,"build"),z()(),V(12,"mat-menu",11,1),Yo(14,Gte,5,1,"button",12,sk),z(),V(16,"button",13)(17,"mat-icon",9),ae(18,"collections_bookmark"),z()(),V(19,"mat-menu",11,2),Yo(21,Wte,5,1,"button",12,sk),z(),V(23,"button",14)(24,"mat-icon",9),ae(25,"lightbulb"),z()(),V(26,"mat-menu",11,3),Yo(28,Kte,5,1,"button",12,sk),z()(),bt(30,Xte,4,3,"div",15),z()}if(t&2){let i=ii(13),o=ii(20),s=ii(27);B(3),Ha("ngModel",r.message),B(2),ue("disabled",!r.message.trim()),B(4),ue("matMenuTriggerFor",i),B(5),Zo(r.tools),B(2),ue("matMenuTriggerFor",o),B(5),Zo(r.resources),B(2),ue("matMenuTriggerFor",s),B(5),Zo(r.prompts),B(2),vt(r.selectedTool||r.selectedResource||r.selectedPrompt?30:-1)}},dependencies:[rs,ol,Qd,Fm,w0,si,uz,df,Ym,cz,pf,hf,Q0,K0,Xm,yz,fl,Lz,H0],styles:[".input-container[_ngcontent-%COMP%]{padding:12px 20px;background-color:#fff;border-radius:12px;margin-bottom:20px;box-shadow:0 -2px 10px #00000008}.input-box[_ngcontent-%COMP%]{display:flex;align-items:flex-end;gap:1px}.input-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.action-button[_ngcontent-%COMP%]{color:#666;width:25px;height:25px;background-color:#f8f8f8;border-radius:8px}.action-button[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}.icon-small[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;color:#666}.icon-xsmall[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px;color:#666;margin-right:4px}.full-width[_ngcontent-%COMP%], .mat-form-field[_ngcontent-%COMP%]{width:100%}.mat-form-field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:44px;line-height:1.5}.send-button[_ngcontent-%COMP%]{margin-bottom:8px;color:#1976d2}.menu-icon[_ngcontent-%COMP%]{margin-right:8px;font-size:18px}.selected-items[_ngcontent-%COMP%]{display:flex;gap:8px;margin-top:12px}.selected-item[_ngcontent-%COMP%]{background:#f0f0f0;border-radius:16px;padding:4px 12px;display:flex;align-items:center;cursor:pointer;transition:background .2s}.selected-item[_ngcontent-%COMP%]:hover{background:#e0e0e0}.chip-icon[_ngcontent-%COMP%]{margin-right:6px;font-size:16px}.mat-mdc-menu-panel.enhanced-menu[_ngcontent-%COMP%]{background:#fff!important;border-radius:12px!important;box-shadow:0 -2px 10px #00000008!important;border:none!important;padding:4px 0!important}.mat-mdc-menu-item[_ngcontent-%COMP%]{background:transparent!important}.mat-mdc-menu-item[_ngcontent-%COMP%]:hover{background:#f8f8f8!important}.menu-icon[_ngcontent-%COMP%]{margin-right:8px;color:#666;font-size:18px;width:18px;height:18px}"]})};var Jte=(n,e)=>({"user-message":n,"bot-message":e});function ene(n,e){if(n&1&&Pt(0,"markdown",6),n&2){let t=te().$implicit;ue("data",t.content)}}function tne(n,e){if(n&1&&(V(0,"div",1)(1,"div",2)(2,"div",3),ht(3,ene,1,1,"markdown",4),z(),V(4,"div",5),ae(5),fc(6,"date"),z()()()),n&2){let t=e.$implicit;ue("ngClass",Mp(6,Jte,t.sender==="user",t.sender==="bot")),B(3),ue("ngIf",t.content&&typeof t.content=="string"),B(2),Rt(US(6,3,t.timestamp,"shortTime"))}}var X0=class n{messages=[];constructor(){}handleUserMessage(e){this.messages.push({role:"user",content:e}),console.log(this.messages),setTimeout(()=>{this.messages.push({role:"assistant",content:`Response to: ${e}`})},1e3)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=xe({type:n,selectors:[["app-chatbot"]],inputs:{messages:"messages"},decls:3,vars:0,consts:[[1,"chat-messages"],[1,"message-container",3,"ngClass"],[1,"message-content"],[1,"message-text"],[3,"data",4,"ngIf"],[1,"message-time"],[3,"data"]],template:function(t,r){t&1&&(V(0,"div",0),Yo(1,tne,7,9,"div",1,bd),z()),t&2&&(B(),Zo(r.messages))},dependencies:[rs,si,Hp,Ys,eB,J2,pD],styles:[".chat-messages[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:20px 0;display:flex;flex-direction:column;gap:16px}.message-container[_ngcontent-%COMP%]{display:flex;max-width:85%}.user-message[_ngcontent-%COMP%]{align-self:flex-end;justify-content:flex-end}.bot-message[_ngcontent-%COMP%]{align-self:flex-start;justify-content:flex-start}.message-content[_ngcontent-%COMP%]{padding:12px 16px;border-radius:18px;position:relative;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;font-size:1rem;line-height:1.5}.user-message[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{background-color:#f0f0f0;border-bottom-right-radius:4px;color:#333}.bot-message[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{background-color:#fff;border-bottom-left-radius:4px;box-shadow:0 1px 3px #00000014;color:#333}.message-time[_ngcontent-%COMP%]{font-size:.7rem;color:#999;text-align:right;margin-top:4px}"]})};var jz=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Re({type:n});static \u0275inj=Se({imports:[gt,gt]})}return n})();var Bz=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Re({type:n});static \u0275inj=Se({imports:[gt,gt]})}return n})();var Vz=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Re({type:n});static \u0275inj=Se({imports:[gt]})}return n})();var nne=["*"],rne=`.mdc-list{margin:0;padding:8px 0;list-style-type:none}.mdc-list:focus{outline:none}.mdc-list-item{display:flex;position:relative;justify-content:flex-start;overflow:hidden;padding:0;align-items:stretch;cursor:pointer;padding-left:16px;padding-right:16px;background-color:var(--mat-list-list-item-container-color, transparent);border-radius:var(--mat-list-list-item-container-shape, var(--mat-sys-corner-none))}.mdc-list-item.mdc-list-item--selected{background-color:var(--mat-list-list-item-selected-container-color)}.mdc-list-item:focus{outline:0}.mdc-list-item.mdc-list-item--disabled{cursor:auto}.mdc-list-item.mdc-list-item--with-one-line{height:var(--mat-list-list-item-one-line-container-height, 48px)}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__start{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines{height:var(--mat-list-list-item-two-line-container-height, 64px)}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-three-lines{height:var(--mat-list-list-item-three-line-container-height, 88px)}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--selected::before,.mdc-list-item.mdc-list-item--selected:focus::before,.mdc-list-item:not(.mdc-list-item--selected):focus::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;content:"";pointer-events:none}a.mdc-list-item{color:inherit;text-decoration:none}.mdc-list-item__start{fill:currentColor;flex-shrink:0;pointer-events:none}.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mat-list-list-item-leading-icon-color, var(--mat-sys-on-surface-variant));width:var(--mat-list-list-item-leading-icon-size, 24px);height:var(--mat-list-list-item-leading-icon-size, 24px);margin-left:16px;margin-right:32px}[dir=rtl] .mdc-list-item--with-leading-icon .mdc-list-item__start{margin-left:32px;margin-right:16px}.mdc-list-item--with-leading-icon:hover .mdc-list-item__start{color:var(--mat-list-list-item-hover-leading-icon-color)}.mdc-list-item--with-leading-avatar .mdc-list-item__start{width:var(--mat-list-list-item-leading-avatar-size, 40px);height:var(--mat-list-list-item-leading-avatar-size, 40px);margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item--with-leading-avatar .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-avatar .mdc-list-item__start{margin-left:16px;margin-right:16px;border-radius:50%}.mdc-list-item__end{flex-shrink:0;pointer-events:none}.mdc-list-item--with-trailing-meta .mdc-list-item__end{font-family:var(--mat-list-list-item-trailing-supporting-text-font, var(--mat-sys-label-small-font));line-height:var(--mat-list-list-item-trailing-supporting-text-line-height, var(--mat-sys-label-small-line-height));font-size:var(--mat-list-list-item-trailing-supporting-text-size, var(--mat-sys-label-small-size));font-weight:var(--mat-list-list-item-trailing-supporting-text-weight, var(--mat-sys-label-small-weight));letter-spacing:var(--mat-list-list-item-trailing-supporting-text-tracking, var(--mat-sys-label-small-tracking))}.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-trailing-icon-color, var(--mat-sys-on-surface-variant));width:var(--mat-list-list-item-trailing-icon-size, 24px);height:var(--mat-list-list-item-trailing-icon-size, 24px)}.mdc-list-item--with-trailing-icon:hover .mdc-list-item__end{color:var(--mat-list-list-item-hover-trailing-icon-color)}.mdc-list-item.mdc-list-item--with-trailing-meta .mdc-list-item__end{color:var(--mat-list-list-item-trailing-supporting-text-color, var(--mat-sys-on-surface-variant))}.mdc-list-item--selected.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-selected-trailing-icon-color, var(--mat-sys-primary))}.mdc-list-item__content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;align-self:center;flex:1;pointer-events:none}.mdc-list-item--with-two-lines .mdc-list-item__content,.mdc-list-item--with-three-lines .mdc-list-item__content{align-self:stretch}.mdc-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;color:var(--mat-list-list-item-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-list-list-item-label-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-list-list-item-label-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-list-list-item-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-list-list-item-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-list-list-item-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-list-item:hover .mdc-list-item__primary-text{color:var(--mat-list-list-item-hover-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:focus .mdc-list-item__primary-text{color:var(--mat-list-list-item-focus-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item__secondary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;color:var(--mat-list-list-item-supporting-text-color, var(--mat-sys-on-surface-variant));font-family:var(--mat-list-list-item-supporting-text-font, var(--mat-sys-body-medium-font));line-height:var(--mat-list-list-item-supporting-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-list-list-item-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mat-list-list-item-supporting-text-weight, var(--mat-sys-body-medium-weight));letter-spacing:var(--mat-list-list-item-supporting-text-tracking, var(--mat-sys-body-medium-tracking))}.mdc-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__secondary-text{white-space:normal;line-height:20px}.mdc-list-item--with-overline .mdc-list-item__secondary-text{white-space:nowrap;line-height:auto}.mdc-list-item--with-leading-radio.mdc-list-item,.mdc-list-item--with-leading-checkbox.mdc-list-item,.mdc-list-item--with-leading-icon.mdc-list-item,.mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:0;padding-right:16px}[dir=rtl] .mdc-list-item--with-leading-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-checkbox.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:16px;padding-right:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before,.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-trailing-icon.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-icon.mdc-list-item{padding-left:0;padding-right:0}.mdc-list-item--with-trailing-icon .mdc-list-item__end{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-meta .mdc-list-item__end{-webkit-user-select:none;user-select:none;margin-left:28px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-meta .mdc-list-item__end{margin-left:16px;margin-right:28px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{display:block;line-height:normal;align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end::before,.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio .mdc-list-item__start,.mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-radio .mdc-list-item__start,[dir=rtl] .mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__start,.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-radio.mdc-list-item,.mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:16px;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:0;padding-right:16px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-left:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item--with-leading-avatar,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-icon,[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item--with-leading-avatar{padding-right:0}.mdc-list-item--with-trailing-radio .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-radio .mdc-list-item__end,[dir=rtl] .mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-three-lines .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-group__subheader{margin:.75rem 16px}.mdc-list-item--disabled .mdc-list-item__start,.mdc-list-item--disabled .mdc-list-item__content,.mdc-list-item--disabled .mdc-list-item__end{opacity:1}.mdc-list-item--disabled .mdc-list-item__primary-text,.mdc-list-item--disabled .mdc-list-item__secondary-text{opacity:var(--mat-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mat-list-list-item-disabled-leading-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-leading-icon-opacity, 0.38)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mat-list-list-item-disabled-trailing-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-trailing-icon-opacity, 0.38)}.mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing,[dir=rtl] .mat-mdc-list-item.mat-mdc-list-item-both-leading-and-trailing{padding-left:0;padding-right:0}.mdc-list-item.mdc-list-item--disabled .mdc-list-item__primary-text{color:var(--mat-list-list-item-disabled-label-text-color, var(--mat-sys-on-surface))}.mdc-list-item:hover::before{background-color:var(--mat-list-list-item-hover-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mdc-list-item.mdc-list-item--disabled::before{background-color:var(--mat-list-list-item-disabled-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-disabled-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item:focus::before{background-color:var(--mat-list-list-item-focus-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mat-list-list-item-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mdc-list-item--disabled .mdc-radio,.mdc-list-item--disabled .mdc-checkbox{opacity:var(--mat-list-list-item-disabled-label-text-opacity, 0.3)}.mdc-list-item--with-leading-avatar .mat-mdc-list-item-avatar{border-radius:var(--mat-list-list-item-leading-avatar-shape, var(--mat-sys-corner-full));background-color:var(--mat-list-list-item-leading-avatar-color, var(--mat-sys-primary-container))}.mat-mdc-list-item-icon{font-size:var(--mat-list-list-item-leading-icon-size, 24px)}@media(forced-colors: active){a.mdc-list-item--activated::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}a.mdc-list-item--activated [dir=rtl]::after{right:auto;left:16px}}.mat-mdc-list-base{display:block}.mat-mdc-list-base .mdc-list-item__start,.mat-mdc-list-base .mdc-list-item__end,.mat-mdc-list-base .mdc-list-item__content{pointer-events:auto}.mat-mdc-list-item,.mat-mdc-list-option{width:100%;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-list-item:not(.mat-mdc-list-item-interactive),.mat-mdc-list-option:not(.mat-mdc-list-item-interactive){cursor:default}.mat-mdc-list-item .mat-divider-inset,.mat-mdc-list-option .mat-divider-inset{position:absolute;left:0;right:0;bottom:0}.mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,.mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-left:72px}[dir=rtl] .mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,[dir=rtl] .mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-right:72px}.mat-mdc-list-item-interactive::before{top:0;left:0;right:0;bottom:0;position:absolute;content:"";opacity:0;pointer-events:none;border-radius:inherit}.mat-mdc-list-item>.mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-list-item:focus>.mat-focus-indicator::before{content:""}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-line.mdc-list-item__secondary-text{white-space:nowrap;line-height:normal}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-unscoped-content.mdc-list-item__secondary-text{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:start}mat-action-list button::-moz-focus-inner{border:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-inline-start:var(--mat-list-list-item-leading-icon-start-space, 16px);margin-inline-end:var(--mat-list-list-item-leading-icon-end-space, 16px)}.mat-mdc-nav-list .mat-mdc-list-item{border-radius:var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full));--mat-focus-indicator-border-radius: var(--mat-list-active-indicator-shape, var(--mat-sys-corner-full))}.mat-mdc-nav-list .mat-mdc-list-item.mdc-list-item--activated{background-color:var(--mat-list-active-indicator-color, var(--mat-sys-secondary-container))}
`,ine=["unscopedContent"],one=["text"],sne=[[["","matListItemAvatar",""],["","matListItemIcon",""]],[["","matListItemTitle",""]],[["","matListItemLine",""]],"*",[["","matListItemMeta",""]],[["mat-divider"]]],ane=["[matListItemAvatar],[matListItemIcon]","[matListItemTitle]","[matListItemLine]","*","[matListItemMeta]","mat-divider"];var lne=new G("ListOption"),lk=(()=>{class n{_elementRef=x(De);constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275dir=me({type:n,selectors:[["","matListItemTitle",""]],hostAttrs:[1,"mat-mdc-list-item-title","mdc-list-item__primary-text"]})}return n})(),cne=(()=>{class n{_elementRef=x(De);constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275dir=me({type:n,selectors:[["","matListItemLine",""]],hostAttrs:[1,"mat-mdc-list-item-line","mdc-list-item__secondary-text"]})}return n})(),une=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=me({type:n,selectors:[["","matListItemMeta",""]],hostAttrs:[1,"mat-mdc-list-item-meta","mdc-list-item__end"]})}return n})(),$z=(()=>{class n{_listOption=x(lne,{optional:!0});constructor(){}_isAlignedAtStart(){return!this._listOption||this._listOption?._getTogglePosition()==="after"}static \u0275fac=function(r){return new(r||n)};static \u0275dir=me({type:n,hostVars:4,hostBindings:function(r,i){r&2&&Ge("mdc-list-item__start",i._isAlignedAtStart())("mdc-list-item__end",!i._isAlignedAtStart())}})}return n})(),dne=(()=>{class n extends $z{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Vt(n)))(i||n)}})();static \u0275dir=me({type:n,selectors:[["","matListItemAvatar",""]],hostAttrs:[1,"mat-mdc-list-item-avatar"],features:[ot]})}return n})(),ck=(()=>{class n extends $z{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Vt(n)))(i||n)}})();static \u0275dir=me({type:n,selectors:[["","matListItemIcon",""]],hostAttrs:[1,"mat-mdc-list-item-icon"],features:[ot]})}return n})(),fne=new G("MAT_LIST_CONFIG"),ak=(()=>{class n{_isNonInteractive=!0;get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=nr(t)}_disableRipple=!1;get disabled(){return this._disabled()}set disabled(t){this._disabled.set(nr(t))}_disabled=kt(!1);_defaultOptions=x(fne,{optional:!0});static \u0275fac=function(r){return new(r||n)};static \u0275dir=me({type:n,hostVars:1,hostBindings:function(r,i){r&2&&Et("aria-disabled",i.disabled)},inputs:{disableRipple:"disableRipple",disabled:"disabled"}})}return n})(),hne=(()=>{class n{_elementRef=x(De);_ngZone=x(he);_listBase=x(ak,{optional:!0});_platform=x(yt);_hostElement;_isButtonElement;_noopAnimations=hr();_avatars;_icons;set lines(t){this._explicitLines=Qr(t,null),this._updateItemLines(!1)}_explicitLines=null;get disableRipple(){return this.disabled||this._disableRipple||this._noopAnimations||!!this._listBase?.disableRipple}set disableRipple(t){this._disableRipple=nr(t)}_disableRipple=!1;get disabled(){return this._disabled()||!!this._listBase?.disabled}set disabled(t){this._disabled.set(nr(t))}_disabled=kt(!1);_subscriptions=new lt;_rippleRenderer=null;_hasUnscopedTextContent=!1;rippleConfig;get rippleDisabled(){return this.disableRipple||!!this.rippleConfig.disabled}constructor(){x(Cr).load(ef);let t=x(zm,{optional:!0});this.rippleConfig=t||{},this._hostElement=this._elementRef.nativeElement,this._isButtonElement=this._hostElement.nodeName.toLowerCase()==="button",this._listBase&&!this._listBase._isNonInteractive&&this._initInteractiveListItem(),this._isButtonElement&&!this._hostElement.hasAttribute("type")&&this._hostElement.setAttribute("type","button")}ngAfterViewInit(){this._monitorProjectedLinesAndTitle(),this._updateItemLines(!0)}ngOnDestroy(){this._subscriptions.unsubscribe(),this._rippleRenderer!==null&&this._rippleRenderer._removeTriggerEvents()}_hasIconOrAvatar(){return!!(this._avatars.length||this._icons.length)}_initInteractiveListItem(){this._hostElement.classList.add("mat-mdc-list-item-interactive"),this._rippleRenderer=new Ac(this,this._ngZone,this._hostElement,this._platform,x(ke)),this._rippleRenderer.setupTriggerEvents(this._hostElement)}_monitorProjectedLinesAndTitle(){this._ngZone.runOutsideAngular(()=>{this._subscriptions.add($r(this._lines.changes,this._titles.changes).subscribe(()=>this._updateItemLines(!1)))})}_updateItemLines(t){if(!this._lines||!this._titles||!this._unscopedContent)return;t&&this._checkDomForUnscopedTextContent();let r=this._explicitLines??this._inferLinesFromContent(),i=this._unscopedContent.nativeElement;if(this._hostElement.classList.toggle("mat-mdc-list-item-single-line",r<=1),this._hostElement.classList.toggle("mdc-list-item--with-one-line",r<=1),this._hostElement.classList.toggle("mdc-list-item--with-two-lines",r===2),this._hostElement.classList.toggle("mdc-list-item--with-three-lines",r===3),this._hasUnscopedTextContent){let o=this._titles.length===0&&r===1;i.classList.toggle("mdc-list-item__primary-text",o),i.classList.toggle("mdc-list-item__secondary-text",!o)}else i.classList.remove("mdc-list-item__primary-text"),i.classList.remove("mdc-list-item__secondary-text")}_inferLinesFromContent(){let t=this._titles.length+this._lines.length;return this._hasUnscopedTextContent&&(t+=1),t}_checkDomForUnscopedTextContent(){this._hasUnscopedTextContent=Array.from(this._unscopedContent.nativeElement.childNodes).filter(t=>t.nodeType!==t.COMMENT_NODE).some(t=>!!(t.textContent&&t.textContent.trim()))}static \u0275fac=function(r){return new(r||n)};static \u0275dir=me({type:n,contentQueries:function(r,i,o){if(r&1&&(dn(o,dne,4),dn(o,ck,4)),r&2){let s;Xe(s=Je())&&(i._avatars=s),Xe(s=Je())&&(i._icons=s)}},hostVars:4,hostBindings:function(r,i){r&2&&(Et("aria-disabled",i.disabled)("disabled",i._isButtonElement&&i.disabled||null),Ge("mdc-list-item--disabled",i.disabled))},inputs:{lines:"lines",disableRipple:"disableRipple",disabled:"disabled"}})}return n})();var Uz=(()=>{class n extends hne{_lines;_titles;_meta;_unscopedContent;_itemText;get activated(){return this._activated}set activated(t){this._activated=nr(t)}_activated=!1;_getAriaCurrent(){return this._hostElement.nodeName==="A"&&this._activated?"page":null}_hasBothLeadingAndTrailing(){return this._meta.length!==0&&(this._avatars.length!==0||this._icons.length!==0)}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Vt(n)))(i||n)}})();static \u0275cmp=xe({type:n,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(r,i,o){if(r&1&&(dn(o,cne,5),dn(o,lk,5),dn(o,une,5)),r&2){let s;Xe(s=Je())&&(i._lines=s),Xe(s=Je())&&(i._titles=s),Xe(s=Je())&&(i._meta=s)}},viewQuery:function(r,i){if(r&1&&(sn(ine,5),sn(one,5)),r&2){let o;Xe(o=Je())&&(i._unscopedContent=o.first),Xe(o=Je())&&(i._itemText=o.first)}},hostAttrs:[1,"mat-mdc-list-item","mdc-list-item"],hostVars:13,hostBindings:function(r,i){r&2&&(Et("aria-current",i._getAriaCurrent()),Ge("mdc-list-item--activated",i.activated)("mdc-list-item--with-leading-avatar",i._avatars.length!==0)("mdc-list-item--with-leading-icon",i._icons.length!==0)("mdc-list-item--with-trailing-meta",i._meta.length!==0)("mat-mdc-list-item-both-leading-and-trailing",i._hasBothLeadingAndTrailing())("_mat-animation-noopable",i._noopAnimations))},inputs:{activated:"activated"},exportAs:["matListItem"],features:[ot],ngContentSelectors:ane,decls:10,vars:0,consts:[["unscopedContent",""],[1,"mdc-list-item__content"],[1,"mat-mdc-list-item-unscoped-content",3,"cdkObserveContent"],[1,"mat-focus-indicator"]],template:function(r,i){if(r&1){let o=Kt();Qt(sne),qe(0),V(1,"span",1),qe(2,1),qe(3,2),V(4,"span",2,0),Me("cdkObserveContent",function(){return tt(o),nt(i._updateItemLines(!0))}),qe(6,3),z()(),qe(7,4),qe(8,5),Pt(9,"div",3)}},dependencies:[OU],encapsulation:2,changeDetection:0})}return n})();var zz=(()=>{class n extends ak{_isNonInteractive=!1;static \u0275fac=(()=>{let t;return function(i){return(t||(t=Vt(n)))(i||n)}})();static \u0275cmp=xe({type:n,selectors:[["mat-nav-list"]],hostAttrs:["role","navigation",1,"mat-mdc-nav-list","mat-mdc-list-base","mdc-list"],exportAs:["matNavList"],features:[_t([{provide:ak,useExisting:n}]),ot],ngContentSelectors:nne,decls:1,vars:0,template:function(r,i){r&1&&(Qt(),qe(0))},styles:[rne],encapsulation:2,changeDetection:0})}return n})();var J0=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Re({type:n});static \u0275inj=Se({imports:[S0,gt,dl,Vz,Bz]})}return n})();function mne(n,e){if(n&1&&(V(0,"mat-list-item")(1,"mat-icon",8),ae(2),z(),V(3,"div",9),ae(4),z()()),n&2){let t=e.$implicit;B(2),Rt(t.icon),B(2),Rt(t.title)}}function gne(n,e){if(n&1&&(V(0,"mat-nav-list"),Yo(1,mne,5,2,"mat-list-item",null,bd),z()),n&2){let t=te();B(),Zo(t.chats)}}var ew=class n{constructor(e){this.mcpService=e}chats=[];ngOnInit(){}static \u0275fac=function(t){return new(t||n)(ce(fr))};static \u0275cmp=xe({type:n,selectors:[["app-sidebar"]],features:[_t([fr])],decls:15,vars:1,consts:[[1,"sidebar-container"],[1,"sidebar-header"],["mat-button","",1,"new-chat-button"],[1,"sidebar-scrollable"],[1,"sidebar-footer"],["mat-button","",1,"user-button"],[1,"user-icon"],[1,"username"],["matListItemIcon",""],["matListItemTitle",""]],template:function(t,r){t&1&&(V(0,"div",0)(1,"div",1)(2,"button",2)(3,"mat-icon"),ae(4,"add"),z(),V(5,"span"),ae(6,"New chat"),z()()(),V(7,"div",3),bt(8,gne,3,0,"mat-nav-list"),z(),V(9,"div",4)(10,"button",5)(11,"mat-icon",6),ae(12,"account_circle"),z(),V(13,"span",7),ae(14,"Abhilash Poshanagari"),z()()()()),t&2&&(B(8),vt(r.chats.length>0?8:-1))},dependencies:[jz,pf,hf,zz,J0,Uz,ck,lk,si],styles:[".sidebar-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}.sidebar-header[_ngcontent-%COMP%]{padding:16px 20px;flex-shrink:0;border-bottom:1px solid #f0f0f0}.new-chat-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;width:100%;text-align:left;background-color:#f0f0f0;border-radius:8px;padding:8px 12px;color:#333;font-size:.9rem;transition:all .2s}.new-chat-button[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.sidebar-scrollable[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding-bottom:80px}mat-nav-list[_ngcontent-%COMP%]{padding-top:0}mat-list-item[_ngcontent-%COMP%]{border-radius:6px;margin:2px 12px;color:#555}mat-list-item[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.sidebar-footer[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;padding:12px 16px;background:#fff;border-top:1px solid #eee}.user-button[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;padding:8px;border-radius:6px;color:#333}.user-button[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}.user-icon[_ngcontent-%COMP%]{color:#666;font-size:24px;width:24px;height:24px;margin-right:12px}.username[_ngcontent-%COMP%]{font-size:.9rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]})};var rw=["*"],_ne=["content"],bne=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],vne=["mat-drawer","mat-drawer-content","*"];function yne(n,e){if(n&1){let t=Kt();V(0,"div",1),Me("click",function(){tt(t);let i=te();return nt(i._onBackdropClicked())}),z()}if(n&2){let t=te();Ge("mat-drawer-shown",t._isShowingBackdrop())}}function wne(n,e){n&1&&(V(0,"mat-drawer-content"),qe(1,2),z())}var xne=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],Cne=["mat-sidenav","mat-sidenav-content","*"];function Ene(n,e){if(n&1){let t=Kt();V(0,"div",1),Me("click",function(){tt(t);let i=te();return nt(i._onBackdropClicked())}),z()}if(n&2){let t=te();Ge("mat-drawer-shown",t._isShowingBackdrop())}}function Ine(n,e){n&1&&(V(0,"mat-sidenav-content"),qe(1,2),z())}var Sne=`.mat-drawer-container{position:relative;z-index:1;color:var(--mat-sidenav-content-text-color, var(--mat-sys-on-background));background-color:var(--mat-sidenav-content-background-color, var(--mat-sys-background));box-sizing:border-box;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible;background-color:var(--mat-sidenav-scrim-color, color-mix(in srgb, var(--mat-sys-neutral-variant20) 40%, transparent))}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}@media(forced-colors: active){.mat-drawer-backdrop{opacity:.5}}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-content.mat-drawer-content-hidden{opacity:0}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;color:var(--mat-sidenav-container-text-color, var(--mat-sys-on-surface-variant));box-shadow:var(--mat-sidenav-container-elevation-shadow, none);background-color:var(--mat-sidenav-container-background-color, var(--mat-sys-surface));border-top-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));width:var(--mat-sidenav-container-width, 360px);display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}@media(forced-colors: active){.mat-drawer,[dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}}@media(forced-colors: active){[dir=rtl] .mat-drawer,.mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0);border-top-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .mat-drawer{border-top-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-top-right-radius:0;border-bottom-right-radius:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{border-top-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-top-left-radius:0;border-bottom-left-radius:0;left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-transition .mat-drawer{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-drawer:not(.mat-drawer-opened):not(.mat-drawer-animating){visibility:hidden;box-shadow:none}.mat-drawer:not(.mat-drawer-opened):not(.mat-drawer-animating) .mat-drawer-inner-container{display:none}.mat-drawer.mat-drawer-opened.mat-drawer-opened{transform:none}.mat-drawer-side{box-shadow:none;border-right-color:var(--mat-sidenav-container-divider-color, transparent);border-right-width:1px;border-right-style:solid}.mat-drawer-side.mat-drawer-end{border-left-color:var(--mat-sidenav-container-divider-color, transparent);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side{border-left-color:var(--mat-sidenav-container-divider-color, transparent);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side.mat-drawer-end{border-right-color:var(--mat-sidenav-container-divider-color, transparent);border-right-width:1px;border-right-style:solid;border-left:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto}.mat-sidenav-fixed{position:fixed}
`;var Dne=new G("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:Tne}),fk=new G("MAT_DRAWER_CONTAINER");function Tne(){return!1}var tw=(()=>{class n extends sf{_platform=x(yt);_changeDetectorRef=x(_n);_container=x(dk);constructor(){let t=x(De),r=x(Rc),i=x(he);super(t,r,i)}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}_shouldBeHidden(){if(this._platform.isBrowser)return!1;let{start:t,end:r}=this._container;return t!=null&&t.mode!=="over"&&t.opened||r!=null&&r.mode!=="over"&&r.opened}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=xe({type:n,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:6,hostBindings:function(r,i){r&2&&(za("margin-left",i._container._contentMargins.left,"px")("margin-right",i._container._contentMargins.right,"px"),Ge("mat-drawer-content-hidden",i._shouldBeHidden()))},features:[_t([{provide:sf,useExisting:n}]),ot],ngContentSelectors:rw,decls:1,vars:0,template:function(r,i){r&1&&(Qt(),qe(0))},encapsulation:2,changeDetection:0})}return n})(),uk=(()=>{class n{_elementRef=x(De);_focusTrapFactory=x(Vm);_focusMonitor=x(is);_platform=x(yt);_ngZone=x(he);_renderer=x(tn);_interactivityChecker=x(Jd);_doc=x(Pe);_container=x(fk,{optional:!0});_focusTrap=null;_elementFocusedBeforeDrawerWasOpened=null;_eventCleanups;_isAttached;_anchor;get position(){return this._position}set position(t){t=t==="end"?"end":"start",t!==this._position&&(this._isAttached&&this._updatePositionInParent(t),this._position=t,this.onPositionChanged.emit())}_position="start";get mode(){return this._mode}set mode(t){this._mode=t,this._updateFocusTrapState(),this._modeChanged.next()}_mode="over";get disableClose(){return this._disableClose}set disableClose(t){this._disableClose=nr(t)}_disableClose=!1;get autoFocus(){let t=this._autoFocus;return t??(this.mode==="side"?"dialog":"first-tabbable")}set autoFocus(t){(t==="true"||t==="false"||t==null)&&(t=nr(t)),this._autoFocus=t}_autoFocus;get opened(){return this._opened()}set opened(t){this.toggle(nr(t))}_opened=kt(!1);_openedVia;_animationStarted=new re;_animationEnd=new re;openedChange=new Ie(!0);_openedStream=this.openedChange.pipe(Ze(t=>t),be(()=>{}));openedStart=this._animationStarted.pipe(Ze(()=>this.opened),Hu(void 0));_closedStream=this.openedChange.pipe(Ze(t=>!t),be(()=>{}));closedStart=this._animationStarted.pipe(Ze(()=>!this.opened),Hu(void 0));_destroyed=new re;onPositionChanged=new Ie;_content;_modeChanged=new re;_injector=x(ke);_changeDetectorRef=x(_n);constructor(){this.openedChange.pipe(Gt(this._destroyed)).subscribe(t=>{t?(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement,this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{let t=this._elementRef.nativeElement;Wh(t,"keydown").pipe(Ze(r=>r.keyCode===27&&!this.disableClose&&!os(r)),Gt(this._destroyed)).subscribe(r=>this._ngZone.run(()=>{this.close(),r.stopPropagation(),r.preventDefault()})),this._eventCleanups=[this._renderer.listen(t,"transitionrun",this._handleTransitionEvent),this._renderer.listen(t,"transitionend",this._handleTransitionEvent),this._renderer.listen(t,"transitioncancel",this._handleTransitionEvent)]}),this._animationEnd.subscribe(()=>{this.openedChange.emit(this.opened)})}_forceFocus(t,r){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let i=()=>{o(),s(),t.removeAttribute("tabindex")},o=this._renderer.listen(t,"blur",i),s=this._renderer.listen(t,"mousedown",i)})),t.focus(r)}_focusByCssSelector(t,r){let i=this._elementRef.nativeElement.querySelector(t);i&&this._forceFocus(i,r)}_takeFocus(){if(!this._focusTrap)return;let t=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":Hn(()=>{!this._focusTrap.focusInitialElement()&&typeof t.focus=="function"&&t.focus()},{injector:this._injector});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus);break}}_restoreFocus(t){this.autoFocus!=="dialog"&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,t):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){let t=this._doc.activeElement;return!!t&&this._elementRef.nativeElement.contains(t)}ngAfterViewInit(){this._isAttached=!0,this._position==="end"&&this._updatePositionInParent("end"),this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState())}ngOnDestroy(){this._eventCleanups.forEach(t=>t()),this._focusTrap?.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(t){return this.toggle(!0,t)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(t=!this.opened,r){t&&r&&(this._openedVia=r);let i=this._setOpen(t,!t&&this._isFocusWithinDrawer(),this._openedVia||"program");return t||(this._openedVia=null),i}_setOpen(t,r,i){return t===this.opened?Promise.resolve(t?"open":"close"):(this._opened.set(t),this._container?._transitionsEnabled?this._setIsAnimating(!0):setTimeout(()=>{this._animationStarted.next(),this._animationEnd.next()}),this._elementRef.nativeElement.classList.toggle("mat-drawer-opened",t),!t&&r&&this._restoreFocus(i),this._changeDetectorRef.markForCheck(),this._updateFocusTrapState(),new Promise(o=>{this.openedChange.pipe(wn(1)).subscribe(s=>o(s?"open":"close"))}))}_setIsAnimating(t){this._elementRef.nativeElement.classList.toggle("mat-drawer-animating",t)}_getWidth(){return this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=!!this._container?.hasBackdrop&&this.opened)}_updatePositionInParent(t){if(!this._platform.isBrowser)return;let r=this._elementRef.nativeElement,i=r.parentNode;t==="end"?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),i.insertBefore(this._anchor,r)),i.appendChild(r)):this._anchor&&this._anchor.parentNode.insertBefore(r,this._anchor)}_handleTransitionEvent=t=>{let r=this._elementRef.nativeElement;t.target===r&&this._ngZone.run(()=>{t.type==="transitionrun"?this._animationStarted.next(t):(t.type==="transitionend"&&this._setIsAnimating(!1),this._animationEnd.next(t))})};static \u0275fac=function(r){return new(r||n)};static \u0275cmp=xe({type:n,selectors:[["mat-drawer"]],viewQuery:function(r,i){if(r&1&&sn(_ne,5),r&2){let o;Xe(o=Je())&&(i._content=o.first)}},hostAttrs:[1,"mat-drawer"],hostVars:12,hostBindings:function(r,i){r&2&&(Et("align",null)("tabIndex",i.mode!=="side"?"-1":null),za("visibility",!i._container&&!i.opened?"hidden":null),Ge("mat-drawer-end",i.position==="end")("mat-drawer-over",i.mode==="over")("mat-drawer-push",i.mode==="push")("mat-drawer-side",i.mode==="side"))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:rw,decls:3,vars:0,consts:[["content",""],["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(r,i){r&1&&(Qt(),V(0,"div",1,0),qe(2),z())},dependencies:[sf],encapsulation:2,changeDetection:0})}return n})(),dk=(()=>{class n{_dir=x(di,{optional:!0});_element=x(De);_ngZone=x(he);_changeDetectorRef=x(_n);_animationDisabled=hr();_transitionsEnabled=!1;_allDrawers;_drawers=new Bi;_content;_userContent;get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(t){this._autosize=nr(t)}_autosize=x(Dne);get hasBackdrop(){return this._drawerHasBackdrop(this._start)||this._drawerHasBackdrop(this._end)}set hasBackdrop(t){this._backdropOverride=t==null?null:nr(t)}_backdropOverride;backdropClick=new Ie;_start;_end;_left;_right;_destroyed=new re;_doCheckSubject=new re;_contentMargins={left:null,right:null};_contentMarginChanges=new re;get scrollable(){return this._userContent||this._content}_injector=x(ke);constructor(){let t=x(yt),r=x(cl);this._dir?.change.pipe(Gt(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),r.change().pipe(Gt(this._destroyed)).subscribe(()=>this.updateContentMargins()),!this._animationDisabled&&t.isBrowser&&this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{this._element.nativeElement.classList.add("mat-drawer-transition"),this._transitionsEnabled=!0},200)})}ngAfterContentInit(){this._allDrawers.changes.pipe(Xn(this._allDrawers),Gt(this._destroyed)).subscribe(t=>{this._drawers.reset(t.filter(r=>!r._container||r._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(Xn(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(t=>{this._watchDrawerToggle(t),this._watchDrawerPosition(t),this._watchDrawerMode(t)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(Os(10),Gt(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(t=>t.open())}close(){this._drawers.forEach(t=>t.close())}updateContentMargins(){let t=0,r=0;if(this._left&&this._left.opened){if(this._left.mode=="side")t+=this._left._getWidth();else if(this._left.mode=="push"){let i=this._left._getWidth();t+=i,r-=i}}if(this._right&&this._right.opened){if(this._right.mode=="side")r+=this._right._getWidth();else if(this._right.mode=="push"){let i=this._right._getWidth();r+=i,t-=i}}t=t||null,r=r||null,(t!==this._contentMargins.left||r!==this._contentMargins.right)&&(this._contentMargins={left:t,right:r},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(t){t._animationStarted.pipe(Gt(this._drawers.changes)).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),t.mode!=="side"&&t.openedChange.pipe(Gt(this._drawers.changes)).subscribe(()=>this._setContainerClass(t.opened))}_watchDrawerPosition(t){t.onPositionChanged.pipe(Gt(this._drawers.changes)).subscribe(()=>{Hn({read:()=>this._validateDrawers()},{injector:this._injector})})}_watchDrawerMode(t){t._modeChanged.pipe(Gt($r(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(t){let r=this._element.nativeElement.classList,i="mat-drawer-container-has-open";t?r.add(i):r.remove(i)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(t=>{t.position=="end"?(this._end!=null,this._end=t):(this._start!=null,this._start=t)}),this._right=this._left=null,this._dir&&this._dir.value==="rtl"?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&this._start.mode!="over"||this._isDrawerOpen(this._end)&&this._end.mode!="over"}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(t=>t&&!t.disableClose&&this._drawerHasBackdrop(t)).forEach(t=>t._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._drawerHasBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._drawerHasBackdrop(this._end)}_isDrawerOpen(t){return t!=null&&t.opened}_drawerHasBackdrop(t){return this._backdropOverride==null?!!t&&t.mode!=="side":this._backdropOverride}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=xe({type:n,selectors:[["mat-drawer-container"]],contentQueries:function(r,i,o){if(r&1&&(dn(o,tw,5),dn(o,uk,5)),r&2){let s;Xe(s=Je())&&(i._content=s.first),Xe(s=Je())&&(i._allDrawers=s)}},viewQuery:function(r,i){if(r&1&&sn(tw,5),r&2){let o;Xe(o=Je())&&(i._userContent=o.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(r,i){r&2&&Ge("mat-drawer-container-explicit-backdrop",i._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[_t([{provide:fk,useExisting:n}])],ngContentSelectors:vne,decls:4,vars:2,consts:[[1,"mat-drawer-backdrop",3,"mat-drawer-shown"],[1,"mat-drawer-backdrop",3,"click"]],template:function(r,i){r&1&&(Qt(bne),bt(0,yne,1,2,"div",0),qe(1),qe(2,1),bt(3,wne,2,0,"mat-drawer-content")),r&2&&(vt(i.hasBackdrop?0:-1),B(3),vt(i._content?-1:3))},dependencies:[tw],styles:[`.mat-drawer-container{position:relative;z-index:1;color:var(--mat-sidenav-content-text-color, var(--mat-sys-on-background));background-color:var(--mat-sidenav-content-background-color, var(--mat-sys-background));box-sizing:border-box;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible;background-color:var(--mat-sidenav-scrim-color, color-mix(in srgb, var(--mat-sys-neutral-variant20) 40%, transparent))}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}@media(forced-colors: active){.mat-drawer-backdrop{opacity:.5}}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-content.mat-drawer-content-hidden{opacity:0}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;color:var(--mat-sidenav-container-text-color, var(--mat-sys-on-surface-variant));box-shadow:var(--mat-sidenav-container-elevation-shadow, none);background-color:var(--mat-sidenav-container-background-color, var(--mat-sys-surface));border-top-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));width:var(--mat-sidenav-container-width, 360px);display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}@media(forced-colors: active){.mat-drawer,[dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}}@media(forced-colors: active){[dir=rtl] .mat-drawer,.mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0);border-top-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .mat-drawer{border-top-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-left-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-top-right-radius:0;border-bottom-right-radius:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{border-top-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-bottom-right-radius:var(--mat-sidenav-container-shape, var(--mat-sys-corner-large));border-top-left-radius:0;border-bottom-left-radius:0;left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-transition .mat-drawer{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-drawer:not(.mat-drawer-opened):not(.mat-drawer-animating){visibility:hidden;box-shadow:none}.mat-drawer:not(.mat-drawer-opened):not(.mat-drawer-animating) .mat-drawer-inner-container{display:none}.mat-drawer.mat-drawer-opened.mat-drawer-opened{transform:none}.mat-drawer-side{box-shadow:none;border-right-color:var(--mat-sidenav-container-divider-color, transparent);border-right-width:1px;border-right-style:solid}.mat-drawer-side.mat-drawer-end{border-left-color:var(--mat-sidenav-container-divider-color, transparent);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side{border-left-color:var(--mat-sidenav-container-divider-color, transparent);border-left-width:1px;border-left-style:solid;border-right:none}[dir=rtl] .mat-drawer-side.mat-drawer-end{border-right-color:var(--mat-sidenav-container-divider-color, transparent);border-right-width:1px;border-right-style:solid;border-left:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto}.mat-sidenav-fixed{position:fixed}
`],encapsulation:2,changeDetection:0})}return n})(),nw=(()=>{class n extends tw{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Vt(n)))(i||n)}})();static \u0275cmp=xe({type:n,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],features:[_t([{provide:sf,useExisting:n}]),ot],ngContentSelectors:rw,decls:1,vars:0,template:function(r,i){r&1&&(Qt(),qe(0))},encapsulation:2,changeDetection:0})}return n})(),hk=(()=>{class n extends uk{get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(t){this._fixedInViewport=nr(t)}_fixedInViewport=!1;get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(t){this._fixedTopGap=Qr(t)}_fixedTopGap=0;get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(t){this._fixedBottomGap=Qr(t)}_fixedBottomGap=0;static \u0275fac=(()=>{let t;return function(i){return(t||(t=Vt(n)))(i||n)}})();static \u0275cmp=xe({type:n,selectors:[["mat-sidenav"]],hostAttrs:[1,"mat-drawer","mat-sidenav"],hostVars:16,hostBindings:function(r,i){r&2&&(Et("tabIndex",i.mode!=="side"?"-1":null)("align",null),za("top",i.fixedInViewport?i.fixedTopGap:null,"px")("bottom",i.fixedInViewport?i.fixedBottomGap:null,"px"),Ge("mat-drawer-end",i.position==="end")("mat-drawer-over",i.mode==="over")("mat-drawer-push",i.mode==="push")("mat-drawer-side",i.mode==="side")("mat-sidenav-fixed",i.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],features:[_t([{provide:uk,useExisting:n}]),ot],ngContentSelectors:rw,decls:3,vars:0,consts:[["content",""],["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(r,i){r&1&&(Qt(),V(0,"div",1,0),qe(2),z())},dependencies:[sf],encapsulation:2,changeDetection:0})}return n})(),Hz=(()=>{class n extends dk{_allDrawers=void 0;_content=void 0;static \u0275fac=(()=>{let t;return function(i){return(t||(t=Vt(n)))(i||n)}})();static \u0275cmp=xe({type:n,selectors:[["mat-sidenav-container"]],contentQueries:function(r,i,o){if(r&1&&(dn(o,nw,5),dn(o,hk,5)),r&2){let s;Xe(s=Je())&&(i._content=s.first),Xe(s=Je())&&(i._allDrawers=s)}},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(r,i){r&2&&Ge("mat-drawer-container-explicit-backdrop",i._backdropOverride)},exportAs:["matSidenavContainer"],features:[_t([{provide:fk,useExisting:n},{provide:dk,useExisting:n}]),ot],ngContentSelectors:Cne,decls:4,vars:2,consts:[[1,"mat-drawer-backdrop",3,"mat-drawer-shown"],[1,"mat-drawer-backdrop",3,"click"]],template:function(r,i){r&1&&(Qt(xne),bt(0,Ene,1,2,"div",0),qe(1),qe(2,1),bt(3,Ine,2,0,"mat-sidenav-content")),r&2&&(vt(i.hasBackdrop?0:-1),B(3),vt(i._content?-1:3))},dependencies:[nw],styles:[Sne],encapsulation:2,changeDetection:0})}return n})(),qz=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Re({type:n});static \u0275inj=Se({imports:[gt,kc,kc,gt]})}return n})();var kne=["mat-icon-button",""],Rne=["*"],Mne=new G("MAT_BUTTON_CONFIG");function Gz(n){return n==null?void 0:tD(n)}var Wz=(()=>{class n{_elementRef=x(De);_ngZone=x(he);_animationsDisabled=hr();_config=x(Mne,{optional:!0});_focusMonitor=x(is);_cleanupClick;_renderer=x(tn);_rippleLoader=x(Fz);_isAnchor;_isFab=!1;color;get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=t,this._updateRippleDisabled()}_disableRipple=!1;get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._updateRippleDisabled()}_disabled=!1;ariaDisabled;disabledInteractive;tabIndex;set _tabindex(t){this.tabIndex=t}constructor(){x(Cr).load(ef);let t=this._elementRef.nativeElement;this._isAnchor=t.tagName==="A",this.disabledInteractive=this._config?.disabledInteractive??!1,this.color=this._config?.color??null,this._rippleLoader?.configureRipple(t,{className:"mat-mdc-button-ripple"})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0),this._isAnchor&&this._setupAsAnchor()}ngOnDestroy(){this._cleanupClick?.(),this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(t="program",r){t?this._focusMonitor.focusVia(this._elementRef.nativeElement,t,r):this._elementRef.nativeElement.focus(r)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this._isAnchor?this.disabled||null:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}_getTabIndex(){return this._isAnchor?this.disabled&&!this.disabledInteractive?-1:this.tabIndex:this.tabIndex}_setupAsAnchor(){this._cleanupClick=this._ngZone.runOutsideAngular(()=>this._renderer.listen(this._elementRef.nativeElement,"click",t=>{this.disabled&&(t.preventDefault(),t.stopImmediatePropagation())}))}static \u0275fac=function(r){return new(r||n)};static \u0275dir=me({type:n,hostAttrs:[1,"mat-mdc-button-base"],hostVars:13,hostBindings:function(r,i){r&2&&(Et("disabled",i._getDisabledAttribute())("aria-disabled",i._getAriaDisabled())("tabindex",i._getTabIndex()),Jo(i.color?"mat-"+i.color:""),Ge("mat-mdc-button-disabled",i.disabled)("mat-mdc-button-disabled-interactive",i.disabledInteractive)("mat-unthemed",!i.color)("_mat-animation-noopable",i._animationsDisabled))},inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",fn],disabled:[2,"disabled","disabled",fn],ariaDisabled:[2,"aria-disabled","ariaDisabled",fn],disabledInteractive:[2,"disabledInteractive","disabledInteractive",fn],tabIndex:[2,"tabIndex","tabIndex",Gz],_tabindex:[2,"tabindex","_tabindex",Gz]}})}return n})(),pk=(()=>{class n extends Wz{constructor(){super(),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=xe({type:n,selectors:[["button","mat-icon-button",""],["a","mat-icon-button",""],["button","matIconButton",""],["a","matIconButton",""]],hostAttrs:[1,"mdc-icon-button","mat-mdc-icon-button"],exportAs:["matButton","matAnchor"],features:[ot],attrs:kne,ngContentSelectors:Rne,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,i){r&1&&(Qt(),Xo(0,"span",0),qe(1),Xo(2,"span",1)(3,"span",2))},styles:[`.mat-mdc-icon-button{-webkit-user-select:none;user-select:none;display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;text-decoration:none;cursor:pointer;z-index:0;overflow:visible;border-radius:var(--mat-icon-button-container-shape, var(--mat-sys-corner-full, 50%));flex-shrink:0;text-align:center;width:var(--mat-icon-button-state-layer-size, 40px);height:var(--mat-icon-button-state-layer-size, 40px);padding:calc(calc(var(--mat-icon-button-state-layer-size, 40px) - var(--mat-icon-button-icon-size, 24px)) / 2);font-size:var(--mat-icon-button-icon-size, 24px);color:var(--mat-icon-button-icon-color, var(--mat-sys-on-surface-variant));-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label,.mat-mdc-icon-button .mat-icon{z-index:1;position:relative}.mat-mdc-icon-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit}.mat-mdc-icon-button:focus>.mat-focus-indicator::before{content:"";border-radius:inherit}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface-variant) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-icon-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-icon-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;display:var(--mat-icon-button-touch-target-display, block);left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-icon-button-disabled-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button img,.mat-mdc-icon-button svg{width:var(--mat-icon-button-icon-size, 24px);height:var(--mat-icon-button-icon-size, 24px);vertical-align:baseline}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:var(--mat-icon-button-container-shape, var(--mat-sys-corner-full, 50%))}.mat-mdc-icon-button[hidden]{display:none}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}
`,`@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-button-base.mat-tonal-button,.mat-mdc-icon-button.mat-mdc-icon-button,.mat-mdc-outlined-button .mdc-button__ripple{outline:solid 1px}}
`],encapsulation:2,changeDetection:0})}return n})();var Kz=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Re({type:n});static \u0275inj=Se({imports:[gt,dl,gt]})}return n})();var Qz=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Re({type:n});static \u0275inj=Se({imports:[gt,gt]})}return n})();function Pne(n,e){}var hl=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;closePredicate;width="";height="";minWidth;minHeight;maxWidth;maxHeight;positionStrategy;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;scrollStrategy;closeOnNavigation=!0;closeOnDestroy=!0;closeOnOverlayDetachments=!0;disableAnimations=!1;providers;container;templateContext};var gk=(()=>{class n extends of{_elementRef=x(De);_focusTrapFactory=x(Vm);_config;_interactivityChecker=x(Jd);_ngZone=x(he);_focusMonitor=x(is);_renderer=x(tn);_changeDetectorRef=x(_n);_injector=x(ke);_platform=x(yt);_document=x(Pe);_portalOutlet;_focusTrapped=new re;_focusTrap=null;_elementFocusedBeforeDialogWasOpened=null;_closeInteractionType=null;_ariaLabelledByQueue=[];_isDestroyed=!1;constructor(){super(),this._config=x(hl,{optional:!0})||new hl,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(t){this._ariaLabelledByQueue.push(t),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(t){let r=this._ariaLabelledByQueue.indexOf(t);r>-1&&(this._ariaLabelledByQueue.splice(r,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._focusTrapped.complete(),this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();let r=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),r}attachTemplatePortal(t){this._portalOutlet.hasAttached();let r=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),r}attachDomPortal=t=>{this._portalOutlet.hasAttached();let r=this._portalOutlet.attachDomPortal(t);return this._contentAttached(),r};_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,r){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let i=()=>{o(),s(),t.removeAttribute("tabindex")},o=this._renderer.listen(t,"blur",i),s=this._renderer.listen(t,"mousedown",i)})),t.focus(r)}_focusByCssSelector(t,r){let i=this._elementRef.nativeElement.querySelector(t);i&&this._forceFocus(i,r)}_trapFocus(t){this._isDestroyed||Hn(()=>{let r=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||r.focus(t);break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement(t)||this._focusDialogContainer(t);break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]',t);break;default:this._focusByCssSelector(this._config.autoFocus,t);break}this._focusTrapped.next()},{injector:this._injector})}_restoreFocus(){let t=this._config.restoreFocus,r=null;if(typeof t=="string"?r=this._document.querySelector(t):typeof t=="boolean"?r=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(r=t),this._config.restoreFocus&&r&&typeof r.focus=="function"){let i=Yd(),o=this._elementRef.nativeElement;(!i||i===this._document.body||i===o||o.contains(i))&&(this._focusMonitor?(this._focusMonitor.focusVia(r,this._closeInteractionType),this._closeInteractionType=null):r.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(t){this._elementRef.nativeElement.focus?.(t)}_containsFocus(){let t=this._elementRef.nativeElement,r=Yd();return t===r||t.contains(r)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=Yd()))}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=xe({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(r,i){if(r&1&&sn(Gm,7),r&2){let o;Xe(o=Je())&&(i._portalOutlet=o.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(r,i){r&2&&Et("id",i._config.id||null)("role",i._config.role)("aria-modal",i._config.ariaModal)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledByQueue[0])("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null)},features:[ot],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(r,i){r&1&&ht(0,Pne,0,0,"ng-template",0)},dependencies:[Gm],styles:[`.cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}
`],encapsulation:2})}return n})(),Jm=class{overlayRef;config;componentInstance;componentRef;containerInstance;disableClose;closed=new re;backdropClick;keydownEvents;outsidePointerEvents;id;_detachSubscription;constructor(e,t){this.overlayRef=e,this.config=t,this.disableClose=t.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(r=>{r.keyCode===27&&!this.disableClose&&!os(r)&&(r.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{!this.disableClose&&this._canClose()?this.close(void 0,{focusOrigin:"mouse"}):this.containerInstance._recaptureFocus?.()}),this._detachSubscription=e.detachments().subscribe(()=>{t.closeOnOverlayDetachments!==!1&&this.close()})}close(e,t){if(this._canClose(e)){let r=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),r.next(e),r.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",t=""){return this.overlayRef.updateSize({width:e,height:t}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}_canClose(e){let t=this.config;return!!this.containerInstance&&(!t.closePredicate||t.closePredicate(e,t,this.componentInstance))}},Nne=new G("DialogScrollStrategy",{providedIn:"root",factory:()=>{let n=x(ke);return()=>lf(n)}}),Fne=new G("DialogData"),Lne=new G("DefaultDialogConfig");function jne(n){let e=kt(n),t=new Ie;return{valueSignal:e,get value(){return e()},change:t,ngOnDestroy(){t.complete()}}}var Yz=(()=>{class n{_injector=x(ke);_defaultOptions=x(Lne,{optional:!0});_parentDialog=x(n,{optional:!0,skipSelf:!0});_overlayContainer=x(B0);_idGenerator=x(ui);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new re;_afterOpenedAtThisLevel=new re;_ariaHiddenElements=new Map;_scrollStrategy=x(Nne);get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}afterAllClosed=Ms(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Xn(void 0)));constructor(){}open(t,r){let i=this._defaultOptions||new hl;r=m(m({},i),r),r.id=r.id||this._idGenerator.getId("cdk-dialog-"),r.id&&this.getDialogById(r.id);let o=this._getOverlayConfig(r),s=uf(this._injector,o),a=new Jm(s,r),l=this._attachContainer(s,a,r);if(a.containerInstance=l,!this.openDialogs.length){let c=this._overlayContainer.getContainerElement();l._focusTrapped?l._focusTrapped.pipe(wn(1)).subscribe(()=>{this._hideNonDialogContentFromAssistiveTechnology(c)}):this._hideNonDialogContentFromAssistiveTechnology(c)}return this._attachDialogContent(t,a,l,r),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){mk(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(r=>r.id===t)}ngOnDestroy(){mk(this._openDialogsAtThisLevel,t=>{t.config.closeOnDestroy===!1&&this._removeOpenDialog(t,!1)}),mk(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){let r=new ul({positionStrategy:t.positionStrategy||cf().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation,disableAnimations:t.disableAnimations});return t.backdropClass&&(r.backdropClass=t.backdropClass),r}_attachContainer(t,r,i){let o=i.injector||i.viewContainerRef?.injector,s=[{provide:hl,useValue:i},{provide:Jm,useValue:r},{provide:af,useValue:t}],a;i.container?typeof i.container=="function"?a=i.container:(a=i.container.type,s.push(...i.container.providers(i))):a=gk;let l=new rf(a,i.viewContainerRef,ke.create({parent:o||this._injector,providers:s}));return t.attach(l).instance}_attachDialogContent(t,r,i,o){if(t instanceof Ar){let s=this._createInjector(o,r,i,void 0),a={$implicit:o.data,dialogRef:r};o.templateContext&&(a=m(m({},a),typeof o.templateContext=="function"?o.templateContext():o.templateContext)),i.attachTemplatePortal(new al(t,null,a,s))}else{let s=this._createInjector(o,r,i,this._injector),a=i.attachComponentPortal(new rf(t,o.viewContainerRef,s));r.componentRef=a,r.componentInstance=a.instance}}_createInjector(t,r,i,o){let s=t.injector||t.viewContainerRef?.injector,a=[{provide:Fne,useValue:t.data},{provide:Jm,useValue:r}];return t.providers&&(typeof t.providers=="function"?a.push(...t.providers(r,t,i)):a.push(...t.providers)),t.direction&&(!s||!s.get(di,null,{optional:!0}))&&a.push({provide:di,useValue:jne(t.direction)}),ke.create({parent:s||o,providers:a})}_removeOpenDialog(t,r){let i=this.openDialogs.indexOf(t);i>-1&&(this.openDialogs.splice(i,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((o,s)=>{o?s.setAttribute("aria-hidden",o):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),r&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(t){if(t.parentElement){let r=t.parentElement.children;for(let i=r.length-1;i>-1;i--){let o=r[i];o!==t&&o.nodeName!=="SCRIPT"&&o.nodeName!=="STYLE"&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function mk(n,e){let t=n.length;for(;t--;)e(n[t])}function Bne(n,e){}var tg=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;closePredicate;width="";height="";minWidth;minHeight;maxWidth;maxHeight;position;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;delayFocusTrap=!0;scrollStrategy;closeOnNavigation=!0;enterAnimationDuration;exitAnimationDuration},_k="mdc-dialog--open",Zz="mdc-dialog--opening",Xz="mdc-dialog--closing",Vne=150,$ne=75,tH=(()=>{class n extends gk{_animationStateChanged=new Ie;_animationsEnabled=!hr();_actionSectionCount=0;_hostElement=this._elementRef.nativeElement;_enterAnimationDuration=this._animationsEnabled?eH(this._config.enterAnimationDuration)??Vne:0;_exitAnimationDuration=this._animationsEnabled?eH(this._config.exitAnimationDuration)??$ne:0;_animationTimer=null;_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(Jz,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(Zz,_k)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(_k),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(_k),this._animationsEnabled?(this._hostElement.style.setProperty(Jz,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(Xz)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(t){this._actionSectionCount+=t,this._changeDetectorRef.markForCheck()}_finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)};_finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})};_clearAnimationClasses(){this._hostElement.classList.remove(Zz,Xz)}_waitForAnimationToComplete(t,r){this._animationTimer!==null&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(r,t)}_requestAnimationFrame(t){this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(t):t()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}ngOnDestroy(){super.ngOnDestroy(),this._animationTimer!==null&&clearTimeout(this._animationTimer)}attachComponentPortal(t){let r=super.attachComponentPortal(t);return r.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),r}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Vt(n)))(i||n)}})();static \u0275cmp=xe({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(r,i){r&2&&(so("id",i._config.id),Et("aria-modal",i._config.ariaModal)("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledByQueue[0])("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),Ge("_mat-animation-noopable",!i._animationsEnabled)("mat-mdc-dialog-container-with-actions",i._actionSectionCount>0))},features:[ot],decls:3,vars:0,consts:[[1,"mat-mdc-dialog-inner-container","mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(r,i){r&1&&(V(0,"div",0)(1,"div",1),ht(2,Bne,0,0,"ng-template",2),z()())},dependencies:[Gm],styles:[`.mat-mdc-dialog-container{width:100%;height:100%;display:block;box-sizing:border-box;max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;outline:0}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 560px);min-width:var(--mat-dialog-container-min-width, 280px)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, calc(100vw - 32px))}}.mat-mdc-dialog-inner-container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;transition:opacity linear var(--mat-dialog-transition-duration, 0ms);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mdc-dialog--closing .mat-mdc-dialog-inner-container{transition:opacity 75ms linear;transform:none}.mdc-dialog--open .mat-mdc-dialog-inner-container{opacity:1}._mat-animation-noopable .mat-mdc-dialog-inner-container{transition:none}.mat-mdc-dialog-surface{display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;width:100%;height:100%;position:relative;overflow-y:auto;outline:0;transform:scale(0.8);transition:transform var(--mat-dialog-transition-duration, 0ms) cubic-bezier(0, 0, 0.2, 1);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;box-shadow:var(--mat-dialog-container-elevation-shadow, none);border-radius:var(--mat-dialog-container-shape, var(--mat-sys-corner-extra-large, 4px));background-color:var(--mat-dialog-container-color, var(--mat-sys-surface, white))}[dir=rtl] .mat-mdc-dialog-surface{text-align:right}.mdc-dialog--open .mat-mdc-dialog-surface,.mdc-dialog--closing .mat-mdc-dialog-surface{transform:none}._mat-animation-noopable .mat-mdc-dialog-surface{transition:none}.mat-mdc-dialog-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mat-mdc-dialog-title{display:block;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:var(--mat-dialog-headline-padding, 6px 24px 13px)}.mat-mdc-dialog-title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mat-mdc-dialog-title{text-align:right}.mat-mdc-dialog-container .mat-mdc-dialog-title{color:var(--mat-dialog-subhead-color, var(--mat-sys-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mat-dialog-subhead-font, var(--mat-sys-headline-small-font, inherit));line-height:var(--mat-dialog-subhead-line-height, var(--mat-sys-headline-small-line-height, 1.5rem));font-size:var(--mat-dialog-subhead-size, var(--mat-sys-headline-small-size, 1rem));font-weight:var(--mat-dialog-subhead-weight, var(--mat-sys-headline-small-weight, 400));letter-spacing:var(--mat-dialog-subhead-tracking, var(--mat-sys-headline-small-tracking, 0.03125em))}.mat-mdc-dialog-content{display:block;flex-grow:1;box-sizing:border-box;margin:0;overflow:auto;max-height:65vh}.mat-mdc-dialog-content>:first-child{margin-top:0}.mat-mdc-dialog-content>:last-child{margin-bottom:0}.mat-mdc-dialog-container .mat-mdc-dialog-content{color:var(--mat-dialog-supporting-text-color, var(--mat-sys-on-surface-variant, rgba(0, 0, 0, 0.6)));font-family:var(--mat-dialog-supporting-text-font, var(--mat-sys-body-medium-font, inherit));line-height:var(--mat-dialog-supporting-text-line-height, var(--mat-sys-body-medium-line-height, 1.5rem));font-size:var(--mat-dialog-supporting-text-size, var(--mat-sys-body-medium-size, 1rem));font-weight:var(--mat-dialog-supporting-text-weight, var(--mat-sys-body-medium-weight, 400));letter-spacing:var(--mat-dialog-supporting-text-tracking, var(--mat-sys-body-medium-tracking, 0.03125em))}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px 0)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;box-sizing:border-box;min-height:52px;margin:0;border-top:1px solid rgba(0,0,0,0);padding:var(--mat-dialog-actions-padding, 16px 24px);justify-content:var(--mat-dialog-actions-alignment, flex-end)}@media(forced-colors: active){.mat-mdc-dialog-actions{border-top-color:CanvasText}}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}.mat-mdc-dialog-component-host{display:contents}
`],encapsulation:2})}return n})(),Jz="--mat-dialog-transition-duration";function eH(n){return n==null?null:typeof n=="number"?n:n.endsWith("ms")?Qr(n.substring(0,n.length-2)):n.endsWith("s")?Qr(n.substring(0,n.length-1))*1e3:n==="0"?0:null}var eg=function(n){return n[n.OPEN=0]="OPEN",n[n.CLOSING=1]="CLOSING",n[n.CLOSED=2]="CLOSED",n}(eg||{}),mf=class{_ref;_config;_containerInstance;componentInstance;componentRef;disableClose;id;_afterOpened=new re;_beforeClosed=new re;_result;_closeFallbackTimeout;_state=eg.OPEN;_closeInteractionType;constructor(e,t,r){this._ref=e,this._config=t,this._containerInstance=r,this.disableClose=t.disableClose,this.id=e.id,e.addPanelClass("mat-mdc-dialog-panel"),r._animationStateChanged.pipe(Ze(i=>i.state==="opened"),wn(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),r._animationStateChanged.pipe(Ze(i=>i.state==="closed"),wn(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),$r(this.backdropClick(),this.keydownEvents().pipe(Ze(i=>i.keyCode===27&&!this.disableClose&&!os(i)))).subscribe(i=>{this.disableClose||(i.preventDefault(),nH(this,i.type==="keydown"?"keyboard":"mouse"))})}close(e){let t=this._config.closePredicate;t&&!t(e,this._config,this.componentInstance)||(this._result=e,this._containerInstance._animationStateChanged.pipe(Ze(r=>r.state==="closing"),wn(1)).subscribe(r=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),r.totalTime+100)}),this._state=eg.CLOSING,this._containerInstance._startExitAnimation())}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let t=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",t=""){return this._ref.updateSize(e,t),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=eg.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}};function nH(n,e,t){return n._closeInteractionType=e,n.close(t)}var iw=new G("MatMdcDialogData"),rH=new G("mat-mdc-dialog-default-options"),iH=new G("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{let n=x(ke);return()=>lf(n)}}),ng=(()=>{class n{_defaultOptions=x(rH,{optional:!0});_scrollStrategy=x(iH);_parentDialog=x(n,{optional:!0,skipSelf:!0});_idGenerator=x(ui);_injector=x(ke);_dialog=x(Yz);_animationsDisabled=hr();_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new re;_afterOpenedAtThisLevel=new re;dialogConfigClass=tg;_dialogRefConstructor;_dialogContainerType;_dialogDataToken;get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){let t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}afterAllClosed=Ms(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Xn(void 0)));constructor(){this._dialogRefConstructor=mf,this._dialogContainerType=tH,this._dialogDataToken=iw}open(t,r){let i;r=m(m({},this._defaultOptions||new tg),r),r.id=r.id||this._idGenerator.getId("mat-mdc-dialog-"),r.scrollStrategy=r.scrollStrategy||this._scrollStrategy();let o=this._dialog.open(t,w(m({},r),{positionStrategy:cf(this._injector).centerHorizontally().centerVertically(),disableClose:!0,closePredicate:void 0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,disableAnimations:this._animationsDisabled||r.enterAnimationDuration?.toLocaleString()==="0"||r.exitAnimationDuration?.toString()==="0",container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:r},{provide:hl,useValue:r}]},templateContext:()=>({dialogRef:i}),providers:(s,a,l)=>(i=new this._dialogRefConstructor(s,r,l),i.updatePosition(r?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:i}])}));return i.componentRef=o.componentRef,i.componentInstance=o.componentInstance,this.openDialogs.push(i),this.afterOpened.next(i),i.afterClosed().subscribe(()=>{let s=this.openDialogs.indexOf(i);s>-1&&(this.openDialogs.splice(s,1),this.openDialogs.length||this._getAfterAllClosed().next())}),i}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(r=>r.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let r=t.length;for(;r--;)t[r].close()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function zne(n,e){if(n&1&&(V(0,"p",8),ae(1),z()),n&2){let t=te();B(),nn(" ",t.server)}}function Hne(n,e){if(n&1&&(V(0,"p",8),ae(1),z()),n&2){let t=te();B(),nn(" ",t.errorMessage)}}var ow=class n{constructor(e,t){this.dialogRef=e;this.data=t}server="";page="";errorMessage="";ngOnInit(){this.server=this.data.domain.trim(),this.page=this.data.page}saveDomain(){this.server.trim()?(this.dialogRef.close({page:this.page,server:this.server}),this.errorMessage=""):this.errorMessage="Please enter a valid"}validateDomain(e){return/^(http?:\/\/)(([a-zA-Z0-9-]+\.)+[a-zA-Z]{2,}|(\d{1,3}(\.\d{1,3}){3}))(:\d+)?(\/.*)?$/.test(e)}close(){this.dialogRef.close({page:this.page,server:""})}static \u0275fac=function(t){return new(t||n)(ce(mf),ce(iw))};static \u0275cmp=xe({type:n,selectors:[["app-domain-dialog"]],decls:14,vars:8,consts:[[1,"dialog-container"],[1,"input-container"],[1,"input-label"],["matInput","","type","text",1,"input-field",3,"ngModelChange","ngModel","placeholder"],["class","error-message",4,"ngIf"],[1,"button-group"],[1,"cancel-btn",3,"click"],[1,"save-btn",3,"click"],[1,"error-message"]],template:function(t,r){t&1&&(V(0,"div",0)(1,"h2"),ae(2),z(),V(3,"div",1)(4,"label",2),ae(5),z(),V(6,"input",3),qa("ngModelChange",function(o){return dc(r.server,o)||(r.server=o),o}),z()(),ht(7,zne,2,1,"p",4)(8,Hne,2,1,"p",4),V(9,"div",5)(10,"button",6),Me("click",function(){return r.close()}),ae(11),z(),V(12,"button",7),Me("click",function(){return r.saveDomain()}),ae(13),z()()()),t&2&&(B(2),Rt(r.data.title),B(3),Rt(r.data.message),B(),Ha("ngModel",r.server),ue("placeholder",r.data.placeholder),B(),ue("ngIf",r.server),B(),ue("ngIf",r.errorMessage),B(3),Rt(r.data.cancelText),B(2),Rt(r.data.confirmText))},dependencies:[si,Ys,rs,ol,Qd,Fm,fl,Q0,K0],styles:[".dialog-container[_ngcontent-%COMP%]{padding:30px;background:#fff;border-radius:20px;box-shadow:0 10px 30px #00000026;width:100%;max-width:440px;margin:auto}h2[_ngcontent-%COMP%]{font-size:1.6rem;color:#333;margin-bottom:25px;text-align:center;font-weight:600}.input-container[_ngcontent-%COMP%]{margin-bottom:20px}.input-field[_ngcontent-%COMP%]{width:90%;padding:16px 20px;font-size:1rem;border:2px solid #e0e0e0;border-radius:12px;transition:all .3s ease;background:#fafafa}.input-field[_ngcontent-%COMP%]:focus{outline:none;border-color:#1976d2;background:#fff;box-shadow:0 0 0 3px #1976d233}.input-label[_ngcontent-%COMP%]{display:block;text-align:left;margin-bottom:8px;font-weight:500;color:#555}.error-message[_ngcontent-%COMP%]{color:#e53935;font-size:.9rem;margin:12px 0;padding:8px 12px;background:#e5393514;border-radius:8px;border-left:3px solid #e53935;text-align:left}.button-group[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;margin-top:25px}button[_ngcontent-%COMP%]{min-width:100px;font-size:.95rem;padding:12px 24px;border-radius:10px;border:none;cursor:pointer;font-weight:600;letter-spacing:.5px;transition:all .3s ease}.save-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1976d2,#1565c0);color:#fff;box-shadow:0 4px 12px #1976d24d}.save-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#1565c0,#0d47a1);transform:translateY(-2px);box-shadow:0 6px 16px #1976d266}.cancel-btn[_ngcontent-%COMP%]{background:transparent;color:#7f8c8d;border:2px solid #bdc3c7}.cancel-btn[_ngcontent-%COMP%]:hover{background:#bdc3c71a;color:#2c3e50;border-color:#95a5a6;transform:translateY(-2px)}button[_ngcontent-%COMP%]:focus, .input-field[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #1976d233}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-20px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}.dialog-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideIn .4s ease-out}@media (max-width: 480px){.dialog-container[_ngcontent-%COMP%]{padding:20px;margin:20px}.button-group[_ngcontent-%COMP%]{flex-direction:column}button[_ngcontent-%COMP%]{width:100%}}"]})};var gf=class n{saveValuesInKey(e,t){localStorage.setItem(e,t)}getValueFromKey(e){let t=localStorage.getItem(e);return t||""}static \u0275fac=function(t){return new(t||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})};var ss=class n{constructor(e,t){this.fb=e;this.mcpService=t;this.mcpService.elicitRequests$.subscribe(r=>{console.log("request : ",r),this.createFormFromSchema(r.schema)})}currentForm=new Lt(null);currentSchema=new Lt(null);currentRequestId=new Lt(null);createFormFromSchema(e,t="Elicitation Request"){this.currentSchema.next({schema:e,title:t});let r=this.fb.group({}),i=e.properties,o=e.required||[];for(let[s,a]of Object.entries(i)){let l=a,c=[];console.log("Field : ",l),o.includes(s)&&c.push(uo.required),l.type==="string"&&(l.minLength&&c.push(uo.minLength(l.minLength)),l.maxLength&&c.push(uo.maxLength(l.maxLength)),l.format==="email"&&c.push(uo.email)),(l.type==="number"||l.type==="integer")&&(l.minimum!==void 0&&c.push(uo.min(l.minimum)),l.maximum!==void 0&&c.push(uo.max(l.maximum))),r.addControl(s,this.fb.control(l.default||null,c))}this.currentForm.next(r)}getCurrentForm(){return this.currentForm.asObservable()}getCurrentSchema(){return this.currentSchema.asObservable()}getCurrentRequestId(){return this.currentRequestId.value}submitResponse(e){this.mcpService.submitElicitResponse(e)}validateAgainstSchema(e,t){if(!t)return!1;let r=t.required||[];for(let i of r)if(e[i]===void 0||e[i]===null||e[i]==="")return!1;return!0}static \u0275fac=function(t){return new(t||n)(de(yU),de(fr))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})};var qne=(n,e)=>({connected:n,disconnected:e});function Gne(n,e){if(n&1){let t=Kt();V(0,"button",1),Me("click",function(){tt(t);let i=te();return nt(i.disconnect())}),ae(1,"Disconnect"),z()}}function Wne(n,e){if(n&1&&(V(0,"div",7)(1,"strong"),ae(2),z(),ae(3),z()),n&2){let t=e.$implicit;B(2),nn("",t.type,":"),B(),nn(" ",t.message," ")}}function Kne(n,e){if(n&1&&(V(0,"div")(1,"div",5)(2,"h6"),ae(3),z(),ht(4,Wne,4,2,"div",6),z()()),n&2){let t=te();B(3),nn("Notifications (",t.notifications.length,")"),B(),ue("ngForOf",t.notifications)}}function Qne(n,e){n&1&&Pt(0,"img",8)}function Yne(n,e){if(n&1){let t=Kt();V(0,"button",1),Me("click",function(){tt(t);let i=te();return nt(i.connect(i.mcpServer()))}),ae(1,"Connect"),z(),bt(2,Qne,1,0,"img",8)}if(n&2){let t=te();B(2),vt(t.loader?2:-1)}}var sw=class n{constructor(e,t,r){this.mcpService=e;this.storageService=t;this.elicitationService=r}isConnected=!1;notifications=[];currentElicitRequest=null;loader=!1;subscriptions=[];mcpServer=jp("");openAiKey=jp("");dialog=x(ng);mcp_props={title:"Connect to MCP Server",message:"Please enter the MCP server URL to connect.",placeholder:"Enter MCP server URL",confirmText:"Connect",cancelText:"Cancel",domain:this.mcpServer()||"",page:"mcp_server"};openai_props={title:"Connect to LLM",message:"Please enter the OpenAI API key to connect to the LLM service.",placeholder:"Enter OpenAI API key here",confirmText:"Connect",cancelText:"Cancel",domain:this.openAiKey()||"",page:"open_ai_token"};tools=new Ie;sendOpenAiKey=new Ie;ngOnInit(){this.subscriptions.push(this.mcpService.connectionStatus$.subscribe(e=>{console.log("MCP client component : ",e),this.isConnected=e}),this.mcpService.notifications$.subscribe(e=>{this.notifications.push(e)}),this.mcpService.elicitRequests$.subscribe(e=>{console.log("Request : ",e),this.currentElicitRequest=e})),this.mcpServer.set(this.storageService.getValueFromKey("mcp_server")||""),this.openAiKey.set(this.storageService.getValueFromKey("open_ai_token")||""),this.mcpServer()?setTimeout(()=>{this.connect(this.mcpServer())},200):this.openDomainDialog(this.mcp_props)}connect(e){return v(this,null,function*(){console.log("Connecting to MCP server : ",e);try{this.loader=!0,yield this.mcpService.connect(e),this.mcpService.tools$.subscribe(t=>{let r=this.mcpService.createOpenAiToolSchema(t);this.tools.emit(r)}),this.loader=!1}catch(t){console.error("Connection error:",t),this.loader=!1}})}disconnect(){return v(this,null,function*(){yield this.mcpService.disconnect()})}submitElicitForm(e){if(this.currentElicitRequest){let t=this.elicitationService.getCurrentRequestId();this.mcpService.submitElicitResponse({action:"accept",content:e}),console.log("Server response : ",{action:"accept",content:e}),this.currentElicitRequest=null}}cancelElicit(){this.mcpService.submitElicitResponse({action:"cancel"}),this.currentElicitRequest=null}openDomainDialog(e){this.dialog.open(ow,{width:"500px",disableClose:!1,data:e}).afterClosed().subscribe(r=>{r.server&&(this.mcpServer.set(r.server),r.page==="mcp_server"?(this.storageService.saveValuesInKey("mcp_server",r.server),this.connect(r.server)):r.page==="open_ai_token"&&(this.openAiKey.set(r.server),this.storageService.saveValuesInKey("open_ai_token",r.server)))})}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe()),this.disconnect()}static \u0275fac=function(t){return new(t||n)(ce(fr),ce(gf),ce(ss))};static \u0275cmp=xe({type:n,selectors:[["app-mcp-client"]],inputs:{mcpServer:[1,"mcpServer"],openAiKey:[1,"openAiKey"]},outputs:{mcpServer:"mcpServerChange",openAiKey:"openAiKeyChange",tools:"tools",sendOpenAiKey:"sendOpenAiKey"},decls:12,vars:8,consts:[["disconnected",""],[3,"click"],[1,"status-indicator"],[1,"fas","fa-circle",3,"ngClass"],[4,"ngIf","ngIfElse"],[1,"notifications"],["class","notification",4,"ngFor","ngForOf"],[1,"notification"],["src","gif/Spinner.gif"]],template:function(t,r){if(t&1){let i=Kt();V(0,"button",1),Me("click",function(){return tt(i),r.mcp_props.domain=r.mcpServer(),nt(r.openDomainDialog(r.mcp_props))}),ae(1,"MCP config"),z(),V(2,"button",1),Me("click",function(){return tt(i),r.openai_props.domain=r.openAiKey(),nt(r.openDomainDialog(r.openai_props))}),ae(3,"Open Ai config"),z(),V(4,"div",2),Pt(5,"i",3),V(6,"h5"),ae(7),z(),bt(8,Gne,2,0,"button"),z(),ht(9,Kne,5,2,"div",4)(10,Yne,3,1,"ng-template",null,0,Ga)}if(t&2){let i=ii(11);B(5),ue("ngClass",Mp(5,qne,r.isConnected,!r.isConnected)),B(2),Rt(r.isConnected?"Connected to MCP Server":"Disconnected from MCP Server"),B(),vt(r.isConnected?8:-1),B(),ue("ngIf",r.isConnected)("ngIfElse",i)}},dependencies:[si,Hp,xd,Ys,rs],styles:["[_nghost-%COMP%]{display:block;padding:20px;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;max-width:1000px;margin:0 auto}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{color:#2c3e50;margin-bottom:15px}.connection-status[_ngcontent-%COMP%]{padding:10px;border-radius:5px;margin-bottom:20px;font-weight:700}.connected[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724;border:1px solid #c3e6cb}.disconnected[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24;border:1px solid #f5c6cb}.elicit-form[_ngcontent-%COMP%]{background-color:#f8f9fa;border-radius:8px;padding:20px;margin-bottom:30px;box-shadow:0 2px 4px #0000001a}.elicit-form[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;color:#3498db}.form-field[_ngcontent-%COMP%]{margin-bottom:15px}.form-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:500;color:#34495e}.required[_ngcontent-%COMP%]{color:#e74c3c}input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;padding:8px 12px;border:1px solid #ced4da;border-radius:4px;font-size:16px;transition:border-color .15s ease-in-out}input[type=text][_ngcontent-%COMP%]:focus, input[type=number][_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{outline:none;border-color:#3498db;box-shadow:0 0 0 2px #3498db33}input[type=checkbox][_ngcontent-%COMP%]{margin-right:10px;transform:scale(1.2)}.field-description[_ngcontent-%COMP%]{font-size:.85em;color:#7f8c8d;margin-top:5px;font-style:italic}button[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:4px;font-size:14px;cursor:pointer;margin-right:10px;transition:background-color .2s}button[type=submit][_ngcontent-%COMP%]{background-color:#2ecc71;color:#fff}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#27ae60}button[type=button][_ngcontent-%COMP%]{background-color:#e74c3c;color:#fff}button[type=button][_ngcontent-%COMP%]:hover{background-color:#c0392b}.notifications[_ngcontent-%COMP%]{background-color:#f8f9fa;border-radius:8px;padding:20px;box-shadow:0 2px 4px #0000001a}.notification[_ngcontent-%COMP%]{padding:10px;margin-bottom:10px;border-left:4px solid;background-color:#fff;border-radius:0 4px 4px 0}.notification[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{text-transform:capitalize}.notification[type=log][_ngcontent-%COMP%]{border-left-color:#3498db}.notification[type=error][_ngcontent-%COMP%]{border-left-color:#e74c3c}.notification[type=resource-change][_ngcontent-%COMP%], .notification[type=resource-list][_ngcontent-%COMP%]{border-left-color:#2ecc71}.connected[_ngcontent-%COMP%]{color:green}.disconnected[_ngcontent-%COMP%]{color:red}.status-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}@media (max-width: 768px){[_nghost-%COMP%]{padding:10px}.elicit-form[_ngcontent-%COMP%], .notifications[_ngcontent-%COMP%]{padding:15px}}"]})};var vk={};qt(vk,{RouterRunnable:()=>aw,Runnable:()=>mt,RunnableAssign:()=>S_,RunnableBinding:()=>Yn,RunnableBranch:()=>lw,RunnableEach:()=>vP,RunnableLambda:()=>An,RunnableMap:()=>I_,RunnableParallel:()=>wP,RunnablePassthrough:()=>fi,RunnablePick:()=>CP,RunnableRetry:()=>yP,RunnableSequence:()=>yn,RunnableToolLike:()=>EP,RunnableWithFallbacks:()=>xP,RunnableWithMessageHistory:()=>cw,_coerceToRunnable:()=>Dr,ensureConfig:()=>Oi,getCallbackManagerForConfig:()=>Tu,mergeConfigs:()=>Br,patchConfig:()=>Bn,pickRunnableConfigKeys:()=>Mh});var fi=class extends mt{static lc_name(){return"RunnablePassthrough"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e&&(this.func=e.func)}invoke(e,t){return v(this,null,function*(){let r=Oi(t);return this.func&&(yield this.func(e,r)),this._callWithConfig(i=>Promise.resolve(i),e,r)})}transform(e,t){return We(this,null,function*(){let r=Oi(t),i,o=!0;try{for(var s=Ee(this._transformStreamWithConfig(e,d=>d,r)),a,l,c;a=!(l=yield new ee(s.next())).done;a=!1){let u=l.value;if(yield u,o)if(i===void 0)i=u;else try{i=Ts(i,u)}catch{i=void 0,o=!1}}}catch{c=[l]}finally{try{a&&(l=s.return)&&(yield new ee(l.call(s)))}finally{if(c)throw c[0]}}this.func&&i!==void 0&&(yield new ee(this.func(i,r)))})}static assign(e){return new S_(new I_({steps:e}))}};var aw=class extends mt{static lc_name(){return"RouterRunnable"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"runnables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.runnables=e.runnables}invoke(e,t){return v(this,null,function*(){let{key:r,input:i}=e,o=this.runnables[r];if(o===void 0)throw new Error(`No runnable associated with key "${r}".`);return o.invoke(i,Oi(t))})}batch(e,t,r){return v(this,null,function*(){let i=e.map(h=>h.key),o=e.map(h=>h.input);if(i.find(h=>this.runnables[h]===void 0)!==void 0)throw new Error("One or more keys do not have a corresponding runnable.");let a=i.map(h=>this.runnables[h]),l=this._getOptionsList(t??{},e.length),c=l[0]?.maxConcurrency??r?.maxConcurrency,u=c&&c>0?c:e.length,d=[];for(let h=0;h<o.length;h+=u){let f=o.slice(h,h+u).map((g,_)=>a[_].invoke(g,l[_])),p=yield Promise.all(f);d.push(p)}return d.flat()})}stream(e,t){return v(this,null,function*(){let{key:r,input:i}=e,o=this.runnables[r];if(o===void 0)throw new Error(`No runnable associated with key "${r}".`);return o.stream(i,t)})}};var lw=class extends mt{static lc_name(){return"RunnableBranch"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"default",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"branches",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.branches=e.branches,this.default=e.default}static from(e){if(e.length<1)throw new Error("RunnableBranch requires at least one branch");let r=e.slice(0,-1).map(([o,s])=>[Dr(o),Dr(s)]),i=Dr(e[e.length-1]);return new this({branches:r,default:i})}_invoke(e,t,r){return v(this,null,function*(){let i;for(let o=0;o<this.branches.length;o+=1){let[s,a]=this.branches[o];if(yield s.invoke(e,Bn(t,{callbacks:r?.getChild(`condition:${o+1}`)}))){i=yield a.invoke(e,Bn(t,{callbacks:r?.getChild(`branch:${o+1}`)}));break}}return i||(i=yield this.default.invoke(e,Bn(t,{callbacks:r?.getChild("branch:default")}))),i})}invoke(r){return v(this,arguments,function*(e,t={}){return this._callWithConfig(this._invoke,e,t)})}_streamIterator(e,t){return We(this,null,function*(){let r=yield new ee(Tu(t)),i=yield new ee(r?.handleChainStart(this.toJSON(),bP(e,"input"),t?.runId,void 0,void 0,void 0,t?.runName)),o,s=!0,a;try{for(let _=0;_<this.branches.length;_+=1){let[y,E]=this.branches[_];if(yield new ee(y.invoke(e,Bn(t,{callbacks:i?.getChild(`condition:${_+1}`)})))){a=yield new ee(E.stream(e,Bn(t,{callbacks:i?.getChild(`branch:${_+1}`)})));try{for(var l=Ee(a),c,u,d;c=!(u=yield new ee(l.next())).done;c=!1){let A=u.value;if(yield A,s)if(o===void 0)o=A;else try{o=Ts(o,A)}catch{o=void 0,s=!1}}}catch{d=[u]}finally{try{c&&(u=l.return)&&(yield new ee(u.call(l)))}finally{if(d)throw d[0]}}break}}if(a===void 0){a=yield new ee(this.default.stream(e,Bn(t,{callbacks:i?.getChild("branch:default")})));try{for(var h=Ee(a),f,p,g;f=!(p=yield new ee(h.next())).done;f=!1){let _=p.value;if(yield _,s)if(o===void 0)o=_;else try{o=Ts(o,_)}catch{o=void 0,s=!1}}}catch{g=[p]}finally{try{f&&(p=h.return)&&(yield new ee(p.call(h)))}finally{if(g)throw g[0]}}}}catch(_){throw yield new ee(i?.handleChainError(_)),_}yield new ee(i?.handleChainEnd(o??{}))})}};var cw=class n extends Yn{constructor(e){let t=An.from((s,a)=>this._enterHistory(s,a??{})).withConfig({runName:"loadHistory"}),r=e.historyMessagesKey??e.inputMessagesKey;r&&(t=fi.assign({[r]:t}).withConfig({runName:"insertHistory"}));let i=t.pipe(e.runnable.withListeners({onEnd:(s,a)=>this._exitHistory(s,a??{})})).withConfig({runName:"RunnableWithMessageHistory"}),o=e.config??{};super(w(m({},e),{config:o,bound:i})),Object.defineProperty(this,"runnable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputMessagesKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputMessagesKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"historyMessagesKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"getMessageHistory",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.runnable=e.runnable,this.getMessageHistory=e.getMessageHistory,this.inputMessagesKey=e.inputMessagesKey,this.outputMessagesKey=e.outputMessagesKey,this.historyMessagesKey=e.historyMessagesKey}_getInputMessages(e){let t;if(typeof e=="object"&&!Array.isArray(e)&&!ln(e)){let r;this.inputMessagesKey?r=this.inputMessagesKey:Object.keys(e).length===1?r=Object.keys(e)[0]:r="input",Array.isArray(e[r])&&Array.isArray(e[r][0])?t=e[r][0]:t=e[r]}else t=e;if(typeof t=="string")return[new wa(t)];if(Array.isArray(t))return t;if(ln(t))return[t];throw new Error(`Expected a string, BaseMessage, or array of BaseMessages.
Got ${JSON.stringify(t,null,2)}`)}_getOutputMessages(e){let t;if(!Array.isArray(e)&&!ln(e)&&typeof e!="string"){let r;this.outputMessagesKey!==void 0?r=this.outputMessagesKey:Object.keys(e).length===1?r=Object.keys(e)[0]:r="output",e.generations!==void 0?t=e.generations[0][0].message:t=e[r]}else t=e;if(typeof t=="string")return[new pn(t)];if(Array.isArray(t))return t;if(ln(t))return[t];throw new Error(`Expected a string, BaseMessage, or array of BaseMessages. Received: ${JSON.stringify(t,null,2)}`)}_enterHistory(e,t){return v(this,null,function*(){let i=yield(t?.configurable?.messageHistory).getMessages();return this.historyMessagesKey===void 0?i.concat(this._getInputMessages(e)):i})}_exitHistory(e,t){return v(this,null,function*(){let r=t.configurable?.messageHistory,i;Array.isArray(e.inputs)&&Array.isArray(e.inputs[0])?i=e.inputs[0]:i=e.inputs;let o=this._getInputMessages(i);if(this.historyMessagesKey===void 0){let l=yield r.getMessages();o=o.slice(l.length)}let s=e.outputs;if(!s)throw new Error(`Output values from 'Run' undefined. Run: ${JSON.stringify(e,null,2)}`);let a=this._getOutputMessages(s);yield r.addMessages([...o,...a])})}_mergeConfig(...e){return v(this,null,function*(){let t=yield sr(n.prototype,this,"_mergeConfig").call(this,...e);if(!t.configurable||!t.configurable.sessionId){let i={[this.inputMessagesKey??"input"]:"foo"},o={configurable:{sessionId:"123"}};throw new Error(`sessionId is required. Pass it in as part of the config argument to .invoke() or .stream()
eg. chain.invoke(${JSON.stringify(i)}, ${JSON.stringify(o)})`)}let{sessionId:r}=t.configurable;return t.configurable.messageHistory=yield this.getMessageHistory(r),t})}};function Zne(n,e){if(n&1&&(V(0,"p"),ae(1),z()),n&2){let t=te(4);B(),Rt(t.currentRequest.params.message)}}function Xne(n,e){if(n&1&&(V(0,"li"),ae(1),z()),n&2){let t=e.$implicit;B(),Rt(t)}}function Jne(n,e){if(n&1&&(V(0,"div",6)(1,"h4"),ae(2,"Validation Errors"),z(),V(3,"ul"),ht(4,Xne,2,1,"li",7),z()()),n&2){let t=te(4);B(4),ue("ngForOf",t.validationErrors)}}function ere(n,e){n&1&&(V(0,"span",20),ae(1,"*"),z())}function tre(n,e){if(n&1&&(V(0,"small",21),ae(1),z()),n&2){let t=te(2).$implicit,r=te(3).ngIf,i=te(2);B(),nn(" ",i.getFieldDescription(r.schema,t)," ")}}function nre(n,e){if(n&1&&(V(0,"div",15)(1,"label",16),ae(2),ht(3,ere,2,0,"span",17),z(),Pt(4,"input",18),ht(5,tre,2,1,"small",19),z()),n&2){let t=te().$implicit,r=te(3).ngIf,i=te(2);B(),ue("for",t),B(),nn(" ",i.getFieldTitle(r.schema,t)," "),B(),ue("ngIf",i.isFieldRequired(r.schema,t)),B(),ue("id",t)("formControlName",t)("placeholder",i.getFieldDefault(r.schema,t)),B(),ue("ngIf",i.getFieldDescription(r.schema,t))}}function rre(n,e){n&1&&(V(0,"span",20),ae(1,"*"),z())}function ire(n,e){if(n&1&&(V(0,"div",15)(1,"label",16),ae(2),ht(3,rre,2,0,"span",17),z(),Pt(4,"input",22),z()),n&2){let t=te().$implicit,r=te(3).ngIf,i=te(2);B(),ue("for",t),B(),nn(" ",i.getFieldTitle(r.schema,t)," "),B(),ue("ngIf",i.isFieldRequired(r.schema,t)),B(),ue("id",t)("formControlName",t)("placeholder",i.getFieldDefault(r.schema,t))}}function ore(n,e){n&1&&(V(0,"span",20),ae(1,"*"),z())}function sre(n,e){if(n&1&&(V(0,"small",21),ae(1),z()),n&2){let t=te(2).$implicit,r=te(3).ngIf,i=te(2);B(),nn(" ",i.getFieldDescription(r.schema,t)," ")}}function are(n,e){if(n&1&&(V(0,"div",15)(1,"label",16),ae(2),ht(3,ore,2,0,"span",17),z(),Pt(4,"input",23),ht(5,sre,2,1,"small",19),z()),n&2){let t=te().$implicit,r=te(3).ngIf,i=te(2);B(),ue("for",t),B(),nn(" ",i.getFieldTitle(r.schema,t)," "),B(),ue("ngIf",i.isFieldRequired(r.schema,t)),B(),ue("id",t)("formControlName",t)("placeholder",i.getFieldDefault(r.schema,t))("min",i.getFieldMin(r.schema,t))("max",i.getFieldMax(r.schema,t)),B(),ue("ngIf",i.getFieldDescription(r.schema,t))}}function lre(n,e){n&1&&(V(0,"span",20),ae(1,"*"),z())}function cre(n,e){if(n&1&&(V(0,"small",21),ae(1),z()),n&2){let t=te(2).$implicit,r=te(3).ngIf,i=te(2);B(),nn(" ",i.getFieldDescription(r.schema,t)," ")}}function ure(n,e){if(n&1&&(V(0,"div",15)(1,"label",16),ae(2),ht(3,lre,2,0,"span",17),z(),Pt(4,"input",23),ht(5,cre,2,1,"small",19),z()),n&2){let t=te().$implicit,r=te(3).ngIf,i=te(2);B(),ue("for",t),B(),nn(" ",i.getFieldTitle(r.schema,t)," "),B(),ue("ngIf",i.isFieldRequired(r.schema,t)),B(),ue("id",t)("formControlName",t)("placeholder",i.getFieldDefault(r.schema,t))("min",i.getFieldMin(r.schema,t))("max",i.getFieldMax(r.schema,t)),B(),ue("ngIf",i.getFieldDescription(r.schema,t))}}function dre(n,e){n&1&&(V(0,"span",20),ae(1,"*"),z())}function fre(n,e){n&1&&(V(0,"option",27),ae(1,"(Skip)"),z())}function hre(n,e){if(n&1&&(V(0,"option",28),ae(1),z()),n&2){let t=e.$implicit;ue("value",t),B(),nn(" ",t," ")}}function pre(n,e){if(n&1&&(V(0,"small",21),ae(1),z()),n&2){let t=te(2).$implicit,r=te(3).ngIf,i=te(2);B(),nn(" ",i.getFieldDescription(r.schema,t)," ")}}function mre(n,e){if(n&1&&(V(0,"div",15)(1,"label",16),ae(2),ht(3,dre,2,0,"span",17),z(),V(4,"select",24),ht(5,fre,2,0,"option",25)(6,hre,2,2,"option",26),z(),ht(7,pre,2,1,"small",19),z()),n&2){let t=te().$implicit,r=te(3).ngIf,i=te(2);B(),ue("for",t),B(),nn(" ",i.getFieldTitle(r.schema,t)," "),B(),ue("ngIf",i.isFieldRequired(r.schema,t)),B(),ue("id",t)("formControlName",t),B(),ue("ngIf",!i.isFieldRequired(r.schema,t)),B(),ue("ngForOf",i.getFieldOptions(r.schema,t)),B(),ue("ngIf",i.getFieldDescription(r.schema,t))}}function gre(n,e){if(n&1&&(V(0,"small",21),ae(1),z()),n&2){let t=te(2).$implicit,r=te(3).ngIf,i=te(2);B(),nn(" ",i.getFieldDescription(r.schema,t)," ")}}function _re(n,e){if(n&1&&(V(0,"div",29),Pt(1,"input",30),V(2,"label",31),ae(3),z(),ht(4,gre,2,1,"small",19),z()),n&2){let t=te().$implicit,r=te(3).ngIf,i=te(2);B(),ue("id",t)("formControlName",t),B(),ue("for",t),B(),nn(" ",i.getFieldTitle(r.schema,t)," "),B(),ue("ngIf",i.getFieldDescription(r.schema,t))}}function bre(n,e){if(n&1&&(V(0,"div"),Sv(1,12),ht(2,nre,6,7,"div",13)(3,ire,5,6,"div",13)(4,are,6,9,"div",13)(5,ure,6,9,"div",13)(6,mre,8,8,"div",13)(7,_re,5,5,"div",14),Dv(),z()),n&2){let t=e.$implicit,r=te(3).ngIf,i=te(2);B(),ue("ngSwitch",i.getFieldType(r.schema,t)),B(),ue("ngSwitchCase","string"),B(),ue("ngSwitchCase","password"),B(),ue("ngSwitchCase","number"),B(),ue("ngSwitchCase","integer"),B(),ue("ngSwitchCase","enum"),B(),ue("ngSwitchCase","boolean")}}function vre(n,e){if(n&1){let t=Kt();V(0,"div")(1,"form",8),Me("ngSubmit",function(){tt(t);let i=te().ngIf,o=te(3);return nt(o.onSubmit(i))}),ht(2,bre,8,7,"div",7),V(3,"div",9)(4,"button",10),ae(5,"Submit"),z(),V(6,"button",11),Me("click",function(){tt(t);let i=te(4);return nt(i.cancel())}),ae(7,"Cancel"),z()()()()}if(n&2){let t=te().ngIf,r=te().ngIf,i=te(2);B(),ue("formGroup",t),B(),ue("ngForOf",i.getFieldNames(r.schema))}}function yre(n,e){if(n&1){let t=Kt();V(0,"div",32)(1,"h3"),ae(2,"Confirm Submission"),z(),V(3,"pre"),ae(4),fc(5,"json"),z(),V(6,"div",33)(7,"button",34),Me("click",function(){tt(t);let i=te(4);return nt(i.confirmSubmission(!0))}),ae(8,"Confirm"),z(),V(9,"button",35),Me("click",function(){tt(t);let i=te(4);return nt(i.confirmSubmission(!1))}),ae(10,"Edit"),z()()()}if(n&2){let t=te(4);B(4),Rt(Op(5,1,t.maskSensitiveData(t.submittedData)))}}function wre(n,e){if(n&1&&(V(0,"div")(1,"h2"),ae(2),z(),ht(3,Zne,2,1,"p",1)(4,Jne,5,1,"div",4)(5,vre,8,2,"div",1)(6,yre,11,3,"div",5),z()),n&2){let t=te(3);B(2),Rt(t.title),B(),ue("ngIf",t.currentRequest==null||t.currentRequest.params==null?null:t.currentRequest.params.message),B(),ue("ngIf",t.validationErrors.length),B(),ue("ngIf",!t.showConfirmation),B(),ue("ngIf",t.showConfirmation)}}function xre(n,e){if(n&1&&(V(0,"div",3),ht(1,wre,7,5,"div",1),fc(2,"async"),z()),n&2){let t=te(2);B(),ue("ngIf",Op(2,1,t.form$))}}function Cre(n,e){if(n&1&&(V(0,"div"),ht(1,xre,3,3,"div",2),fc(2,"async"),z()),n&2){let t=te(),r=ii(2);B(),ue("ngIf",Op(2,2,t.schema$))("ngIfElse",r)}}function Ere(n,e){n&1&&(V(0,"div",36)(1,"p"),ae(2,"No active elicitation request"),z()())}var uw=class n{constructor(e,t){this.elicitationService=e;this.mcpService=t;this.form$=this.elicitationService.getCurrentForm(),this.schema$=this.elicitationService.getCurrentSchema()}tool=null;form$;schema$;currentRequest;validationErrors=[];showConfirmation=!1;submittedData;formAvailable=!1;title="";sendToolResponse=new Ie;subscriptions=[];ngOnChanges(e){!this.tool?.name&&this.title!="Elicitation Request"&&(this.formAvailable=!1)}ngOnInit(){this.subscriptions.push(this.schema$.subscribe(e=>{this.currentRequest=e?.schema,this.title=e?.title,this.formAvailable=!0}))}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}confirmSubmission(e){e?this.elicitationService.submitResponse({action:"accept",content:this.submittedData}):this.elicitationService.submitResponse({action:"decline"}),this.resetForm(),this.formAvailable=!1}cancel(){this.title==="Elicitation Request"?this.elicitationService.submitResponse({action:"cancel"}):console.log(this.title),this.resetForm(),this.formAvailable=!1}maskSensitiveData(e){if(e.password){let t=e.password,r=t.length>2?t.slice(0,3)+"****":"****";return w(m({},e),{password:r})}return e}onSubmit(e){if(e.invalid){this.validationErrors=this.getFormErrors(e);return}let t=e.value;if(!this.elicitationService.validateAgainstSchema(t,this.currentRequest)){this.validationErrors=["Data does not match the required schema."];return}this.submittedData=t,this.title==="Tool test"?this.toolCall(t):this.showConfirmation=!0}toolCall(e){return v(this,null,function*(){if(this.tool?.name)try{let t={};this.tool?.description=="long running task"?t=yield this.mcpService.longRunningTool(this.tool?.name,e):t=yield this.mcpService.callTool(this.tool?.name,e),this.sendToolResponse.emit({request:JSON.stringify(e),response:t.content[0].text})}catch(t){console.log("Sothing went worng : ",t)}else console.log("Tool name not received : ",this.tool?.name)})}getFormErrors(e){let t=[];return Object.keys(e.controls).forEach(r=>{let i=e.get(r)?.errors;i&&Object.keys(i).forEach(o=>{t.push(`${r}: ${this.getErrorMessage(o,i[o])}`)})}),t}getErrorMessage(e,t){switch(e){case"required":return"This field is required";case"minlength":return`Minimum length is ${t.requiredLength}`;case"maxlength":return`Maximum length is ${t.requiredLength}`;case"min":return`Minimum value is ${t.min}`;case"max":return`Maximum value is ${t.max}`;case"email":return"Invalid email format";default:return"Invalid value"}}resetForm(){this.validationErrors=[],this.showConfirmation=!1,this.submittedData=null}getFieldNames(e){return e?Object.keys(e.properties):[]}getFieldType(e,t){if(!e||!e.properties[t])return"string";let r=e.properties[t];return t==="password"?"password":r.enum?"enum":r.type||"string"}getFieldTitle(e,t){return e?.properties[t]?.title||t}getFieldDescription(e,t){return e?.properties[t]?.description||null}getFieldDefault(e,t){return e?.properties[t]?.default}getFieldMin(e,t){return e?.properties[t]?.minimum||null}getFieldMax(e,t){return e?.properties[t]?.maximum||null}getFieldOptions(e,t){return e?.properties[t]?.enum||[]}isFieldRequired(e,t){return e?.required?.includes(t)||!1}static \u0275fac=function(t){return new(t||n)(ce(ss),ce(fr))};static \u0275cmp=xe({type:n,selectors:[["app-elicitation"]],inputs:{tool:"tool"},outputs:{sendToolResponse:"sendToolResponse"},features:[xn],decls:3,vars:1,consts:[["noRequest",""],[4,"ngIf"],["class","elicitation-container",4,"ngIf","ngIfElse"],[1,"elicitation-container"],["class","alert alert-danger",4,"ngIf"],["class","confirmation-dialog",4,"ngIf"],[1,"alert","alert-danger"],[4,"ngFor","ngForOf"],[3,"ngSubmit","formGroup"],[1,"form-actions"],["type","submit",1,"btn","btn-primary"],["type","button",1,"btn","btn-secondary",3,"click"],[3,"ngSwitch"],["class","form-group",4,"ngSwitchCase"],["class","form-group form-check",4,"ngSwitchCase"],[1,"form-group"],[3,"for"],["class","required",4,"ngIf"],["type","text",1,"form-control",3,"id","formControlName","placeholder"],["class","form-text text-muted",4,"ngIf"],[1,"required"],[1,"form-text","text-muted"],["type","password",1,"form-control",3,"id","formControlName","placeholder"],["type","number",1,"form-control",3,"id","formControlName","placeholder","min","max"],[1,"form-control",3,"id","formControlName"],["value","",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["value",""],[3,"value"],[1,"form-group","form-check"],["type","checkbox",1,"form-check-input",3,"id","formControlName"],[1,"form-check-label",3,"for"],[1,"confirmation-dialog"],[1,"confirmation-actions"],[1,"btn","btn-success",3,"click"],[1,"btn","btn-warning",3,"click"],[1,"no-request"]],template:function(t,r){t&1&&ht(0,Cre,3,4,"div",1)(1,Ere,3,0,"ng-template",null,0,Ga),t&2&&ue("ngIf",r.formAvailable)},dependencies:[rs,dU,pU,gU,ol,DA,bA,y0,Qd,nU,kA,AA,w0,Lm,TA,si,xd,Ys,Hv,dD,hD,mD],styles:[".elicitation-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:20px;background:#f8f9fa;border-radius:8px;box-shadow:0 2px 4px #0000001a}.required[_ngcontent-%COMP%]{color:#dc3545}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;margin-top:20px}.confirmation-dialog[_ngcontent-%COMP%]{margin-top:20px;padding:20px;background:#fff;border-radius:8px;border:1px solid #dee2e6}.confirmation-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;margin-top:20px}pre[_ngcontent-%COMP%]{background:#f8f9fa;padding:15px;border-radius:4px;overflow-x:auto}.alert[_ngcontent-%COMP%]{padding:15px;margin-bottom:20px;border-radius:4px}.alert-danger[_ngcontent-%COMP%]{background-color:#f8d7da;border-color:#f5c6cb;color:#721c24}"]})};function Te(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t}function N(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)}var yk=function(){let{crypto:n}=globalThis;if(n?.randomUUID)return yk=n.randomUUID.bind(n),n.randomUUID();let e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^t()&15>>+r/4).toString(16))};function rg(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}var ig=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){let e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};var ve=class extends Error{},rr=class n extends ve{constructor(e,t,r,i){super(`${n.makeMessage(e,t,r)}`),this.status=e,this.headers=i,this.requestID=i?.get("x-request-id"),this.error=t;let o=t;this.code=o?.code,this.param=o?.param,this.type=o?.type}static makeMessage(e,t,r){let i=t?.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,t,r,i){if(!e||!i)return new pl({message:r,cause:ig(t)});let o=t?.error;return e===400?new _f(e,o,r,i):e===401?new bf(e,o,r,i):e===403?new vf(e,o,r,i):e===404?new yf(e,o,r,i):e===409?new wf(e,o,r,i):e===422?new xf(e,o,r,i):e===429?new Cf(e,o,r,i):e>=500?new Ef(e,o,r,i):new n(e,o,r,i)}},Sn=class extends rr{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}},pl=class extends rr{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}},as=class extends pl{constructor({message:e}={}){super({message:e??"Request timed out."})}},_f=class extends rr{},bf=class extends rr{},vf=class extends rr{},yf=class extends rr{},wf=class extends rr{},xf=class extends rr{},Cf=class extends rr{},Ef=class extends rr{},If=class extends ve{constructor(){super("Could not parse response content as the length limit was reached")}},Sf=class extends ve{constructor(){super("Could not parse response content as the request was rejected by the content filter")}},ls=class extends Error{constructor(e){super(e)}};var Sre=/^[a-z][a-z0-9+.-]*:/i,sH=n=>Sre.test(n),Rr=n=>(Rr=Array.isArray,Rr(n)),wk=Rr;function aH(n){return typeof n!="object"?{}:n??{}}function lH(n){if(!n)return!0;for(let e in n)return!1;return!0}function cH(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function og(n){return n!=null&&typeof n=="object"&&!Array.isArray(n)}var uH=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new ve(`${n} must be an integer`);if(e<0)throw new ve(`${n} must be a positive integer`);return e};var dH=n=>{try{return JSON.parse(n)}catch{return}};var cs=n=>new Promise(e=>setTimeout(e,n));var ml="5.10.1";var mH=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function Dre(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}var Tre=()=>{let n=Dre();if(n==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ml,"X-Stainless-OS":hH(Deno.build.os),"X-Stainless-Arch":fH(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ml,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(n==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ml,"X-Stainless-OS":hH(globalThis.process.platform??"unknown"),"X-Stainless-Arch":fH(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};let e=Are();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ml,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ml,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Are(){if(typeof navigator>"u"||!navigator)return null;let n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(let{key:e,pattern:t}of n){let r=t.exec(navigator.userAgent);if(r){let i=r[1]||0,o=r[2]||0,s=r[3]||0;return{browser:e,version:`${i}.${o}.${s}`}}}return null}var fH=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",hH=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown"),pH,gH=()=>pH??(pH=Tre());function _H(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function xk(...n){let e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function dw(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return xk({start(){},pull(r){return v(this,null,function*(){let{done:i,value:o}=yield e.next();i?r.close():r.enqueue(o)})},cancel(){return v(this,null,function*(){yield e.return?.()})}})}function Ck(n){if(n[Symbol.asyncIterator])return n;let e=n.getReader();return{next(){return v(this,null,function*(){try{let r=yield e.read();return r?.done&&e.releaseLock(),r}catch(r){throw e.releaseLock(),r}})},return(){return v(this,null,function*(){let r=e.cancel();return e.releaseLock(),yield r,{done:!0,value:void 0}})},[Symbol.asyncIterator](){return this}}}function bH(n){return v(this,null,function*(){if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){yield n[Symbol.asyncIterator]().return?.();return}let e=n.getReader(),t=e.cancel();e.releaseLock(),yield t})}var vH=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});var fw="RFC3986",Ek=n=>String(n),hw={RFC1738:n=>String(n).replace(/%20/g,"+"),RFC3986:Ek},Ik="RFC1738";var pw=(n,e)=>(pw=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),pw(n,e)),us=(()=>{let n=[];for(let e=0;e<256;++e)n.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return n})();var Sk=1024,yH=(n,e,t,r,i)=>{if(n.length===0)return n;let o=n;if(typeof n=="symbol"?o=Symbol.prototype.toString.call(n):typeof n!="string"&&(o=String(n)),t==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(a){return"%26%23"+parseInt(a.slice(2),16)+"%3B"});let s="";for(let a=0;a<o.length;a+=Sk){let l=o.length>=Sk?o.slice(a,a+Sk):o,c=[];for(let u=0;u<l.length;++u){let d=l.charCodeAt(u);if(d===45||d===46||d===95||d===126||d>=48&&d<=57||d>=65&&d<=90||d>=97&&d<=122||i===Ik&&(d===40||d===41)){c[c.length]=l.charAt(u);continue}if(d<128){c[c.length]=us[d];continue}if(d<2048){c[c.length]=us[192|d>>6]+us[128|d&63];continue}if(d<55296||d>=57344){c[c.length]=us[224|d>>12]+us[128|d>>6&63]+us[128|d&63];continue}u+=1,d=65536+((d&1023)<<10|l.charCodeAt(u)&1023),c[c.length]=us[240|d>>18]+us[128|d>>12&63]+us[128|d>>6&63]+us[128|d&63]}s+=c.join("")}return s};function wH(n){return!n||typeof n!="object"?!1:!!(n.constructor&&n.constructor.isBuffer&&n.constructor.isBuffer(n))}function Dk(n,e){if(Rr(n)){let t=[];for(let r=0;r<n.length;r+=1)t.push(e(n[r]));return t}return e(n)}var CH={brackets(n){return String(n)+"[]"},comma:"comma",indices(n,e){return String(n)+"["+e+"]"},repeat(n){return String(n)}},EH=function(n,e){Array.prototype.push.apply(n,Rr(e)?e:[e])},xH,ir={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:yH,encodeValuesOnly:!1,format:fw,formatter:Ek,indices:!1,serializeDate(n){return(xH??(xH=Function.prototype.call.bind(Date.prototype.toISOString)))(n)},skipNulls:!1,strictNullHandling:!1};function Mre(n){return typeof n=="string"||typeof n=="number"||typeof n=="boolean"||typeof n=="symbol"||typeof n=="bigint"}var Tk={};function IH(n,e,t,r,i,o,s,a,l,c,u,d,h,f,p,g,_,y){let E=n,T=y,A=0,P=!1;for(;(T=T.get(Tk))!==void 0&&!P;){let Z=T.get(n);if(A+=1,typeof Z<"u"){if(Z===A)throw new RangeError("Cyclic object value");P=!0}typeof T.get(Tk)>"u"&&(A=0)}if(typeof c=="function"?E=c(e,E):E instanceof Date?E=h?.(E):t==="comma"&&Rr(E)&&(E=Dk(E,function(Z){return Z instanceof Date?h?.(Z):Z})),E===null){if(o)return l&&!g?l(e,ir.encoder,_,"key",f):e;E=""}if(Mre(E)||wH(E)){if(l){let Z=g?e:l(e,ir.encoder,_,"key",f);return[p?.(Z)+"="+p?.(l(E,ir.encoder,_,"value",f))]}return[p?.(e)+"="+p?.(String(E))]}let R=[];if(typeof E>"u")return R;let W;if(t==="comma"&&Rr(E))g&&l&&(E=Dk(E,l)),W=[{value:E.length>0?E.join(",")||null:void 0}];else if(Rr(c))W=c;else{let Z=Object.keys(E);W=u?Z.sort(u):Z}let S=a?String(e).replace(/\./g,"%2E"):String(e),$=r&&Rr(E)&&E.length===1?S+"[]":S;if(i&&Rr(E)&&E.length===0)return $+"[]";for(let Z=0;Z<W.length;++Z){let Y=W[Z],oe=typeof Y=="object"&&typeof Y.value<"u"?Y.value:E[Y];if(s&&oe===null)continue;let F=d&&a?Y.replace(/\./g,"%2E"):Y,j=Rr(E)?typeof t=="function"?t($,F):$:$+(d?"."+F:"["+F+"]");y.set(n,A);let H=new WeakMap;H.set(Tk,y),EH(R,IH(oe,j,t,r,i,o,s,a,t==="comma"&&g&&Rr(E)?null:l,c,u,d,h,f,p,g,_,H))}return R}function Ore(n=ir){if(typeof n.allowEmptyArrays<"u"&&typeof n.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof n.encodeDotInKeys<"u"&&typeof n.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(n.encoder!==null&&typeof n.encoder<"u"&&typeof n.encoder!="function")throw new TypeError("Encoder has to be a function.");let e=n.charset||ir.charset;if(typeof n.charset<"u"&&n.charset!=="utf-8"&&n.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let t=fw;if(typeof n.format<"u"){if(!pw(hw,n.format))throw new TypeError("Unknown format option provided.");t=n.format}let r=hw[t],i=ir.filter;(typeof n.filter=="function"||Rr(n.filter))&&(i=n.filter);let o;if(n.arrayFormat&&n.arrayFormat in CH?o=n.arrayFormat:"indices"in n?o=n.indices?"indices":"repeat":o=ir.arrayFormat,"commaRoundTrip"in n&&typeof n.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");let s=typeof n.allowDots>"u"?n.encodeDotInKeys?!0:ir.allowDots:!!n.allowDots;return{addQueryPrefix:typeof n.addQueryPrefix=="boolean"?n.addQueryPrefix:ir.addQueryPrefix,allowDots:s,allowEmptyArrays:typeof n.allowEmptyArrays=="boolean"?!!n.allowEmptyArrays:ir.allowEmptyArrays,arrayFormat:o,charset:e,charsetSentinel:typeof n.charsetSentinel=="boolean"?n.charsetSentinel:ir.charsetSentinel,commaRoundTrip:!!n.commaRoundTrip,delimiter:typeof n.delimiter>"u"?ir.delimiter:n.delimiter,encode:typeof n.encode=="boolean"?n.encode:ir.encode,encodeDotInKeys:typeof n.encodeDotInKeys=="boolean"?n.encodeDotInKeys:ir.encodeDotInKeys,encoder:typeof n.encoder=="function"?n.encoder:ir.encoder,encodeValuesOnly:typeof n.encodeValuesOnly=="boolean"?n.encodeValuesOnly:ir.encodeValuesOnly,filter:i,format:t,formatter:r,serializeDate:typeof n.serializeDate=="function"?n.serializeDate:ir.serializeDate,skipNulls:typeof n.skipNulls=="boolean"?n.skipNulls:ir.skipNulls,sort:typeof n.sort=="function"?n.sort:null,strictNullHandling:typeof n.strictNullHandling=="boolean"?n.strictNullHandling:ir.strictNullHandling}}function Ak(n,e={}){let t=n,r=Ore(e),i,o;typeof r.filter=="function"?(o=r.filter,t=o("",t)):Rr(r.filter)&&(o=r.filter,i=o);let s=[];if(typeof t!="object"||t===null)return"";let a=CH[r.arrayFormat],l=a==="comma"&&r.commaRoundTrip;i||(i=Object.keys(t)),r.sort&&i.sort(r.sort);let c=new WeakMap;for(let h=0;h<i.length;++h){let f=i[h];r.skipNulls&&t[f]===null||EH(s,IH(t[f],f,a,l,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,c))}let u=s.join(r.delimiter),d=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?d+="utf8=%26%2310003%3B&":d+="utf8=%E2%9C%93&"),u.length>0?d+u:""}function TH(n){let e=0;for(let i of n)e+=i.length;let t=new Uint8Array(e),r=0;for(let i of n)t.set(i,r),r+=i.length;return t}var SH;function Df(n){let e;return(SH??(e=new globalThis.TextEncoder,SH=e.encode.bind(e)))(n)}var DH;function kk(n){let e;return(DH??(e=new globalThis.TextDecoder,DH=e.decode.bind(e)))(n)}var Ei,Ii,Pc=class{constructor(){Ei.set(this,void 0),Ii.set(this,void 0),Te(this,Ei,new Uint8Array,"f"),Te(this,Ii,null,"f")}decode(e){if(e==null)return[];let t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Df(e):e;Te(this,Ei,TH([N(this,Ei,"f"),t]),"f");let r=[],i;for(;(i=Nre(N(this,Ei,"f"),N(this,Ii,"f")))!=null;){if(i.carriage&&N(this,Ii,"f")==null){Te(this,Ii,i.index,"f");continue}if(N(this,Ii,"f")!=null&&(i.index!==N(this,Ii,"f")+1||i.carriage)){r.push(kk(N(this,Ei,"f").subarray(0,N(this,Ii,"f")-1))),Te(this,Ei,N(this,Ei,"f").subarray(N(this,Ii,"f")),"f"),Te(this,Ii,null,"f");continue}let o=N(this,Ii,"f")!==null?i.preceding-1:i.preceding,s=kk(N(this,Ei,"f").subarray(0,o));r.push(s),Te(this,Ei,N(this,Ei,"f").subarray(i.index),"f"),Te(this,Ii,null,"f")}return r}flush(){return N(this,Ei,"f").length?this.decode(`
`):[]}};Ei=new WeakMap,Ii=new WeakMap;Pc.NEWLINE_CHARS=new Set([`
`,"\r"]);Pc.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Nre(n,e){for(let i=e??0;i<n.length;i++){if(n[i]===10)return{preceding:i,index:i+1,carriage:!1};if(n[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function AH(n){for(let r=0;r<n.length-1;r++){if(n[r]===10&&n[r+1]===10||n[r]===13&&n[r+1]===13)return r+2;if(n[r]===13&&n[r+1]===10&&r+3<n.length&&n[r+2]===13&&n[r+3]===10)return r+4}return-1}var gw={off:0,error:200,warn:300,info:400,debug:500},Rk=(n,e,t)=>{if(n){if(cH(gw,n))return n;Pn(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(gw))}`)}};function sg(){}function mw(n,e,t){return!e||gw[n]>gw[t]?sg:e[n].bind(e)}var Fre={error:sg,warn:sg,info:sg,debug:sg},kH=new WeakMap;function Pn(n){let e=n.logger,t=n.logLevel??"off";if(!e)return Fre;let r=kH.get(e);if(r&&r[0]===t)return r[1];let i={error:mw("error",e,t),warn:mw("warn",e,t),info:mw("info",e,t),debug:mw("debug",e,t)};return kH.set(e,[t,i]),i}var la=n=>(n.options&&(n.options=m({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);var ag,ds=class n{constructor(e,t,r){this.iterator=e,ag.set(this,void 0),this.controller=t,Te(this,ag,r,"f")}static fromSSEResponse(e,t,r){let i=!1,o=r?Pn(r):console;function s(){return We(this,null,function*(){if(i)throw new ve("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let a=!1;try{try{for(var l=Ee(Lre(e,t)),c,u,d;c=!(u=yield new ee(l.next())).done;c=!1){let h=u.value;if(!a){if(h.data.startsWith("[DONE]")){a=!0;continue}if(h.event===null||h.event.startsWith("response.")||h.event.startsWith("image_edit.")||h.event.startsWith("image_generation.")||h.event.startsWith("transcript.")){let f;try{f=JSON.parse(h.data)}catch(p){throw o.error("Could not parse message into JSON:",h.data),o.error("From chunk:",h.raw),p}if(f&&f.error)throw new rr(void 0,f.error,void 0,e.headers);yield f}else{let f;try{f=JSON.parse(h.data)}catch(p){throw console.error("Could not parse message into JSON:",h.data),console.error("From chunk:",h.raw),p}if(h.event=="error")throw new rr(void 0,f.error,f.message,void 0);yield{event:h.event,data:f}}}}}catch{d=[u]}finally{try{c&&(u=l.return)&&(yield new ee(u.call(l)))}finally{if(d)throw d[0]}}a=!0}catch(h){if(rg(h))return;throw h}finally{a||t.abort()}})}return new n(s,t,r)}static fromReadableStream(e,t,r){let i=!1;function o(){return We(this,null,function*(){let a=new Pc,l=Ck(e);try{for(var c=Ee(l),u,d,h;u=!(d=yield new ee(c.next())).done;u=!1){let f=d.value;for(let p of a.decode(f))yield p}}catch{h=[d]}finally{try{u&&(d=c.return)&&(yield new ee(d.call(c)))}finally{if(h)throw h[0]}}for(let f of a.flush())yield f})}function s(){return We(this,null,function*(){if(i)throw new ve("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let a=!1;try{try{for(var l=Ee(o()),c,u,d;c=!(u=yield new ee(l.next())).done;c=!1){let h=u.value;a||h&&(yield JSON.parse(h))}}catch{d=[u]}finally{try{c&&(u=l.return)&&(yield new ee(u.call(l)))}finally{if(d)throw d[0]}}a=!0}catch(h){if(rg(h))return;throw h}finally{a||t.abort()}})}return new n(s,t,r)}[(ag=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){let e=[],t=[],r=this.iterator(),i=o=>({next:()=>{if(o.length===0){let s=r.next();e.push(s),t.push(s)}return o.shift()}});return[new n(()=>i(e),this.controller,N(this,ag,"f")),new n(()=>i(t),this.controller,N(this,ag,"f"))]}toReadableStream(){let e=this,t;return xk({start(){return v(this,null,function*(){t=e[Symbol.asyncIterator]()})},pull(i){return v(this,null,function*(){try{let{value:o,done:s}=yield t.next();if(s)return i.close();let a=Df(JSON.stringify(o)+`
`);i.enqueue(a)}catch(o){i.error(o)}})},cancel(){return v(this,null,function*(){yield t.return?.()})}})}};function Lre(n,e){return We(this,null,function*(){if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new ve("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new ve("Attempted to iterate over a response with no body");let t=new Mk,r=new Pc,i=Ck(n.body);try{for(var o=Ee(jre(i)),s,a,l;s=!(a=yield new ee(o.next())).done;s=!1){let c=a.value;for(let u of r.decode(c)){let d=t.decode(u);d&&(yield d)}}}catch{l=[a]}finally{try{s&&(a=o.return)&&(yield new ee(a.call(o)))}finally{if(l)throw l[0]}}for(let c of r.flush()){let u=t.decode(c);u&&(yield u)}})}function jre(n){return We(this,null,function*(){let e=new Uint8Array;try{for(var t=Ee(n),r,i,o;r=!(i=yield new ee(t.next())).done;r=!1){let s=i.value;if(s==null)continue;let a=s instanceof ArrayBuffer?new Uint8Array(s):typeof s=="string"?Df(s):s,l=new Uint8Array(e.length+a.length);l.set(e),l.set(a,e.length),e=l;let c;for(;(c=AH(e))!==-1;)yield e.slice(0,c),e=e.slice(c)}}catch{o=[i]}finally{try{r&&(i=t.return)&&(yield new ee(i.call(t)))}finally{if(o)throw o[0]}}e.length>0&&(yield e)})}var Mk=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;let o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,r,i]=Bre(e,":");return i.startsWith(" ")&&(i=i.substring(1)),t==="event"?this.event=i:t==="data"&&this.data.push(i),null}};function Bre(n,e){let t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}function _w(n,e){return v(this,null,function*(){let{response:t,requestLogID:r,retryOfRequestLogID:i,startTime:o}=e,s=yield v(null,null,function*(){if(e.options.stream)return Pn(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):ds.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;let l=t.headers.get("content-type")?.split(";")[0]?.trim();if(l?.includes("application/json")||l?.endsWith("+json")){let d=yield t.json();return Ok(d,t)}return yield t.text()});return Pn(n).debug(`[${r}] response parsed`,la({retryOfRequestLogID:i,url:t.url,status:t.status,body:s,durationMs:Date.now()-o})),s})}function Ok(n,e){return!n||typeof n!="object"||Array.isArray(n)?n:Object.defineProperty(n,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var lg,Nc=class n extends Promise{constructor(e,t,r=_w){super(i=>{i(null)}),this.responsePromise=t,this.parseResponse=r,lg.set(this,void 0),Te(this,lg,e,"f")}_thenUnwrap(e){return new n(N(this,lg,"f"),this.responsePromise,(t,r)=>v(this,null,function*(){return Ok(e(yield this.parseResponse(t,r),r),r.response)}))}asResponse(){return this.responsePromise.then(e=>e.response)}withResponse(){return v(this,null,function*(){let[e,t]=yield Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("x-request-id")}})}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(N(this,lg,"f"),e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}};lg=new WeakMap;var bw,vw=class{constructor(e,t,r,i){bw.set(this,void 0),Te(this,bw,e,"f"),this.options=i,this.response=t,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}getNextPage(){return v(this,null,function*(){let e=this.nextPageRequestOptions();if(!e)throw new ve("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return yield N(this,bw,"f").requestAPIList(this.constructor,e)})}iterPages(){return We(this,null,function*(){let e=this;for(yield e;e.hasNextPage();)e=yield new ee(e.getNextPage()),yield e})}[(bw=new WeakMap,Symbol.asyncIterator)](){return We(this,null,function*(){try{for(var e=Ee(this.iterPages()),t,r,i;t=!(r=yield new ee(e.next())).done;t=!1){let o=r.value;for(let s of o.getPaginatedItems())yield s}}catch{i=[r]}finally{try{t&&(r=e.return)&&(yield new ee(r.call(e)))}finally{if(i)throw i[0]}}})}},cg=class extends Nc{constructor(e,t,r){super(e,t,(i,o)=>v(null,null,function*(){return new r(i,o.response,yield _w(i,o),o.options)}))}[Symbol.asyncIterator](){return We(this,null,function*(){let e=yield new ee(this);try{for(var t=Ee(e),r,i,o;r=!(i=yield new ee(t.next())).done;r=!1){let s=i.value;yield s}}catch{o=[i]}finally{try{r&&(i=t.return)&&(yield new ee(i.call(t)))}finally{if(o)throw o[0]}}})}},fs=class extends vw{constructor(e,t,r,i){super(e,t,r,i),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}},at=class extends vw{constructor(e,t,r,i){super(e,t,r,i),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){let e=this.getPaginatedItems(),t=e[e.length-1]?.id;return t?w(m({},this.options),{query:w(m({},aH(this.options.query)),{after:t})}):null}};var Nk=()=>{if(typeof File>"u"){let{process:n}=globalThis,e=typeof n?.versions?.node=="string"&&parseInt(n.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Tf(n,e,t){return Nk(),new File(n,e??"unknown_file",t)}function ug(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}var Fk=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";var Si=(n,e)=>v(null,null,function*(){return w(m({},n),{body:yield Ure(n.body,e)})}),RH=new WeakMap;function $re(n){let e=typeof n=="function"?n:n.fetch,t=RH.get(e);if(t)return t;let r=v(null,null,function*(){try{let i="Response"in e?e.Response:(yield e("data:,")).constructor,o=new FormData;return o.toString()!==(yield new i(o).text())}catch{return!0}});return RH.set(e,r),r}var Ure=(n,e)=>v(null,null,function*(){if(!(yield $re(e)))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");let t=new FormData;return yield Promise.all(Object.entries(n||{}).map(([r,i])=>Pk(t,r,i))),t}),zre=n=>n instanceof Blob&&"name"in n;var Pk=(n,e,t)=>v(null,null,function*(){if(t!==void 0){if(t==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof t=="string"||typeof t=="number"||typeof t=="boolean")n.append(e,String(t));else if(t instanceof Response)n.append(e,Tf([yield t.blob()],ug(t)));else if(Fk(t))n.append(e,Tf([yield new Response(dw(t)).blob()],ug(t)));else if(zre(t))n.append(e,t,ug(t));else if(Array.isArray(t))yield Promise.all(t.map(r=>Pk(n,e+"[]",r)));else if(typeof t=="object")yield Promise.all(Object.entries(t).map(([r,i])=>Pk(n,`${e}[${r}]`,i)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${t} instead`)}});var MH=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",Hre=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&MH(n),qre=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";function dg(n,e,t){return v(this,null,function*(){if(Nk(),n=yield n,Hre(n))return n instanceof File?n:Tf([yield n.arrayBuffer()],n.name);if(qre(n)){let i=yield n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),Tf(yield Lk(i),e,t)}let r=yield Lk(n);if(e||(e=ug(n)),!t?.type){let i=r.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof i=="string"&&(t=w(m({},t),{type:i}))}return Tf(r,e,t)})}function Lk(n){return v(this,null,function*(){let e=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)e.push(n);else if(MH(n))e.push(n instanceof Blob?n:yield n.arrayBuffer());else if(Fk(n))try{for(var t=Ee(n),r,i,o;r=!(i=yield t.next()).done;r=!1){let s=i.value;e.push(...yield Lk(s))}}catch{o=[i]}finally{try{r&&(i=t.return)&&(yield i.call(t))}finally{if(o)throw o[0]}}else{let s=n?.constructor?.name;throw new Error(`Unexpected data type: ${typeof n}${s?`; constructor: ${s}`:""}${Gre(n)}`)}return e})}function Gre(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}var ne=class{constructor(e){this._client=e}};function PH(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}var OH=Object.freeze(Object.create(null)),Kre=(n=PH)=>function(t,...r){if(t.length===1)return t[0];let i=!1,o=[],s=t.reduce((u,d,h)=>{/[?#]/.test(d)&&(i=!0);let f=r[h],p=(i?encodeURIComponent:n)(""+f);return h!==r.length&&(f==null||typeof f=="object"&&f.toString===Object.getPrototypeOf(Object.getPrototypeOf(f.hasOwnProperty??OH)??OH)?.toString)&&(p=f+"",o.push({start:u.length+d.length,length:p.length,error:`Value of type ${Object.prototype.toString.call(f).slice(8,-1)} is not a valid path parameter`})),u+d+(h===r.length?"":p)},""),a=s.split(/[?#]/,1)[0],l=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi"),c;for(;(c=l.exec(a))!==null;)o.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(o.sort((u,d)=>u.start-d.start),o.length>0){let u=0,d=o.reduce((h,f)=>{let p=" ".repeat(f.start-u),g="^".repeat(f.length);return u=f.start+f.length,h+p+g},"");throw new ve(`Path parameters result in path with invalid segments:
${o.map(h=>h.error).join(`
`)}
${s}
${d}`)}return s},J=Kre(PH);var Fc=class extends ne{list(e,t={},r){return this._client.getAPIList(J`/chat/completions/${e}/messages`,at,m({query:t},r))}};function NH(n){return typeof n.parse=="function"}var Af=n=>n?.role==="assistant",jk=n=>n?.role==="tool";var Bk,yw,ww,fg,hg,xw,pg,ca,mg,Cw,Ew,kf,FH,gl=class{constructor(){Bk.add(this),this.controller=new AbortController,yw.set(this,void 0),ww.set(this,()=>{}),fg.set(this,()=>{}),hg.set(this,void 0),xw.set(this,()=>{}),pg.set(this,()=>{}),ca.set(this,{}),mg.set(this,!1),Cw.set(this,!1),Ew.set(this,!1),kf.set(this,!1),Te(this,yw,new Promise((e,t)=>{Te(this,ww,e,"f"),Te(this,fg,t,"f")}),"f"),Te(this,hg,new Promise((e,t)=>{Te(this,xw,e,"f"),Te(this,pg,t,"f")}),"f"),N(this,yw,"f").catch(()=>{}),N(this,hg,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},N(this,Bk,"m",FH).bind(this))},0)}_connected(){this.ended||(N(this,ww,"f").call(this),this._emit("connect"))}get ended(){return N(this,mg,"f")}get errored(){return N(this,Cw,"f")}get aborted(){return N(this,Ew,"f")}abort(){this.controller.abort()}on(e,t){return(N(this,ca,"f")[e]||(N(this,ca,"f")[e]=[])).push({listener:t}),this}off(e,t){let r=N(this,ca,"f")[e];if(!r)return this;let i=r.findIndex(o=>o.listener===t);return i>=0&&r.splice(i,1),this}once(e,t){return(N(this,ca,"f")[e]||(N(this,ca,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,r)=>{Te(this,kf,!0,"f"),e!=="error"&&this.once("error",r),this.once(e,t)})}done(){return v(this,null,function*(){Te(this,kf,!0,"f"),yield N(this,hg,"f")})}_emit(e,...t){if(N(this,mg,"f"))return;e==="end"&&(Te(this,mg,!0,"f"),N(this,xw,"f").call(this));let r=N(this,ca,"f")[e];if(r&&(N(this,ca,"f")[e]=r.filter(i=>!i.once),r.forEach(({listener:i})=>i(...t))),e==="abort"){let i=t[0];!N(this,kf,"f")&&!r?.length&&Promise.reject(i),N(this,fg,"f").call(this,i),N(this,pg,"f").call(this,i),this._emit("end");return}if(e==="error"){let i=t[0];!N(this,kf,"f")&&!r?.length&&Promise.reject(i),N(this,fg,"f").call(this,i),N(this,pg,"f").call(this,i),this._emit("end")}}_emitFinal(){}};yw=new WeakMap,ww=new WeakMap,fg=new WeakMap,hg=new WeakMap,xw=new WeakMap,pg=new WeakMap,ca=new WeakMap,mg=new WeakMap,Cw=new WeakMap,Ew=new WeakMap,kf=new WeakMap,Bk=new WeakSet,FH=function(e){if(Te(this,Cw,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new Sn),e instanceof Sn)return Te(this,Ew,!0,"f"),this._emit("abort",e);if(e instanceof ve)return this._emit("error",e);if(e instanceof Error){let t=new ve(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new ve(String(e)))};function LH(n,e){let t=m({},n);return Object.defineProperties(t,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:e,enumerable:!1}}),t}function gg(n){return n?.$brand==="auto-parseable-response-format"}function Lc(n){return n?.$brand==="auto-parseable-tool"}function jH(n,e){return!e||!Vk(e)?w(m({},n),{choices:n.choices.map(t=>w(m({},t),{message:m(w(m({},t.message),{parsed:null}),t.message.tool_calls?{tool_calls:t.message.tool_calls}:void 0)}))}):_g(n,e)}function _g(n,e){let t=n.choices.map(r=>{if(r.finish_reason==="length")throw new If;if(r.finish_reason==="content_filter")throw new Sf;return w(m({},r),{message:w(m(m({},r.message),r.message.tool_calls?{tool_calls:r.message.tool_calls?.map(i=>Xre(e,i))??void 0}:void 0),{parsed:r.message.content&&!r.message.refusal?Zre(e,r.message.content):null})})});return w(m({},n),{choices:t})}function Zre(n,e){return n.response_format?.type!=="json_schema"?null:n.response_format?.type==="json_schema"?"$parseRaw"in n.response_format?n.response_format.$parseRaw(e):JSON.parse(e):null}function Xre(n,e){let t=n.tools?.find(r=>r.function?.name===e.function.name);return w(m({},e),{function:w(m({},e.function),{parsed_arguments:Lc(t)?t.$parseRaw(e.function.arguments):t?.function.strict?JSON.parse(e.function.arguments):null})})}function BH(n,e){if(!n)return!1;let t=n.tools?.find(r=>r.function?.name===e.function.name);return Lc(t)||t?.function.strict||!1}function Vk(n){return gg(n.response_format)?!0:n.tools?.some(e=>Lc(e)||e.type==="function"&&e.function.strict===!0)??!1}function VH(n){for(let e of n??[]){if(e.type!=="function")throw new ve(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new ve(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var Zr,$k,Iw,Uk,zk,Hk,$H,UH,Jre=10,Rf=class extends gl{constructor(){super(...arguments),Zr.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);let t=e.choices[0]?.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t){if(this._emit("message",e),jk(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(Af(e)&&e.tool_calls)for(let r of e.tool_calls)r.type==="function"&&this._emit("functionToolCall",r.function)}}finalChatCompletion(){return v(this,null,function*(){yield this.done();let e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new ve("stream ended without producing a ChatCompletion");return e})}finalContent(){return v(this,null,function*(){return yield this.done(),N(this,Zr,"m",$k).call(this)})}finalMessage(){return v(this,null,function*(){return yield this.done(),N(this,Zr,"m",Iw).call(this)})}finalFunctionToolCall(){return v(this,null,function*(){return yield this.done(),N(this,Zr,"m",Uk).call(this)})}finalFunctionToolCallResult(){return v(this,null,function*(){return yield this.done(),N(this,Zr,"m",zk).call(this)})}totalUsage(){return v(this,null,function*(){return yield this.done(),N(this,Zr,"m",Hk).call(this)})}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){let e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);let t=N(this,Zr,"m",Iw).call(this);t&&this._emit("finalMessage",t);let r=N(this,Zr,"m",$k).call(this);r&&this._emit("finalContent",r);let i=N(this,Zr,"m",Uk).call(this);i&&this._emit("finalFunctionToolCall",i);let o=N(this,Zr,"m",zk).call(this);o!=null&&this._emit("finalFunctionToolCallResult",o),this._chatCompletions.some(s=>s.usage)&&this._emit("totalUsage",N(this,Zr,"m",Hk).call(this))}_createChatCompletion(e,t,r){return v(this,null,function*(){let i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),N(this,Zr,"m",$H).call(this,t);let o=yield e.chat.completions.create(w(m({},t),{stream:!1}),w(m({},r),{signal:this.controller.signal}));return this._connected(),this._addChatCompletion(_g(o,t))})}_runChatCompletion(e,t,r){return v(this,null,function*(){for(let i of t.messages)this._addMessage(i,!1);return yield this._createChatCompletion(e,t,r)})}_runTools(e,t,r){return v(this,null,function*(){let i="tool",f=t,{tool_choice:o="auto",stream:s}=f,a=Ae(f,["tool_choice","stream"]),l=typeof o!="string"&&o?.function?.name,{maxChatCompletions:c=Jre}=r||{},u=t.tools.map(p=>{if(Lc(p)){if(!p.$callback)throw new ve("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:p.$callback,name:p.function.name,description:p.function.description||"",parameters:p.function.parameters,parse:p.$parseRaw,strict:!0}}}return p}),d={};for(let p of u)p.type==="function"&&(d[p.function.name||p.function.function.name]=p.function);let h="tools"in t?u.map(p=>p.type==="function"?{type:"function",function:{name:p.function.name||p.function.function.name,parameters:p.function.parameters,description:p.function.description,strict:p.function.strict}}:p):void 0;for(let p of t.messages)this._addMessage(p,!1);for(let p=0;p<c;++p){let _=(yield this._createChatCompletion(e,w(m({},a),{tool_choice:o,tools:h,messages:[...this.messages]}),r)).choices[0]?.message;if(!_)throw new ve("missing message in ChatCompletion response");if(!_.tool_calls?.length)return;for(let y of _.tool_calls){if(y.type!=="function")continue;let E=y.id,{name:T,arguments:A}=y.function,P=d[T];if(P){if(l&&l!==T){let $=`Invalid tool_call: ${JSON.stringify(T)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:i,tool_call_id:E,content:$});continue}}else{let $=`Invalid tool_call: ${JSON.stringify(T)}. Available options are: ${Object.keys(d).map(Z=>JSON.stringify(Z)).join(", ")}. Please try again`;this._addMessage({role:i,tool_call_id:E,content:$});continue}let R;try{R=NH(P)?yield P.parse(A):A}catch($){let Z=$ instanceof Error?$.message:String($);this._addMessage({role:i,tool_call_id:E,content:Z});continue}let W=yield P.function(R,this),S=N(this,Zr,"m",UH).call(this,W);if(this._addMessage({role:i,tool_call_id:E,content:S}),l)return}}})}};Zr=new WeakSet,$k=function(){return N(this,Zr,"m",Iw).call(this).content??null},Iw=function(){let e=this.messages.length;for(;e-- >0;){let t=this.messages[e];if(Af(t))return w(m({},t),{content:t.content??null,refusal:t.refusal??null})}throw new ve("stream ended without producing a ChatCompletionMessage with role=assistant")},Uk=function(){for(let e=this.messages.length-1;e>=0;e--){let t=this.messages[e];if(Af(t)&&t?.tool_calls?.length)return t.tool_calls.at(-1)?.function}},zk=function(){for(let e=this.messages.length-1;e>=0;e--){let t=this.messages[e];if(jk(t)&&t.content!=null&&typeof t.content=="string"&&this.messages.some(r=>r.role==="assistant"&&r.tool_calls?.some(i=>i.type==="function"&&i.id===t.tool_call_id)))return t.content}},Hk=function(){let e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(let{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},$H=function(e){if(e.n!=null&&e.n>1)throw new ve("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},UH=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};var bg=class n extends Rf{static runTools(e,t,r){let i=new n,o=w(m({},r),{headers:w(m({},r?.headers),{"X-Stainless-Helper-Method":"runTools"})});return i._run(()=>i._runTools(e,t,o)),i}_addMessage(e,t=!0){super._addMessage(e,t),Af(e)&&e.content&&this._emit("content",e.content)}};var pr={STR:1,NUM:2,ARR:4,OBJ:8,NULL:16,BOOL:32,NAN:64,INFINITY:128,MINUS_INFINITY:256,INF:384,SPECIAL:496,ATOM:499,COLLECTION:12,ALL:511},qk=class extends Error{},Gk=class extends Error{};function eie(n,e=pr.ALL){if(typeof n!="string")throw new TypeError(`expecting str, got ${typeof n}`);if(!n.trim())throw new Error(`${n} is empty`);return tie(n.trim(),e)}var tie=(n,e)=>{let t=n.length,r=0,i=h=>{throw new qk(`${h} at position ${r}`)},o=h=>{throw new Gk(`${h} at position ${r}`)},s=()=>(d(),r>=t&&i("Unexpected end of input"),n[r]==='"'?a():n[r]==="{"?l():n[r]==="["?c():n.substring(r,r+4)==="null"||pr.NULL&e&&t-r<4&&"null".startsWith(n.substring(r))?(r+=4,null):n.substring(r,r+4)==="true"||pr.BOOL&e&&t-r<4&&"true".startsWith(n.substring(r))?(r+=4,!0):n.substring(r,r+5)==="false"||pr.BOOL&e&&t-r<5&&"false".startsWith(n.substring(r))?(r+=5,!1):n.substring(r,r+8)==="Infinity"||pr.INFINITY&e&&t-r<8&&"Infinity".startsWith(n.substring(r))?(r+=8,1/0):n.substring(r,r+9)==="-Infinity"||pr.MINUS_INFINITY&e&&1<t-r&&t-r<9&&"-Infinity".startsWith(n.substring(r))?(r+=9,-1/0):n.substring(r,r+3)==="NaN"||pr.NAN&e&&t-r<3&&"NaN".startsWith(n.substring(r))?(r+=3,NaN):u()),a=()=>{let h=r,f=!1;for(r++;r<t&&(n[r]!=='"'||f&&n[r-1]==="\\");)f=n[r]==="\\"?!f:!1,r++;if(n.charAt(r)=='"')try{return JSON.parse(n.substring(h,++r-Number(f)))}catch(p){o(String(p))}else if(pr.STR&e)try{return JSON.parse(n.substring(h,r-Number(f))+'"')}catch{return JSON.parse(n.substring(h,n.lastIndexOf("\\"))+'"')}i("Unterminated string literal")},l=()=>{r++,d();let h={};try{for(;n[r]!=="}";){if(d(),r>=t&&pr.OBJ&e)return h;let f=a();d(),r++;try{let p=s();Object.defineProperty(h,f,{value:p,writable:!0,enumerable:!0,configurable:!0})}catch(p){if(pr.OBJ&e)return h;throw p}d(),n[r]===","&&r++}}catch{if(pr.OBJ&e)return h;i("Expected '}' at end of object")}return r++,h},c=()=>{r++;let h=[];try{for(;n[r]!=="]";)h.push(s()),d(),n[r]===","&&r++}catch{if(pr.ARR&e)return h;i("Expected ']' at end of array")}return r++,h},u=()=>{if(r===0){n==="-"&&pr.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(n)}catch(f){if(pr.NUM&e)try{return n[n.length-1]==="."?JSON.parse(n.substring(0,n.lastIndexOf("."))):JSON.parse(n.substring(0,n.lastIndexOf("e")))}catch{}o(String(f))}}let h=r;for(n[r]==="-"&&r++;n[r]&&!",]}".includes(n[r]);)r++;r==t&&!(pr.NUM&e)&&i("Unterminated number literal");try{return JSON.parse(n.substring(h,r))}catch{n.substring(h,r)==="-"&&pr.NUM&e&&i("Not sure what '-' is");try{return JSON.parse(n.substring(h,n.lastIndexOf("e")))}catch(p){o(String(p))}}},d=()=>{for(;r<t&&` 
\r	`.includes(n[r]);)r++};return s()},Wk=n=>eie(n,pr.ALL^pr.NUM);var or,ua,Mf,_l,Kk,Sw,Qk,Yk,Zk,Dw,Xk,zH,jc=class n extends Rf{constructor(e){super(),or.add(this),ua.set(this,void 0),Mf.set(this,void 0),_l.set(this,void 0),Te(this,ua,e,"f"),Te(this,Mf,[],"f")}get currentChatCompletionSnapshot(){return N(this,_l,"f")}static fromReadableStream(e){let t=new n(null);return t._run(()=>t._fromReadableStream(e)),t}static createChatCompletion(e,t,r){let i=new n(t);return i._run(()=>i._runChatCompletion(e,w(m({},t),{stream:!0}),w(m({},r),{headers:w(m({},r?.headers),{"X-Stainless-Helper-Method":"stream"})}))),i}_createChatCompletion(e,t,r){return v(this,null,function*(){sr(n.prototype,this,"_createChatCompletion");let i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),N(this,or,"m",Kk).call(this);let o=yield e.chat.completions.create(w(m({},t),{stream:!0}),w(m({},r),{signal:this.controller.signal}));this._connected();try{for(var s=Ee(o),a,l,c;a=!(l=yield s.next()).done;a=!1){let u=l.value;N(this,or,"m",Qk).call(this,u)}}catch{c=[l]}finally{try{a&&(l=s.return)&&(yield l.call(s))}finally{if(c)throw c[0]}}if(o.controller.signal?.aborted)throw new Sn;return this._addChatCompletion(N(this,or,"m",Dw).call(this))})}_fromReadableStream(e,t){return v(this,null,function*(){let r=t?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),N(this,or,"m",Kk).call(this),this._connected();let i=ds.fromReadableStream(e,this.controller),o;try{for(var s=Ee(i),a,l,c;a=!(l=yield s.next()).done;a=!1){let u=l.value;o&&o!==u.id&&this._addChatCompletion(N(this,or,"m",Dw).call(this)),N(this,or,"m",Qk).call(this,u),o=u.id}}catch{c=[l]}finally{try{a&&(l=s.return)&&(yield l.call(s))}finally{if(c)throw c[0]}}if(i.controller.signal?.aborted)throw new Sn;return this._addChatCompletion(N(this,or,"m",Dw).call(this))})}[(ua=new WeakMap,Mf=new WeakMap,_l=new WeakMap,or=new WeakSet,Kk=function(){this.ended||Te(this,_l,void 0,"f")},Sw=function(t){let r=N(this,Mf,"f")[t.index];return r||(r={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},N(this,Mf,"f")[t.index]=r,r)},Qk=function(t){if(this.ended)return;let r=N(this,or,"m",zH).call(this,t);this._emit("chunk",t,r);for(let i of t.choices){let o=r.choices[i.index];i.delta.content!=null&&o.message?.role==="assistant"&&o.message?.content&&(this._emit("content",i.delta.content,o.message.content),this._emit("content.delta",{delta:i.delta.content,snapshot:o.message.content,parsed:o.message.parsed})),i.delta.refusal!=null&&o.message?.role==="assistant"&&o.message?.refusal&&this._emit("refusal.delta",{delta:i.delta.refusal,snapshot:o.message.refusal}),i.logprobs?.content!=null&&o.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:i.logprobs?.content,snapshot:o.logprobs?.content??[]}),i.logprobs?.refusal!=null&&o.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:i.logprobs?.refusal,snapshot:o.logprobs?.refusal??[]});let s=N(this,or,"m",Sw).call(this,o);o.finish_reason&&(N(this,or,"m",Zk).call(this,o),s.current_tool_call_index!=null&&N(this,or,"m",Yk).call(this,o,s.current_tool_call_index));for(let a of i.delta.tool_calls??[])s.current_tool_call_index!==a.index&&(N(this,or,"m",Zk).call(this,o),s.current_tool_call_index!=null&&N(this,or,"m",Yk).call(this,o,s.current_tool_call_index)),s.current_tool_call_index=a.index;for(let a of i.delta.tool_calls??[]){let l=o.message.tool_calls?.[a.index];l?.type&&(l?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:l.function?.name,index:a.index,arguments:l.function.arguments,parsed_arguments:l.function.parsed_arguments,arguments_delta:a.function?.arguments??""}):(l?.type,void 0))}}},Yk=function(t,r){if(N(this,or,"m",Sw).call(this,t).done_tool_calls.has(r))return;let o=t.message.tool_calls?.[r];if(!o)throw new Error("no tool call snapshot");if(!o.type)throw new Error("tool call snapshot missing `type`");if(o.type==="function"){let s=N(this,ua,"f")?.tools?.find(a=>a.type==="function"&&a.function.name===o.function.name);this._emit("tool_calls.function.arguments.done",{name:o.function.name,index:r,arguments:o.function.arguments,parsed_arguments:Lc(s)?s.$parseRaw(o.function.arguments):s?.function.strict?JSON.parse(o.function.arguments):null})}else o.type},Zk=function(t){let r=N(this,or,"m",Sw).call(this,t);if(t.message.content&&!r.content_done){r.content_done=!0;let i=N(this,or,"m",Xk).call(this);this._emit("content.done",{content:t.message.content,parsed:i?i.$parseRaw(t.message.content):null})}t.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:t.message.refusal})),t.logprobs?.content&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:t.logprobs.content})),t.logprobs?.refusal&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:t.logprobs.refusal}))},Dw=function(){if(this.ended)throw new ve("stream has ended, this shouldn't happen");let t=N(this,_l,"f");if(!t)throw new ve("request ended without sending any chunks");return Te(this,_l,void 0,"f"),Te(this,Mf,[],"f"),nie(t,N(this,ua,"f"))},Xk=function(){let t=N(this,ua,"f")?.response_format;return gg(t)?t:null},zH=function(t){var r,i,o,s;let a=N(this,_l,"f"),u=t,{choices:l}=u,c=Ae(u,["choices"]);a?Object.assign(a,c):a=Te(this,_l,w(m({},c),{choices:[]}),"f");for(let g of t.choices){let _=g,{delta:y,finish_reason:E,index:T,logprobs:A=null}=_,P=Ae(_,["delta","finish_reason","index","logprobs"]);let R=a.choices[T];if(R||(R=a.choices[T]=m({finish_reason:E,index:T,message:{},logprobs:A},P)),A)if(!R.logprobs)R.logprobs=Object.assign({},A);else{let d=A,{content:F,refusal:j}=d,H=Ae(d,["content","refusal"]);Object.assign(R.logprobs,H),F&&((r=R.logprobs).content??(r.content=[]),R.logprobs.content.push(...F)),j&&((i=R.logprobs).refusal??(i.refusal=[]),R.logprobs.refusal.push(...j))}if(E&&(R.finish_reason=E,N(this,ua,"f")&&Vk(N(this,ua,"f")))){if(E==="length")throw new If;if(E==="content_filter")throw new Sf}if(Object.assign(R,P),!y)continue;let h=y,{content:W,refusal:S,function_call:$,role:Z,tool_calls:Y}=h,oe=Ae(h,["content","refusal","function_call","role","tool_calls"]);if(Object.assign(R.message,oe),S&&(R.message.refusal=(R.message.refusal||"")+S),Z&&(R.message.role=Z),$&&(R.message.function_call?($.name&&(R.message.function_call.name=$.name),$.arguments&&((o=R.message.function_call).arguments??(o.arguments=""),R.message.function_call.arguments+=$.arguments)):R.message.function_call=$),W&&(R.message.content=(R.message.content||"")+W,!R.message.refusal&&N(this,or,"m",Xk).call(this)&&(R.message.parsed=Wk(R.message.content))),Y){R.message.tool_calls||(R.message.tool_calls=[]);for(let f of Y){let p=f,{index:F,id:j,type:H,function:q}=p,X=Ae(p,["index","id","type","function"]);let le=(s=R.message.tool_calls)[F]??(s[F]={});Object.assign(le,X),j&&(le.id=j),H&&(le.type=H),q&&(le.function??(le.function={name:q.name??"",arguments:""})),q?.name&&(le.function.name=q.name),q?.arguments&&(le.function.arguments+=q.arguments,BH(N(this,ua,"f"),le)&&(le.function.parsed_arguments=Wk(le.function.arguments)))}}}return a},Symbol.asyncIterator)](){let e=[],t=[],r=!1;return this.on("chunk",i=>{let o=t.shift();o?o.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(let i of t)i.resolve(void 0);t.length=0}),this.on("abort",i=>{r=!0;for(let o of t)o.reject(i);t.length=0}),this.on("error",i=>{r=!0;for(let o of t)o.reject(i);t.length=0}),{next:()=>v(this,null,function*(){return e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((o,s)=>t.push({resolve:o,reject:s})).then(o=>o?{value:o,done:!1}:{value:void 0,done:!0})}),return:()=>v(this,null,function*(){return this.abort(),{value:void 0,done:!0}})}}toReadableStream(){return new ds(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}};function nie(n,e){let c=n,{id:t,choices:r,created:i,model:o,system_fingerprint:s}=c,a=Ae(c,["id","choices","created","model","system_fingerprint"]),l=m(w(m({},a),{id:t,choices:r.map(g=>{var _=g,{message:u,finish_reason:d,index:h,logprobs:f}=_,p=Ae(_,["message","finish_reason","index","logprobs"]);if(!d)throw new ve(`missing finish_reason for choice ${h}`);let R=u,{content:y=null,function_call:E,tool_calls:T}=R,A=Ae(R,["content","function_call","tool_calls"]),P=u.role;if(!P)throw new ve(`missing role for choice ${h}`);if(E){let{arguments:W,name:S}=E;if(W==null)throw new ve(`missing function_call.arguments for choice ${h}`);if(!S)throw new ve(`missing function_call.name for choice ${h}`);return w(m({},p),{message:{content:y,function_call:{arguments:W,name:S},role:P,refusal:u.refusal??null},finish_reason:d,index:h,logprobs:f})}return T?w(m({},p),{index:h,finish_reason:d,logprobs:f,message:w(m({},A),{role:P,content:y,refusal:u.refusal??null,tool_calls:T.map((W,S)=>{let q=W,{function:$,type:Z,id:Y}=q,oe=Ae(q,["function","type","id"]),X=$||{},{arguments:F,name:j}=X,H=Ae(X,["arguments","name"]);if(Y==null)throw new ve(`missing choices[${h}].tool_calls[${S}].id
${Tw(n)}`);if(Z==null)throw new ve(`missing choices[${h}].tool_calls[${S}].type
${Tw(n)}`);if(j==null)throw new ve(`missing choices[${h}].tool_calls[${S}].function.name
${Tw(n)}`);if(F==null)throw new ve(`missing choices[${h}].tool_calls[${S}].function.arguments
${Tw(n)}`);return w(m({},oe),{id:Y,type:Z,function:w(m({},H),{name:j,arguments:F})})})})}):w(m({},p),{message:w(m({},A),{content:y,role:P,refusal:u.refusal??null}),finish_reason:d,index:h,logprobs:f})}),created:i,model:o,object:"chat.completion"}),s?{system_fingerprint:s}:{});return jH(l,e)}function Tw(n){return JSON.stringify(n)}var vg=class n extends jc{static fromReadableStream(e){let t=new n(null);return t._run(()=>t._fromReadableStream(e)),t}static runTools(e,t,r){let i=new n(t),o=w(m({},r),{headers:w(m({},r?.headers),{"X-Stainless-Helper-Method":"runTools"})});return i._run(()=>i._runTools(e,t,o)),i}};var da=class extends ne{constructor(){super(...arguments),this.messages=new Fc(this._client)}create(e,t){return this._client.post("/chat/completions",w(m({body:e},t),{stream:e.stream??!1}))}retrieve(e,t){return this._client.get(J`/chat/completions/${e}`,t)}update(e,t,r){return this._client.post(J`/chat/completions/${e}`,m({body:t},r))}list(e={},t){return this._client.getAPIList("/chat/completions",at,m({query:e},t))}delete(e,t){return this._client.delete(J`/chat/completions/${e}`,t)}parse(e,t){return VH(e.tools),this._client.chat.completions.create(e,w(m({},t),{headers:w(m({},t?.headers),{"X-Stainless-Helper-Method":"chat.completions.parse"})}))._thenUnwrap(r=>_g(r,e))}runTools(e,t){return e.stream?vg.runTools(this._client,e,t):bg.runTools(this._client,e,t)}stream(e,t){return jc.createChatCompletion(this._client,e,t)}};da.Messages=Fc;var yg=(()=>{class n extends ne{constructor(){super(...arguments),this.completions=new da(this._client)}}return n.Completions=da,n})();var HH=Symbol("brand.privateNullableHeaders");function*iie(n){if(!n)return;if(HH in n){let{values:r,nulls:i}=n;yield*Ri(r.entries());for(let o of i)yield[o,null];return}let e=!1,t;n instanceof Headers?t=n.entries():wk(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let r of t){let i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");let o=wk(r[1])?r[1]:[r[1]],s=!1;for(let a of o)a!==void 0&&(e&&!s&&(s=!0,yield[i,null]),yield[i,a])}}var fe=n=>{let e=new Headers,t=new Set;for(let r of n){let i=new Set;for(let[o,s]of iie(r)){let a=o.toLowerCase();i.has(a)||(e.delete(o),i.add(a)),s===null?(e.delete(o),t.add(a)):(e.append(o,s),t.delete(a))}}return{[HH]:!0,values:e,nulls:t}};var Of=class extends ne{create(e,t){return this._client.post("/audio/speech",w(m({body:e},t),{headers:fe([{Accept:"application/octet-stream"},t?.headers]),__binaryResponse:!0}))}};var Pf=class extends ne{create(e,t){return this._client.post("/audio/transcriptions",Si(w(m({body:e},t),{stream:e.stream??!1,__metadata:{model:e.model}}),this._client))}};var Nf=class extends ne{create(e,t){return this._client.post("/audio/translations",Si(w(m({body:e},t),{__metadata:{model:e.model}}),this._client))}};var wg=(()=>{class n extends ne{constructor(){super(...arguments),this.transcriptions=new Pf(this._client),this.translations=new Nf(this._client),this.speech=new Of(this._client)}}return n.Transcriptions=Pf,n.Translations=Nf,n.Speech=Of,n})();var Bc=class extends ne{create(e,t){return this._client.post("/batches",m({body:e},t))}retrieve(e,t){return this._client.get(J`/batches/${e}`,t)}list(e={},t){return this._client.getAPIList("/batches",at,m({query:e},t))}cancel(e,t){return this._client.post(J`/batches/${e}/cancel`,t)}};var Ff=class extends ne{create(e,t){return this._client.post("/assistants",w(m({body:e},t),{headers:fe([{"OpenAI-Beta":"assistants=v2"},t?.headers])}))}retrieve(e,t){return this._client.get(J`/assistants/${e}`,w(m({},t),{headers:fe([{"OpenAI-Beta":"assistants=v2"},t?.headers])}))}update(e,t,r){return this._client.post(J`/assistants/${e}`,w(m({body:t},r),{headers:fe([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}list(e={},t){return this._client.getAPIList("/assistants",at,w(m({query:e},t),{headers:fe([{"OpenAI-Beta":"assistants=v2"},t?.headers])}))}delete(e,t){return this._client.delete(J`/assistants/${e}`,w(m({},t),{headers:fe([{"OpenAI-Beta":"assistants=v2"},t?.headers])}))}};var Lf=class extends ne{create(e,t){return this._client.post("/realtime/sessions",w(m({body:e},t),{headers:fe([{"OpenAI-Beta":"assistants=v2"},t?.headers])}))}};var jf=class extends ne{create(e,t){return this._client.post("/realtime/transcription_sessions",w(m({body:e},t),{headers:fe([{"OpenAI-Beta":"assistants=v2"},t?.headers])}))}};var Aw=(()=>{class n extends ne{constructor(){super(...arguments),this.sessions=new Lf(this._client),this.transcriptionSessions=new jf(this._client)}}return n.Sessions=Lf,n.TranscriptionSessions=jf,n})();var Bf=class extends ne{create(e,t,r){return this._client.post(J`/threads/${e}/messages`,w(m({body:t},r),{headers:fe([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}retrieve(e,t,r){let{thread_id:i}=t;return this._client.get(J`/threads/${i}/messages/${e}`,w(m({},r),{headers:fe([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}update(e,t,r){let s=t,{thread_id:i}=s,o=Ae(s,["thread_id"]);return this._client.post(J`/threads/${i}/messages/${e}`,w(m({body:o},r),{headers:fe([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}list(e,t={},r){return this._client.getAPIList(J`/threads/${e}/messages`,at,w(m({query:t},r),{headers:fe([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}delete(e,t,r){let{thread_id:i}=t;return this._client.delete(J`/threads/${i}/messages/${e}`,w(m({},r),{headers:fe([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}};var Vf=class extends ne{retrieve(e,t,r){let a=t,{thread_id:i,run_id:o}=a,s=Ae(a,["thread_id","run_id"]);return this._client.get(J`/threads/${i}/runs/${o}/steps/${e}`,w(m({query:s},r),{headers:fe([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}list(e,t,r){let s=t,{thread_id:i}=s,o=Ae(s,["thread_id"]);return this._client.getAPIList(J`/threads/${i}/runs/${e}/steps`,at,w(m({query:o},r),{headers:fe([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}};var qH=n=>{if(typeof Buffer<"u"){let e=Buffer.from(n,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{let e=atob(n),t=e.length,r=new Uint8Array(t);for(let i=0;i<t;i++)r[i]=e.charCodeAt(i);return Array.from(new Float32Array(r.buffer))}};var bl=n=>{if(typeof globalThis.process<"u")return globalThis.process.env?.[n]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(n)?.trim()};var Er,$c,Jk,hs,kw,ho,Uc,$f,Vc,Ow,Di,Rw,Mw,Eg,xg,Cg,GH,WH,KH,QH,YH,ZH,XH,fa=class extends gl{constructor(){super(...arguments),Er.add(this),Jk.set(this,[]),hs.set(this,{}),kw.set(this,{}),ho.set(this,void 0),Uc.set(this,void 0),$f.set(this,void 0),Vc.set(this,void 0),Ow.set(this,void 0),Di.set(this,void 0),Rw.set(this,void 0),Mw.set(this,void 0),Eg.set(this,void 0)}[(Jk=new WeakMap,hs=new WeakMap,kw=new WeakMap,ho=new WeakMap,Uc=new WeakMap,$f=new WeakMap,Vc=new WeakMap,Ow=new WeakMap,Di=new WeakMap,Rw=new WeakMap,Mw=new WeakMap,Eg=new WeakMap,Er=new WeakSet,Symbol.asyncIterator)](){let e=[],t=[],r=!1;return this.on("event",i=>{let o=t.shift();o?o.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(let i of t)i.resolve(void 0);t.length=0}),this.on("abort",i=>{r=!0;for(let o of t)o.reject(i);t.length=0}),this.on("error",i=>{r=!0;for(let o of t)o.reject(i);t.length=0}),{next:()=>v(this,null,function*(){return e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((o,s)=>t.push({resolve:o,reject:s})).then(o=>o?{value:o,done:!1}:{value:void 0,done:!0})}),return:()=>v(this,null,function*(){return this.abort(),{value:void 0,done:!0}})}}static fromReadableStream(e){let t=new $c;return t._run(()=>t._fromReadableStream(e)),t}_fromReadableStream(e,t){return v(this,null,function*(){let r=t?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();let i=ds.fromReadableStream(e,this.controller);try{for(var o=Ee(i),s,a,l;s=!(a=yield o.next()).done;s=!1){let c=a.value;N(this,Er,"m",xg).call(this,c)}}catch{l=[a]}finally{try{s&&(a=o.return)&&(yield a.call(o))}finally{if(l)throw l[0]}}if(i.controller.signal?.aborted)throw new Sn;return this._addRun(N(this,Er,"m",Cg).call(this))})}toReadableStream(){return new ds(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,r,i){let o=new $c;return o._run(()=>o._runToolAssistantStream(e,t,r,w(m({},i),{headers:w(m({},i?.headers),{"X-Stainless-Helper-Method":"stream"})}))),o}_createToolAssistantStream(e,t,r,i){return v(this,null,function*(){let o=i?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));let s=w(m({},r),{stream:!0}),a=yield e.submitToolOutputs(t,s,w(m({},i),{signal:this.controller.signal}));this._connected();try{for(var l=Ee(a),c,u,d;c=!(u=yield l.next()).done;c=!1){let h=u.value;N(this,Er,"m",xg).call(this,h)}}catch{d=[u]}finally{try{c&&(u=l.return)&&(yield u.call(l))}finally{if(d)throw d[0]}}if(a.controller.signal?.aborted)throw new Sn;return this._addRun(N(this,Er,"m",Cg).call(this))})}static createThreadAssistantStream(e,t,r){let i=new $c;return i._run(()=>i._threadAssistantStream(e,t,w(m({},r),{headers:w(m({},r?.headers),{"X-Stainless-Helper-Method":"stream"})}))),i}static createAssistantStream(e,t,r,i){let o=new $c;return o._run(()=>o._runAssistantStream(e,t,r,w(m({},i),{headers:w(m({},i?.headers),{"X-Stainless-Helper-Method":"stream"})}))),o}currentEvent(){return N(this,Rw,"f")}currentRun(){return N(this,Mw,"f")}currentMessageSnapshot(){return N(this,ho,"f")}currentRunStepSnapshot(){return N(this,Eg,"f")}finalRunSteps(){return v(this,null,function*(){return yield this.done(),Object.values(N(this,hs,"f"))})}finalMessages(){return v(this,null,function*(){return yield this.done(),Object.values(N(this,kw,"f"))})}finalRun(){return v(this,null,function*(){if(yield this.done(),!N(this,Uc,"f"))throw Error("Final run was not received.");return N(this,Uc,"f")})}_createThreadAssistantStream(e,t,r){return v(this,null,function*(){let i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));let o=w(m({},t),{stream:!0}),s=yield e.createAndRun(o,w(m({},r),{signal:this.controller.signal}));this._connected();try{for(var a=Ee(s),l,c,u;l=!(c=yield a.next()).done;l=!1){let d=c.value;N(this,Er,"m",xg).call(this,d)}}catch{u=[c]}finally{try{l&&(c=a.return)&&(yield c.call(a))}finally{if(u)throw u[0]}}if(s.controller.signal?.aborted)throw new Sn;return this._addRun(N(this,Er,"m",Cg).call(this))})}_createAssistantStream(e,t,r,i){return v(this,null,function*(){let o=i?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));let s=w(m({},r),{stream:!0}),a=yield e.create(t,s,w(m({},i),{signal:this.controller.signal}));this._connected();try{for(var l=Ee(a),c,u,d;c=!(u=yield l.next()).done;c=!1){let h=u.value;N(this,Er,"m",xg).call(this,h)}}catch{d=[u]}finally{try{c&&(u=l.return)&&(yield u.call(l))}finally{if(d)throw d[0]}}if(a.controller.signal?.aborted)throw new Sn;return this._addRun(N(this,Er,"m",Cg).call(this))})}static accumulateDelta(e,t){for(let[r,i]of Object.entries(t)){if(!e.hasOwnProperty(r)){e[r]=i;continue}let o=e[r];if(o==null){e[r]=i;continue}if(r==="index"||r==="type"){e[r]=i;continue}if(typeof o=="string"&&typeof i=="string")o+=i;else if(typeof o=="number"&&typeof i=="number")o+=i;else if(og(o)&&og(i))o=this.accumulateDelta(o,i);else if(Array.isArray(o)&&Array.isArray(i)){if(o.every(s=>typeof s=="string"||typeof s=="number")){o.push(...i);continue}for(let s of i){if(!og(s))throw new Error(`Expected array delta entry to be an object but got: ${s}`);let a=s.index;if(a==null)throw console.error(s),new Error("Expected array delta entry to have an `index` property");if(typeof a!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${a}`);let l=o[a];l==null?o.push(s):o[a]=this.accumulateDelta(l,s)}continue}else throw Error(`Unhandled record type: ${r}, deltaValue: ${i}, accValue: ${o}`);e[r]=o}return e}_addRun(e){return e}_threadAssistantStream(e,t,r){return v(this,null,function*(){return yield this._createThreadAssistantStream(t,e,r)})}_runAssistantStream(e,t,r,i){return v(this,null,function*(){return yield this._createAssistantStream(t,e,r,i)})}_runToolAssistantStream(e,t,r,i){return v(this,null,function*(){return yield this._createToolAssistantStream(t,e,r,i)})}};$c=fa,xg=function(e){if(!this.ended)switch(Te(this,Rw,e,"f"),N(this,Er,"m",KH).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":N(this,Er,"m",XH).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":N(this,Er,"m",WH).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":N(this,Er,"m",GH).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier");default:}},Cg=function(){if(this.ended)throw new ve("stream has ended, this shouldn't happen");if(!N(this,Uc,"f"))throw Error("Final run has not been received");return N(this,Uc,"f")},GH=function(e){let[t,r]=N(this,Er,"m",YH).call(this,e,N(this,ho,"f"));Te(this,ho,t,"f"),N(this,kw,"f")[t.id]=t;for(let i of r){let o=t.content[i.index];o?.type=="text"&&this._emit("textCreated",o.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(let i of e.data.delta.content){if(i.type=="text"&&i.text){let o=i.text,s=t.content[i.index];if(s&&s.type=="text")this._emit("textDelta",o,s.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(i.index!=N(this,$f,"f")){if(N(this,Vc,"f"))switch(N(this,Vc,"f").type){case"text":this._emit("textDone",N(this,Vc,"f").text,N(this,ho,"f"));break;case"image_file":this._emit("imageFileDone",N(this,Vc,"f").image_file,N(this,ho,"f"));break}Te(this,$f,i.index,"f")}Te(this,Vc,t.content[i.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(N(this,$f,"f")!==void 0){let i=e.data.content[N(this,$f,"f")];if(i)switch(i.type){case"image_file":this._emit("imageFileDone",i.image_file,N(this,ho,"f"));break;case"text":this._emit("textDone",i.text,N(this,ho,"f"));break}}N(this,ho,"f")&&this._emit("messageDone",e.data),Te(this,ho,void 0,"f")}},WH=function(e){let t=N(this,Er,"m",QH).call(this,e);switch(Te(this,Eg,t,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":let r=e.data.delta;if(r.step_details&&r.step_details.type=="tool_calls"&&r.step_details.tool_calls&&t.step_details.type=="tool_calls")for(let o of r.step_details.tool_calls)o.index==N(this,Ow,"f")?this._emit("toolCallDelta",o,t.step_details.tool_calls[o.index]):(N(this,Di,"f")&&this._emit("toolCallDone",N(this,Di,"f")),Te(this,Ow,o.index,"f"),Te(this,Di,t.step_details.tool_calls[o.index],"f"),N(this,Di,"f")&&this._emit("toolCallCreated",N(this,Di,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Te(this,Eg,void 0,"f"),e.data.step_details.type=="tool_calls"&&N(this,Di,"f")&&(this._emit("toolCallDone",N(this,Di,"f")),Te(this,Di,void 0,"f")),this._emit("runStepDone",e.data,t);break;case"thread.run.step.in_progress":break}},KH=function(e){N(this,Jk,"f").push(e),this._emit("event",e)},QH=function(e){switch(e.event){case"thread.run.step.created":return N(this,hs,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=N(this,hs,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){let i=$c.accumulateDelta(t,r.delta);N(this,hs,"f")[e.data.id]=i}return N(this,hs,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":N(this,hs,"f")[e.data.id]=e.data;break}if(N(this,hs,"f")[e.data.id])return N(this,hs,"f")[e.data.id];throw new Error("No snapshot available")},YH=function(e,t){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let i=e.data;if(i.delta.content)for(let o of i.delta.content)if(o.index in t.content){let s=t.content[o.index];t.content[o.index]=N(this,Er,"m",ZH).call(this,o,s)}else t.content[o.index]=o,r.push(o);return[t,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},ZH=function(e,t){return $c.accumulateDelta(t,e)},XH=function(e){switch(Te(this,Mw,e.data,"f"),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":Te(this,Uc,e.data,"f"),N(this,Di,"f")&&(this._emit("toolCallDone",N(this,Di,"f")),Te(this,Di,void 0,"f"));break;case"thread.run.cancelling":break}};var Pw=(()=>{class n extends ne{constructor(){super(...arguments),this.steps=new Vf(this._client)}create(t,r,i){let a=r,{include:o}=a,s=Ae(a,["include"]);return this._client.post(J`/threads/${t}/runs`,w(m({query:{include:o},body:s},i),{headers:fe([{"OpenAI-Beta":"assistants=v2"},i?.headers]),stream:r.stream??!1}))}retrieve(t,r,i){let{thread_id:o}=r;return this._client.get(J`/threads/${o}/runs/${t}`,w(m({},i),{headers:fe([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}update(t,r,i){let a=r,{thread_id:o}=a,s=Ae(a,["thread_id"]);return this._client.post(J`/threads/${o}/runs/${t}`,w(m({body:s},i),{headers:fe([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}list(t,r={},i){return this._client.getAPIList(J`/threads/${t}/runs`,at,w(m({query:r},i),{headers:fe([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}cancel(t,r,i){let{thread_id:o}=r;return this._client.post(J`/threads/${o}/runs/${t}/cancel`,w(m({},i),{headers:fe([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}createAndPoll(t,r,i){return v(this,null,function*(){let o=yield this.create(t,r,i);return yield this.poll(o.id,{thread_id:t},i)})}createAndStream(t,r,i){return fa.createAssistantStream(t,this._client.beta.threads.runs,r,i)}poll(t,r,i){return v(this,null,function*(){let o=fe([i?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":i?.pollIntervalMs?.toString()??void 0}]);for(;;){let{data:s,response:a}=yield this.retrieve(t,r,w(m({},i),{headers:m(m({},i?.headers),o)})).withResponse();switch(s.status){case"queued":case"in_progress":case"cancelling":let l=5e3;if(i?.pollIntervalMs)l=i.pollIntervalMs;else{let c=a.headers.get("openai-poll-after-ms");if(c){let u=parseInt(c);isNaN(u)||(l=u)}}yield cs(l);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return s}}})}stream(t,r,i){return fa.createAssistantStream(t,this._client.beta.threads.runs,r,i)}submitToolOutputs(t,r,i){let a=r,{thread_id:o}=a,s=Ae(a,["thread_id"]);return this._client.post(J`/threads/${o}/runs/${t}/submit_tool_outputs`,w(m({body:s},i),{headers:fe([{"OpenAI-Beta":"assistants=v2"},i?.headers]),stream:r.stream??!1}))}submitToolOutputsAndPoll(t,r,i){return v(this,null,function*(){let o=yield this.submitToolOutputs(t,r,i);return yield this.poll(o.id,r,i)})}submitToolOutputsStream(t,r,i){return fa.createToolAssistantStream(t,this._client.beta.threads.runs,r,i)}}return n.Steps=Vf,n})();var Nw=(()=>{class n extends ne{constructor(){super(...arguments),this.runs=new Pw(this._client),this.messages=new Bf(this._client)}create(t={},r){return this._client.post("/threads",w(m({body:t},r),{headers:fe([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}retrieve(t,r){return this._client.get(J`/threads/${t}`,w(m({},r),{headers:fe([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}update(t,r,i){return this._client.post(J`/threads/${t}`,w(m({body:r},i),{headers:fe([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}delete(t,r){return this._client.delete(J`/threads/${t}`,w(m({},r),{headers:fe([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}createAndRun(t,r){return this._client.post("/threads/runs",w(m({body:t},r),{headers:fe([{"OpenAI-Beta":"assistants=v2"},r?.headers]),stream:t.stream??!1}))}createAndRunPoll(t,r){return v(this,null,function*(){let i=yield this.createAndRun(t,r);return yield this.runs.poll(i.id,{thread_id:i.thread_id},r)})}createAndRunStream(t,r){return fa.createThreadAssistantStream(t,this._client.beta.threads,r)}}return n.Runs=Pw,n.Messages=Bf,n})();var Ig=(()=>{class n extends ne{constructor(){super(...arguments),this.realtime=new Aw(this._client),this.assistants=new Ff(this._client),this.threads=new Nw(this._client)}}return n.Realtime=Aw,n.Assistants=Ff,n.Threads=Nw,n})();var zc=class extends ne{create(e,t){return this._client.post("/completions",w(m({body:e},t),{stream:e.stream??!1}))}};var Uf=class extends ne{retrieve(e,t,r){let{container_id:i}=t;return this._client.get(J`/containers/${i}/files/${e}/content`,w(m({},r),{headers:fe([{Accept:"application/binary"},r?.headers]),__binaryResponse:!0}))}};var Fw=(()=>{class n extends ne{constructor(){super(...arguments),this.content=new Uf(this._client)}create(t,r,i){return this._client.post(J`/containers/${t}/files`,Si(m({body:r},i),this._client))}retrieve(t,r,i){let{container_id:o}=r;return this._client.get(J`/containers/${o}/files/${t}`,i)}list(t,r={},i){return this._client.getAPIList(J`/containers/${t}/files`,at,m({query:r},i))}delete(t,r,i){let{container_id:o}=r;return this._client.delete(J`/containers/${o}/files/${t}`,w(m({},i),{headers:fe([{Accept:"*/*"},i?.headers])}))}}return n.Content=Uf,n})();var Sg=(()=>{class n extends ne{constructor(){super(...arguments),this.files=new Fw(this._client)}create(t,r){return this._client.post("/containers",m({body:t},r))}retrieve(t,r){return this._client.get(J`/containers/${t}`,r)}list(t={},r){return this._client.getAPIList("/containers",at,m({query:t},r))}delete(t,r){return this._client.delete(J`/containers/${t}`,w(m({},r),{headers:fe([{Accept:"*/*"},r?.headers])}))}}return n.Files=Fw,n})();var Hc=class extends ne{create(e,t){let r=!!e.encoding_format,i=r?e.encoding_format:"base64";r&&Pn(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);let o=this._client.post("/embeddings",m({body:w(m({},e),{encoding_format:i})},t));return r?o:(Pn(this._client).debug("embeddings/decoding base64 embeddings from base64"),o._thenUnwrap(s=>(s&&s.data&&s.data.forEach(a=>{let l=a.embedding;a.embedding=qH(l)}),s)))}};var zf=class extends ne{retrieve(e,t,r){let{eval_id:i,run_id:o}=t;return this._client.get(J`/evals/${i}/runs/${o}/output_items/${e}`,r)}list(e,t,r){let s=t,{eval_id:i}=s,o=Ae(s,["eval_id"]);return this._client.getAPIList(J`/evals/${i}/runs/${e}/output_items`,at,m({query:o},r))}};var Lw=(()=>{class n extends ne{constructor(){super(...arguments),this.outputItems=new zf(this._client)}create(t,r,i){return this._client.post(J`/evals/${t}/runs`,m({body:r},i))}retrieve(t,r,i){let{eval_id:o}=r;return this._client.get(J`/evals/${o}/runs/${t}`,i)}list(t,r={},i){return this._client.getAPIList(J`/evals/${t}/runs`,at,m({query:r},i))}delete(t,r,i){let{eval_id:o}=r;return this._client.delete(J`/evals/${o}/runs/${t}`,i)}cancel(t,r,i){let{eval_id:o}=r;return this._client.post(J`/evals/${o}/runs/${t}`,i)}}return n.OutputItems=zf,n})();var Dg=(()=>{class n extends ne{constructor(){super(...arguments),this.runs=new Lw(this._client)}create(t,r){return this._client.post("/evals",m({body:t},r))}retrieve(t,r){return this._client.get(J`/evals/${t}`,r)}update(t,r,i){return this._client.post(J`/evals/${t}`,m({body:r},i))}list(t={},r){return this._client.getAPIList("/evals",at,m({query:t},r))}delete(t,r){return this._client.delete(J`/evals/${t}`,r)}}return n.Runs=Lw,n})();var qc=class extends ne{create(e,t){return this._client.post("/files",Si(m({body:e},t),this._client))}retrieve(e,t){return this._client.get(J`/files/${e}`,t)}list(e={},t){return this._client.getAPIList("/files",at,m({query:e},t))}delete(e,t){return this._client.delete(J`/files/${e}`,t)}content(e,t){return this._client.get(J`/files/${e}/content`,w(m({},t),{headers:fe([{Accept:"application/binary"},t?.headers]),__binaryResponse:!0}))}waitForProcessing(i){return v(this,arguments,function*(e,{pollInterval:t=5e3,maxWait:r=30*60*1e3}={}){let o=new Set(["processed","error","deleted"]),s=Date.now(),a=yield this.retrieve(e);for(;!a.status||!o.has(a.status);)if(yield cs(t),a=yield this.retrieve(e),Date.now()-s>r)throw new as({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return a})}};var Hf=class extends ne{};var qf=class extends ne{run(e,t){return this._client.post("/fine_tuning/alpha/graders/run",m({body:e},t))}validate(e,t){return this._client.post("/fine_tuning/alpha/graders/validate",m({body:e},t))}};var jw=(()=>{class n extends ne{constructor(){super(...arguments),this.graders=new qf(this._client)}}return n.Graders=qf,n})();var Gf=class extends ne{create(e,t,r){return this._client.getAPIList(J`/fine_tuning/checkpoints/${e}/permissions`,fs,m({body:t,method:"post"},r))}retrieve(e,t={},r){return this._client.get(J`/fine_tuning/checkpoints/${e}/permissions`,m({query:t},r))}delete(e,t,r){let{fine_tuned_model_checkpoint:i}=t;return this._client.delete(J`/fine_tuning/checkpoints/${i}/permissions/${e}`,r)}};var Bw=(()=>{class n extends ne{constructor(){super(...arguments),this.permissions=new Gf(this._client)}}return n.Permissions=Gf,n})();var Wf=class extends ne{list(e,t={},r){return this._client.getAPIList(J`/fine_tuning/jobs/${e}/checkpoints`,at,m({query:t},r))}};var Vw=(()=>{class n extends ne{constructor(){super(...arguments),this.checkpoints=new Wf(this._client)}create(t,r){return this._client.post("/fine_tuning/jobs",m({body:t},r))}retrieve(t,r){return this._client.get(J`/fine_tuning/jobs/${t}`,r)}list(t={},r){return this._client.getAPIList("/fine_tuning/jobs",at,m({query:t},r))}cancel(t,r){return this._client.post(J`/fine_tuning/jobs/${t}/cancel`,r)}listEvents(t,r={},i){return this._client.getAPIList(J`/fine_tuning/jobs/${t}/events`,at,m({query:r},i))}pause(t,r){return this._client.post(J`/fine_tuning/jobs/${t}/pause`,r)}resume(t,r){return this._client.post(J`/fine_tuning/jobs/${t}/resume`,r)}}return n.Checkpoints=Wf,n})();var Tg=(()=>{class n extends ne{constructor(){super(...arguments),this.methods=new Hf(this._client),this.jobs=new Vw(this._client),this.checkpoints=new Bw(this._client),this.alpha=new jw(this._client)}}return n.Methods=Hf,n.Jobs=Vw,n.Checkpoints=Bw,n.Alpha=jw,n})();var Kf=class extends ne{};var Ag=(()=>{class n extends ne{constructor(){super(...arguments),this.graderModels=new Kf(this._client)}}return n.GraderModels=Kf,n})();var Gc=class extends ne{createVariation(e,t){return this._client.post("/images/variations",Si(m({body:e},t),this._client))}edit(e,t){return this._client.post("/images/edits",Si(w(m({body:e},t),{stream:e.stream??!1}),this._client))}generate(e,t){return this._client.post("/images/generations",w(m({body:e},t),{stream:e.stream??!1}))}};var Wc=class extends ne{retrieve(e,t){return this._client.get(J`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",fs,e)}delete(e,t){return this._client.delete(J`/models/${e}`,t)}};var Kc=class extends ne{create(e,t){return this._client.post("/moderations",m({body:e},t))}};function JH(n,e){return!e||!Aie(e)?w(m({},n),{output_parsed:null,output:n.output.map(t=>t.type==="function_call"?w(m({},t),{parsed_arguments:null}):t.type==="message"?w(m({},t),{content:t.content.map(r=>w(m({},r),{parsed:null}))}):t)}):eR(n,e)}function eR(n,e){let t=n.output.map(i=>{if(i.type==="function_call")return w(m({},i),{parsed_arguments:Mie(e,i)});if(i.type==="message"){let o=i.content.map(s=>s.type==="output_text"?w(m({},s),{parsed:Tie(e,s.text)}):s);return w(m({},i),{content:o})}return i}),r=Object.assign({},n,{output:t});return Object.getOwnPropertyDescriptor(n,"output_text")||$w(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(let i of r.output)if(i.type==="message"){for(let o of i.content)if(o.type==="output_text"&&o.parsed!==null)return o.parsed}return null}}),r}function Tie(n,e){return n.text?.format?.type!=="json_schema"?null:"$parseRaw"in n.text?.format?(n.text?.format).$parseRaw(e):JSON.parse(e)}function Aie(n){return!!gg(n.text?.format)}function kie(n){return n?.$brand==="auto-parseable-tool"}function Rie(n,e){return n.find(t=>t.type==="function"&&t.name===e)}function Mie(n,e){let t=Rie(n.tools??[],e.name);return w(m(m({},e),e),{parsed_arguments:kie(t)?t.$parseRaw(e.arguments):t?.strict?JSON.parse(e.arguments):null})}function $w(n){let e=[];for(let t of n.output)if(t.type==="message")for(let r of t.content)r.type==="output_text"&&e.push(r.text);n.output_text=e.join("")}var Qf,Uw,vl,zw,e3,t3,n3,r3,Hw=class n extends gl{constructor(e){super(),Qf.add(this),Uw.set(this,void 0),vl.set(this,void 0),zw.set(this,void 0),Te(this,Uw,e,"f")}static createResponse(e,t,r){let i=new n(t);return i._run(()=>i._createOrRetrieveResponse(e,t,w(m({},r),{headers:w(m({},r?.headers),{"X-Stainless-Helper-Method":"stream"})}))),i}_createOrRetrieveResponse(e,t,r){return v(this,null,function*(){let i=r?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),N(this,Qf,"m",e3).call(this);let o,s=null;"response_id"in t?(o=yield e.responses.retrieve(t.response_id,{stream:!0},w(m({},r),{signal:this.controller.signal,stream:!0})),s=t.starting_after??null):o=yield e.responses.create(w(m({},t),{stream:!0}),w(m({},r),{signal:this.controller.signal})),this._connected();try{for(var a=Ee(o),l,c,u;l=!(c=yield a.next()).done;l=!1){let d=c.value;N(this,Qf,"m",t3).call(this,d,s)}}catch{u=[c]}finally{try{l&&(c=a.return)&&(yield c.call(a))}finally{if(u)throw u[0]}}if(o.controller.signal?.aborted)throw new Sn;return N(this,Qf,"m",n3).call(this)})}[(Uw=new WeakMap,vl=new WeakMap,zw=new WeakMap,Qf=new WeakSet,e3=function(){this.ended||Te(this,vl,void 0,"f")},t3=function(t,r){if(this.ended)return;let i=(s,a)=>{(r==null||a.sequence_number>r)&&this._emit(s,a)},o=N(this,Qf,"m",r3).call(this,t);switch(i("event",t),t.type){case"response.output_text.delta":{let s=o.output[t.output_index];if(!s)throw new ve(`missing output at index ${t.output_index}`);if(s.type==="message"){let a=s.content[t.content_index];if(!a)throw new ve(`missing content at index ${t.content_index}`);if(a.type!=="output_text")throw new ve(`expected content to be 'output_text', got ${a.type}`);i("response.output_text.delta",w(m({},t),{snapshot:a.text}))}break}case"response.function_call_arguments.delta":{let s=o.output[t.output_index];if(!s)throw new ve(`missing output at index ${t.output_index}`);s.type==="function_call"&&i("response.function_call_arguments.delta",w(m({},t),{snapshot:s.arguments}));break}default:i(t.type,t);break}},n3=function(){if(this.ended)throw new ve("stream has ended, this shouldn't happen");let t=N(this,vl,"f");if(!t)throw new ve("request ended without sending any events");Te(this,vl,void 0,"f");let r=Oie(t,N(this,Uw,"f"));return Te(this,zw,r,"f"),r},r3=function(t){let r=N(this,vl,"f");if(!r){if(t.type!=="response.created")throw new ve(`When snapshot hasn't been set yet, expected 'response.created' event, got ${t.type}`);return r=Te(this,vl,t.response,"f"),r}switch(t.type){case"response.output_item.added":{r.output.push(t.item);break}case"response.content_part.added":{let i=r.output[t.output_index];if(!i)throw new ve(`missing output at index ${t.output_index}`);i.type==="message"&&i.content.push(t.part);break}case"response.output_text.delta":{let i=r.output[t.output_index];if(!i)throw new ve(`missing output at index ${t.output_index}`);if(i.type==="message"){let o=i.content[t.content_index];if(!o)throw new ve(`missing content at index ${t.content_index}`);if(o.type!=="output_text")throw new ve(`expected content to be 'output_text', got ${o.type}`);o.text+=t.delta}break}case"response.function_call_arguments.delta":{let i=r.output[t.output_index];if(!i)throw new ve(`missing output at index ${t.output_index}`);i.type==="function_call"&&(i.arguments+=t.delta);break}case"response.completed":{Te(this,vl,t.response,"f");break}}return r},Symbol.asyncIterator)](){let e=[],t=[],r=!1;return this.on("event",i=>{let o=t.shift();o?o.resolve(i):e.push(i)}),this.on("end",()=>{r=!0;for(let i of t)i.resolve(void 0);t.length=0}),this.on("abort",i=>{r=!0;for(let o of t)o.reject(i);t.length=0}),this.on("error",i=>{r=!0;for(let o of t)o.reject(i);t.length=0}),{next:()=>v(this,null,function*(){return e.length?{value:e.shift(),done:!1}:r?{value:void 0,done:!0}:new Promise((o,s)=>t.push({resolve:o,reject:s})).then(o=>o?{value:o,done:!1}:{value:void 0,done:!0})}),return:()=>v(this,null,function*(){return this.abort(),{value:void 0,done:!0}})}}finalResponse(){return v(this,null,function*(){yield this.done();let e=N(this,zw,"f");if(!e)throw new ve("stream ended without producing a ChatCompletion");return e})}};function Oie(n,e){return JH(n,e)}var Yf=class extends ne{list(e,t={},r){return this._client.getAPIList(J`/responses/${e}/input_items`,at,m({query:t},r))}};var kg=(()=>{class n extends ne{constructor(){super(...arguments),this.inputItems=new Yf(this._client)}create(t,r){return this._client.post("/responses",w(m({body:t},r),{stream:t.stream??!1}))._thenUnwrap(i=>("object"in i&&i.object==="response"&&$w(i),i))}retrieve(t,r={},i){return this._client.get(J`/responses/${t}`,w(m({query:r},i),{stream:r?.stream??!1}))._thenUnwrap(o=>("object"in o&&o.object==="response"&&$w(o),o))}delete(t,r){return this._client.delete(J`/responses/${t}`,w(m({},r),{headers:fe([{Accept:"*/*"},r?.headers])}))}parse(t,r){return this._client.responses.create(t,r)._thenUnwrap(i=>eR(i,t))}stream(t,r){return Hw.createResponse(this._client,t,r)}cancel(t,r){return this._client.post(J`/responses/${t}/cancel`,r)}}return n.InputItems=Yf,n})();var Zf=class extends ne{create(e,t,r){return this._client.post(J`/uploads/${e}/parts`,Si(m({body:t},r),this._client))}};var Rg=(()=>{class n extends ne{constructor(){super(...arguments),this.parts=new Zf(this._client)}create(t,r){return this._client.post("/uploads",m({body:t},r))}cancel(t,r){return this._client.post(J`/uploads/${t}/cancel`,r)}complete(t,r,i){return this._client.post(J`/uploads/${t}/complete`,m({body:r},i))}}return n.Parts=Zf,n})();var i3=n=>v(null,null,function*(){let e=yield Promise.allSettled(n),t=e.filter(i=>i.status==="rejected");if(t.length){for(let i of t)console.error(i.reason);throw new Error(`${t.length} promise(s) failed - see the above errors`)}let r=[];for(let i of e)i.status==="fulfilled"&&r.push(i.value);return r});var Xf=class extends ne{create(e,t,r){return this._client.post(J`/vector_stores/${e}/file_batches`,w(m({body:t},r),{headers:fe([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}retrieve(e,t,r){let{vector_store_id:i}=t;return this._client.get(J`/vector_stores/${i}/file_batches/${e}`,w(m({},r),{headers:fe([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}cancel(e,t,r){let{vector_store_id:i}=t;return this._client.post(J`/vector_stores/${i}/file_batches/${e}/cancel`,w(m({},r),{headers:fe([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}createAndPoll(e,t,r){return v(this,null,function*(){let i=yield this.create(e,t);return yield this.poll(e,i.id,r)})}listFiles(e,t,r){let s=t,{vector_store_id:i}=s,o=Ae(s,["vector_store_id"]);return this._client.getAPIList(J`/vector_stores/${i}/file_batches/${e}/files`,at,w(m({query:o},r),{headers:fe([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}poll(e,t,r){return v(this,null,function*(){let i=fe([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){let{data:o,response:s}=yield this.retrieve(t,{vector_store_id:e},w(m({},r),{headers:i})).withResponse();switch(o.status){case"in_progress":let a=5e3;if(r?.pollIntervalMs)a=r.pollIntervalMs;else{let l=s.headers.get("openai-poll-after-ms");if(l){let c=parseInt(l);isNaN(c)||(a=c)}}yield cs(a);break;case"failed":case"cancelled":case"completed":return o}}})}uploadAndPoll(o,s,a){return v(this,arguments,function*(e,{files:t,fileIds:r=[]},i){if(t==null||t.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");let l=i?.maxConcurrency??5,c=Math.min(l,t.length),u=this._client,d=t.values(),h=[...r];function f(g){return v(this,null,function*(){for(let _ of g){let y=yield u.files.create({file:_,purpose:"assistants"},i);h.push(y.id)}})}let p=Array(c).fill(d).map(f);return yield i3(p),yield this.createAndPoll(e,{file_ids:h})})}};var Jf=class extends ne{create(e,t,r){return this._client.post(J`/vector_stores/${e}/files`,w(m({body:t},r),{headers:fe([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}retrieve(e,t,r){let{vector_store_id:i}=t;return this._client.get(J`/vector_stores/${i}/files/${e}`,w(m({},r),{headers:fe([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}update(e,t,r){let s=t,{vector_store_id:i}=s,o=Ae(s,["vector_store_id"]);return this._client.post(J`/vector_stores/${i}/files/${e}`,w(m({body:o},r),{headers:fe([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}list(e,t={},r){return this._client.getAPIList(J`/vector_stores/${e}/files`,at,w(m({query:t},r),{headers:fe([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}delete(e,t,r){let{vector_store_id:i}=t;return this._client.delete(J`/vector_stores/${i}/files/${e}`,w(m({},r),{headers:fe([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}createAndPoll(e,t,r){return v(this,null,function*(){let i=yield this.create(e,t,r);return yield this.poll(e,i.id,r)})}poll(e,t,r){return v(this,null,function*(){let i=fe([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){let o=yield this.retrieve(t,{vector_store_id:e},w(m({},r),{headers:i})).withResponse(),s=o.data;switch(s.status){case"in_progress":let a=5e3;if(r?.pollIntervalMs)a=r.pollIntervalMs;else{let l=o.response.headers.get("openai-poll-after-ms");if(l){let c=parseInt(l);isNaN(c)||(a=c)}}yield cs(a);break;case"failed":case"completed":return s}}})}upload(e,t,r){return v(this,null,function*(){let i=yield this._client.files.create({file:t,purpose:"assistants"},r);return this.create(e,{file_id:i.id},r)})}uploadAndPoll(e,t,r){return v(this,null,function*(){let i=yield this.upload(e,t,r);return yield this.poll(e,i.id,r)})}content(e,t,r){let{vector_store_id:i}=t;return this._client.getAPIList(J`/vector_stores/${i}/files/${e}/content`,fs,w(m({},r),{headers:fe([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}};var Mg=(()=>{class n extends ne{constructor(){super(...arguments),this.files=new Jf(this._client),this.fileBatches=new Xf(this._client)}create(t,r){return this._client.post("/vector_stores",w(m({body:t},r),{headers:fe([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}retrieve(t,r){return this._client.get(J`/vector_stores/${t}`,w(m({},r),{headers:fe([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}update(t,r,i){return this._client.post(J`/vector_stores/${t}`,w(m({body:r},i),{headers:fe([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}list(t={},r){return this._client.getAPIList("/vector_stores",at,w(m({query:t},r),{headers:fe([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}delete(t,r){return this._client.delete(J`/vector_stores/${t}`,w(m({},r),{headers:fe([{"OpenAI-Beta":"assistants=v2"},r?.headers])}))}search(t,r,i){return this._client.getAPIList(J`/vector_stores/${t}/search`,fs,w(m({body:r,method:"post"},i),{headers:fe([{"OpenAI-Beta":"assistants=v2"},i?.headers])}))}}return n.Files=Jf,n.FileBatches=Xf,n})();var eh,o3,qw,Qc=class extends ne{constructor(){super(...arguments),eh.add(this)}unwrap(o,s){return v(this,arguments,function*(e,t,r=this._client.webhookSecret,i=300){return yield this.verifySignature(e,t,r,i),JSON.parse(e)})}verifySignature(o,s){return v(this,arguments,function*(e,t,r=this._client.webhookSecret,i=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");N(this,eh,"m",o3).call(this,r);let a=fe([t]).values,l=N(this,eh,"m",qw).call(this,a,"webhook-signature"),c=N(this,eh,"m",qw).call(this,a,"webhook-timestamp"),u=N(this,eh,"m",qw).call(this,a,"webhook-id"),d=parseInt(c,10);if(isNaN(d))throw new ls("Invalid webhook timestamp format");let h=Math.floor(Date.now()/1e3);if(h-d>i)throw new ls("Webhook timestamp is too old");if(d>h+i)throw new ls("Webhook timestamp is too new");let f=l.split(" ").map(y=>y.startsWith("v1,")?y.substring(3):y),p=r.startsWith("whsec_")?Buffer.from(r.replace("whsec_",""),"base64"):Buffer.from(r,"utf-8"),g=u?`${u}.${c}.${e}`:`${c}.${e}`,_=yield crypto.subtle.importKey("raw",p,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(let y of f)try{let E=Buffer.from(y,"base64");if(yield crypto.subtle.verify("HMAC",_,E,new TextEncoder().encode(g)))return}catch{continue}throw new ls("The given webhook signature does not match the expected signature")})}};eh=new WeakSet,o3=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},qw=function(e,t){if(!e)throw new Error("Headers are required");let r=e.get(t);if(r==null)throw new Error(`Missing required header: ${t}`);return r};var tR,nR,Gw,s3,ze=class{constructor(a={}){var l=a,{baseURL:e=bl("OPENAI_BASE_URL"),apiKey:t=bl("OPENAI_API_KEY"),organization:r=bl("OPENAI_ORG_ID")??null,project:i=bl("OPENAI_PROJECT_ID")??null,webhookSecret:o=bl("OPENAI_WEBHOOK_SECRET")??null}=l,s=Ae(l,["baseURL","apiKey","organization","project","webhookSecret"]);if(tR.add(this),Gw.set(this,void 0),this.completions=new zc(this),this.chat=new yg(this),this.embeddings=new Hc(this),this.files=new qc(this),this.images=new Gc(this),this.audio=new wg(this),this.moderations=new Kc(this),this.models=new Wc(this),this.fineTuning=new Tg(this),this.graders=new Ag(this),this.vectorStores=new Mg(this),this.webhooks=new Qc(this),this.beta=new Ig(this),this.batches=new Bc(this),this.uploads=new Rg(this),this.responses=new kg(this),this.evals=new Dg(this),this.containers=new Sg(this),t===void 0)throw new ve("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");let c=w(m({apiKey:t,organization:r,project:i,webhookSecret:o},s),{baseURL:e||"https://api.openai.com/v1"});if(!c.dangerouslyAllowBrowser&&mH())throw new ve(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=c.baseURL,this.timeout=c.timeout??nR.DEFAULT_TIMEOUT,this.logger=c.logger??console;let u="warn";this.logLevel=u,this.logLevel=Rk(c.logLevel,"ClientOptions.logLevel",this)??Rk(bl("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??u,this.fetchOptions=c.fetchOptions,this.maxRetries=c.maxRetries??2,this.fetch=c.fetch??_H(),Te(this,Gw,vH,"f"),this._options=c,this.apiKey=t,this.organization=r,this.project=i,this.webhookSecret=o}withOptions(e){return new this.constructor(m(w(m({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret}),e))}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){}authHeaders(e){return v(this,null,function*(){return fe([{Authorization:`Bearer ${this.apiKey}`}])})}stringifyQuery(e){return Ak(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${ml}`}defaultIdempotencyKey(){return`stainless-node-retry-${yk()}`}makeStatusError(e,t,r,i){return rr.generate(e,t,r,i)}buildURL(e,t,r){let i=!N(this,tR,"m",s3).call(this)&&r||this.baseURL,o=sH(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),s=this.defaultQuery();return lH(s)||(t=m(m({},s),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(o.search=this.stringifyQuery(t)),o.toString()}prepareOptions(e){return v(this,null,function*(){})}prepareRequest(i,o){return v(this,arguments,function*(e,{url:t,options:r}){})}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,r){return this.request(Promise.resolve(r).then(i=>m({method:e,path:t},i)))}request(e,t=null){return new Nc(this,this.makeRequest(e,t,void 0))}makeRequest(e,t,r){return v(this,null,function*(){let i=yield e,o=i.maxRetries??this.maxRetries;t==null&&(t=o),yield this.prepareOptions(i);let{req:s,url:a,timeout:l}=yield this.buildRequest(i,{retryCount:o-t});yield this.prepareRequest(s,{url:a,options:i});let c="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),u=r===void 0?"":`, retryOf: ${r}`,d=Date.now();if(Pn(this).debug(`[${c}] sending request`,la({retryOfRequestLogID:r,method:i.method,url:a,options:i,headers:s.headers})),i.signal?.aborted)throw new Sn;let h=new AbortController,f=yield this.fetchWithTimeout(a,s,l,h).catch(ig),p=Date.now();if(f instanceof Error){let y=`retrying, ${t} attempts remaining`;if(i.signal?.aborted)throw new Sn;let E=rg(f)||/timed? ?out/i.test(String(f)+("cause"in f?String(f.cause):""));if(t)return Pn(this).info(`[${c}] connection ${E?"timed out":"failed"} - ${y}`),Pn(this).debug(`[${c}] connection ${E?"timed out":"failed"} (${y})`,la({retryOfRequestLogID:r,url:a,durationMs:p-d,message:f.message})),this.retryRequest(i,t,r??c);throw Pn(this).info(`[${c}] connection ${E?"timed out":"failed"} - error; no more retries left`),Pn(this).debug(`[${c}] connection ${E?"timed out":"failed"} (error; no more retries left)`,la({retryOfRequestLogID:r,url:a,durationMs:p-d,message:f.message})),E?new as:new pl({cause:f})}let g=[...f.headers.entries()].filter(([y])=>y==="x-request-id").map(([y,E])=>", "+y+": "+JSON.stringify(E)).join(""),_=`[${c}${u}${g}] ${s.method} ${a} ${f.ok?"succeeded":"failed"} with status ${f.status} in ${p-d}ms`;if(!f.ok){let y=yield this.shouldRetry(f);if(t&&y){let W=`retrying, ${t} attempts remaining`;return yield bH(f.body),Pn(this).info(`${_} - ${W}`),Pn(this).debug(`[${c}] response error (${W})`,la({retryOfRequestLogID:r,url:f.url,status:f.status,headers:f.headers,durationMs:p-d})),this.retryRequest(i,t,r??c,f.headers)}let E=y?"error; no more retries left":"error; not retryable";Pn(this).info(`${_} - ${E}`);let T=yield f.text().catch(W=>ig(W).message),A=dH(T),P=A?void 0:T;throw Pn(this).debug(`[${c}] response error (${E})`,la({retryOfRequestLogID:r,url:f.url,status:f.status,headers:f.headers,message:P,durationMs:Date.now()-d})),this.makeStatusError(f.status,A,P,f.headers)}return Pn(this).info(_),Pn(this).debug(`[${c}] response start`,la({retryOfRequestLogID:r,url:f.url,status:f.status,headers:f.headers,durationMs:p-d})),{response:f,options:i,controller:h,requestLogID:c,retryOfRequestLogID:r,startTime:d}})}getAPIList(e,t,r){return this.requestAPIList(t,m({method:"get",path:e},r))}requestAPIList(e,t){let r=this.makeRequest(t,null,void 0);return new cg(this,r,e)}fetchWithTimeout(e,t,r,i){return v(this,null,function*(){let d=t||{},{signal:o,method:s}=d,a=Ae(d,["signal","method"]);o&&o.addEventListener("abort",()=>i.abort());let l=setTimeout(()=>i.abort(),r),c=globalThis.ReadableStream&&a.body instanceof globalThis.ReadableStream||typeof a.body=="object"&&a.body!==null&&Symbol.asyncIterator in a.body,u=m(w(m({signal:i.signal},c?{duplex:"half"}:{}),{method:"GET"}),a);s&&(u.method=s.toUpperCase());try{return yield this.fetch.call(void 0,e,u)}finally{clearTimeout(l)}})}shouldRetry(e){return v(this,null,function*(){let t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500})}retryRequest(e,t,r,i){return v(this,null,function*(){let o,s=i?.get("retry-after-ms");if(s){let l=parseFloat(s);Number.isNaN(l)||(o=l)}let a=i?.get("retry-after");if(a&&!o){let l=parseFloat(a);Number.isNaN(l)?o=Date.parse(a)-Date.now():o=l*1e3}if(!(o&&0<=o&&o<60*1e3)){let l=e.maxRetries??this.maxRetries;o=this.calculateDefaultRetryTimeoutMillis(t,l)}return yield cs(o),this.makeRequest(e,t-1,r)})}calculateDefaultRetryTimeoutMillis(e,t){let o=t-e,s=Math.min(.5*Math.pow(2,o),8),a=1-Math.random()*.25;return s*a*1e3}buildRequest(r){return v(this,arguments,function*(e,{retryCount:t=0}={}){let i=m({},e),{method:o,path:s,query:a,defaultBaseURL:l}=i,c=this.buildURL(s,a,l);"timeout"in i&&uH("timeout",i.timeout),i.timeout=i.timeout??this.timeout;let{bodyHeaders:u,body:d}=this.buildBody({options:i}),h=yield this.buildHeaders({options:e,method:o,bodyHeaders:u,retryCount:t});return{req:m(m(m(m(m({method:o,headers:h},i.signal&&{signal:i.signal}),globalThis.ReadableStream&&d instanceof globalThis.ReadableStream&&{duplex:"half"}),d&&{body:d}),this.fetchOptions??{}),i.fetchOptions??{}),url:c,timeout:i.timeout}})}buildHeaders(o){return v(this,arguments,function*({options:e,method:t,bodyHeaders:r,retryCount:i}){let s={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);let a=fe([s,w(m(m({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),gH()),{"OpenAI-Organization":this.organization,"OpenAI-Project":this.project}),yield this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(a),a.values})}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};let r=fe([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||e instanceof Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:dw(e)}:N(this,Gw,"f").call(this,{body:e,headers:r})}};nR=ze,Gw=new WeakMap,tR=new WeakSet,s3=function(){return this.baseURL!=="https://api.openai.com/v1"};ze.OpenAI=nR;ze.DEFAULT_TIMEOUT=6e5;ze.OpenAIError=ve;ze.APIError=rr;ze.APIConnectionError=pl;ze.APIConnectionTimeoutError=as;ze.APIUserAbortError=Sn;ze.NotFoundError=yf;ze.ConflictError=wf;ze.RateLimitError=Cf;ze.BadRequestError=_f;ze.AuthenticationError=bf;ze.InternalServerError=Ef;ze.PermissionDeniedError=vf;ze.UnprocessableEntityError=xf;ze.InvalidWebhookSignatureError=ls;ze.toFile=dg;ze.Completions=zc;ze.Chat=yg;ze.Embeddings=Hc;ze.Files=qc;ze.Images=Gc;ze.Audio=wg;ze.Moderations=Kc;ze.Models=Wc;ze.FineTuning=Tg;ze.Graders=Ag;ze.VectorStores=Mg;ze.Webhooks=Qc;ze.Beta=Ig;ze.Batches=Bc;ze.Uploads=Rg;ze.Responses=kg;ze.Evals=Dg;ze.Containers=Sg;var hR={};qt(hR,{BaseChatModel:()=>ms,SimpleChatModel:()=>fR,createChatMessageChunkEncoderStream:()=>aoe});var uR={};qt(uR,{BaseLangChain:()=>th,BaseLanguageModel:()=>Zc,calculateMaxTokens:()=>g3,getEmbeddingContextSize:()=>ooe,getModelContextSize:()=>m3,getModelNameForTiktoken:()=>ex,isOpenAITool:()=>tx});var oR={};qt(oR,{BaseCache:()=>Qw,InMemoryCache:()=>Og,deserializeStoredGeneration:()=>Uie,getCacheKey:()=>c3,serializeGeneration:()=>zie});var iR={};qt(iR,{insecureHash:()=>Ww,sha256:()=>l3});var Bie=typeof window=="object"?window:{},ut="0123456789abcdef".split(""),Vie=[-2147483648,8388608,32768,128],po=[24,16,8,0];var mr=[];function mo(n){n?(mr[0]=mr[16]=mr[1]=mr[2]=mr[3]=mr[4]=mr[5]=mr[6]=mr[7]=mr[8]=mr[9]=mr[10]=mr[11]=mr[12]=mr[13]=mr[14]=mr[15]=0,this.blocks=mr):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}mo.prototype.update=function(n){if(!this.finalized){var e=typeof n!="string";e&&n.constructor===Bie.ArrayBuffer&&(n=new Uint8Array(n));for(var t,r=0,i,o=n.length||0,s=this.blocks;r<o;){if(this.hashed&&(this.hashed=!1,s[0]=this.block,s[16]=s[1]=s[2]=s[3]=s[4]=s[5]=s[6]=s[7]=s[8]=s[9]=s[10]=s[11]=s[12]=s[13]=s[14]=s[15]=0),e)for(i=this.start;r<o&&i<64;++r)s[i>>2]|=n[r]<<po[i++&3];else for(i=this.start;r<o&&i<64;++r)t=n.charCodeAt(r),t<128?s[i>>2]|=t<<po[i++&3]:t<2048?(s[i>>2]|=(192|t>>6)<<po[i++&3],s[i>>2]|=(128|t&63)<<po[i++&3]):t<55296||t>=57344?(s[i>>2]|=(224|t>>12)<<po[i++&3],s[i>>2]|=(128|t>>6&63)<<po[i++&3],s[i>>2]|=(128|t&63)<<po[i++&3]):(t=65536+((t&1023)<<10|n.charCodeAt(++r)&1023),s[i>>2]|=(240|t>>18)<<po[i++&3],s[i>>2]|=(128|t>>12&63)<<po[i++&3],s[i>>2]|=(128|t>>6&63)<<po[i++&3],s[i>>2]|=(128|t&63)<<po[i++&3]);this.lastByteIndex=i,this.bytes+=i-this.start,i>=64?(this.block=s[16],this.start=i-64,this.hash(),this.hashed=!0):this.start=i}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}};mo.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var n=this.blocks,e=this.lastByteIndex;n[16]=this.block,n[e>>2]|=Vie[e&3],this.block=n[16],e>=56&&(this.hashed||this.hash(),n[0]=this.block,n[16]=n[1]=n[2]=n[3]=n[4]=n[5]=n[6]=n[7]=n[8]=n[9]=n[10]=n[11]=n[12]=n[13]=n[14]=n[15]=0),n[14]=this.hBytes<<3|this.bytes>>>29,n[15]=this.bytes<<3,this.hash()}};mo.prototype.hash=function(){var n=this.h0,e=this.h1,t=this.h2,r=this.h3,i=this.h4,o,s,a,l=this.blocks;for(s=16;s<80;++s)a=l[s-3]^l[s-8]^l[s-14]^l[s-16],l[s]=a<<1|a>>>31;for(s=0;s<20;s+=5)o=e&t|~e&r,a=n<<5|n>>>27,i=a+o+i+1518500249+l[s]<<0,e=e<<30|e>>>2,o=n&e|~n&t,a=i<<5|i>>>27,r=a+o+r+1518500249+l[s+1]<<0,n=n<<30|n>>>2,o=i&n|~i&e,a=r<<5|r>>>27,t=a+o+t+1518500249+l[s+2]<<0,i=i<<30|i>>>2,o=r&i|~r&n,a=t<<5|t>>>27,e=a+o+e+1518500249+l[s+3]<<0,r=r<<30|r>>>2,o=t&r|~t&i,a=e<<5|e>>>27,n=a+o+n+1518500249+l[s+4]<<0,t=t<<30|t>>>2;for(;s<40;s+=5)o=e^t^r,a=n<<5|n>>>27,i=a+o+i+1859775393+l[s]<<0,e=e<<30|e>>>2,o=n^e^t,a=i<<5|i>>>27,r=a+o+r+1859775393+l[s+1]<<0,n=n<<30|n>>>2,o=i^n^e,a=r<<5|r>>>27,t=a+o+t+1859775393+l[s+2]<<0,i=i<<30|i>>>2,o=r^i^n,a=t<<5|t>>>27,e=a+o+e+1859775393+l[s+3]<<0,r=r<<30|r>>>2,o=t^r^i,a=e<<5|e>>>27,n=a+o+n+1859775393+l[s+4]<<0,t=t<<30|t>>>2;for(;s<60;s+=5)o=e&t|e&r|t&r,a=n<<5|n>>>27,i=a+o+i-1894007588+l[s]<<0,e=e<<30|e>>>2,o=n&e|n&t|e&t,a=i<<5|i>>>27,r=a+o+r-1894007588+l[s+1]<<0,n=n<<30|n>>>2,o=i&n|i&e|n&e,a=r<<5|r>>>27,t=a+o+t-1894007588+l[s+2]<<0,i=i<<30|i>>>2,o=r&i|r&n|i&n,a=t<<5|t>>>27,e=a+o+e-1894007588+l[s+3]<<0,r=r<<30|r>>>2,o=t&r|t&i|r&i,a=e<<5|e>>>27,n=a+o+n-1894007588+l[s+4]<<0,t=t<<30|t>>>2;for(;s<80;s+=5)o=e^t^r,a=n<<5|n>>>27,i=a+o+i-899497514+l[s]<<0,e=e<<30|e>>>2,o=n^e^t,a=i<<5|i>>>27,r=a+o+r-899497514+l[s+1]<<0,n=n<<30|n>>>2,o=i^n^e,a=r<<5|r>>>27,t=a+o+t-899497514+l[s+2]<<0,i=i<<30|i>>>2,o=r^i^n,a=t<<5|t>>>27,e=a+o+e-899497514+l[s+3]<<0,r=r<<30|r>>>2,o=t^r^i,a=e<<5|e>>>27,n=a+o+n-899497514+l[s+4]<<0,t=t<<30|t>>>2;this.h0=this.h0+n<<0,this.h1=this.h1+e<<0,this.h2=this.h2+t<<0,this.h3=this.h3+r<<0,this.h4=this.h4+i<<0};mo.prototype.hex=function(){this.finalize();var n=this.h0,e=this.h1,t=this.h2,r=this.h3,i=this.h4;return ut[n>>28&15]+ut[n>>24&15]+ut[n>>20&15]+ut[n>>16&15]+ut[n>>12&15]+ut[n>>8&15]+ut[n>>4&15]+ut[n&15]+ut[e>>28&15]+ut[e>>24&15]+ut[e>>20&15]+ut[e>>16&15]+ut[e>>12&15]+ut[e>>8&15]+ut[e>>4&15]+ut[e&15]+ut[t>>28&15]+ut[t>>24&15]+ut[t>>20&15]+ut[t>>16&15]+ut[t>>12&15]+ut[t>>8&15]+ut[t>>4&15]+ut[t&15]+ut[r>>28&15]+ut[r>>24&15]+ut[r>>20&15]+ut[r>>16&15]+ut[r>>12&15]+ut[r>>8&15]+ut[r>>4&15]+ut[r&15]+ut[i>>28&15]+ut[i>>24&15]+ut[i>>20&15]+ut[i>>16&15]+ut[i>>12&15]+ut[i>>8&15]+ut[i>>4&15]+ut[i&15]};mo.prototype.toString=mo.prototype.hex;mo.prototype.digest=function(){this.finalize();var n=this.h0,e=this.h1,t=this.h2,r=this.h3,i=this.h4;return[n>>24&255,n>>16&255,n>>8&255,n&255,e>>24&255,e>>16&255,e>>8&255,e&255,t>>24&255,t>>16&255,t>>8&255,t&255,r>>24&255,r>>16&255,r>>8&255,r&255,i>>24&255,i>>16&255,i>>8&255,i&255]};mo.prototype.array=mo.prototype.digest;mo.prototype.arrayBuffer=function(){this.finalize();var n=new ArrayBuffer(20),e=new DataView(n);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),n};var a3=!1,Ww=n=>(a3||(console.warn(["The default method for hashing keys is insecure and will be replaced in a future version,","but hasn't been replaced yet as to not break existing caches. It's recommended that you use","a more secure hashing algorithm to avoid cache poisoning.","","See this page for more information:","|","\u2514> https://js.langchain.com/docs/troubleshooting/warnings/insecure-cache-algorithm"].join(`
`)),a3=!0),new mo(!0).update(n).hex());var we="0123456789abcdef".split(""),$ie=[-2147483648,8388608,32768,128],go=[24,16,8,0],Kw=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];var gr=[];function _o(n,e){e?(gr[0]=gr[16]=gr[1]=gr[2]=gr[3]=gr[4]=gr[5]=gr[6]=gr[7]=gr[8]=gr[9]=gr[10]=gr[11]=gr[12]=gr[13]=gr[14]=gr[15]=0,this.blocks=gr):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=n}_o.prototype.update=function(n){if(!this.finalized){var e,t=typeof n;if(t!=="string"){if(t==="object"){if(n===null)throw new Error(ERROR);if(ARRAY_BUFFER&&n.constructor===ArrayBuffer)n=new Uint8Array(n);else if(!Array.isArray(n)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(n)))throw new Error(ERROR)}else throw new Error(ERROR);e=!0}for(var r,i=0,o,s=n.length,a=this.blocks;i<s;){if(this.hashed&&(this.hashed=!1,a[0]=this.block,this.block=a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0),e)for(o=this.start;i<s&&o<64;++i)a[o>>>2]|=n[i]<<go[o++&3];else for(o=this.start;i<s&&o<64;++i)r=n.charCodeAt(i),r<128?a[o>>>2]|=r<<go[o++&3]:r<2048?(a[o>>>2]|=(192|r>>>6)<<go[o++&3],a[o>>>2]|=(128|r&63)<<go[o++&3]):r<55296||r>=57344?(a[o>>>2]|=(224|r>>>12)<<go[o++&3],a[o>>>2]|=(128|r>>>6&63)<<go[o++&3],a[o>>>2]|=(128|r&63)<<go[o++&3]):(r=65536+((r&1023)<<10|n.charCodeAt(++i)&1023),a[o>>>2]|=(240|r>>>18)<<go[o++&3],a[o>>>2]|=(128|r>>>12&63)<<go[o++&3],a[o>>>2]|=(128|r>>>6&63)<<go[o++&3],a[o>>>2]|=(128|r&63)<<go[o++&3]);this.lastByteIndex=o,this.bytes+=o-this.start,o>=64?(this.block=a[16],this.start=o-64,this.hash(),this.hashed=!0):this.start=o}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}};_o.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var n=this.blocks,e=this.lastByteIndex;n[16]=this.block,n[e>>>2]|=$ie[e&3],this.block=n[16],e>=56&&(this.hashed||this.hash(),n[0]=this.block,n[16]=n[1]=n[2]=n[3]=n[4]=n[5]=n[6]=n[7]=n[8]=n[9]=n[10]=n[11]=n[12]=n[13]=n[14]=n[15]=0),n[14]=this.hBytes<<3|this.bytes>>>29,n[15]=this.bytes<<3,this.hash()}};_o.prototype.hash=function(){var n=this.h0,e=this.h1,t=this.h2,r=this.h3,i=this.h4,o=this.h5,s=this.h6,a=this.h7,l=this.blocks,c,u,d,h,f,p,g,_,y,E,T;for(c=16;c<64;++c)f=l[c-15],u=(f>>>7|f<<25)^(f>>>18|f<<14)^f>>>3,f=l[c-2],d=(f>>>17|f<<15)^(f>>>19|f<<13)^f>>>10,l[c]=l[c-16]+u+l[c-7]+d<<0;for(T=e&t,c=0;c<64;c+=4)this.first?(this.is224?(_=300032,f=l[0]-1413257819,a=f-150054599<<0,r=f+24177077<<0):(_=704751109,f=l[0]-210244248,a=f-1521486534<<0,r=f+143694565<<0),this.first=!1):(u=(n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10),d=(i>>>6|i<<26)^(i>>>11|i<<21)^(i>>>25|i<<7),_=n&e,h=_^n&t^T,g=i&o^~i&s,f=a+d+g+Kw[c]+l[c],p=u+h,a=r+f<<0,r=f+p<<0),u=(r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10),d=(a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7),y=r&n,h=y^r&e^_,g=s&a^~s&i,f=o+d+g+Kw[c+1]+l[c+1],p=u+h,s=t+f<<0,t=f+p<<0,u=(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10),d=(s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7),E=t&r,h=E^t&n^y,g=o&s^~o&a,f=i+d+g+Kw[c+2]+l[c+2],p=u+h,o=e+f<<0,e=f+p<<0,u=(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10),d=(o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7),T=e&t,h=T^e&r^E,g=o&s^~o&a,f=i+d+g+Kw[c+3]+l[c+3],p=u+h,i=n+f<<0,n=f+p<<0,this.chromeBugWorkAround=!0;this.h0=this.h0+n<<0,this.h1=this.h1+e<<0,this.h2=this.h2+t<<0,this.h3=this.h3+r<<0,this.h4=this.h4+i<<0,this.h5=this.h5+o<<0,this.h6=this.h6+s<<0,this.h7=this.h7+a<<0};_o.prototype.hex=function(){this.finalize();var n=this.h0,e=this.h1,t=this.h2,r=this.h3,i=this.h4,o=this.h5,s=this.h6,a=this.h7,l=we[n>>>28&15]+we[n>>>24&15]+we[n>>>20&15]+we[n>>>16&15]+we[n>>>12&15]+we[n>>>8&15]+we[n>>>4&15]+we[n&15]+we[e>>>28&15]+we[e>>>24&15]+we[e>>>20&15]+we[e>>>16&15]+we[e>>>12&15]+we[e>>>8&15]+we[e>>>4&15]+we[e&15]+we[t>>>28&15]+we[t>>>24&15]+we[t>>>20&15]+we[t>>>16&15]+we[t>>>12&15]+we[t>>>8&15]+we[t>>>4&15]+we[t&15]+we[r>>>28&15]+we[r>>>24&15]+we[r>>>20&15]+we[r>>>16&15]+we[r>>>12&15]+we[r>>>8&15]+we[r>>>4&15]+we[r&15]+we[i>>>28&15]+we[i>>>24&15]+we[i>>>20&15]+we[i>>>16&15]+we[i>>>12&15]+we[i>>>8&15]+we[i>>>4&15]+we[i&15]+we[o>>>28&15]+we[o>>>24&15]+we[o>>>20&15]+we[o>>>16&15]+we[o>>>12&15]+we[o>>>8&15]+we[o>>>4&15]+we[o&15]+we[s>>>28&15]+we[s>>>24&15]+we[s>>>20&15]+we[s>>>16&15]+we[s>>>12&15]+we[s>>>8&15]+we[s>>>4&15]+we[s&15];return this.is224||(l+=we[a>>>28&15]+we[a>>>24&15]+we[a>>>20&15]+we[a>>>16&15]+we[a>>>12&15]+we[a>>>8&15]+we[a>>>4&15]+we[a&15]),l};_o.prototype.toString=_o.prototype.hex;_o.prototype.digest=function(){this.finalize();var n=this.h0,e=this.h1,t=this.h2,r=this.h3,i=this.h4,o=this.h5,s=this.h6,a=this.h7,l=[n>>>24&255,n>>>16&255,n>>>8&255,n&255,e>>>24&255,e>>>16&255,e>>>8&255,e&255,t>>>24&255,t>>>16&255,t>>>8&255,t&255,r>>>24&255,r>>>16&255,r>>>8&255,r&255,i>>>24&255,i>>>16&255,i>>>8&255,i&255,o>>>24&255,o>>>16&255,o>>>8&255,o&255,s>>>24&255,s>>>16&255,s>>>8&255,s&255];return this.is224||l.push(a>>>24&255,a>>>16&255,a>>>8&255,a&255),l};_o.prototype.array=_o.prototype.digest;_o.prototype.arrayBuffer=function(){this.finalize();var n=new ArrayBuffer(this.is224?28:32),e=new DataView(n);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),e.setUint32(20,this.h5),e.setUint32(24,this.h6),this.is224||e.setUint32(28,this.h7),n};var l3=(...n)=>new _o(!1,!0).update(n.join("")).hex();var c3=(...n)=>Ww(n.join("_"));function Uie(n){return n.message!==void 0?{text:n.text,message:WO(n.message)}:{text:n.text}}function zie(n){let e={text:n.text};return n.message!==void 0&&(e.message=n.message.toDict()),e}var Qw=class{constructor(){Object.defineProperty(this,"keyEncoder",{enumerable:!0,configurable:!0,writable:!0,value:c3})}makeDefaultKeyEncoder(e){this.keyEncoder=e}},Hie=new Map,Og=class n extends Qw{constructor(e){super(),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cache=e??new Map}lookup(e,t){return Promise.resolve(this.cache.get(this.keyEncoder(e,t))??null)}update(e,t,r){return v(this,null,function*(){this.cache.set(this.keyEncoder(e,t),r)})}static global(){return new n(Hie)}};var cR={};qt(cR,{encodingForModel:()=>Jw,getEncoding:()=>p3});var h3=MO(f3(),1);var Xie=Object.defineProperty,Jie=(n,e,t)=>e in n?Xie(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,eoe=(n,e,t)=>(Jie(n,typeof e!="symbol"?e+"":e,t),t);function toe(n,e){let t=Array.from({length:n.length},(r,i)=>({start:i,end:i+1}));for(;t.length>1;){let r=null;for(let i=0;i<t.length-1;i++){let o=n.slice(t[i].start,t[i+1].end),s=e.get(o.join(","));s!=null&&(r==null||s<r[0])&&(r=[s,i])}if(r!=null){let i=r[1];t[i]={start:t[i].start,end:t[i+1].end},t.splice(i+1,1)}else break}return t}function noe(n,e){return n.length===1?[e.get(n.join(","))]:toe(n,e).map(t=>e.get(n.slice(t.start,t.end).join(","))).filter(t=>t!=null)}function roe(n){return n.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}var aR=class{specialTokens;inverseSpecialTokens;patStr;textEncoder=new TextEncoder;textDecoder=new TextDecoder("utf-8");rankMap=new Map;textMap=new Map;constructor(n,e){this.patStr=n.pat_str;let t=n.bpe_ranks.split(`
`).filter(Boolean).reduce((r,i)=>{let[o,s,...a]=i.split(" "),l=Number.parseInt(s,10);return a.forEach((c,u)=>r[c]=l+u),r},{});for(let[r,i]of Object.entries(t)){let o=h3.default.toByteArray(r);this.rankMap.set(o.join(","),i),this.textMap.set(i,o)}this.specialTokens=m(m({},n.special_tokens),e),this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((r,[i,o])=>(r[o]=this.textEncoder.encode(i),r),{})}encode(n,e=[],t="all"){let r=new RegExp(this.patStr,"ug"),i=aR.specialTokenRegex(Object.keys(this.specialTokens)),o=[],s=new Set(e==="all"?Object.keys(this.specialTokens):e),a=new Set(t==="all"?Object.keys(this.specialTokens).filter(c=>!s.has(c)):t);if(a.size>0){let c=aR.specialTokenRegex([...a]),u=n.match(c);if(u!=null)throw new Error(`The text contains a special token that is not allowed: ${u[0]}`)}let l=0;for(;;){let c=null,u=l;for(;i.lastIndex=u,c=i.exec(n),!(c==null||s.has(c[0]));)u=c.index+1;let d=c?.index??n.length;for(let f of n.substring(l,d).matchAll(r)){let p=this.textEncoder.encode(f[0]),g=this.rankMap.get(p.join(","));if(g!=null){o.push(g);continue}o.push(...noe(p,this.rankMap))}if(c==null)break;let h=this.specialTokens[c[0]];o.push(h),l=c.index+c[0].length}return o}decode(n){let e=[],t=0;for(let o=0;o<n.length;++o){let s=n[o],a=this.textMap.get(s)??this.inverseSpecialTokens[s];a!=null&&(e.push(a),t+=a.length)}let r=new Uint8Array(t),i=0;for(let o of e)r.set(o,i),i+=o.length;return this.textDecoder.decode(r)}},Zw=aR;eoe(Zw,"specialTokenRegex",n=>new RegExp(n.map(e=>roe(e)).join("|"),"g"));function lR(n){switch(n){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"davinci-002":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"babbage-002":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-instruct-0914":case"gpt-3.5-turbo-instruct":case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"gpt-3.5-turbo-1106":case"gpt-35-turbo":case"gpt-4-1106-preview":case"gpt-4-vision-preview":case"gpt-3.5-turbo-0125":case"gpt-4-turbo":case"gpt-4-turbo-2024-04-09":case"gpt-4-turbo-preview":case"gpt-4-0125-preview":case"text-embedding-ada-002":case"text-embedding-3-small":case"text-embedding-3-large":return"cl100k_base";case"gpt-4o":case"gpt-4o-2024-05-13":case"gpt-4o-2024-08-06":case"gpt-4o-2024-11-20":case"gpt-4o-mini-2024-07-18":case"gpt-4o-mini":case"gpt-4o-search-preview":case"gpt-4o-search-preview-2025-03-11":case"gpt-4o-mini-search-preview":case"gpt-4o-mini-search-preview-2025-03-11":case"gpt-4o-audio-preview":case"gpt-4o-audio-preview-2024-12-17":case"gpt-4o-audio-preview-2024-10-01":case"gpt-4o-mini-audio-preview":case"gpt-4o-mini-audio-preview-2024-12-17":case"o1":case"o1-2024-12-17":case"o1-mini":case"o1-mini-2024-09-12":case"o1-preview":case"o1-preview-2024-09-12":case"o1-pro":case"o1-pro-2025-03-19":case"o3":case"o3-2025-04-16":case"o3-mini":case"o3-mini-2025-01-31":case"o4-mini":case"o4-mini-2025-04-16":case"chatgpt-4o-latest":case"gpt-4o-realtime":case"gpt-4o-realtime-preview-2024-10-01":case"gpt-4o-realtime-preview-2024-12-17":case"gpt-4o-mini-realtime-preview":case"gpt-4o-mini-realtime-preview-2024-12-17":case"gpt-4.1":case"gpt-4.1-2025-04-14":case"gpt-4.1-mini":case"gpt-4.1-mini-2025-04-14":case"gpt-4.1-nano":case"gpt-4.1-nano-2025-04-14":case"gpt-4.5-preview":case"gpt-4.5-preview-2025-02-27":return"o200k_base";default:throw new Error("Unknown model")}}var Xw={},ioe=new ku({});function p3(n){return v(this,null,function*(){return n in Xw||(Xw[n]=ioe.fetch(`https://tiktoken.pages.dev/js/${n}.json`).then(e=>e.json()).then(e=>new Zw(e)).catch(e=>{throw delete Xw[n],e})),yield Xw[n]})}function Jw(n){return v(this,null,function*(){return p3(lR(n))})}var ex=n=>n.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":n.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":n.startsWith("gpt-4-32k")?"gpt-4-32k":n.startsWith("gpt-4-")?"gpt-4":n.startsWith("gpt-4o")?"gpt-4o":n,ooe=n=>{switch(n){case"text-embedding-ada-002":return 8191;default:return 2046}},m3=n=>{switch(ex(n)){case"gpt-3.5-turbo-16k":return 16384;case"gpt-3.5-turbo":return 4096;case"gpt-4-32k":return 32768;case"gpt-4":return 8192;case"text-davinci-003":return 4097;case"text-curie-001":return 2048;case"text-babbage-001":return 2048;case"text-ada-001":return 2048;case"code-davinci-002":return 8e3;case"code-cushman-001":return 2048;default:return 4097}};function tx(n){return typeof n!="object"||!n?!1:!!("type"in n&&n.type==="function"&&"function"in n&&typeof n.function=="object"&&n.function&&"name"in n.function&&"parameters"in n.function)}var g3=t=>v(null,[t],function*({prompt:n,modelName:e}){let r;try{r=(yield Jw(ex(e))).encode(n).length}catch{console.warn("Failed to calculate number of tokens, falling back to approximate count"),r=Math.ceil(n.length/4)}return m3(e)-r}),soe=()=>!1,th=class extends mt{get lc_attributes(){return{callbacks:void 0,verbose:void 0}}constructor(e){super(e),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.verbose=e.verbose??soe(),this.callbacks=e.callbacks,this.tags=e.tags??[],this.metadata=e.metadata??{}}},Zc=class extends th{get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}constructor(i){var o=i,{callbacks:e,callbackManager:t}=o,r=Ae(o,["callbacks","callbackManager"]);let l=r,{cache:s}=l,a=Ae(l,["cache"]);super(m({callbacks:e??t},a)),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_encoding",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof s=="object"?this.cache=s:s?this.cache=Og.global():this.cache=void 0,this.caller=new ku(r??{})}getNumTokens(e){return v(this,null,function*(){let t;typeof e=="string"?t=e:t=e.map(i=>typeof i=="string"?i:i.type==="text"&&"text"in i?i.text:"").join("");let r=Math.ceil(t.length/4);if(!this._encoding)try{this._encoding=yield Jw("modelName"in this?ex(this.modelName):"gpt2")}catch(i){console.warn("Failed to calculate number of tokens, falling back to approximate count",i)}if(this._encoding)try{r=this._encoding.encode(t).length}catch(i){console.warn("Failed to calculate number of tokens, falling back to approximate count",i)}return r})}static _convertInputToPromptValue(e){return typeof e=="string"?new SP(e):Array.isArray(e)?new DP(e.map(Po)):e}_identifyingParams(){return{}}_getSerializedCacheKeyParametersForCall(r){var i=r,{config:e}=i,t=Ae(i,["config"]);let o=w(m(m({},this._identifyingParams()),t),{_type:this._llmType(),_model:this._modelType()});return Object.entries(o).filter(([l,c])=>c!==void 0).map(([l,c])=>`${l}:${JSON.stringify(c)}`).sort().join(",")}serialize(){return w(m({},this._identifyingParams()),{_type:this._llmType(),_model:this._modelType()})}static deserialize(e){return v(this,null,function*(){throw new Error("Use .toJSON() instead")})}};function aoe(){let n=new TextEncoder;return new TransformStream({transform(e,t){t.enqueue(n.encode(typeof e.content=="string"?e.content:JSON.stringify(e.content)))}})}function dR(n){let e=[];for(let t of n){let r=t;if(Array.isArray(t.content))for(let i=0;i<t.content.length;i++){let o=t.content[i];(LO(o)||jO(o))&&r===t&&(r=new t.constructor(w(m({},r),{content:[...t.content.slice(0,i),BO(o),...t.content.slice(i+1)]})))}e.push(r)}return e}var ms=class n extends Zc{constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","chat_models",this._llmType()]}),Object.defineProperty(this,"disableStreaming",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_separateRunnableConfigFromCallOptionsCompat(e){let[t,r]=super._separateRunnableConfigFromCallOptions(e);return r.signal=t.signal,[t,r]}invoke(e,t){return v(this,null,function*(){let r=n._convertInputToPromptValue(e);return(yield this.generatePrompt([r],t,t?.callbacks)).generations[0][0].message})}_streamResponseChunks(e,t,r){return We(this,null,function*(){throw new Error("Not implemented.")})}_streamIterator(e,t){return We(this,null,function*(){if(this._streamResponseChunks===n.prototype._streamResponseChunks||this.disableStreaming)yield this.invoke(e,t);else{let l=n._convertInputToPromptValue(e).toChatMessages(),[c,u]=this._separateRunnableConfigFromCallOptionsCompat(t),d=m(m({},c.metadata),this.getLsParams(u)),h=yield new ee(Mi.configure(c.callbacks,this.callbacks,c.tags,this.tags,d,this.metadata,{verbose:this.verbose})),f={options:u,invocation_params:this?.invocationParams(u),batch_size:1},p=yield new ee(h?.handleChatModelStart(this.toJSON(),[dR(l)],c.runId,void 0,f,void 0,void 0,c.runName)),g,_;try{try{for(var r=Ee(this._streamResponseChunks(l,u,p?.[0])),i,o,s;i=!(o=yield new ee(r.next())).done;i=!1){let y=o.value;if(y.message.id==null){let E=p?.at(0)?.runId;E!=null&&y.message._updateId(`run-${E}`)}y.message.response_metadata=m(m({},y.generationInfo),y.message.response_metadata),yield y.message,g?g=g.concat(y):g=y,kh(y.message)&&y.message.usage_metadata!==void 0&&(_={tokenUsage:{promptTokens:y.message.usage_metadata.input_tokens,completionTokens:y.message.usage_metadata.output_tokens,totalTokens:y.message.usage_metadata.total_tokens}})}}catch{s=[o]}finally{try{i&&(o=r.return)&&(yield new ee(o.call(r)))}finally{if(s)throw s[0]}}}catch(y){throw yield new ee(Promise.all((p??[]).map(E=>E?.handleLLMError(y)))),y}yield new ee(Promise.all((p??[]).map(y=>y?.handleLLMEnd({generations:[[g]],llmOutput:_}))))}})}getLsParams(e){let t=this.getName().startsWith("Chat")?this.getName().replace("Chat",""):this.getName();return{ls_model_type:"chat",ls_stop:e.stop,ls_provider:t}}_generateUncached(e,t,r,i){return v(this,null,function*(){let o=e.map(g=>g.map(Po)),s;if(i!==void 0&&i.length===o.length)s=i;else{let g=m(m({},r.metadata),this.getLsParams(t)),_=yield Mi.configure(r.callbacks,this.callbacks,r.tags,this.tags,g,this.metadata,{verbose:this.verbose}),y={options:t,invocation_params:this?.invocationParams(t),batch_size:1};s=yield _?.handleChatModelStart(this.toJSON(),o.map(dR),r.runId,void 0,y,void 0,void 0,r.runName)}let a=[],l=[];if(!!s?.[0].handlers.find(C_)&&!this.disableStreaming&&o.length===1&&this._streamResponseChunks!==n.prototype._streamResponseChunks)try{let g=yield this._streamResponseChunks(o[0],t,s?.[0]),_,y;try{for(var d=Ee(g),h,f,p;h=!(f=yield d.next()).done;h=!1){let E=f.value;if(E.message.id==null){let T=s?.at(0)?.runId;T!=null&&E.message._updateId(`run-${T}`)}_===void 0?_=E:_=Ts(_,E),kh(E.message)&&E.message.usage_metadata!==void 0&&(y={tokenUsage:{promptTokens:E.message.usage_metadata.input_tokens,completionTokens:E.message.usage_metadata.output_tokens,totalTokens:E.message.usage_metadata.total_tokens}})}}catch{p=[f]}finally{try{h&&(f=d.return)&&(yield f.call(d))}finally{if(p)throw p[0]}}if(_===void 0)throw new Error("Received empty response from chat model call.");a.push([_]),yield s?.[0].handleLLMEnd({generations:a,llmOutput:y})}catch(g){throw yield s?.[0].handleLLMError(g),g}else{let g=yield Promise.allSettled(o.map((_,y)=>this._generate(_,w(m({},t),{promptIndex:y}),s?.[y])));yield Promise.all(g.map((_,y)=>v(this,null,function*(){if(_.status==="fulfilled"){let E=_.value;for(let T of E.generations){if(T.message.id==null){let A=s?.at(0)?.runId;A!=null&&T.message._updateId(`run-${A}`)}T.message.response_metadata=m(m({},T.generationInfo),T.message.response_metadata)}return E.generations.length===1&&(E.generations[0].message.response_metadata=m(m({},E.llmOutput),E.generations[0].message.response_metadata)),a[y]=E.generations,l[y]=E.llmOutput,s?.[y]?.handleLLMEnd({generations:[E.generations],llmOutput:E.llmOutput})}else return yield s?.[y]?.handleLLMError(_.reason),Promise.reject(_.reason)})))}let u={generations:a,llmOutput:l.length?this._combineLLMOutput?.(...l):void 0};return Object.defineProperty(u,Au,{value:s?{runIds:s?.map(g=>g.runId)}:void 0,configurable:!0}),u})}_generateCached(s){return v(this,arguments,function*({messages:e,cache:t,llmStringKey:r,parsedOptions:i,handledOptions:o}){let a=e.map(y=>y.map(Po)),l=m(m({},o.metadata),this.getLsParams(i)),c=yield Mi.configure(o.callbacks,this.callbacks,o.tags,this.tags,l,this.metadata,{verbose:this.verbose}),u={options:i,invocation_params:this?.invocationParams(i),batch_size:1},d=yield c?.handleChatModelStart(this.toJSON(),a.map(dR),o.runId,void 0,u,void 0,void 0,o.runName),h=[],p=(yield Promise.allSettled(a.map((y,E)=>v(this,null,function*(){let T=n._convertInputToPromptValue(y).toString(),A=yield t.lookup(T,r);return A==null&&h.push(E),A})))).map((y,E)=>({result:y,runManager:d?.[E]})).filter(({result:y})=>y.status==="fulfilled"&&y.value!=null||y.status==="rejected"),g=[];yield Promise.all(p.map((A,P)=>v(this,[A,P],function*({result:y,runManager:E},T){if(y.status==="fulfilled"){let R=y.value;return g[T]=R.map(W=>("message"in W&&ln(W.message)&&ti(W.message)&&(W.message.usage_metadata={input_tokens:0,output_tokens:0,total_tokens:0}),W.generationInfo=w(m({},W.generationInfo),{tokenUsage:{}}),W)),R.length&&(yield E?.handleLLMNewToken(R[0].text)),E?.handleLLMEnd({generations:[R]},void 0,void 0,void 0,{cached:!0})}else return yield E?.handleLLMError(y.reason,void 0,void 0,void 0,{cached:!0}),Promise.reject(y.reason)})));let _={generations:g,missingPromptIndices:h,startedRunManagers:d};return Object.defineProperty(_,Au,{value:d?{runIds:d?.map(y=>y.runId)}:void 0,configurable:!0}),_})}generate(e,t,r){return v(this,null,function*(){let i;Array.isArray(t)?i={stop:t}:i=t;let o=e.map(p=>p.map(Po)),[s,a]=this._separateRunnableConfigFromCallOptionsCompat(i);if(s.callbacks=s.callbacks??r,!this.cache)return this._generateUncached(o,a,s);let{cache:l}=this,c=this._getSerializedCacheKeyParametersForCall(a),{generations:u,missingPromptIndices:d,startedRunManagers:h}=yield this._generateCached({messages:o,cache:l,llmStringKey:c,parsedOptions:a,handledOptions:s}),f={};if(d.length>0){let p=yield this._generateUncached(d.map(g=>o[g]),a,s,h!==void 0?d.map(g=>h?.[g]):void 0);yield Promise.all(p.generations.map((g,_)=>v(this,null,function*(){let y=d[_];u[y]=g;let E=n._convertInputToPromptValue(o[y]).toString();return l.update(E,c,g)}))),f=p.llmOutput??{}}return{generations:u,llmOutput:f}})}invocationParams(e){return{}}_modelType(){return"base_chat_model"}serialize(){return w(m({},this.invocationParams()),{_type:this._llmType(),_model:this._modelType()})}generatePrompt(e,t,r){return v(this,null,function*(){let i=e.map(o=>o.toChatMessages());return this.generate(i,t,r)})}call(e,t,r){return v(this,null,function*(){return(yield this.generate([e.map(Po)],t,r)).generations[0][0].message})}callPrompt(e,t,r){return v(this,null,function*(){let i=e.toChatMessages();return this.call(i,t,r)})}predictMessages(e,t,r){return v(this,null,function*(){return this.call(e,t,r)})}predict(e,t,r){return v(this,null,function*(){let i=new wa(e),o=yield this.call([i],t,r);if(typeof o.content!="string")throw new Error("Cannot use predict when output is not a string.");return o.content})}withStructuredOutput(e,t){if(typeof this.bindTools!="function")throw new Error('Chat model must implement ".bindTools()" to use withStructuredOutput.');if(t?.strict)throw new Error('"strict" mode is not supported for this model by default.');let r=e,i=t?.name,o=xa(r)??"A function available to call.",s=t?.method,a=t?.includeRaw;if(s==="jsonMode")throw new Error('Base withStructuredOutput implementation only supports "functionCalling" as a method.');let l=i??"extract",c;bi(r)?c=[{type:"function",function:{name:l,description:o,parameters:ar(r)}}]:("name"in r&&(l=r.name),c=[{type:"function",function:{name:l,description:o,parameters:r}}]);let u=this.bindTools(c),d=An.from(g=>{if(!g.tool_calls||g.tool_calls.length===0)throw new Error("No tool calls found in the response.");let _=g.tool_calls.find(y=>y.name===l);if(!_)throw new Error(`No tool call found with name ${l}.`);return _.args});if(!a)return u.pipe(d).withConfig({runName:"StructuredOutput"});let h=fi.assign({parsed:(g,_)=>d.invoke(g.raw,_)}),f=fi.assign({parsed:()=>null}),p=h.withFallbacks({fallbacks:[f]});return yn.from([{raw:u},p]).withConfig({runName:"StructuredOutputRunnable"})}},fR=class extends ms{_generate(e,t,r){return v(this,null,function*(){let i=yield this._call(e,t,r),o=new pn(i);if(typeof o.content!="string")throw new Error("Cannot generate with a simple chat model when output is not a string.");return{generations:[{text:o.content,message:o}]}})}};var IR={};qt(IR,{AsymmetricStructuredOutputParser:()=>yR,BaseCumulativeTransformOutputParser:()=>ha,BaseLLMOutputParser:()=>nx,BaseOutputParser:()=>gs,BaseTransformOutputParser:()=>_s,BytesOutputParser:()=>pR,CommaSeparatedListOutputParser:()=>mR,CustomListOutputParser:()=>gR,JsonMarkdownStructuredOutputParser:()=>rx,JsonOutputParser:()=>nh,ListOutputParser:()=>Xc,MarkdownListOutputParser:()=>bR,NumberedListOutputParser:()=>_R,OutputParserException:()=>hi,StringOutputParser:()=>vR,StructuredOutputParser:()=>Jc,XMLOutputParser:()=>CR,XML_FORMAT_INSTRUCTIONS:()=>xR,parseJsonMarkdown:()=>b_,parsePartialJson:()=>v_,parseXMLMarkdown:()=>ER});var nx=class extends mt{parseResultWithPrompt(e,t,r){return this.parseResult(e,r)}_baseMessageToString(e){return typeof e.content=="string"?e.content:this._baseMessageContentToString(e.content)}_baseMessageContentToString(e){return JSON.stringify(e)}invoke(e,t){return v(this,null,function*(){return typeof e=="string"?this._callWithConfig((r,i)=>v(this,null,function*(){return this.parseResult([{text:r}],i?.callbacks)}),e,w(m({},t),{runType:"parser"})):this._callWithConfig((r,i)=>v(this,null,function*(){return this.parseResult([{message:r,text:this._baseMessageToString(r)}],i?.callbacks)}),e,w(m({},t),{runType:"parser"}))})}},gs=class extends nx{parseResult(e,t){return this.parse(e[0].text,t)}parseWithPrompt(e,t,r){return v(this,null,function*(){return this.parse(e,r)})}_type(){throw new Error("_type not implemented")}},hi=class extends Error{constructor(e,t,r,i=!1){if(super(e),Object.defineProperty(this,"llmOutput",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"observation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sendToLLM",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.llmOutput=t,this.observation=r,this.sendToLLM=i,i&&(r===void 0||t===void 0))throw new Error("Arguments 'observation' & 'llmOutput' are required if 'sendToLlm' is true");qO(this,"OUTPUT_PARSING_FAILURE")}};var _s=class extends gs{_transform(e){return We(this,null,function*(){try{for(var t=Ee(e),r,i,o;r=!(i=yield new ee(t.next())).done;r=!1){let s=i.value;typeof s=="string"?yield this.parseResult([{text:s}]):yield this.parseResult([{message:s,text:this._baseMessageToString(s)}])}}catch{o=[i]}finally{try{r&&(i=t.return)&&(yield new ee(i.call(t)))}finally{if(o)throw o[0]}}})}transform(e,t){return We(this,null,function*(){yield*Ri(this._transformStreamWithConfig(e,this._transform.bind(this),w(m({},t),{runType:"parser"})))})}},ha=class extends _s{constructor(e){super(e),Object.defineProperty(this,"diff",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.diff=e?.diff??this.diff}_transform(e){return We(this,null,function*(){let t,r;try{for(var i=Ee(e),o,s,a;o=!(s=yield new ee(i.next())).done;o=!1){let l=s.value;if(typeof l!="string"&&typeof l.content!="string")throw new Error("Cannot handle non-string output.");let c;if(Nl(l)){if(typeof l.content!="string")throw new Error("Cannot handle non-string message output.");c=new Ji({message:l,text:l.content})}else if(ln(l)){if(typeof l.content!="string")throw new Error("Cannot handle non-string message output.");c=new Ji({message:KO(l),text:l.content})}else c=new Oh({text:l});r===void 0?r=c:r=r.concat(c);let u=yield new ee(this.parsePartialResult([r]));u!=null&&!hP(u,t)&&(this.diff?yield this._diff(t,u):yield u,t=u)}}catch{a=[s]}finally{try{o&&(s=i.return)&&(yield new ee(s.call(i)))}finally{if(a)throw a[0]}}})}getFormatInstructions(){return""}};var pR=class extends _s{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers","bytes"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"textEncoder",{enumerable:!0,configurable:!0,writable:!0,value:new TextEncoder})}static lc_name(){return"BytesOutputParser"}parse(e){return Promise.resolve(this.textEncoder.encode(e))}getFormatInstructions(){return""}};var Xc=class extends _s{constructor(){super(...arguments),Object.defineProperty(this,"re",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_transform(e){return We(this,null,function*(){let t="";try{for(var r=Ee(e),i,o,s;i=!(o=yield new ee(r.next())).done;i=!1){let a=o.value;if(typeof a=="string"?t+=a:t+=a.content,this.re){let l=[...t.matchAll(this.re)];if(l.length>1){let c=0;for(let u of l.slice(0,-1))yield[u[1]],c+=(u.index??0)+u[0].length;t=t.slice(c)}}else{let l=yield new ee(this.parse(t));if(l.length>1){for(let c of l.slice(0,-1))yield[c];t=l[l.length-1]}}}}catch{s=[o]}finally{try{i&&(o=r.return)&&(yield new ee(o.call(r)))}finally{if(s)throw s[0]}}for(let a of yield new ee(this.parse(t)))yield[a]})}},mR=class extends Xc{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers","list"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}static lc_name(){return"CommaSeparatedListOutputParser"}parse(e){return v(this,null,function*(){try{return e.trim().split(",").map(t=>t.trim())}catch{throw new hi(`Could not parse output: ${e}`,e)}})}getFormatInstructions(){return"Your response should be a list of comma separated values, eg: `foo, bar, baz`"}},gR=class extends Xc{constructor({length:e,separator:t}){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers","list"]}),Object.defineProperty(this,"length",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"separator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.length=e,this.separator=t||","}parse(e){return v(this,null,function*(){try{let t=e.trim().split(this.separator).map(r=>r.trim());if(this.length!==void 0&&t.length!==this.length)throw new hi(`Incorrect number of items. Expected ${this.length}, got ${t.length}.`);return t}catch(t){throw Object.getPrototypeOf(t)===hi.prototype?t:new hi(`Could not parse output: ${e}`)}})}getFormatInstructions(){return`Your response should be a list of ${this.length===void 0?"":`${this.length} `}items separated by "${this.separator}" (eg: \`foo${this.separator} bar${this.separator} baz\`)`}},_R=class extends Xc{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers","list"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"re",{enumerable:!0,configurable:!0,writable:!0,value:/\d+\.\s([^\n]+)/g})}static lc_name(){return"NumberedListOutputParser"}getFormatInstructions(){return`Your response should be a numbered list with each item on a new line. For example: 

1. foo

2. bar

3. baz`}parse(e){return v(this,null,function*(){return[...e.matchAll(this.re)??[]].map(t=>t[1])})}},bR=class extends Xc{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers","list"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"re",{enumerable:!0,configurable:!0,writable:!0,value:/^\s*[-*]\s([^\n]+)$/gm})}static lc_name(){return"NumberedListOutputParser"}getFormatInstructions(){return`Your response should be a numbered list with each item on a new line. For example: 

1. foo

2. bar

3. baz`}parse(e){return v(this,null,function*(){return[...e.matchAll(this.re)??[]].map(t=>t[1])})}};var vR=class extends _s{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers","string"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}static lc_name(){return"StrOutputParser"}parse(e){return Promise.resolve(e)}getFormatInstructions(){return""}_textContentToString(e){return e.text}_imageUrlContentToString(e){throw new Error('Cannot coerce a multimodal "image_url" message part into a string.')}_messageContentComplexToString(e){switch(e.type){case"text":case"text_delta":if("text"in e)return this._textContentToString(e);break;case"image_url":if("image_url"in e)return this._imageUrlContentToString(e);break;default:throw new Error(`Cannot coerce "${e.type}" message part into a string.`)}throw new Error(`Invalid content type: ${e.type}`)}_baseMessageContentToString(e){return e.reduce((t,r)=>t+this._messageContentComplexToString(r),"")}};var Jc=class extends gs{static lc_name(){return"StructuredOutputParser"}toJSON(){return this.toJSONNotImplemented()}constructor(e){super(e),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","structured"]})}static fromZodSchema(e){return new this(e)}static fromNamesAndDescriptions(e){let t=b.object(Object.fromEntries(Object.entries(e).map(([r,i])=>[r,b.string().describe(i)])));return new this(t)}getFormatInstructions(){return`You must format your output as a JSON value that adheres to a given "JSON Schema" instance.

"JSON Schema" is a declarative language that allows you to annotate and validate JSON documents.

For example, the example "JSON Schema" instance {{"properties": {{"foo": {{"description": "a list of test words", "type": "array", "items": {{"type": "string"}}}}}}, "required": ["foo"]}}
would match an object with one required property, "foo". The "type" property specifies "foo" must be an "array", and the "description" property semantically describes it as "a list of test words". The items within "foo" must be strings.
Thus, the object {{"foo": ["bar", "baz"]}} is a well-formatted instance of this example "JSON Schema". The object {{"properties": {{"foo": ["bar", "baz"]}}}} is not well-formatted.

Your output will be parsed and type-checked according to the provided schema instance, so make sure all fields in your output match the schema exactly and there are no trailing commas!

Here is the JSON Schema instance your output must adhere to. Include the enclosing markdown codeblock:
\`\`\`json
${JSON.stringify(ar(this.schema))}
\`\`\`
`}parse(e){return v(this,null,function*(){try{let r=(e.includes("```")?e.trim().split(/```(?:json)?/)[1]:e.trim()).replace(/"([^"\\]*(\\.[^"\\]*)*)"/g,(i,o)=>`"${o.replace(/\n/g,"\\n")}"`).replace(/\n/g,"");return yield Nh(this.schema,JSON.parse(r))}catch(t){throw new hi(`Failed to parse. Text: "${e}". Error: ${t}`,e)}})}},rx=class extends Jc{static lc_name(){return"JsonMarkdownStructuredOutputParser"}getFormatInstructions(e){let t=e?.interpolationDepth??1;if(t<1)throw new Error("f string interpolation depth must be at least 1");return`Return a markdown code snippet with a JSON object formatted to look like:
\`\`\`json
${this._schemaToInstruction(ar(this.schema)).replaceAll("{","{".repeat(t)).replaceAll("}","}".repeat(t))}
\`\`\``}_schemaToInstruction(e,t=2){let r=e;if("type"in r){let i=!1,o;if(Array.isArray(r.type)){let l=r.type.findIndex(c=>c==="null");l!==-1&&(i=!0,r.type.splice(l,1)),o=r.type.join(" | ")}else o=r.type;if(r.type==="object"&&r.properties){let l=r.description?` // ${r.description}`:"";return`{
${Object.entries(r.properties).map(([u,d])=>{let h=r.required?.includes(u)?"":" (optional)";return`${" ".repeat(t)}"${u}": ${this._schemaToInstruction(d,t+2)}${h}`}).join(`
`)}
${" ".repeat(t-2)}}${l}`}if(r.type==="array"&&r.items){let l=r.description?` // ${r.description}`:"";return`array[
${" ".repeat(t)}${this._schemaToInstruction(r.items,t+2)}
${" ".repeat(t-2)}] ${l}`}let s=i?" (nullable)":"",a=r.description?` // ${r.description}`:"";return`${o}${a}${s}`}if("anyOf"in r)return r.anyOf.map(i=>this._schemaToInstruction(i,t)).join(`
${" ".repeat(t-2)}`);throw new Error("unsupported schema type")}static fromZodSchema(e){return new this(e)}static fromNamesAndDescriptions(e){let t=b.object(Object.fromEntries(Object.entries(e).map(([r,i])=>[r,b.string().describe(i)])));return new this(t)}},yR=class extends gs{constructor({inputSchema:e}){super(...arguments),Object.defineProperty(this,"structuredInputParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.structuredInputParser=new rx(e)}parse(e){return v(this,null,function*(){let t;try{t=yield this.structuredInputParser.parse(e)}catch(r){throw new hi(`Failed to parse. Text: "${e}". Error: ${r}`,e)}return this.outputProcessor(t)})}getFormatInstructions(){return this.structuredInputParser.getFormatInstructions()}};var wR={};qt(wR,{applyPatch:()=>ZO,compare:()=>Su});var nh=class extends ha{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}static lc_name(){return"JsonOutputParser"}_diff(e,t){if(t)return e?Su(e,t):[{op:"replace",path:"",value:t}]}parsePartialResult(e){return v(this,null,function*(){return b_(e[0].text)})}parse(e){return v(this,null,function*(){return b_(e,JSON.parse)})}getFormatInstructions(){return""}};var loe=function(){let n={};n.parser=function(I,C){return new t(I,C)},n.SAXParser=t,n.SAXStream=c,n.createStream=l,n.MAX_BUFFER_LENGTH=65536;let e=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];n.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function t(I,C){if(!(this instanceof t))return new t(I,C);var Q=this;i(Q),Q.q=Q.c="",Q.bufferCheckPosition=n.MAX_BUFFER_LENGTH,Q.opt=C||{},Q.opt.lowercase=Q.opt.lowercase||Q.opt.lowercasetags,Q.looseCase=Q.opt.lowercase?"toLowerCase":"toUpperCase",Q.tags=[],Q.closed=Q.closedRoot=Q.sawRoot=!1,Q.tag=Q.error=null,Q.strict=!!I,Q.noscript=!!(I||Q.opt.noscript),Q.state=S.BEGIN,Q.strictEntities=Q.opt.strictEntities,Q.ENTITIES=Q.strictEntities?Object.create(n.XML_ENTITIES):Object.create(n.ENTITIES),Q.attribList=[],Q.opt.xmlns&&(Q.ns=Object.create(p)),Q.trackPosition=Q.opt.position!==!1,Q.trackPosition&&(Q.position=Q.line=Q.column=0),Z(Q,"onready")}Object.create||(Object.create=function(I){function C(){}C.prototype=I;var Q=new C;return Q}),Object.keys||(Object.keys=function(I){var C=[];for(var Q in I)I.hasOwnProperty(Q)&&C.push(Q);return C});function r(I){for(var C=Math.max(n.MAX_BUFFER_LENGTH,10),Q=0,O=0,Fe=e.length;O<Fe;O++){var rt=I[e[O]].length;if(rt>C)switch(e[O]){case"textNode":oe(I);break;case"cdata":Y(I,"oncdata",I.cdata),I.cdata="";break;case"script":Y(I,"onscript",I.script),I.script="";break;default:j(I,"Max buffer length exceeded: "+e[O])}Q=Math.max(Q,rt)}var Xt=n.MAX_BUFFER_LENGTH-Q;I.bufferCheckPosition=Xt+I.position}function i(I){for(var C=0,Q=e.length;C<Q;C++)I[e[C]]=""}function o(I){oe(I),I.cdata!==""&&(Y(I,"oncdata",I.cdata),I.cdata=""),I.script!==""&&(Y(I,"onscript",I.script),I.script="")}t.prototype={end:function(){H(this)},write:En,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){o(this)}};var s=ReadableStream;s||(s=function(){});var a=n.EVENTS.filter(function(I){return I!=="error"&&I!=="end"});function l(I,C){return new c(I,C)}function c(I,C){if(!(this instanceof c))return new c(I,C);s.apply(this),this._parser=new t(I,C),this.writable=!0,this.readable=!0;var Q=this;this._parser.onend=function(){Q.emit("end")},this._parser.onerror=function(O){Q.emit("error",O),Q._parser.error=null},this._decoder=null,a.forEach(function(O){Object.defineProperty(Q,"on"+O,{get:function(){return Q._parser["on"+O]},set:function(Fe){if(!Fe)return Q.removeAllListeners(O),Q._parser["on"+O]=Fe,Fe;Q.on(O,Fe)},enumerable:!0,configurable:!1})})}c.prototype=Object.create(s.prototype,{constructor:{value:c}}),c.prototype.write=function(I){return this._parser.write(I.toString()),this.emit("data",I),!0},c.prototype.end=function(I){return I&&I.length&&this.write(I),this._parser.end(),!0},c.prototype.on=function(I,C){var Q=this;return!Q._parser["on"+I]&&a.indexOf(I)!==-1&&(Q._parser["on"+I]=function(){var O=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);O.splice(0,0,I),Q.emit.apply(Q,O)}),s.prototype.on.call(Q,I,C)};var u="[CDATA[",d="DOCTYPE",h="http://www.w3.org/XML/1998/namespace",f="http://www.w3.org/2000/xmlns/",p={xml:h,xmlns:f},g=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,_=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,y=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,E=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function T(I){return I===" "||I===`
`||I==="\r"||I==="	"}function A(I){return I==='"'||I==="'"}function P(I){return I===">"||T(I)}function R(I,C){return I.test(C)}function W(I,C){return!R(I,C)}var S=0;n.STATE={BEGIN:S++,BEGIN_WHITESPACE:S++,TEXT:S++,TEXT_ENTITY:S++,OPEN_WAKA:S++,SGML_DECL:S++,SGML_DECL_QUOTED:S++,DOCTYPE:S++,DOCTYPE_QUOTED:S++,DOCTYPE_DTD:S++,DOCTYPE_DTD_QUOTED:S++,COMMENT_STARTING:S++,COMMENT:S++,COMMENT_ENDING:S++,COMMENT_ENDED:S++,CDATA:S++,CDATA_ENDING:S++,CDATA_ENDING_2:S++,PROC_INST:S++,PROC_INST_BODY:S++,PROC_INST_ENDING:S++,OPEN_TAG:S++,OPEN_TAG_SLASH:S++,ATTRIB:S++,ATTRIB_NAME:S++,ATTRIB_NAME_SAW_WHITE:S++,ATTRIB_VALUE:S++,ATTRIB_VALUE_QUOTED:S++,ATTRIB_VALUE_CLOSED:S++,ATTRIB_VALUE_UNQUOTED:S++,ATTRIB_VALUE_ENTITY_Q:S++,ATTRIB_VALUE_ENTITY_U:S++,CLOSE_TAG:S++,CLOSE_TAG_SAW_WHITE:S++,SCRIPT:S++,SCRIPT_ENDING:S++},n.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},n.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(n.ENTITIES).forEach(function(I){var C=n.ENTITIES[I],Q=typeof C=="number"?String.fromCharCode(C):C;n.ENTITIES[I]=Q});for(var $ in n.STATE)n.STATE[n.STATE[$]]=$;S=n.STATE;function Z(I,C,Q){I[C]&&I[C](Q)}function Y(I,C,Q){I.textNode&&oe(I),Z(I,C,Q)}function oe(I){I.textNode=F(I.opt,I.textNode),I.textNode&&Z(I,"ontext",I.textNode),I.textNode=""}function F(I,C){return I.trim&&(C=C.trim()),I.normalize&&(C=C.replace(/\s+/g," ")),C}function j(I,C){return oe(I),I.trackPosition&&(C+=`
Line: `+I.line+`
Column: `+I.column+`
Char: `+I.c),C=new Error(C),I.error=C,Z(I,"onerror",C),I}function H(I){return I.sawRoot&&!I.closedRoot&&q(I,"Unclosed root tag"),I.state!==S.BEGIN&&I.state!==S.BEGIN_WHITESPACE&&I.state!==S.TEXT&&j(I,"Unexpected end"),oe(I),I.c="",I.closed=!0,Z(I,"onend"),t.call(I,I.strict,I.opt),I}function q(I,C){if(typeof I!="object"||!(I instanceof t))throw new Error("bad call to strictFail");I.strict&&j(I,C)}function X(I){I.strict||(I.tagName=I.tagName[I.looseCase]());var C=I.tags[I.tags.length-1]||I,Q=I.tag={name:I.tagName,attributes:{}};I.opt.xmlns&&(Q.ns=C.ns),I.attribList.length=0,Y(I,"onopentagstart",Q)}function le(I,C){var Q=I.indexOf(":"),O=Q<0?["",I]:I.split(":"),Fe=O[0],rt=O[1];return C&&I==="xmlns"&&(Fe="xmlns",rt=""),{prefix:Fe,local:rt}}function ge(I){if(I.strict||(I.attribName=I.attribName[I.looseCase]()),I.attribList.indexOf(I.attribName)!==-1||I.tag.attributes.hasOwnProperty(I.attribName)){I.attribName=I.attribValue="";return}if(I.opt.xmlns){var C=le(I.attribName,!0),Q=C.prefix,O=C.local;if(Q==="xmlns")if(O==="xml"&&I.attribValue!==h)q(I,"xml: prefix must be bound to "+h+`
Actual: `+I.attribValue);else if(O==="xmlns"&&I.attribValue!==f)q(I,"xmlns: prefix must be bound to "+f+`
Actual: `+I.attribValue);else{var Fe=I.tag,rt=I.tags[I.tags.length-1]||I;Fe.ns===rt.ns&&(Fe.ns=Object.create(rt.ns)),Fe.ns[O]=I.attribValue}I.attribList.push([I.attribName,I.attribValue])}else I.tag.attributes[I.attribName]=I.attribValue,Y(I,"onattribute",{name:I.attribName,value:I.attribValue});I.attribName=I.attribValue=""}function pe(I,C){if(I.opt.xmlns){var Q=I.tag,O=le(I.tagName);Q.prefix=O.prefix,Q.local=O.local,Q.uri=Q.ns[O.prefix]||"",Q.prefix&&!Q.uri&&(q(I,"Unbound namespace prefix: "+JSON.stringify(I.tagName)),Q.uri=O.prefix);var Fe=I.tags[I.tags.length-1]||I;Q.ns&&Fe.ns!==Q.ns&&Object.keys(Q.ns).forEach(function(br){Y(I,"onopennamespace",{prefix:br,uri:Q.ns[br]})});for(var rt=0,Xt=I.attribList.length;rt<Xt;rt++){var At=I.attribList[rt],Qe=At[0],Lr=At[1],Jt=le(Qe,!0),_r=Jt.prefix,Cs=Jt.local,Fn=_r===""?"":Q.ns[_r]||"",Ir={name:Qe,value:Lr,prefix:_r,local:Cs,uri:Fn};_r&&_r!=="xmlns"&&!Fn&&(q(I,"Unbound namespace prefix: "+JSON.stringify(_r)),Ir.uri=_r),I.tag.attributes[Qe]=Ir,Y(I,"onattribute",Ir)}I.attribList.length=0}I.tag.isSelfClosing=!!C,I.sawRoot=!0,I.tags.push(I.tag),Y(I,"onopentag",I.tag),C||(!I.noscript&&I.tagName.toLowerCase()==="script"?I.state=S.SCRIPT:I.state=S.TEXT,I.tag=null,I.tagName=""),I.attribName=I.attribValue="",I.attribList.length=0}function It(I){if(!I.tagName){q(I,"Weird empty close tag."),I.textNode+="</>",I.state=S.TEXT;return}if(I.script){if(I.tagName!=="script"){I.script+="</"+I.tagName+">",I.tagName="",I.state=S.SCRIPT;return}Y(I,"onscript",I.script),I.script=""}var C=I.tags.length,Q=I.tagName;I.strict||(Q=Q[I.looseCase]());for(var O=Q;C--;){var Fe=I.tags[C];if(Fe.name!==O)q(I,"Unexpected close tag");else break}if(C<0){q(I,"Unmatched closing tag: "+I.tagName),I.textNode+="</"+I.tagName+">",I.state=S.TEXT;return}I.tagName=Q;for(var rt=I.tags.length;rt-- >C;){var Xt=I.tag=I.tags.pop();I.tagName=I.tag.name,Y(I,"onclosetag",I.tagName);var At={};for(var Qe in Xt.ns)At[Qe]=Xt.ns[Qe];var Lr=I.tags[I.tags.length-1]||I;I.opt.xmlns&&Xt.ns!==Lr.ns&&Object.keys(Xt.ns).forEach(function(Jt){var _r=Xt.ns[Jt];Y(I,"onclosenamespace",{prefix:Jt,uri:_r})})}C===0&&(I.closedRoot=!0),I.tagName=I.attribValue=I.attribName="",I.attribList.length=0,I.state=S.TEXT}function zt(I){var C=I.entity,Q=C.toLowerCase(),O,Fe="";return I.ENTITIES[C]?I.ENTITIES[C]:I.ENTITIES[Q]?I.ENTITIES[Q]:(C=Q,C.charAt(0)==="#"&&(C.charAt(1)==="x"?(C=C.slice(2),O=parseInt(C,16),Fe=O.toString(16)):(C=C.slice(1),O=parseInt(C,10),Fe=O.toString(10))),C=C.replace(/^0+/,""),isNaN(O)||Fe.toLowerCase()!==C?(q(I,"Invalid character entity"),"&"+I.entity+";"):String.fromCodePoint(O))}function Cn(I,C){C==="<"?(I.state=S.OPEN_WAKA,I.startTagPosition=I.position):T(C)||(q(I,"Non-whitespace before first tag."),I.textNode=C,I.state=S.TEXT)}function ft(I,C){var Q="";return C<I.length&&(Q=I.charAt(C)),Q}function En(I){var C=this;if(this.error)throw this.error;if(C.closed)return j(C,"Cannot write after close. Assign an onready handler.");if(I===null)return H(C);typeof I=="object"&&(I=I.toString());for(var Q=0,O="";O=ft(I,Q++),C.c=O,!!O;)switch(C.trackPosition&&(C.position++,O===`
`?(C.line++,C.column=0):C.column++),C.state){case S.BEGIN:if(C.state=S.BEGIN_WHITESPACE,O==="\uFEFF")continue;Cn(C,O);continue;case S.BEGIN_WHITESPACE:Cn(C,O);continue;case S.TEXT:if(C.sawRoot&&!C.closedRoot){for(var Fe=Q-1;O&&O!=="<"&&O!=="&";)O=ft(I,Q++),O&&C.trackPosition&&(C.position++,O===`
`?(C.line++,C.column=0):C.column++);C.textNode+=I.substring(Fe,Q-1)}O==="<"&&!(C.sawRoot&&C.closedRoot&&!C.strict)?(C.state=S.OPEN_WAKA,C.startTagPosition=C.position):(!T(O)&&(!C.sawRoot||C.closedRoot)&&q(C,"Text data outside of root node."),O==="&"?C.state=S.TEXT_ENTITY:C.textNode+=O);continue;case S.SCRIPT:O==="<"?C.state=S.SCRIPT_ENDING:C.script+=O;continue;case S.SCRIPT_ENDING:O==="/"?C.state=S.CLOSE_TAG:(C.script+="<"+O,C.state=S.SCRIPT);continue;case S.OPEN_WAKA:if(O==="!")C.state=S.SGML_DECL,C.sgmlDecl="";else if(!T(O))if(R(g,O))C.state=S.OPEN_TAG,C.tagName=O;else if(O==="/")C.state=S.CLOSE_TAG,C.tagName="";else if(O==="?")C.state=S.PROC_INST,C.procInstName=C.procInstBody="";else{if(q(C,"Unencoded <"),C.startTagPosition+1<C.position){var rt=C.position-C.startTagPosition;O=new Array(rt).join(" ")+O}C.textNode+="<"+O,C.state=S.TEXT}continue;case S.SGML_DECL:(C.sgmlDecl+O).toUpperCase()===u?(Y(C,"onopencdata"),C.state=S.CDATA,C.sgmlDecl="",C.cdata=""):C.sgmlDecl+O==="--"?(C.state=S.COMMENT,C.comment="",C.sgmlDecl=""):(C.sgmlDecl+O).toUpperCase()===d?(C.state=S.DOCTYPE,(C.doctype||C.sawRoot)&&q(C,"Inappropriately located doctype declaration"),C.doctype="",C.sgmlDecl=""):O===">"?(Y(C,"onsgmldeclaration",C.sgmlDecl),C.sgmlDecl="",C.state=S.TEXT):(A(O)&&(C.state=S.SGML_DECL_QUOTED),C.sgmlDecl+=O);continue;case S.SGML_DECL_QUOTED:O===C.q&&(C.state=S.SGML_DECL,C.q=""),C.sgmlDecl+=O;continue;case S.DOCTYPE:O===">"?(C.state=S.TEXT,Y(C,"ondoctype",C.doctype),C.doctype=!0):(C.doctype+=O,O==="["?C.state=S.DOCTYPE_DTD:A(O)&&(C.state=S.DOCTYPE_QUOTED,C.q=O));continue;case S.DOCTYPE_QUOTED:C.doctype+=O,O===C.q&&(C.q="",C.state=S.DOCTYPE);continue;case S.DOCTYPE_DTD:C.doctype+=O,O==="]"?C.state=S.DOCTYPE:A(O)&&(C.state=S.DOCTYPE_DTD_QUOTED,C.q=O);continue;case S.DOCTYPE_DTD_QUOTED:C.doctype+=O,O===C.q&&(C.state=S.DOCTYPE_DTD,C.q="");continue;case S.COMMENT:O==="-"?C.state=S.COMMENT_ENDING:C.comment+=O;continue;case S.COMMENT_ENDING:O==="-"?(C.state=S.COMMENT_ENDED,C.comment=F(C.opt,C.comment),C.comment&&Y(C,"oncomment",C.comment),C.comment=""):(C.comment+="-"+O,C.state=S.COMMENT);continue;case S.COMMENT_ENDED:O!==">"?(q(C,"Malformed comment"),C.comment+="--"+O,C.state=S.COMMENT):C.state=S.TEXT;continue;case S.CDATA:O==="]"?C.state=S.CDATA_ENDING:C.cdata+=O;continue;case S.CDATA_ENDING:O==="]"?C.state=S.CDATA_ENDING_2:(C.cdata+="]"+O,C.state=S.CDATA);continue;case S.CDATA_ENDING_2:O===">"?(C.cdata&&Y(C,"oncdata",C.cdata),Y(C,"onclosecdata"),C.cdata="",C.state=S.TEXT):O==="]"?C.cdata+="]":(C.cdata+="]]"+O,C.state=S.CDATA);continue;case S.PROC_INST:O==="?"?C.state=S.PROC_INST_ENDING:T(O)?C.state=S.PROC_INST_BODY:C.procInstName+=O;continue;case S.PROC_INST_BODY:if(!C.procInstBody&&T(O))continue;O==="?"?C.state=S.PROC_INST_ENDING:C.procInstBody+=O;continue;case S.PROC_INST_ENDING:O===">"?(Y(C,"onprocessinginstruction",{name:C.procInstName,body:C.procInstBody}),C.procInstName=C.procInstBody="",C.state=S.TEXT):(C.procInstBody+="?"+O,C.state=S.PROC_INST_BODY);continue;case S.OPEN_TAG:R(_,O)?C.tagName+=O:(X(C),O===">"?pe(C):O==="/"?C.state=S.OPEN_TAG_SLASH:(T(O)||q(C,"Invalid character in tag name"),C.state=S.ATTRIB));continue;case S.OPEN_TAG_SLASH:O===">"?(pe(C,!0),It(C)):(q(C,"Forward-slash in opening tag not followed by >"),C.state=S.ATTRIB);continue;case S.ATTRIB:if(T(O))continue;O===">"?pe(C):O==="/"?C.state=S.OPEN_TAG_SLASH:R(g,O)?(C.attribName=O,C.attribValue="",C.state=S.ATTRIB_NAME):q(C,"Invalid attribute name");continue;case S.ATTRIB_NAME:O==="="?C.state=S.ATTRIB_VALUE:O===">"?(q(C,"Attribute without value"),C.attribValue=C.attribName,ge(C),pe(C)):T(O)?C.state=S.ATTRIB_NAME_SAW_WHITE:R(_,O)?C.attribName+=O:q(C,"Invalid attribute name");continue;case S.ATTRIB_NAME_SAW_WHITE:if(O==="=")C.state=S.ATTRIB_VALUE;else{if(T(O))continue;q(C,"Attribute without value"),C.tag.attributes[C.attribName]="",C.attribValue="",Y(C,"onattribute",{name:C.attribName,value:""}),C.attribName="",O===">"?pe(C):R(g,O)?(C.attribName=O,C.state=S.ATTRIB_NAME):(q(C,"Invalid attribute name"),C.state=S.ATTRIB)}continue;case S.ATTRIB_VALUE:if(T(O))continue;A(O)?(C.q=O,C.state=S.ATTRIB_VALUE_QUOTED):(q(C,"Unquoted attribute value"),C.state=S.ATTRIB_VALUE_UNQUOTED,C.attribValue=O);continue;case S.ATTRIB_VALUE_QUOTED:if(O!==C.q){O==="&"?C.state=S.ATTRIB_VALUE_ENTITY_Q:C.attribValue+=O;continue}ge(C),C.q="",C.state=S.ATTRIB_VALUE_CLOSED;continue;case S.ATTRIB_VALUE_CLOSED:T(O)?C.state=S.ATTRIB:O===">"?pe(C):O==="/"?C.state=S.OPEN_TAG_SLASH:R(g,O)?(q(C,"No whitespace between attributes"),C.attribName=O,C.attribValue="",C.state=S.ATTRIB_NAME):q(C,"Invalid attribute name");continue;case S.ATTRIB_VALUE_UNQUOTED:if(!P(O)){O==="&"?C.state=S.ATTRIB_VALUE_ENTITY_U:C.attribValue+=O;continue}ge(C),O===">"?pe(C):C.state=S.ATTRIB;continue;case S.CLOSE_TAG:if(C.tagName)O===">"?It(C):R(_,O)?C.tagName+=O:C.script?(C.script+="</"+C.tagName,C.tagName="",C.state=S.SCRIPT):(T(O)||q(C,"Invalid tagname in closing tag"),C.state=S.CLOSE_TAG_SAW_WHITE);else{if(T(O))continue;W(g,O)?C.script?(C.script+="</"+O,C.state=S.SCRIPT):q(C,"Invalid tagname in closing tag."):C.tagName=O}continue;case S.CLOSE_TAG_SAW_WHITE:if(T(O))continue;O===">"?It(C):q(C,"Invalid characters in closing tag");continue;case S.TEXT_ENTITY:case S.ATTRIB_VALUE_ENTITY_Q:case S.ATTRIB_VALUE_ENTITY_U:var Xt,At;switch(C.state){case S.TEXT_ENTITY:Xt=S.TEXT,At="textNode";break;case S.ATTRIB_VALUE_ENTITY_Q:Xt=S.ATTRIB_VALUE_QUOTED,At="attribValue";break;case S.ATTRIB_VALUE_ENTITY_U:Xt=S.ATTRIB_VALUE_UNQUOTED,At="attribValue";break}if(O===";")if(C.opt.unparsedEntities){var Qe=zt(C);C.entity="",C.state=Xt,C.write(Qe)}else C[At]+=zt(C),C.entity="",C.state=Xt;else R(C.entity.length?E:y,O)?C.entity+=O:(q(C,"Invalid character in entity name"),C[At]+="&"+C.entity+O,C.entity="",C.state=Xt);continue;default:throw new Error(C,"Unknown state: "+C.state)}return C.position>=C.bufferCheckPosition&&r(C),C}return String.fromCodePoint||function(){var I=String.fromCharCode,C=Math.floor,Q=function(){var O=16384,Fe=[],rt,Xt,At=-1,Qe=arguments.length;if(!Qe)return"";for(var Lr="";++At<Qe;){var Jt=Number(arguments[At]);if(!isFinite(Jt)||Jt<0||Jt>1114111||C(Jt)!==Jt)throw RangeError("Invalid code point: "+Jt);Jt<=65535?Fe.push(Jt):(Jt-=65536,rt=(Jt>>10)+55296,Xt=Jt%1024+56320,Fe.push(rt,Xt)),(At+1===Qe||Fe.length>O)&&(Lr+=I.apply(null,Fe),Fe.length=0)}return Lr};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:Q,configurable:!0,writable:!0}):String.fromCodePoint=Q}(),n},_3=loe();var xR=`The output should be formatted as a XML file.
1. Output should conform to the tags below. 
2. If tags are not given, make them on your own.
3. Remember to always open and close all the tags.

As an example, for the tags ["foo", "bar", "baz"]:
1. String "<foo>
   <bar>
      <baz></baz>
   </bar>
</foo>" is a well-formatted instance of the schema. 
2. String "<foo>
   <bar>
   </foo>" is a badly-formatted instance.
3. String "<foo>
   <tag>
   </tag>
</foo>" is a badly-formatted instance.

Here are the output tags:
\`\`\`
{tags}
\`\`\``,CR=class extends ha{constructor(e){super(e),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.tags=e?.tags}static lc_name(){return"XMLOutputParser"}_diff(e,t){if(t)return e?Su(e,t):[{op:"replace",path:"",value:t}]}parsePartialResult(e){return v(this,null,function*(){return ER(e[0].text)})}parse(e){return v(this,null,function*(){return ER(e)})}getFormatInstructions(){return!!(this.tags&&this.tags.length>0)?xR.replace("{tags}",this.tags?.join(", ")??""):xR}},coe=n=>n.split(`
`).map(e=>e.replace(/^\s+/,"")).join(`
`).trim(),b3=n=>{if(Object.keys(n).length===0)return{};let e={};return n.children.length>0?(e[n.name]=n.children.map(b3),e):(e[n.name]=n.text??void 0,e)};function ER(n){let e=coe(n),t=_3.parser(!0),r={},i=[];t.onopentag=a=>{let l={name:a.name,attributes:a.attributes,children:[],text:"",isSelfClosing:a.isSelfClosing};i.length>0?i[i.length-1].children.push(l):r=l,a.isSelfClosing||i.push(l)},t.onclosetag=()=>{if(i.length>0){let a=i.pop();i.length===0&&a&&(r=a)}},t.ontext=a=>{if(i.length>0){let l=i[i.length-1];l.text+=a}},t.onattribute=a=>{if(i.length>0){let l=i[i.length-1];l.attributes[a.name]=a.value}};let o=/```(xml)?(.*)```/s.exec(e),s=o?o[2]:e;return t.write(s).close(),r&&r.name==="?xml"&&(r=r.children[0]),b3(r)}function ix(n,e){if(n.function===void 0)return;let t;if(e?.partial)try{t=v_(n.function.arguments??"{}")}catch{return}else try{t=JSON.parse(n.function.arguments)}catch(i){throw new hi([`Function "${n.function.name}" arguments:`,"",n.function.arguments,"","are not valid JSON.",`Error: ${i.message}`].join(`
`))}let r={name:n.function.name,args:t,type:"tool_call"};return e?.returnId&&(r.id=n.id),r}function v3(n){if(n.id===void 0)throw new Error('All OpenAI tool calls must have an "id" field.');return{id:n.id,type:"function",function:{name:n.name,arguments:JSON.stringify(n.args)}}}function DR(n,e){return{name:n.function?.name,args:n.function?.arguments,id:n.id,error:e,type:"invalid_tool_call"}}var SR=class extends ha{static lc_name(){return"JsonOutputToolsParser"}constructor(e){super(e),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","openai_tools"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.returnId=e?.returnId??this.returnId}_diff(){throw new Error("Not supported.")}parse(){return v(this,null,function*(){throw new Error("Not implemented.")})}parseResult(e){return v(this,null,function*(){return yield this.parsePartialResult(e,!1)})}parsePartialResult(e,t=!0){return v(this,null,function*(){let r=e[0].message,i;if(ti(r)&&r.tool_calls?.length?i=r.tool_calls.map(s=>{let c=s,{id:a}=c,l=Ae(c,["id"]);return this.returnId?m({id:a},l):l}):r.additional_kwargs.tool_calls!==void 0&&(i=JSON.parse(JSON.stringify(r.additional_kwargs.tool_calls)).map(a=>ix(a,{returnId:this.returnId,partial:t}))),!i)return[];let o=[];for(let s of i)if(s!==void 0){let a={type:s.name,args:s.args,id:s.id};o.push(a)}return o})}},Pg=class n extends SR{static lc_name(){return"JsonOutputKeyToolsParser"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","openai_tools"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"keyName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnSingle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"zodSchema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keyName=e.keyName,this.returnSingle=e.returnSingle??this.returnSingle,this.zodSchema=e.zodSchema}_validateResult(e){return v(this,null,function*(){if(this.zodSchema===void 0)return e;let t=yield SC(this.zodSchema,e);if(t.success)return t.data;throw new hi(`Failed to parse. Text: "${JSON.stringify(e,null,2)}". Error: ${JSON.stringify(t.error?.issues)}`,JSON.stringify(e,null,2))})}parsePartialResult(e){return v(this,null,function*(){let r=(yield sr(n.prototype,this,"parsePartialResult").call(this,e)).filter(o=>o.type===this.keyName),i=r;if(r.length)return this.returnId||(i=r.map(o=>o.args)),this.returnSingle?i[0]:i})}parseResult(e){return v(this,null,function*(){let r=(yield sr(n.prototype,this,"parsePartialResult").call(this,e,!1)).filter(s=>s.type===this.keyName),i=r;return r.length?(this.returnId||(i=r.map(s=>s.args)),this.returnSingle?this._validateResult(i[0]):yield Promise.all(i.map(s=>this._validateResult(s)))):void 0})}};var TR={};qt(TR,{extendInteropZodObject:()=>TC,getInteropZodDefaultGetter:()=>mP,getInteropZodObjectShape:()=>E_,getSchemaDescription:()=>xa,interopParse:()=>Fh,interopParseAsync:()=>Nh,interopSafeParse:()=>S8,interopSafeParseAsync:()=>SC,interopZodObjectPartial:()=>Lh,interopZodObjectPassthrough:()=>M8,interopZodObjectStrict:()=>R8,interopZodTransformInputSchema:()=>O8,isInteropZodObject:()=>Fo,isInteropZodSchema:()=>bi,isShapelessZodSchema:()=>D8,isSimpleStringZodSchema:()=>DC,isZodArrayV4:()=>k8,isZodObjectV3:()=>T8,isZodObjectV4:()=>A8,isZodSchema:()=>I8,isZodSchemaV3:()=>Ph,isZodSchemaV4:()=>IC});function eu(n){let{azureOpenAIApiDeploymentName:e,azureOpenAIApiInstanceName:t,azureOpenAIApiKey:r,azureOpenAIBasePath:i,baseURL:o,azureADTokenProvider:s,azureOpenAIEndpoint:a}=n;if((r||s)&&i&&e)return`${i}/${e}`;if((r||s)&&a&&e)return`${a}/openai/deployments/${e}`;if(r||s){if(!t)throw new Error("azureOpenAIApiInstanceName is required when using azureOpenAIApiKey");if(!e)throw new Error("azureOpenAIApiDeploymentName is a required parameter when using azureOpenAIApiKey");return`https://${t}.openai.azure.com/openai/deployments/${e}`}return o}var AR={};qt(AR,{convertToOpenAIFunction:()=>ox,convertToOpenAITool:()=>sx,isLangChainTool:()=>yl,isRunnableToolLike:()=>Fg,isStructuredTool:()=>Ng,isStructuredToolParams:()=>Lg});function Ng(n){return n!==void 0&&Array.isArray(n.lc_namespace)}function Fg(n){return n!==void 0&&mt.isRunnable(n)&&"lc_name"in n.constructor&&typeof n.constructor.lc_name=="function"&&n.constructor.lc_name()==="RunnableToolLike"}function Lg(n){return!!n&&typeof n=="object"&&"name"in n&&"schema"in n&&(bi(n.schema)||n.schema!=null&&typeof n.schema=="object"&&"type"in n.schema&&typeof n.schema.type=="string"&&["null","boolean","object","array","number","string"].includes(n.schema.type))}function yl(n){return Lg(n)||Fg(n)||Ng(n)}function ox(n,e){let t=typeof e=="number"?void 0:e;return m({name:n.name,description:n.description,parameters:ar(n.schema)},t?.strict!==void 0?{strict:t.strict}:{})}function sx(n,e){let t=typeof e=="number"?void 0:e,r;return yl(n)?r={type:"function",function:ox(n)}:r=n,t?.strict!==void 0&&(r.function.strict=t.strict),r}var w3=Symbol("Let zodToJsonSchema decide on which parser to use"),y3={name:void 0,$refStrategy:"root",effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",nullableStrategy:"from-target",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},x3=n=>typeof n=="string"?w(m({},y3),{basePath:["#"],definitions:{},name:n}):m(w(m({},y3),{basePath:["#"],definitions:{}}),n);var jg=n=>"_def"in n?n._def:n;function C3(n){if(!n)return!0;for(let e in n)return!1;return!0}var E3=n=>{let e=x3(n),t=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return w(m({},e),{currentPath:t,propertyPath:void 0,seenRefs:new Set,seen:new Map(Object.entries(e.definitions).map(([r,i])=>[jg(i),{def:jg(i),path:[...e.basePath,e.definitionPath,r],jsonSchema:void 0}]))})};function kR(n,e,t,r){r?.errorMessages&&t&&(n.errorMessage=w(m({},n.errorMessage),{[e]:t}))}function wt(n,e,t,r,i){n[e]=t,kR(n,e,r,i)}function I3(){return{}}function S3(n,e){let t={type:"array"};return n.type?._def?.typeName!==et.ZodAny&&(t.items=Le(n.type._def,w(m({},e),{currentPath:[...e.currentPath,"items"]}))),n.minLength&&wt(t,"minItems",n.minLength.value,n.minLength.message,e),n.maxLength&&wt(t,"maxItems",n.maxLength.value,n.maxLength.message,e),n.exactLength&&(wt(t,"minItems",n.exactLength.value,n.exactLength.message,e),wt(t,"maxItems",n.exactLength.value,n.exactLength.message,e)),t}function D3(n,e){let t={type:"integer",format:"int64"};if(!n.checks)return t;for(let r of n.checks)switch(r.kind){case"min":e.target==="jsonSchema7"?r.inclusive?wt(t,"minimum",r.value,r.message,e):wt(t,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(t.exclusiveMinimum=!0),wt(t,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?wt(t,"maximum",r.value,r.message,e):wt(t,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(t.exclusiveMaximum=!0),wt(t,"maximum",r.value,r.message,e));break;case"multipleOf":wt(t,"multipleOf",r.value,r.message,e);break}return t}function T3(){return{type:"boolean"}}function A3(n,e){return Le(n.type._def,e)}var k3=(n,e)=>Le(n.innerType._def,e);function RR(n,e,t){let r=t??e.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((i,o)=>RR(n,e,i))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return uoe(n,e)}}var uoe=(n,e)=>{let t={type:"integer",format:"unix-time"};if(e.target==="openApi3")return t;for(let r of n.checks)switch(r.kind){case"min":wt(t,"minimum",r.value,r.message,e);break;case"max":wt(t,"maximum",r.value,r.message,e);break}return t};function R3(n,e){return w(m({},Le(n.innerType._def,e)),{default:n.defaultValue()})}function M3(n,e,t){return e.effectStrategy==="input"?Le(n.schema._def,e,t):{}}function O3(n){return{type:"string",enum:[...n.values]}}var doe=n=>"type"in n&&n.type==="string"?!1:"allOf"in n;function P3(n,e){let t=[Le(n.left._def,w(m({},e),{currentPath:[...e.currentPath,"allOf","0"]})),Le(n.right._def,w(m({},e),{currentPath:[...e.currentPath,"allOf","1"]}))].filter(o=>!!o),r=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,i=[];return t.forEach(o=>{if(doe(o))i.push(...o.allOf),o.unevaluatedProperties===void 0&&(r=void 0);else{let a=o;if("additionalProperties"in o&&o.additionalProperties===!1){let s=o,{additionalProperties:l}=s;a=Ae(s,["additionalProperties"])}else r=void 0;i.push(a)}}),i.length?m({allOf:i},r):void 0}function N3(n,e){let t=typeof n.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(n.value)?"array":"object"}:e.target==="openApi3"?{type:t==="bigint"?"integer":t,enum:[n.value]}:{type:t==="bigint"?"integer":t,const:n.value}}var MR,tu={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(MR===void 0&&(MR=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),MR),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/};function ax(n,e){let t={type:"string"};function r(i){return e.patternStrategy==="escape"?foe(i):i}if(n.checks)for(let i of n.checks)switch(i.kind){case"min":wt(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,i.value):i.value,i.message,e);break;case"max":wt(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,i.value):i.value,i.message,e);break;case"email":switch(e.emailStrategy){case"format:email":bo(t,"email",i.message,e);break;case"format:idn-email":bo(t,"idn-email",i.message,e);break;case"pattern:zod":vo(t,tu.email,i.message,e);break}break;case"url":bo(t,"uri",i.message,e);break;case"uuid":bo(t,"uuid",i.message,e);break;case"regex":vo(t,i.regex,i.message,e);break;case"cuid":vo(t,tu.cuid,i.message,e);break;case"cuid2":vo(t,tu.cuid2,i.message,e);break;case"startsWith":vo(t,RegExp(`^${r(i.value)}`),i.message,e);break;case"endsWith":vo(t,RegExp(`${r(i.value)}$`),i.message,e);break;case"datetime":bo(t,"date-time",i.message,e);break;case"date":bo(t,"date",i.message,e);break;case"time":bo(t,"time",i.message,e);break;case"duration":bo(t,"duration",i.message,e);break;case"length":wt(t,"minLength",typeof t.minLength=="number"?Math.max(t.minLength,i.value):i.value,i.message,e),wt(t,"maxLength",typeof t.maxLength=="number"?Math.min(t.maxLength,i.value):i.value,i.message,e);break;case"includes":{vo(t,RegExp(r(i.value)),i.message,e);break}case"ip":{i.version!=="v6"&&bo(t,"ipv4",i.message,e),i.version!=="v4"&&bo(t,"ipv6",i.message,e);break}case"emoji":vo(t,tu.emoji,i.message,e);break;case"ulid":{vo(t,tu.ulid,i.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{bo(t,"binary",i.message,e);break}case"contentEncoding:base64":{wt(t,"contentEncoding","base64",i.message,e);break}case"pattern:zod":{vo(t,tu.base64,i.message,e);break}}break}case"nanoid":vo(t,tu.nanoid,i.message,e);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return t}var foe=n=>Array.from(n).map(e=>/[a-zA-Z0-9]/.test(e)?e:`\\${e}`).join(""),bo=(n,e,t,r)=>{n.format||n.anyOf?.some(i=>i.format)?(n.anyOf||(n.anyOf=[]),n.format&&(n.anyOf.push(m({format:n.format},n.errorMessage&&r.errorMessages&&{errorMessage:{format:n.errorMessage.format}})),delete n.format,n.errorMessage&&(delete n.errorMessage.format,Object.keys(n.errorMessage).length===0&&delete n.errorMessage)),n.anyOf.push(m({format:e},t&&r.errorMessages&&{errorMessage:{format:t}}))):wt(n,"format",e,t,r)},vo=(n,e,t,r)=>{n.pattern||n.allOf?.some(i=>i.pattern)?(n.allOf||(n.allOf=[]),n.pattern&&(n.allOf.push(m({pattern:n.pattern},n.errorMessage&&r.errorMessages&&{errorMessage:{pattern:n.errorMessage.pattern}})),delete n.pattern,n.errorMessage&&(delete n.errorMessage.pattern,Object.keys(n.errorMessage).length===0&&delete n.errorMessage)),n.allOf.push(m({pattern:F3(e,r)},t&&r.errorMessages&&{errorMessage:{pattern:t}}))):wt(n,"pattern",F3(e,r),t,r)},F3=(n,e)=>{let t=typeof n=="function"?n():n;if(!e.applyRegexFlags||!t.flags)return t.source;let r={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},i=r.i?t.source.toLowerCase():t.source,o="",s=!1,a=!1,l=!1;for(let c=0;c<i.length;c++){if(s){o+=i[c],s=!1;continue}if(r.i){if(a){if(i[c].match(/[a-z]/)){l?(o+=i[c],o+=`${i[c-2]}-${i[c]}`.toUpperCase(),l=!1):i[c+1]==="-"&&i[c+2]?.match(/[a-z]/)?(o+=i[c],l=!0):o+=`${i[c]}${i[c].toUpperCase()}`;continue}}else if(i[c].match(/[a-z]/)){o+=`[${i[c]}${i[c].toUpperCase()}]`;continue}}if(r.m){if(i[c]==="^"){o+=`(^|(?<=[\r
]))`;continue}else if(i[c]==="$"){o+=`($|(?=[\r
]))`;continue}}if(r.s&&i[c]==="."){o+=a?`${i[c]}\r
`:`[${i[c]}\r
]`;continue}o+=i[c],i[c]==="\\"?s=!0:a&&i[c]==="]"?a=!1:!a&&i[c]==="["&&(a=!0)}try{let c=new RegExp(o)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return o};function lx(n,e){if(e.target==="openApi3"&&n.keyType?._def.typeName===et.ZodEnum)return{type:"object",required:n.keyType._def.values,properties:n.keyType._def.values.reduce((r,i)=>w(m({},r),{[i]:Le(n.valueType._def,w(m({},e),{currentPath:[...e.currentPath,"properties",i]}))??{}}),{}),additionalProperties:!1};let t={type:"object",additionalProperties:Le(n.valueType._def,w(m({},e),{currentPath:[...e.currentPath,"additionalProperties"]}))??{}};if(e.target==="openApi3")return t;if(n.keyType?._def.typeName===et.ZodString&&n.keyType._def.checks?.length){let r=Object.entries(ax(n.keyType._def,e)).reduce((i,[o,s])=>o==="type"?i:w(m({},i),{[o]:s}),{});return w(m({},t),{propertyNames:r})}else if(n.keyType?._def.typeName===et.ZodEnum)return w(m({},t),{propertyNames:{enum:n.keyType._def.values}});return t}function L3(n,e){if(e.mapStrategy==="record")return lx(n,e);let t=Le(n.keyType._def,w(m({},e),{currentPath:[...e.currentPath,"items","items","0"]}))||{},r=Le(n.valueType._def,w(m({},e),{currentPath:[...e.currentPath,"items","items","1"]}))||{};return{type:"array",maxItems:125,items:{type:"array",items:[t,r],minItems:2,maxItems:2}}}function j3(n){let e=n.values,r=Object.keys(n.values).filter(o=>typeof e[e[o]]!="number").map(o=>e[o]),i=Array.from(new Set(r.map(o=>typeof o)));return{type:i.length===1?i[0]==="string"?"string":"number":["string","number"],enum:r}}function B3(){return{not:{}}}function V3(n){return n.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}var Bg={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function U3(n,e){if(e.target==="openApi3")return $3(n,e);let t=n.options instanceof Map?Array.from(n.options.values()):n.options;if(t.every(r=>r._def.typeName in Bg&&(!r._def.checks||!r._def.checks.length))){let r=t.reduce((i,o)=>{let s=Bg[o._def.typeName];return s&&!i.includes(s)?[...i,s]:i},[]);return{type:r.length>1?r:r[0]}}else if(t.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){let r=t.reduce((i,o)=>{let s=typeof o._def.value;switch(s){case"string":case"number":case"boolean":return[...i,s];case"bigint":return[...i,"integer"];case"object":if(o._def.value===null)return[...i,"null"];case"symbol":case"undefined":case"function":default:return i}},[]);if(r.length===t.length){let i=r.filter((o,s,a)=>a.indexOf(o)===s);return{type:i.length>1?i:i[0],enum:t.reduce((o,s)=>o.includes(s._def.value)?o:[...o,s._def.value],[])}}}else if(t.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:t.reduce((r,i)=>[...r,...i._def.values.filter(o=>!r.includes(o))],[])};return $3(n,e)}var $3=(n,e)=>{let t=(n.options instanceof Map?Array.from(n.options.values()):n.options).map((r,i)=>Le(r._def,w(m({},e),{currentPath:[...e.currentPath,"anyOf",`${i}`]}))).filter(r=>!!r&&(!e.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return t.length?{anyOf:t}:void 0};function z3(n,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(n.innerType._def.typeName)&&(!n.innerType._def.checks||!n.innerType._def.checks.length))return e.target==="openApi3"||e.nullableStrategy==="property"?{type:Bg[n.innerType._def.typeName],nullable:!0}:{type:[Bg[n.innerType._def.typeName],"null"]};if(e.target==="openApi3"){let r=Le(n.innerType._def,w(m({},e),{currentPath:[...e.currentPath]}));return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&w(m({},r),{nullable:!0})}let t=Le(n.innerType._def,w(m({},e),{currentPath:[...e.currentPath,"anyOf","0"]}));return t&&{anyOf:[t,{type:"null"}]}}function H3(n,e){let t={type:"number"};if(!n.checks)return t;for(let r of n.checks)switch(r.kind){case"int":t.type="integer",kR(t,"type",r.message,e);break;case"min":e.target==="jsonSchema7"?r.inclusive?wt(t,"minimum",r.value,r.message,e):wt(t,"exclusiveMinimum",r.value,r.message,e):(r.inclusive||(t.exclusiveMinimum=!0),wt(t,"minimum",r.value,r.message,e));break;case"max":e.target==="jsonSchema7"?r.inclusive?wt(t,"maximum",r.value,r.message,e):wt(t,"exclusiveMaximum",r.value,r.message,e):(r.inclusive||(t.exclusiveMaximum=!0),wt(t,"maximum",r.value,r.message,e));break;case"multipleOf":wt(t,"multipleOf",r.value,r.message,e);break}return t}function hoe(n,e){return e.removeAdditionalStrategy==="strict"?n.catchall._def.typeName==="ZodNever"?n.unknownKeys!=="strict":Le(n.catchall._def,w(m({},e),{currentPath:[...e.currentPath,"additionalProperties"]}))??!0:n.catchall._def.typeName==="ZodNever"?n.unknownKeys==="passthrough":Le(n.catchall._def,w(m({},e),{currentPath:[...e.currentPath,"additionalProperties"]}))??!0}function q3(n,e){let t=w(m({type:"object"},Object.entries(n.shape()).reduce((r,[i,o])=>{if(o===void 0||o._def===void 0)return r;let s=[...e.currentPath,"properties",i],a=Le(o._def,w(m({},e),{currentPath:s,propertyPath:s}));if(a===void 0)return r;if(e.openaiStrictMode&&o.isOptional()&&!o.isNullable()&&typeof o._def?.defaultValue>"u")throw new Error(`Zod field at \`${s.join("/")}\` uses \`.optional()\` without \`.nullable()\` which is not supported by the API. See: https://platform.openai.com/docs/guides/structured-outputs?api-mode=responses#all-fields-must-be-required`);return{properties:w(m({},r.properties),{[i]:a}),required:o.isOptional()&&!e.openaiStrictMode?r.required:[...r.required,i]}},{properties:{},required:[]})),{additionalProperties:hoe(n,e)});return t.required.length||delete t.required,t}var G3=(n,e)=>{if(e.currentPath.toString()===e.propertyPath?.toString())return Le(n.innerType._def,e);let t=Le(n.innerType._def,w(m({},e),{currentPath:[...e.currentPath,"anyOf","1"]}));return t?{anyOf:[{not:{}},t]}:{}};var W3=(n,e)=>{if(e.pipeStrategy==="input")return Le(n.in._def,e);if(e.pipeStrategy==="output")return Le(n.out._def,e);let t=Le(n.in._def,w(m({},e),{currentPath:[...e.currentPath,"allOf","0"]})),r=Le(n.out._def,w(m({},e),{currentPath:[...e.currentPath,"allOf",t?"1":"0"]}));return{allOf:[t,r].filter(i=>i!==void 0)}};function K3(n,e){return Le(n.type._def,e)}function Q3(n,e){let r={type:"array",uniqueItems:!0,items:Le(n.valueType._def,w(m({},e),{currentPath:[...e.currentPath,"items"]}))};return n.minSize&&wt(r,"minItems",n.minSize.value,n.minSize.message,e),n.maxSize&&wt(r,"maxItems",n.maxSize.value,n.maxSize.message,e),r}function Y3(n,e){return n.rest?{type:"array",minItems:n.items.length,items:n.items.map((t,r)=>Le(t._def,w(m({},e),{currentPath:[...e.currentPath,"items",`${r}`]}))).reduce((t,r)=>r===void 0?t:[...t,r],[]),additionalItems:Le(n.rest._def,w(m({},e),{currentPath:[...e.currentPath,"additionalItems"]}))}:{type:"array",minItems:n.items.length,maxItems:n.items.length,items:n.items.map((t,r)=>Le(t._def,w(m({},e),{currentPath:[...e.currentPath,"items",`${r}`]}))).reduce((t,r)=>r===void 0?t:[...t,r],[])}}function Z3(){return{not:{}}}function X3(){return{}}var J3=(n,e)=>Le(n.innerType._def,e);function Le(n,e,t=!1){let r=e.seen.get(n);if(e.override){let s=e.override?.(n,e,r,t);if(s!==w3)return s}if(r&&!t){let s=poe(r,e);if(s!==void 0)return"$ref"in s&&e.seenRefs.add(s.$ref),s}let i={def:n,path:e.currentPath,jsonSchema:void 0};e.seen.set(n,i);let o=goe(n,n.typeName,e,t);return o&&_oe(n,e,o),i.jsonSchema=o,o}var poe=(n,e)=>{switch(e.$refStrategy){case"root":return{$ref:n.path.join("/")};case"extract-to-root":let t=n.path.slice(e.basePath.length+1).join("_");return t!==e.name&&e.nameStrategy==="duplicate-ref"&&(e.definitions[t]=n.def),{$ref:[...e.basePath,e.definitionPath,t].join("/")};case"relative":return{$ref:moe(e.currentPath,n.path)};case"none":case"seen":return n.path.length<e.currentPath.length&&n.path.every((r,i)=>e.currentPath[i]===r)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},moe=(n,e)=>{let t=0;for(;t<n.length&&t<e.length&&n[t]===e[t];t++);return[(n.length-t).toString(),...e.slice(t)].join("/")},goe=(n,e,t,r)=>{switch(e){case et.ZodString:return ax(n,t);case et.ZodNumber:return H3(n,t);case et.ZodObject:return q3(n,t);case et.ZodBigInt:return D3(n,t);case et.ZodBoolean:return T3();case et.ZodDate:return RR(n,t);case et.ZodUndefined:return Z3();case et.ZodNull:return V3(t);case et.ZodArray:return S3(n,t);case et.ZodUnion:case et.ZodDiscriminatedUnion:return U3(n,t);case et.ZodIntersection:return P3(n,t);case et.ZodTuple:return Y3(n,t);case et.ZodRecord:return lx(n,t);case et.ZodLiteral:return N3(n,t);case et.ZodEnum:return O3(n);case et.ZodNativeEnum:return j3(n);case et.ZodNullable:return z3(n,t);case et.ZodOptional:return G3(n,t);case et.ZodMap:return L3(n,t);case et.ZodSet:return Q3(n,t);case et.ZodLazy:return Le(n.getter()._def,t);case et.ZodPromise:return K3(n,t);case et.ZodNaN:case et.ZodNever:return B3();case et.ZodEffects:return M3(n,t,r);case et.ZodAny:return I3();case et.ZodUnknown:return X3();case et.ZodDefault:return R3(n,t);case et.ZodBranded:return A3(n,t);case et.ZodReadonly:return J3(n,t);case et.ZodCatch:return k3(n,t);case et.ZodPipeline:return W3(n,t);case et.ZodFunction:case et.ZodVoid:case et.ZodSymbol:return;default:return(i=>{})(e)}},_oe=(n,e,t)=>(n.description&&(t.description=n.description,e.markdownDescription&&(t.markdownDescription=n.description)),t);var OR=(n,e)=>{let t=E3(e),r=typeof e=="string"?e:e?.nameStrategy==="title"?void 0:e?.name,i=Le(n._def,r===void 0?t:w(m({},t),{currentPath:[...t.basePath,t.definitionPath,r]}),!1)??{},o=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;o!==void 0&&(i.title=o);let s=(()=>{if(C3(t.definitions))return;let l={},c=new Set;for(let u=0;u<500;u++){let d=Object.entries(t.definitions).filter(([h])=>!c.has(h));if(d.length===0)break;for(let[h,f]of d)l[h]=Le(jg(f),w(m({},t),{currentPath:[...t.basePath,t.definitionPath,h]}),!0)??{},c.add(h)}return l})(),a=r===void 0?s?w(m({},i),{[t.definitionPath]:s}):i:t.nameStrategy==="duplicate-ref"?m(m({},i),s||t.seenRefs.size?{[t.definitionPath]:m(m({},s),t.seenRefs.size?{[r]:i}:void 0)}:void 0):{$ref:[...t.$refStrategy==="relative"?[]:t.basePath,t.definitionPath,r].join("/"),[t.definitionPath]:w(m({},s),{[r]:i})};return t.target==="jsonSchema7"?a.$schema="http://json-schema.org/draft-07/schema#":t.target==="jsonSchema2019-09"&&(a.$schema="https://json-schema.org/draft/2019-09/schema#"),a};function boe(n,e){return OR(n,{openaiStrictMode:!0,name:e.name,nameStrategy:"duplicate-ref",$refStrategy:"extract-to-root",nullableStrategy:"property"})}function e4(n,e,t){return LH({type:"json_schema",json_schema:w(m({},t),{name:e,strict:!0,schema:boe(n,{name:e})})},r=>n.parse(JSON.parse(r)))}function Vg(n,e){return n.lc_error_code=e,n.message=`${n.message}

Troubleshooting URL: https://js.langchain.com/docs/troubleshooting/errors/${e}/
`,n}function rh(n){let e;return n.constructor.name===as.name?(e=new Error(n.message),e.name="TimeoutError"):n.constructor.name===Sn.name?(e=new Error(n.message),e.name="AbortError"):n.status===400&&n.message.includes("tool_calls")?e=Vg(n,"INVALID_TOOL_RESULTS"):n.status===401?e=Vg(n,"MODEL_AUTHENTICATION"):n.status===429?e=Vg(n,"MODEL_RATE_LIMIT"):n.status===404?e=Vg(n,"MODEL_NOT_FOUND"):e=n,e}function PR(n){if(n)return n==="any"||n==="required"?"required":n==="auto"?"auto":n==="none"?"none":typeof n=="string"?{type:"function",function:{name:n}}:n}function voe(n,e){let t=m({},n);return Object.defineProperties(t,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:e,enumerable:!1}}),t}function t4(n,e,t){if(Ph(n))return e4(n,e,t);if(IC(n))return voe({type:"json_schema",json_schema:w(m({},t),{name:e,strict:!0,schema:fP(n,{cycles:"ref",reused:"ref",override(r){r.jsonSchema.title=e}})})},r=>dP(n,JSON.parse(r)));throw new Error("Unsupported schema response format")}function yoe(n){return n.anyOf!==void 0&&Array.isArray(n.anyOf)}function n4(n){let e=["namespace functions {",""];for(let t of n)t.description&&e.push(`// ${t.description}`),Object.keys(t.parameters.properties??{}).length>0?(e.push(`type ${t.name} = (_: {`),e.push(r4(t.parameters,0)),e.push("}) => any;")):e.push(`type ${t.name} = () => any;`),e.push("");return e.push("} // namespace functions"),e.join(`
`)}function r4(n,e){let t=[];for(let[r,i]of Object.entries(n.properties??{}))i.description&&e<2&&t.push(`// ${i.description}`),n.required?.includes(r)?t.push(`${r}: ${cx(i,e)},`):t.push(`${r}?: ${cx(i,e)},`);return t.map(r=>" ".repeat(e)+r).join(`
`)}function cx(n,e){if(yoe(n))return n.anyOf.map(t=>cx(t,e)).join(" | ");switch(n.type){case"string":return n.enum?n.enum.map(t=>`"${t}"`).join(" | "):"string";case"number":return n.enum?n.enum.map(t=>`${t}`).join(" | "):"number";case"integer":return n.enum?n.enum.map(t=>`${t}`).join(" | "):"number";case"boolean":return"boolean";case"null":return"null";case"object":return["{",r4(n,e+2),"}"].join(`
`);case"array":return n.items?`${cx(n.items,e)}[]`:"any[]";default:return""}}function i4(n,e){let t;return yl(n)?t=sx(n):t=n,e?.strict!==void 0&&(t.function.strict=e.strict),t}var ux="__openai_function_call_ids__";function jR(n){return"type"in n&&n.type!=="function"}function woe(n){return n!=null&&typeof n=="object"&&"type"in n&&n.type!=="function"}function dx(n){return n&&/^o\d/.test(n)}function xoe(n){return n!==void 0&&typeof n.schema=="object"}function Coe(n){return n.role!=="system"&&n.role!=="developer"&&n.role!=="assistant"&&n.role!=="user"&&n.role!=="function"&&n.role!=="tool"&&console.warn(`Unknown message role: ${n.role}`),n.role}function BR(n){let e=n._getType();switch(e){case"system":return"system";case"ai":return"assistant";case"human":return"user";case"function":return"function";case"tool":return"tool";case"generic":{if(!yC.isInstance(n))throw new Error("Invalid generic chat message");return Coe(n)}default:throw new Error(`Unknown message type: ${e}`)}}var o4={providerName:"ChatOpenAI",fromStandardTextBlock(n){return{type:"text",text:n.text}},fromStandardImageBlock(n){if(n.source_type==="url")return{type:"image_url",image_url:m({url:n.url},n.metadata?.detail?{detail:n.metadata.detail}:{})};if(n.source_type==="base64"){let e=`data:${n.mime_type??""};base64,${n.data}`;return{type:"image_url",image_url:m({url:e},n.metadata?.detail?{detail:n.metadata.detail}:{})}}throw new Error(`Image content blocks with source_type ${n.source_type} are not supported for ChatOpenAI`)},fromStandardAudioBlock(n){if(n.source_type==="url"){let e=bC({dataUrl:n.url});if(!e)throw new Error(`URL audio blocks with source_type ${n.source_type} must be formatted as a data URL for ChatOpenAI`);let t=e.mime_type||n.mime_type||"",r;try{r=_C(t)}catch{throw new Error(`Audio blocks with source_type ${n.source_type} must have mime type of audio/wav or audio/mp3`)}if(r.type!=="audio"||r.subtype!=="wav"&&r.subtype!=="mp3")throw new Error(`Audio blocks with source_type ${n.source_type} must have mime type of audio/wav or audio/mp3`);return{type:"input_audio",input_audio:{format:r.subtype,data:e.data}}}if(n.source_type==="base64"){let e;try{e=_C(n.mime_type??"")}catch{throw new Error(`Audio blocks with source_type ${n.source_type} must have mime type of audio/wav or audio/mp3`)}if(e.type!=="audio"||e.subtype!=="wav"&&e.subtype!=="mp3")throw new Error(`Audio blocks with source_type ${n.source_type} must have mime type of audio/wav or audio/mp3`);return{type:"input_audio",input_audio:{format:e.subtype,data:n.data}}}throw new Error(`Audio content blocks with source_type ${n.source_type} are not supported for ChatOpenAI`)},fromStandardFileBlock(n){if(n.source_type==="url"){if(!bC({dataUrl:n.url}))throw new Error(`URL file blocks with source_type ${n.source_type} must be formatted as a data URL for ChatOpenAI`);return{type:"file",file:m({file_data:n.url},n.metadata?.filename||n.metadata?.name?{filename:n.metadata?.filename||n.metadata?.name}:{})}}if(n.source_type==="base64")return{type:"file",file:m({file_data:`data:${n.mime_type??""};base64,${n.data}`},n.metadata?.filename||n.metadata?.name||n.metadata?.title?{filename:n.metadata?.filename||n.metadata?.name||n.metadata?.title}:{})};if(n.source_type==="id")return{type:"file",file:{file_id:n.id}};throw new Error(`File content blocks with source_type ${n.source_type} are not supported for ChatOpenAI`)}};function NR(n,e){return n.flatMap(t=>{let r=BR(t);r==="system"&&dx(e)&&(r="developer");let i=typeof t.content=="string"?t.content:t.content.map(s=>gC(s)?vC(s,o4):s),o={role:r,content:i};if(t.name!=null&&(o.name=t.name),t.additional_kwargs.function_call!=null&&(o.function_call=t.additional_kwargs.function_call,o.content=""),ti(t)&&t.tool_calls?.length?(o.tool_calls=t.tool_calls.map(v3),o.content=""):(t.additional_kwargs.tool_calls!=null&&(o.tool_calls=t.additional_kwargs.tool_calls),t.tool_call_id!=null&&(o.tool_call_id=t.tool_call_id)),t.additional_kwargs.audio&&typeof t.additional_kwargs.audio=="object"&&"id"in t.additional_kwargs.audio){let s={role:"assistant",audio:{id:t.additional_kwargs.audio.id}};return[o,s]}return o})}var $g=class n extends ms{_llmType(){return"openai"}static lc_name(){return"ChatOpenAI"}get callKeys(){return[...super.callKeys,"options","function_call","functions","tools","tool_choice","promptIndex","response_format","seed","reasoning","service_tier"]}get lc_secrets(){return{apiKey:"OPENAI_API_KEY",organization:"OPENAI_ORGANIZATION"}}get lc_aliases(){return{apiKey:"openai_api_key",modelName:"model"}}get lc_serializable_keys(){return["configuration","logprobs","topLogprobs","prefixMessages","supportsStrictToolCalling","modalities","audio","temperature","maxTokens","topP","frequencyPenalty","presencePenalty","n","logitBias","user","streaming","streamUsage","model","modelName","modelKwargs","stop","stopSequences","timeout","apiKey","cache","maxConcurrency","maxRetries","verbose","callbacks","tags","metadata","disableStreaming","zdrEnabled","reasoning"]}getLsParams(e){let t=this.invocationParams(e);return{ls_provider:"openai",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:t.temperature??void 0,ls_max_tokens:t.max_tokens??void 0,ls_stop:e.stop}}_identifyingParams(){return m(m({model_name:this.model},this.invocationParams()),this.clientConfig)}identifyingParams(){return this._identifyingParams()}constructor(e){super(e??{}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logitBias",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"gpt-3.5-turbo"}),Object.defineProperty(this,"modelKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stopSequences",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"user",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"streamUsage",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logprobs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topLogprobs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"organization",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__includeRawResponse",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"supportsStrictToolCalling",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"audio",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modalities",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reasoning",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"zdrEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"service_tier",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"defaultOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.apiKey=e?.apiKey??e?.configuration?.apiKey??Sr("OPENAI_API_KEY"),this.organization=e?.configuration?.organization??Sr("OPENAI_ORGANIZATION"),this.model=e?.model??e?.modelName??this.model,this.modelKwargs=e?.modelKwargs??{},this.timeout=e?.timeout,this.temperature=e?.temperature??this.temperature,this.topP=e?.topP??this.topP,this.frequencyPenalty=e?.frequencyPenalty??this.frequencyPenalty,this.presencePenalty=e?.presencePenalty??this.presencePenalty,this.logprobs=e?.logprobs,this.topLogprobs=e?.topLogprobs,this.n=e?.n??this.n,this.logitBias=e?.logitBias,this.stop=e?.stopSequences??e?.stop,this.stopSequences=this.stop,this.user=e?.user,this.__includeRawResponse=e?.__includeRawResponse,this.audio=e?.audio,this.modalities=e?.modalities,this.reasoning=e?.reasoning,this.maxTokens=e?.maxCompletionTokens??e?.maxTokens,this.disableStreaming=e?.disableStreaming??this.disableStreaming,this.streaming=e?.streaming??!1,this.disableStreaming&&(this.streaming=!1),this.streamUsage=e?.streamUsage??this.streamUsage,this.disableStreaming&&(this.streamUsage=!1),this.clientConfig=m({apiKey:this.apiKey,organization:this.organization,dangerouslyAllowBrowser:!0},e?.configuration),e?.supportsStrictToolCalling!==void 0&&(this.supportsStrictToolCalling=e.supportsStrictToolCalling),e?.service_tier!==void 0&&(this.service_tier=e.service_tier),this.zdrEnabled=e?.zdrEnabled??!1}_getReasoningParams(e){if(!dx(this.model))return;let t;return this.reasoning!==void 0&&(t=m(m({},t),this.reasoning)),e?.reasoning!==void 0&&(t=m(m({},t),e.reasoning)),t}_getResponseFormat(e){return e&&e.type==="json_schema"&&e.json_schema.schema&&bi(e.json_schema.schema)?t4(e.json_schema.schema,e.json_schema.name,{description:e.json_schema.description}):e}_combineCallOptions(e){return m(m({},this.defaultOptions),e??{})}_getClientOptions(e){if(!this.client){let r={baseURL:this.clientConfig.baseURL},i=eu(r),o=w(m({},this.clientConfig),{baseURL:i,timeout:this.timeout,maxRetries:0});o.baseURL||delete o.baseURL,this.client=new ze(o)}return m(m({},this.clientConfig),e)}_convertChatOpenAIToolToCompletionsTool(e,t){return tx(e)?t?.strict!==void 0?w(m({},e),{function:w(m({},e.function),{strict:t.strict})}):e:i4(e,t)}bindTools(e,t){let r;return t?.strict!==void 0?r=t.strict:this.supportsStrictToolCalling!==void 0&&(r=this.supportsStrictToolCalling),this.withConfig(m({tools:e.map(i=>jR(i)?i:this._convertChatOpenAIToolToCompletionsTool(i,{strict:r}))},t))}stream(e,t){return v(this,null,function*(){return sr(n.prototype,this,"stream").call(this,e,this._combineCallOptions(t))})}invoke(e,t){return v(this,null,function*(){return sr(n.prototype,this,"invoke").call(this,e,this._combineCallOptions(t))})}_combineLLMOutput(...e){return e.reduce((t,r)=>(r&&r.tokenUsage&&(t.tokenUsage.completionTokens+=r.tokenUsage.completionTokens??0,t.tokenUsage.promptTokens+=r.tokenUsage.promptTokens??0,t.tokenUsage.totalTokens+=r.tokenUsage.totalTokens??0),t),{tokenUsage:{completionTokens:0,promptTokens:0,totalTokens:0}})}getNumTokensFromMessages(e){return v(this,null,function*(){let t=0,r=0,i=0;this.model==="gpt-3.5-turbo-0301"?(r=4,i=-1):(r=3,i=1);let o=yield Promise.all(e.map(s=>v(this,null,function*(){let a=yield this.getNumTokens(s.content),l=yield this.getNumTokens(BR(s)),c=s.name!==void 0?i+(yield this.getNumTokens(s.name)):0,u=a+r+l+c,d=s;if(d._getType()==="function"&&(u-=2),d.additional_kwargs?.function_call&&(u+=3),d?.additional_kwargs.function_call?.name&&(u+=yield this.getNumTokens(d.additional_kwargs.function_call?.name)),d.additional_kwargs.function_call?.arguments)try{u+=yield this.getNumTokens(JSON.stringify(JSON.parse(d.additional_kwargs.function_call?.arguments)))}catch(h){console.error("Error parsing function arguments",h,JSON.stringify(d.additional_kwargs.function_call)),u+=yield this.getNumTokens(d.additional_kwargs.function_call?.arguments)}return t+=u,u})));return t+=3,{totalCount:t,countPerMessage:o}})}_getNumTokensFromGenerations(e){return v(this,null,function*(){return(yield Promise.all(e.map(r=>v(this,null,function*(){return r.message.additional_kwargs?.function_call?(yield this.getNumTokensFromMessages([r.message])).countPerMessage[0]:yield this.getNumTokens(r.message.content)})))).reduce((r,i)=>r+i,0)})}_getEstimatedTokenCountFromPrompt(e,t,r){return v(this,null,function*(){let i=(yield this.getNumTokensFromMessages(e)).totalCount;if(t&&r!=="auto"){let o=n4(t);i+=yield this.getNumTokens(o),i+=9}return t&&e.find(o=>o._getType()==="system")&&(i-=4),r==="none"?i+=1:typeof r=="object"&&(i+=(yield this.getNumTokens(r.name))+4),i})}withStructuredOutput(e,t){let r,i,o,s;xoe(e)?(r=e.schema,i=e.name,o=e.method,s=e.includeRaw):(r=e,i=t?.name,o=t?.method,s=t?.includeRaw);let a,l;if(t?.strict!==void 0&&o==="jsonMode")throw new Error("Argument `strict` is only supported for `method` = 'function_calling'");if(!this.model.startsWith("gpt-3")&&!this.model.startsWith("gpt-4-")&&this.model!=="gpt-4"?o===void 0&&(o="jsonSchema"):o==="jsonSchema"&&console.warn(`[WARNING]: JSON Schema is not supported for model "${this.model}". Falling back to tool calling.`),o==="jsonMode"){let h;bi(r)?(l=Jc.fromZodSchema(r),h=ar(r)):l=new nh,a=this.withConfig({response_format:{type:"json_object"},ls_structured_output_format:{kwargs:{method:"jsonMode"},schema:h}})}else if(o==="jsonSchema")if(a=this.withConfig({response_format:{type:"json_schema",json_schema:{name:i??"extract",description:xa(r),schema:r,strict:t?.strict}},ls_structured_output_format:{kwargs:{method:"jsonSchema"},schema:ar(r)}}),bi(r)){let h=Jc.fromZodSchema(r);l=An.from(f=>"parsed"in f.additional_kwargs?f.additional_kwargs.parsed:h)}else l=new nh;else{let h=i??"extract";if(bi(r)){let f=ar(r);a=this.withConfig(m({tools:[{type:"function",function:{name:h,description:f.description,parameters:f}}],tool_choice:{type:"function",function:{name:h}},ls_structured_output_format:{kwargs:{method:"functionCalling"},schema:f}},t?.strict!==void 0?{strict:t.strict}:{})),l=new Pg({returnSingle:!0,keyName:h,zodSchema:r})}else{let f;typeof r.name=="string"&&typeof r.parameters=="object"&&r.parameters!=null?(f=r,h=r.name):(h=r.title??h,f={name:h,description:r.description??"",parameters:r}),a=this.withConfig(m({tools:[{type:"function",function:f}],tool_choice:{type:"function",function:{name:h}},ls_structured_output_format:{kwargs:{method:"functionCalling"},schema:ar(r)}},t?.strict!==void 0?{strict:t.strict}:{})),l=new Pg({returnSingle:!0,keyName:h})}}if(!s)return a.pipe(l);let c=fi.assign({parsed:(h,f)=>l.invoke(h.raw,f)}),u=fi.assign({parsed:()=>null}),d=c.withFallbacks({fallbacks:[u]});return yn.from([{raw:a},d])}},FR=class extends $g{invocationParams(e){let t;e?.strict!==void 0?t=e.strict:this.supportsStrictToolCalling!==void 0&&(t=this.supportsStrictToolCalling);let r=m(m({model:this.model,temperature:this.temperature,top_p:this.topP,user:this.user,stream:this.streaming,previous_response_id:e?.previous_response_id,truncation:e?.truncation,include:e?.include,tools:e?.tools?.length?this._reduceChatOpenAITools(e.tools,{stream:this.streaming,strict:t}):void 0,tool_choice:woe(e?.tool_choice)?e?.tool_choice:(()=>{let o=PR(e?.tool_choice);if(typeof o=="object"&&"type"in o)return{type:"function",name:o.function.name}})(),text:(()=>{if(e?.text)return e.text;let o=this._getResponseFormat(e?.response_format);return o?.type==="json_schema"?o.json_schema.schema!=null?{format:{type:"json_schema",schema:o.json_schema.schema,description:o.json_schema.description,name:o.json_schema.name,strict:o.json_schema.strict}}:void 0:{format:o}})(),parallel_tool_calls:e?.parallel_tool_calls,max_output_tokens:this.maxTokens===-1?void 0:this.maxTokens},this.zdrEnabled?{store:!1}:{}),this.modelKwargs),i=this._getReasoningParams(e);return i!==void 0&&(r.reasoning=i),r}_generate(e,t){return v(this,null,function*(){let r=this.invocationParams(t);if(r.stream){let l=this._streamResponseChunks(e,t),c;try{for(var i=Ee(l),o,s,a;o=!(s=yield i.next()).done;o=!1){let u=s.value;u.message.response_metadata=m(m({},u.generationInfo),u.message.response_metadata),c=c?.concat(u)??u}}catch{a=[s]}finally{try{o&&(s=i.return)&&(yield s.call(i))}finally{if(a)throw a[0]}}return{generations:c?[c]:[],llmOutput:{estimatedTokenUsage:c?.message?.usage_metadata}}}else{let l=this._convertMessagesToResponsesParams(e),c=yield this.completionWithRetry(w(m({input:l},r),{stream:!1}),m({signal:t?.signal},t?.options));return{generations:[{text:c.output_text,message:this._convertResponsesMessageToBaseMessage(c)}],llmOutput:{id:c.id,estimatedTokenUsage:c.usage?{promptTokens:c.usage.input_tokens,completionTokens:c.usage.output_tokens,totalTokens:c.usage.total_tokens}:void 0}}}})}_streamResponseChunks(e,t){return We(this,null,function*(){let r=yield new ee(this.completionWithRetry(w(m({},this.invocationParams(t)),{input:this._convertMessagesToResponsesParams(e),stream:!0}),t));try{for(var i=Ee(r),o,s,a;o=!(s=yield new ee(i.next())).done;o=!1){let l=s.value;let c=this._convertResponsesDeltaToBaseMessageChunk(l);c!=null&&(yield c)}}catch{a=[s]}finally{try{o&&(s=i.return)&&(yield new ee(s.call(i)))}finally{if(a)throw a[0]}}})}completionWithRetry(e,t){return v(this,null,function*(){return this.caller.call(()=>v(this,null,function*(){let r=this._getClientOptions(t);try{return e.text?.format?.type==="json_schema"&&!e.stream?yield this.client.responses.parse(e,r):yield this.client.responses.create(e,r)}catch(i){throw rh(i)}}))})}_convertResponsesMessageToBaseMessage(e){if(e.error){let l=new Error(e.error.message);throw l.name=e.error.code,l}let t,r=[],i=[],o=[],s={model:e.model,created_at:e.created_at,id:e.id,incomplete_details:e.incomplete_details,metadata:e.metadata,object:e.object,status:e.status,user:e.user,service_tier:e.service_tier,model_name:e.model},a={};for(let l of e.output)if(l.type==="message")t=l.id,r.push(...l.content.flatMap(c=>c.type==="output_text"?("parsed"in c&&c.parsed!=null&&(a.parsed=c.parsed),{type:"text",text:c.text,annotations:c.annotations}):c.type==="refusal"?(a.refusal=c.refusal,[]):c));else if(l.type==="function_call"){let c={function:{name:l.name,arguments:l.arguments},id:l.call_id};try{i.push(ix(c,{returnId:!0}))}catch(u){let d;typeof u=="object"&&u!=null&&"message"in u&&typeof u.message=="string"&&(d=u.message),o.push(DR(c,d))}a[ux]??={},l.id&&(a[ux][l.call_id]=l.id)}else l.type==="reasoning"?a.reasoning=l:(a.tool_outputs??=[],a.tool_outputs.push(l));return new pn({id:t,content:r,tool_calls:i,invalid_tool_calls:o,usage_metadata:e.usage,additional_kwargs:a,response_metadata:s})}_convertResponsesDeltaToBaseMessageChunk(e){let t=[],r={},i,o=[],s={},a={},l;if(e.type==="response.output_text.delta")t.push({type:"text",text:e.delta,index:e.content_index});else if(e.type==="response.output_text_annotation.added")t.push({type:"text",text:"",annotations:[e.annotation],index:e.content_index});else if(e.type==="response.output_item.added"&&e.item.type==="message")l=e.item.id;else if(e.type==="response.output_item.added"&&e.item.type==="function_call")o.push({type:"tool_call_chunk",name:e.item.name,args:e.item.arguments,id:e.item.call_id,index:e.output_index}),a[ux]={[e.item.call_id]:e.item.id};else if(e.type==="response.output_item.done"&&["web_search_call","file_search_call","computer_call","code_interpreter_call","mcp_call","mcp_list_tools","mcp_approval_request","image_generation_call"].includes(e.item.type))a.tool_outputs=[e.item];else if(e.type==="response.created")s.id=e.response.id,s.model_name=e.response.model,s.model=e.response.model;else if(e.type==="response.completed"){let c=this._convertResponsesMessageToBaseMessage(e.response);i=e.response.usage,e.response.text?.format?.type==="json_schema"&&(a.parsed??=JSON.parse(c.text));for(let[u,d]of Object.entries(e.response))u!=="id"&&(s[u]=d)}else if(e.type==="response.function_call_arguments.delta")o.push({type:"tool_call_chunk",args:e.delta,index:e.output_index});else if(e.type==="response.web_search_call.completed"||e.type==="response.file_search_call.completed")r={tool_outputs:{id:e.item_id,type:e.type.replace("response.","").replace(".completed",""),status:"completed"}};else if(e.type==="response.refusal.done")a.refusal=e.refusal;else if(e.type==="response.output_item.added"&&"item"in e&&e.item.type==="reasoning"){let c=e.item.summary?e.item.summary.map((u,d)=>w(m({},u),{index:d})):void 0;a.reasoning=m({id:e.item.id,type:e.item.type},c?{summary:c}:{})}else if(e.type==="response.reasoning_summary_part.added")a.reasoning={type:"reasoning",summary:[w(m({},e.part),{index:e.summary_index})]};else if(e.type==="response.reasoning_summary_text.delta")a.reasoning={type:"reasoning",summary:[{text:e.delta,type:"summary_text",index:e.summary_index}]};else return e.type==="response.image_generation_call.partial_image",null;return new Ji({text:t.map(c=>c.text).join(""),message:new _i({id:l,content:t,tool_call_chunks:o,usage_metadata:i,additional_kwargs:a,response_metadata:s}),generationInfo:r})}_convertMessagesToResponsesParams(e){return e.flatMap(t=>{let r=t.additional_kwargs,i=BR(t);if(i==="system"&&dx(this.model)&&(i="developer"),i==="function")throw new Error("Function messages are not supported in Responses API");if(i==="tool"){let o=t;return r?.type==="computer_call_output"?{type:"computer_call_output",output:(()=>{if(typeof o.content=="string")return{type:"computer_screenshot",image_url:o.content};if(Array.isArray(o.content)){let a=o.content.find(c=>c.type==="computer_screenshot");if(a)return a;let l=o.content.find(c=>c.type==="image_url");if(l)return{type:"computer_screenshot",image_url:typeof l.image_url=="string"?l.image_url:l.image_url.url}}throw new Error("Invalid computer call output")})(),call_id:o.tool_call_id}:{type:"function_call_output",call_id:o.tool_call_id,id:o.id?.startsWith("fc_")?o.id:void 0,output:typeof o.content!="string"?JSON.stringify(o.content):o.content}}if(i==="assistant"){if(!this.zdrEnabled&&t.response_metadata.output!=null&&Array.isArray(t.response_metadata.output)&&t.response_metadata.output.length>0&&t.response_metadata.output.every(u=>"type"in u))return t.response_metadata.output;let o=[];if(r?.reasoning&&!this.zdrEnabled){let u=this._convertReasoningSummary(r.reasoning);o.push(u)}let{content:s}=t;r?.refusal&&(typeof s=="string"&&(s=[{type:"output_text",text:s,annotations:[]}]),s=[...s,{type:"refusal",refusal:r.refusal}]),o.push(w(m({type:"message",role:"assistant"},t.id&&!this.zdrEnabled&&t.id.startsWith("msg_")?{id:t.id}:{}),{content:typeof s=="string"?s:s.flatMap(u=>u.type==="text"?{type:"output_text",text:u.text,annotations:u.annotations??[]}:u.type==="output_text"||u.type==="refusal"?u:[])}));let a=r?.[ux];ti(t)&&t.tool_calls?.length?o.push(...t.tool_calls.map(u=>m({type:"function_call",name:u.name,arguments:JSON.stringify(u.args),call_id:u.id},this.zdrEnabled?{id:a?.[u.id]}:{}))):r?.tool_calls&&o.push(...r.tool_calls.map(u=>m({type:"function_call",name:u.function.name,call_id:u.id,arguments:u.function.arguments},this.zdrEnabled?{id:a?.[u.id]}:{})));let l=t.response_metadata.output?.length?t.response_metadata.output:r.tool_outputs,c=["computer_call","mcp_call","code_interpreter_call","image_generation_call"];if(l!=null){let d=l?.filter(h=>c.includes(h.type));d.length>0&&o.push(...d)}return o}if(i==="user"||i==="system"||i==="developer"){if(typeof t.content=="string")return{type:"message",role:i,content:t.content};let o=[],s=t.content.flatMap(a=>(a.type==="mcp_approval_response"&&o.push({type:"mcp_approval_response",approval_request_id:a.approval_request_id,approve:a.approve}),gC(a)?vC(a,o4):a.type==="text"?{type:"input_text",text:a.text}:a.type==="image_url"?{type:"input_image",image_url:typeof a.image_url=="string"?a.image_url:a.image_url.url,detail:typeof a.image_url=="string"?"auto":a.image_url.detail}:a.type==="input_text"||a.type==="input_image"||a.type==="input_file"?a:[]));return s.length>0&&o.push({type:"message",role:i,content:s}),o}return console.warn(`Unsupported role found when converting to OpenAI Responses API: ${i}`),[]})}_convertReasoningSummary(e){let t=(e.summary.length>1?e.summary.reduce((r,i)=>{let o=r.at(-1);return o.index===i.index?o.text+=i.text:r.push(i),r},[m({},e.summary[0])]):e.summary).map(r=>Object.fromEntries(Object.entries(r).filter(([i])=>i!=="index")));return w(m({},e),{summary:t})}_reduceChatOpenAITools(e,t){let r=[];for(let i of e)jR(i)?(i.type==="image_generation"&&t?.stream&&(i.partial_images=1),r.push(i)):tx(i)&&r.push({type:"function",name:i.function.name,parameters:i.function.parameters,description:i.function.description,strict:t?.strict??null});return r}},LR=class extends $g{invocationParams(e,t){let r;e?.strict!==void 0?r=e.strict:this.supportsStrictToolCalling!==void 0&&(r=this.supportsStrictToolCalling);let i={};e?.stream_options!==void 0?i={stream_options:e.stream_options}:this.streamUsage&&(this.streaming||t?.streaming)&&(i={stream_options:{include_usage:!0}});let o=m(m(m(w(m({model:this.model,temperature:this.temperature,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,logprobs:this.logprobs,top_logprobs:this.topLogprobs,n:this.n,logit_bias:this.logitBias,stop:e?.stop??this.stopSequences,user:this.user,stream:this.streaming,functions:e?.functions,function_call:e?.function_call,tools:e?.tools?.length?e.tools.map(a=>this._convertChatOpenAIToolToCompletionsTool(a,{strict:r})):void 0,tool_choice:PR(e?.tool_choice),response_format:this._getResponseFormat(e?.response_format),seed:e?.seed},i),{parallel_tool_calls:e?.parallel_tool_calls}),this.audio||e?.audio?{audio:this.audio||e?.audio}:{}),this.modalities||e?.modalities?{modalities:this.modalities||e?.modalities}:{}),this.modelKwargs);e?.prediction!==void 0&&(o.prediction=e.prediction),this.service_tier!==void 0&&(o.service_tier=this.service_tier),e?.service_tier!==void 0&&(o.service_tier=e.service_tier);let s=this._getReasoningParams(e);return s!==void 0&&s.effort!==void 0&&(o.reasoning_effort=s.effort),dx(o.model)?o.max_completion_tokens=this.maxTokens===-1?void 0:this.maxTokens:o.max_tokens=this.maxTokens===-1?void 0:this.maxTokens,o}_generate(e,t,r){return v(this,null,function*(){let i={},o=this.invocationParams(t),s=NR(e,this.model);if(o.stream){let d=this._streamResponseChunks(e,t,r),h={};try{for(var a=Ee(d),l,c,u;l=!(c=yield a.next()).done;l=!1){let E=c.value;E.message.response_metadata=m(m({},E.generationInfo),E.message.response_metadata);let T=E.generationInfo?.completion??0;h[T]===void 0?h[T]=E:h[T]=h[T].concat(E)}}catch{u=[c]}finally{try{l&&(c=a.return)&&(yield c.call(a))}finally{if(u)throw u[0]}}let f=Object.entries(h).sort(([E],[T])=>parseInt(E,10)-parseInt(T,10)).map(([E,T])=>T),{functions:p,function_call:g}=this.invocationParams(t),_=yield this._getEstimatedTokenCountFromPrompt(e,p,g),y=yield this._getNumTokensFromGenerations(f);return i.input_tokens=_,i.output_tokens=y,i.total_tokens=_+y,{generations:f,llmOutput:{estimatedTokenUsage:{promptTokens:i.input_tokens,completionTokens:i.output_tokens,totalTokens:i.total_tokens}}}}else{let d=yield this.completionWithRetry(w(m({},o),{stream:!1,messages:s}),m({signal:t?.signal},t?.options)),{completion_tokens:h,prompt_tokens:f,total_tokens:p,prompt_tokens_details:g,completion_tokens_details:_}=d?.usage??{};h&&(i.output_tokens=(i.output_tokens??0)+h),f&&(i.input_tokens=(i.input_tokens??0)+f),p&&(i.total_tokens=(i.total_tokens??0)+p),(g?.audio_tokens!==null||g?.cached_tokens!==null)&&(i.input_token_details=m(m({},g?.audio_tokens!==null&&{audio:g?.audio_tokens}),g?.cached_tokens!==null&&{cache_read:g?.cached_tokens})),(_?.audio_tokens!==null||_?.reasoning_tokens!==null)&&(i.output_token_details=m(m({},_?.audio_tokens!==null&&{audio:_?.audio_tokens}),_?.reasoning_tokens!==null&&{reasoning:_?.reasoning_tokens}));let y=[];for(let E of d?.choices??[]){let A={text:E.message?.content??"",message:this._convertCompletionsMessageToBaseMessage(E.message??{role:"assistant"},d)};A.generationInfo=m(m({},E.finish_reason?{finish_reason:E.finish_reason}:{}),E.logprobs?{logprobs:E.logprobs}:{}),ti(A.message)&&(A.message.usage_metadata=i),A.message=new pn(Object.fromEntries(Object.entries(A.message).filter(([P])=>!P.startsWith("lc_")))),y.push(A)}return{generations:y,llmOutput:{tokenUsage:{promptTokens:i.input_tokens,completionTokens:i.output_tokens,totalTokens:i.total_tokens}}}}})}_streamResponseChunks(e,t,r){return We(this,null,function*(){let i=NR(e,this.model),o=w(m({},this.invocationParams(t,{streaming:!0})),{messages:i,stream:!0}),s,a=yield new ee(this.completionWithRetry(o,t)),l;try{for(var c=Ee(a),u,d,h;u=!(d=yield new ee(c.next())).done;u=!1){let f=d.value;let p=f?.choices?.[0];if(f.usage&&(l=f.usage),!p)continue;let{delta:g}=p;if(!g)continue;let _=this._convertCompletionsDeltaToBaseMessageChunk(g,f,s);s=g.role??s;let y={prompt:t.promptIndex??0,completion:p.index??0};if(typeof _.content!="string"){console.log("[WARNING]: Received non-string content from OpenAI. This is currently not supported.");continue}let E=m({},y);p.finish_reason!=null&&(E.finish_reason=p.finish_reason,E.system_fingerprint=f.system_fingerprint,E.model_name=f.model,E.service_tier=f.service_tier),this.logprobs&&(E.logprobs=p.logprobs);let T=new Ji({message:_,text:_.content,generationInfo:E});yield T,yield new ee(r?.handleLLMNewToken(T.text??"",y,void 0,void 0,void 0,{chunk:T}))}}catch{h=[d]}finally{try{u&&(d=c.return)&&(yield new ee(d.call(c)))}finally{if(h)throw h[0]}}if(l){let f=m(m({},l.prompt_tokens_details?.audio_tokens!==null&&{audio:l.prompt_tokens_details?.audio_tokens}),l.prompt_tokens_details?.cached_tokens!==null&&{cache_read:l.prompt_tokens_details?.cached_tokens}),p=m(m({},l.completion_tokens_details?.audio_tokens!==null&&{audio:l.completion_tokens_details?.audio_tokens}),l.completion_tokens_details?.reasoning_tokens!==null&&{reasoning:l.completion_tokens_details?.reasoning_tokens});yield new Ji({message:new _i({content:"",response_metadata:{usage:m({},l)},usage_metadata:m(m({input_tokens:l.prompt_tokens,output_tokens:l.completion_tokens,total_tokens:l.total_tokens},Object.keys(f).length>0&&{input_token_details:f}),Object.keys(p).length>0&&{output_token_details:p})}),text:""})}if(t.signal?.aborted)throw new Error("AbortError")})}completionWithRetry(e,t){return v(this,null,function*(){let r=this._getClientOptions(t),i=e.response_format&&e.response_format.type==="json_schema";return this.caller.call(()=>v(this,null,function*(){try{return i&&!e.stream?yield this.client.chat.completions.parse(e,r):yield this.client.chat.completions.create(e,r)}catch(o){throw rh(o)}}))})}_convertCompletionsMessageToBaseMessage(e,t){let r=e.tool_calls;switch(e.role){case"assistant":{let i=[],o=[];for(let l of r??[])try{i.push(ix(l,{returnId:!0}))}catch(c){o.push(DR(l,c.message))}let s={function_call:e.function_call,tool_calls:r};this.__includeRawResponse!==void 0&&(s.__raw_response=t);let a=m({model_name:t.model},t.system_fingerprint?{usage:m({},t.usage),system_fingerprint:t.system_fingerprint}:{});return e.audio&&(s.audio=e.audio),new pn({content:e.content||"",tool_calls:i,invalid_tool_calls:o,additional_kwargs:s,response_metadata:a,id:t.id})}default:return new yC(e.content||"",e.role??"unknown")}}_convertCompletionsDeltaToBaseMessageChunk(e,t,r){let i=e.role??r,o=e.content??"",s;e.function_call?s={function_call:e.function_call}:e.tool_calls?s={tool_calls:e.tool_calls}:s={},this.__includeRawResponse&&(s.__raw_response=t),e.audio&&(s.audio=w(m({},e.audio),{index:t.choices[0].index}));let a={usage:m({},t.usage)};if(i==="user")return new HO({content:o,response_metadata:a});if(i==="assistant"){let l=[];if(Array.isArray(e.tool_calls))for(let c of e.tool_calls)l.push({name:c.function?.name,args:c.function?.arguments,id:c.id,index:c.index,type:"tool_call_chunk"});return new _i({content:o,tool_call_chunks:l,additional_kwargs:s,id:t.id,response_metadata:a})}else return i==="system"?new xC({content:o,response_metadata:a}):i==="developer"?new xC({content:o,response_metadata:a,additional_kwargs:{__openai_role__:"developer"}}):i==="function"?new zO({content:o,additional_kwargs:s,name:e.name,response_metadata:a}):i==="tool"?new $O({content:o,additional_kwargs:s,tool_call_id:e.tool_call_id,response_metadata:a}):new UO({content:o,role:i,response_metadata:a})}},Ug=class extends $g{get lc_serializable_keys(){return[...super.lc_serializable_keys,"useResponsesApi"]}constructor(e){super(e??{}),Object.defineProperty(this,"useResponsesApi",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"responses",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"completions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.useResponsesApi=e?.useResponsesApi??!1,this.responses=new FR(e),this.completions=new LR(e),this.responses._getClientOptions=this._getClientOptions,this.completions._getClientOptions=this._getClientOptions}_useResponsesApi(e){let t=e?.tools?.some(jR),r=e?.previous_response_id!=null||e?.text!=null||e?.truncation!=null||e?.include!=null||e?.reasoning?.summary!=null||this.reasoning?.summary!=null;return this.useResponsesApi||t||r}getLsParams(e){let t=this._combineCallOptions(e);return this._useResponsesApi(e)?this.responses.getLsParams(t):this.completions.getLsParams(t)}invocationParams(e){let t=this._combineCallOptions(e);return this._useResponsesApi(e)?this.responses.invocationParams(t):this.completions.invocationParams(t)}_generate(e,t,r){return v(this,null,function*(){return this._useResponsesApi(t)?this.responses._generate(e,t):this.completions._generate(e,t,r)})}_streamResponseChunks(e,t,r){return We(this,null,function*(){if(this._useResponsesApi(t)){yield*Ri(this.responses._streamResponseChunks(e,this._combineCallOptions(t)));return}yield*Ri(this.completions._streamResponseChunks(e,this._combineCallOptions(t),r))})}withConfig(e){return this.defaultOptions=m(m({},this.defaultOptions),e),this}};var VR={};qt(VR,{BaseLLM:()=>zg,LLM:()=>ih});var zg=class n extends Zc{constructor(r){var i=r,{concurrency:e}=i,t=Ae(i,["concurrency"]);super(e?m({maxConcurrency:e},t):t),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","llms",this._llmType()]})}invoke(e,t){return v(this,null,function*(){let r=n._convertInputToPromptValue(e);return(yield this.generatePrompt([r],t,t?.callbacks)).generations[0][0].text})}_streamResponseChunks(e,t,r){return We(this,null,function*(){throw new Error("Not implemented.")})}_separateRunnableConfigFromCallOptionsCompat(e){let[t,r]=super._separateRunnableConfigFromCallOptions(e);return r.signal=t.signal,[t,r]}_streamIterator(e,t){return We(this,null,function*(){if(this._streamResponseChunks===n.prototype._streamResponseChunks)yield this.invoke(e,t);else{let a=n._convertInputToPromptValue(e),[l,c]=this._separateRunnableConfigFromCallOptionsCompat(t),u=yield new ee(Mi.configure(l.callbacks,this.callbacks,l.tags,this.tags,l.metadata,this.metadata,{verbose:this.verbose})),d={options:c,invocation_params:this?.invocationParams(c),batch_size:1},h=yield new ee(u?.handleLLMStart(this.toJSON(),[a.toString()],l.runId,void 0,d,void 0,void 0,l.runName)),f=new Oh({text:""});try{try{for(var r=Ee(this._streamResponseChunks(a.toString(),c,h?.[0])),i,o,s;i=!(o=yield new ee(r.next())).done;i=!1){let p=o.value;f?f=f.concat(p):f=p,typeof p.text=="string"&&(yield p.text)}}catch{s=[o]}finally{try{i&&(o=r.return)&&(yield new ee(o.call(r)))}finally{if(s)throw s[0]}}}catch(p){throw yield new ee(Promise.all((h??[]).map(g=>g?.handleLLMError(p)))),p}yield new ee(Promise.all((h??[]).map(p=>p?.handleLLMEnd({generations:[[f]]}))))}})}generatePrompt(e,t,r){return v(this,null,function*(){let i=e.map(o=>o.toString());return this.generate(i,t,r)})}invocationParams(e){return{}}_flattenLLMResult(e){let t=[];for(let r=0;r<e.generations.length;r+=1){let i=e.generations[r];if(r===0)t.push({generations:[i],llmOutput:e.llmOutput});else{let o=e.llmOutput?w(m({},e.llmOutput),{tokenUsage:{}}):void 0;t.push({generations:[i],llmOutput:o})}}return t}_generateUncached(e,t,r,i){return v(this,null,function*(){let o;if(i!==void 0&&i.length===e.length)o=i;else{let f=yield Mi.configure(r.callbacks,this.callbacks,r.tags,this.tags,r.metadata,this.metadata,{verbose:this.verbose}),p={options:t,invocation_params:this?.invocationParams(t),batch_size:e.length};o=yield f?.handleLLMStart(this.toJSON(),e,r.runId,void 0,p,void 0,void 0,r?.runName)}let s=!!o?.[0].handlers.find(C_),a;if(s&&e.length===1&&this._streamResponseChunks!==n.prototype._streamResponseChunks)try{let f=yield this._streamResponseChunks(e[0],t,o?.[0]),p;try{for(var c=Ee(f),u,d,h;u=!(d=yield c.next()).done;u=!1){let g=d.value;p===void 0?p=g:p=Ts(p,g)}}catch{h=[d]}finally{try{u&&(d=c.return)&&(yield d.call(c))}finally{if(h)throw h[0]}}if(p===void 0)throw new Error("Received empty response from chat model call.");a={generations:[[p]],llmOutput:{}},yield o?.[0].handleLLMEnd(a)}catch(f){throw yield o?.[0].handleLLMError(f),f}else{try{a=yield this._generate(e,t,o?.[0])}catch(p){throw yield Promise.all((o??[]).map(g=>g?.handleLLMError(p))),p}let f=this._flattenLLMResult(a);yield Promise.all((o??[]).map((p,g)=>p?.handleLLMEnd(f[g])))}let l=o?.map(f=>f.runId)||void 0;return Object.defineProperty(a,Au,{value:l?{runIds:l}:void 0,configurable:!0}),a})}_generateCached(a){return v(this,arguments,function*({prompts:e,cache:t,llmStringKey:r,parsedOptions:i,handledOptions:o,runId:s}){let l=yield Mi.configure(o.callbacks,this.callbacks,o.tags,this.tags,o.metadata,this.metadata,{verbose:this.verbose}),c={options:i,invocation_params:this?.invocationParams(i),batch_size:e.length},u=yield l?.handleLLMStart(this.toJSON(),e,s,void 0,c,void 0,void 0,o?.runName),d=[],f=(yield Promise.allSettled(e.map((_,y)=>v(this,null,function*(){let E=yield t.lookup(_,r);return E==null&&d.push(y),E})))).map((_,y)=>({result:_,runManager:u?.[y]})).filter(({result:_})=>_.status==="fulfilled"&&_.value!=null||_.status==="rejected"),p=[];yield Promise.all(f.map((T,A)=>v(this,[T,A],function*({result:_,runManager:y},E){if(_.status==="fulfilled"){let P=_.value;return p[E]=P.map(R=>(R.generationInfo=w(m({},R.generationInfo),{tokenUsage:{}}),R)),P.length&&(yield y?.handleLLMNewToken(P[0].text)),y?.handleLLMEnd({generations:[P]},void 0,void 0,void 0,{cached:!0})}else return yield y?.handleLLMError(_.reason,void 0,void 0,void 0,{cached:!0}),Promise.reject(_.reason)})));let g={generations:p,missingPromptIndices:d,startedRunManagers:u};return Object.defineProperty(g,Au,{value:u?{runIds:u?.map(_=>_.runId)}:void 0,configurable:!0}),g})}generate(e,t,r){return v(this,null,function*(){if(!Array.isArray(e))throw new Error("Argument 'prompts' is expected to be a string[]");let i;Array.isArray(t)?i={stop:t}:i=t;let[o,s]=this._separateRunnableConfigFromCallOptionsCompat(i);if(o.callbacks=o.callbacks??r,!this.cache)return this._generateUncached(e,s,o);let{cache:a}=this,l=this._getSerializedCacheKeyParametersForCall(s),{generations:c,missingPromptIndices:u,startedRunManagers:d}=yield this._generateCached({prompts:e,cache:a,llmStringKey:l,parsedOptions:s,handledOptions:o,runId:o.runId}),h={};if(u.length>0){let f=yield this._generateUncached(u.map(p=>e[p]),s,o,d!==void 0?u.map(p=>d?.[p]):void 0);yield Promise.all(f.generations.map((p,g)=>v(this,null,function*(){let _=u[g];return c[_]=p,a.update(e[_],l,p)}))),h=f.llmOutput??{}}return{generations:c,llmOutput:h}})}call(e,t,r){return v(this,null,function*(){let{generations:i}=yield this.generate([e],t,r);return i[0][0].text})}predict(e,t,r){return v(this,null,function*(){return this.call(e,t,r)})}predictMessages(e,t,r){return v(this,null,function*(){let i=x_(e),o=yield this.call(i,t,r);return new pn(o)})}_identifyingParams(){return{}}serialize(){return w(m({},this._identifyingParams()),{_type:this._llmType(),_model:this._modelType()})}_modelType(){return"base_llm"}},ih=class extends zg{_generate(e,t,r){return v(this,null,function*(){return{generations:yield Promise.all(e.map((o,s)=>this._call(o,w(m({},t),{promptIndex:s}),r).then(a=>[{text:a}])))}})}};var UR={};qt(UR,{chunkArray:()=>$R});var $R=(n,e)=>n.reduce((t,r,i)=>{let o=Math.floor(i/e),s=t[o]||[];return t[o]=s.concat([r]),t},[]);var zR={};qt(zR,{Embeddings:()=>nu});var nu=class{constructor(e){Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.caller=new ku(e??{})}};var qR={};qt(qR,{BaseToolkit:()=>HR,DynamicStructuredTool:()=>hx,DynamicTool:()=>fx,StructuredTool:()=>ru,Tool:()=>oh,ToolInputParsingException:()=>w_,isLangChainTool:()=>yl,isRunnableToolLike:()=>Fg,isStructuredTool:()=>Ng,isStructuredToolParams:()=>Lg,tool:()=>Eoe});var ru=class extends th{get lc_namespace(){return["langchain","tools"]}constructor(e){super(e??{}),Object.defineProperty(this,"returnDirect",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"verboseParsingErrors",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"responseFormat",{enumerable:!0,configurable:!0,writable:!0,value:"content"}),Object.defineProperty(this,"defaultConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.verboseParsingErrors=e?.verboseParsingErrors??this.verboseParsingErrors,this.responseFormat=e?.responseFormat??this.responseFormat,this.defaultConfig=e?.defaultConfig??this.defaultConfig}invoke(e,t){return v(this,null,function*(){let r,i=Oi(Br(this.defaultConfig,t));return y_(e)?(r=e.args,i=w(m({},i),{toolCall:e})):r=e,this.call(r,i)})}call(e,t,r){return v(this,null,function*(){let i=y_(e)?e.args:e,o;if(bi(this.schema))try{o=yield Nh(this.schema,i)}catch(p){let g="Received tool input did not match expected schema";throw this.verboseParsingErrors&&(g=`${g}
Details: ${p.message}`),new w_(g,JSON.stringify(e))}else{let p=pP(i,this.schema);if(!p.valid){let g="Received tool input did not match expected schema";throw this.verboseParsingErrors&&(g=`${g}
Details: ${p.errors.map(_=>`${_.keywordLocation}: ${_.error}`).join(`
`)}`),new w_(g,JSON.stringify(e))}o=i}let s=Du(t),l=yield Mi.configure(s.callbacks,this.callbacks,s.tags||r,this.tags,s.metadata,this.metadata,{verbose:this.verbose})?.handleToolStart(this.toJSON(),typeof e=="string"?e:JSON.stringify(e),s.runId,void 0,void 0,void 0,s.runName);delete s.runId;let c;try{c=yield this._call(o,l,s)}catch(p){throw yield l?.handleToolError(p),p}let u,d;if(this.responseFormat==="content_and_artifact")if(Array.isArray(c)&&c.length===2)[u,d]=c;else throw new Error(`Tool response format is "content_and_artifact" but the output was not a two-tuple.
Result: ${JSON.stringify(c)}`);else u=c;let h;y_(e)&&(h=e.id),!h&&GO(s)&&(h=s.toolCall.id);let f=Ioe({content:u,artifact:d,toolCallId:h,name:this.name});return yield l?.handleToolEnd(f),f})}},oh=class extends ru{constructor(e){super(e),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:b.object({input:b.string().optional()}).transform(t=>t.input)})}call(e,t){let r=typeof e=="string"||e==null?{input:e}:e;return super.call(r,t)}},fx=class n extends oh{static lc_name(){return"DynamicTool"}constructor(e){super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.description=e.description,this.func=e.func,this.returnDirect=e.returnDirect??this.returnDirect}call(e,t){return v(this,null,function*(){let r=Du(t);return r.runName===void 0&&(r.runName=this.name),sr(n.prototype,this,"call").call(this,e,r)})}_call(e,t,r){return v(this,null,function*(){return this.func(e,t,r)})}},hx=class n extends ru{static lc_name(){return"DynamicStructuredTool"}constructor(e){super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.description=e.description,this.func=e.func,this.returnDirect=e.returnDirect??this.returnDirect,this.schema=e.schema}call(e,t,r){return v(this,null,function*(){let i=Du(t);return i.runName===void 0&&(i.runName=this.name),sr(n.prototype,this,"call").call(this,e,i,r)})}_call(e,t,r){return this.func(e,t,r)}},HR=class{getTools(){return this.tools}};function Eoe(n,e){let t=DC(e.schema),r=gP(e.schema);if(!e.schema||t||r)return new fx(w(m({},e),{description:e.description??e.schema?.description??`${e.name} tool`,func:(s,a,l)=>v(null,null,function*(){return new Promise((c,u)=>{let d=Bn(l,{callbacks:a?.getChild()});No.runWithConfig(Mh(d),()=>v(null,null,function*(){try{c(n(s,d))}catch(h){u(h)}}))})})}));let i=e.schema,o=e.description??e.schema.description??`${e.name} tool`;return new hx(w(m({},e),{description:o,schema:i,func:(s,a,l)=>v(null,null,function*(){return new Promise((c,u)=>{let d=Bn(l,{callbacks:a?.getChild()});No.runWithConfig(Mh(d),()=>v(null,null,function*(){try{c(n(s,d))}catch(h){u(h)}}))})})}))}function Ioe(n){let{content:e,artifact:t,toolCallId:r}=n;return r&&!VO(e)?typeof e=="string"||Array.isArray(e)&&e.every(i=>typeof i=="object")?new Iu({content:e,artifact:t,tool_call_id:r,name:n.name}):new Iu({content:Soe(e),artifact:t,tool_call_id:r,name:n.name}):e}function Soe(n){try{return JSON.stringify(n,null,2)??""}catch{return`${n}`}}var GR=class extends oh{static lc_name(){return"DallEAPIWrapper"}constructor(e){e?.responseFormat!==void 0&&["url","b64_json"].includes(e.responseFormat)&&(e.dallEResponseFormat=e.responseFormat,e.responseFormat="content"),super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"dalle_api_wrapper"}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:"A wrapper around OpenAI DALL-E API. Useful for when you need to generate images from a text description. Input should be an image description."}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"dall-e-3"}),Object.defineProperty(this,"style",{enumerable:!0,configurable:!0,writable:!0,value:"vivid"}),Object.defineProperty(this,"quality",{enumerable:!0,configurable:!0,writable:!0,value:"standard"}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:"1024x1024"}),Object.defineProperty(this,"dallEResponseFormat",{enumerable:!0,configurable:!0,writable:!0,value:"url"}),Object.defineProperty(this,"user",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let t=e?.apiKey??e?.openAIApiKey??Sr("OPENAI_API_KEY"),r=e?.organization??Sr("OPENAI_ORGANIZATION"),i={apiKey:t,organization:r,dangerouslyAllowBrowser:!0,baseURL:e?.baseUrl};this.client=new ze(i),this.model=e?.model??e?.modelName??this.model,this.style=e?.style??this.style,this.quality=e?.quality??this.quality,this.n=e?.n??this.n,this.size=e?.size??this.size,this.dallEResponseFormat=e?.dallEResponseFormat??this.dallEResponseFormat,this.user=e?.user}processMultipleGeneratedUrls(e){return this.dallEResponseFormat==="url"?e.flatMap(t=>t.data?.flatMap(i=>i.url?{type:"image_url",image_url:i.url}:[]).filter(i=>i!==void 0&&i.type==="image_url"&&typeof i.image_url=="string"&&i.image_url!==void 0)??[]):e.flatMap(t=>t.data?.flatMap(i=>i.b64_json?{type:"image_url",image_url:{url:i.b64_json}}:[]).filter(i=>i!==void 0&&i.type==="image_url"&&typeof i.image_url=="object"&&"url"in i.image_url&&typeof i.image_url.url=="string"&&i.image_url.url!==void 0)??[])}_call(e){return v(this,null,function*(){let t={model:this.model,prompt:e,n:1,size:this.size,response_format:this.dallEResponseFormat,style:this.style,quality:this.quality,user:this.user};if(this.n>1){let o=yield Promise.all(Array.from({length:this.n}).map(()=>this.client.images.generate(t)));return this.processMultipleGeneratedUrls(o)}let r=yield this.client.images.generate(t),i="";return this.dallEResponseFormat==="url"?[i]=r.data?.map(o=>o.url).filter(o=>o!=="undefined")??[]:[i]=r.data?.map(o=>o.b64_json).filter(o=>o!=="undefined")??[],i})}};Object.defineProperty(GR,"toolName",{enumerable:!0,configurable:!0,writable:!0,value:"dalle_api_wrapper"});var QR={};qt(QR,{AIMessagePromptTemplate:()=>X8,BaseChatPromptTemplate:()=>Y8,BaseMessagePromptTemplate:()=>W8,BaseMessageStringPromptTemplate:()=>Q8,BasePromptTemplate:()=>MC,BaseStringPromptTemplate:()=>P8,ChatMessagePromptTemplate:()=>Z8,ChatPromptTemplate:()=>Ll,DEFAULT_FORMATTER_MAPPING:()=>B8,DEFAULT_PARSER_MAPPING:()=>V8,DictPromptTemplate:()=>G8,FewShotChatMessagePromptTemplate:()=>e5,FewShotPromptTemplate:()=>J8,HumanMessagePromptTemplate:()=>kC,ImagePromptTemplate:()=>q8,MessagesPlaceholder:()=>K8,PipelinePromptTemplate:()=>WR,PromptTemplate:()=>H8,StructuredPrompt:()=>KR,SystemMessagePromptTemplate:()=>RC,checkValidTemplate:()=>z8,interpolateFString:()=>L8,interpolateMustache:()=>j8,parseFString:()=>N8,parseMustache:()=>F8,parseTemplate:()=>U8,renderTemplate:()=>$8});var WR=class n extends MC{static lc_name(){return"PipelinePromptTemplate"}constructor(e){super(w(m({},e),{inputVariables:[]})),Object.defineProperty(this,"pipelinePrompts",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"finalPrompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.pipelinePrompts=e.pipelinePrompts,this.finalPrompt=e.finalPrompt,this.inputVariables=this.computeInputValues()}computeInputValues(){let e=this.pipelinePrompts.map(r=>r.name),t=this.pipelinePrompts.map(r=>r.prompt.inputVariables.filter(i=>!e.includes(i))).flat();return[...new Set(t)]}static extractRequiredInputValues(e,t){return t.reduce((r,i)=>(r[i]=e[i],r),{})}formatPipelinePrompts(e){return v(this,null,function*(){let t=yield this.mergePartialAndUserVariables(e);for(let{name:r,prompt:i}of this.pipelinePrompts){let o=n.extractRequiredInputValues(t,i.inputVariables);i instanceof Ll?t[r]=yield i.formatMessages(o):t[r]=yield i.format(o)}return n.extractRequiredInputValues(t,this.finalPrompt.inputVariables)})}formatPromptValue(e){return v(this,null,function*(){return this.finalPrompt.formatPromptValue(yield this.formatPipelinePrompts(e))})}format(e){return v(this,null,function*(){return this.finalPrompt.format(yield this.formatPipelinePrompts(e))})}partial(e){return v(this,null,function*(){let t=m({},this);return t.inputVariables=this.inputVariables.filter(r=>!(r in e)),t.partialVariables=m(m({},this.partialVariables??{}),e),new n(t)})}serialize(){throw new Error("Not implemented.")}_getPromptType(){return"pipeline"}};function a4(n){return typeof n=="object"&&n!=null&&"withStructuredOutput"in n&&typeof n.withStructuredOutput=="function"}function Doe(n){return typeof n=="object"&&n!=null&&"lc_id"in n&&Array.isArray(n.lc_id)&&n.lc_id.join("/")==="langchain_core/runnables/RunnableBinding"}var KR=class n extends Ll{get lc_aliases(){return w(m({},super.lc_aliases),{schema:"schema_"})}constructor(e){super(e),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"method",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts","structured"]}),this.schema=e.schema,this.method=e.method}pipe(e){if(a4(e))return super.pipe(e.withStructuredOutput(this.schema));if(Doe(e)&&a4(e.bound))return super.pipe(new Yn({bound:e.bound.withStructuredOutput(this.schema,...this.method?[{method:this.method}]:[]),kwargs:e.kwargs??{},config:e.config,configFactories:e.configFactories}));throw new Error('Structured prompts need to be piped to a language model that supports the "withStructuredOutput()" method.')}static fromMessagesAndSchema(e,t,r){return n.fromMessages(e,{schema:t,method:r})}};function px(n){return YO({clockseq:n})}function wl(n,e){let t=e.replace(/-/g,"").match(/.{2}/g).map(r=>parseInt(r,16));return QO(n,new Uint8Array(t))}var l4="__error__",sh="__scheduled__",c4="__interrupt__",u4="__resume__";var d4=[];var NM={};qt(NM,{agents:()=>f4,caches:()=>oR,callbacks__base:()=>eP,callbacks__manager:()=>sP,callbacks__promises:()=>oP,chat_history:()=>ZR,documents:()=>JR,embeddings:()=>zR,example_selectors:()=>iM,language_models__base:()=>uR,language_models__chat_models:()=>hR,language_models__llms:()=>VR,load__serializable:()=>FO,memory:()=>sM,messages:()=>IP,output_parsers:()=>IR,outputs:()=>cP,prompt_values:()=>TP,prompts:()=>QR,retrievers:()=>aM,runnables:()=>vk,stores:()=>cM,tools:()=>qR,tracers__base:()=>tP,tracers__console:()=>nP,tracers__initialize:()=>dM,tracers__log_stream:()=>lP,tracers__run_collector:()=>hM,tracers__tracer_langchain:()=>iP,tracers__tracer_langchain_v1:()=>uM,utils__async_caller:()=>uP,utils__chunk_array:()=>UR,utils__env:()=>XO,utils__function_calling:()=>AR,utils__hash:()=>iR,utils__json_patch:()=>wR,utils__json_schema:()=>_P,utils__math:()=>mM,utils__stream:()=>aP,utils__testing:()=>PM,utils__tiktoken:()=>cR,utils__types:()=>TR,vectorstores:()=>_M});var f4={};var ZR={};qt(ZR,{BaseChatMessageHistory:()=>Hg,BaseListChatMessageHistory:()=>ah,InMemoryChatMessageHistory:()=>YR});var Hg=class extends Ds{addMessages(e){return v(this,null,function*(){for(let t of e)yield this.addMessage(t)})}},ah=class extends Ds{addUserMessage(e){return this.addMessage(new wa(e))}addAIChatMessage(e){return this.addMessage(new pn(e))}addAIMessage(e){return this.addMessage(new pn(e))}addMessages(e){return v(this,null,function*(){for(let t of e)yield this.addMessage(t)})}clear(){throw new Error("Not implemented.")}},YR=class extends ah{constructor(e){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","stores","message","in_memory"]}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.messages=e??[]}getMessages(){return v(this,null,function*(){return this.messages})}addMessage(e){return v(this,null,function*(){this.messages.push(e)})}clear(){return v(this,null,function*(){this.messages=[]})}};var JR={};qt(JR,{BaseDocumentTransformer:()=>mx,Document:()=>yo,MappingDocumentTransformer:()=>XR});var yo=class{constructor(e){Object.defineProperty(this,"pageContent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.pageContent=e.pageContent!==void 0?e.pageContent.toString():"",this.metadata=e.metadata??{},this.id=e.id}};var mx=class extends mt{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","documents","transformers"]})}invoke(e,t){return this.transformDocuments(e)}},XR=class extends mx{transformDocuments(e){return v(this,null,function*(){let t=[];for(let r of e){let i=yield this._transformDocument(r);t.push(i)}return t})}};var iM={};qt(iM,{BaseExampleSelector:()=>iu,BasePromptSelector:()=>gx,ConditionalPromptSelector:()=>eM,LengthBasedExampleSelector:()=>tM,SemanticSimilarityExampleSelector:()=>rM,isChatModel:()=>Aoe,isLLM:()=>Toe});var iu=class extends Ds{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","example_selectors","base"]})}};var gx=class{getPromptAsync(e,t){return v(this,null,function*(){return this.getPrompt(e).partial(t?.partialVariables??{})})}},eM=class extends gx{constructor(e,t=[]){super(),Object.defineProperty(this,"defaultPrompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"conditionals",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.defaultPrompt=e,this.conditionals=t}getPrompt(e){for(let[t,r]of this.conditionals)if(t(e))return r;return this.defaultPrompt}};function Toe(n){return n._modelType()==="base_llm"}function Aoe(n){return n._modelType()==="base_chat_model"}function h4(n){return n.split(/\n| /).length}var tM=class n extends iu{constructor(e){super(e),Object.defineProperty(this,"examples",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"examplePrompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"getTextLength",{enumerable:!0,configurable:!0,writable:!0,value:h4}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,writable:!0,value:2048}),Object.defineProperty(this,"exampleTextLengths",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.examplePrompt=e.examplePrompt,this.maxLength=e.maxLength??2048,this.getTextLength=e.getTextLength??h4}addExample(e){return v(this,null,function*(){this.examples.push(e);let t=yield this.examplePrompt.format(e);this.exampleTextLengths.push(this.getTextLength(t))})}calculateExampleTextLengths(e,t){return v(this,null,function*(){if(e.length>0)return e;let{examples:r,examplePrompt:i}=t;return(yield Promise.all(r.map(s=>i.format(s)))).map(s=>this.getTextLength(s))})}selectExamples(e){return v(this,null,function*(){let t=Object.values(e).join(" "),r=this.maxLength-this.getTextLength(t),i=0,o=[];for(;r>0&&i<this.examples.length;){let s=r-this.exampleTextLengths[i];if(s<0)break;o.push(this.examples[i]),r=s,i+=1}return o})}static fromExamples(e,t){return v(this,null,function*(){let r=new n(t);return yield Promise.all(e.map(i=>r.addExample(i))),r})}};function nM(n){return Object.keys(n).sort().map(e=>n[e])}var rM=class n extends iu{constructor(e){if(super(e),Object.defineProperty(this,"vectorStoreRetriever",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleKeys",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputKeys",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.exampleKeys=e.exampleKeys,this.inputKeys=e.inputKeys,e.vectorStore!==void 0)this.vectorStoreRetriever=e.vectorStore.asRetriever({k:e.k??4,filter:e.filter});else if(e.vectorStoreRetriever)this.vectorStoreRetriever=e.vectorStoreRetriever;else throw new Error('You must specify one of "vectorStore" and "vectorStoreRetriever".')}addExample(e){return v(this,null,function*(){let t=this.inputKeys??Object.keys(e),r=nM(t.reduce((i,o)=>w(m({},i),{[o]:e[o]}),{})).join(" ");yield this.vectorStoreRetriever.addDocuments([new yo({pageContent:r,metadata:e})])})}selectExamples(e){return v(this,null,function*(){let t=this.inputKeys??Object.keys(e),r=nM(t.reduce((s,a)=>w(m({},s),{[a]:e[a]}),{})).join(" "),o=(yield this.vectorStoreRetriever.invoke(r)).map(s=>s.metadata);return this.exampleKeys?o.map(s=>this.exampleKeys.reduce((a,l)=>w(m({},a),{[l]:s[l]}),{})):o})}static fromExamples(o,s,a){return v(this,arguments,function*(e,t,r,i={}){let l=i.inputKeys??null,c=e.map(d=>nM(l?l.reduce((h,f)=>w(m({},h),{[f]:d[f]}),{}):d).join(" ")),u=yield r.fromTexts(c,e,t,i);return new n({vectorStore:u,k:i.k??4,exampleKeys:i.exampleKeys,inputKeys:i.inputKeys})})}};var sM={};qt(sM,{BaseMemory:()=>oM,getInputValue:()=>koe,getOutputValue:()=>Roe,getPromptInputKey:()=>Moe});var oM=class{},p4=(n,e)=>{if(e!==void 0)return n[e];let t=Object.keys(n);if(t.length===1)return n[t[0]]},koe=(n,e)=>{let t=p4(n,e);if(!t){let r=Object.keys(n);throw new Error(`input values have ${r.length} keys, you must specify an input key or pass only 1 key as input`)}return t},Roe=(n,e)=>{let t=p4(n,e);if(!t&&t!==""){let r=Object.keys(n);throw new Error(`output values have ${r.length} keys, you must specify an output key or pass only 1 key as output`)}return t};function Moe(n,e){let t=Object.keys(n).filter(r=>!e.includes(r)&&r!=="stop");if(t.length!==1)throw new Error(`One input key expected, but got ${t.length}`);return t[0]}var aM={};qt(aM,{BaseRetriever:()=>ou});var ou=class extends mt{constructor(e){super(e),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.callbacks=e?.callbacks,this.tags=e?.tags??[],this.metadata=e?.metadata??{},this.verbose=e?.verbose??!1}_getRelevantDocuments(e,t){throw new Error("Not implemented!")}invoke(e,t){return v(this,null,function*(){return this.getRelevantDocuments(e,Oi(t))})}getRelevantDocuments(e,t){return v(this,null,function*(){let r=Oi(Du(t)),o=yield(yield Mi.configure(r.callbacks,this.callbacks,r.tags,this.tags,r.metadata,this.metadata,{verbose:this.verbose}))?.handleRetrieverStart(this.toJSON(),e,r.runId,void 0,void 0,void 0,r.runName);try{let s=yield this._getRelevantDocuments(e,o);return yield o?.handleRetrieverEnd(s),s}catch(s){throw yield o?.handleRetrieverError(s),s}})}};var cM={};qt(cM,{BaseStore:()=>_x,InMemoryStore:()=>lM});var _x=class extends Ds{},lM=class extends _x{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","storage"]}),Object.defineProperty(this,"store",{enumerable:!0,configurable:!0,writable:!0,value:{}})}mget(e){return v(this,null,function*(){return e.map(t=>this.store[t])})}mset(e){return v(this,null,function*(){for(let[t,r]of e)this.store[t]=r})}mdelete(e){return v(this,null,function*(){for(let t of e)delete this.store[t]})}yieldKeys(e){return We(this,null,function*(){let t=Object.keys(this.store);for(let r of t)(e===void 0||r.startsWith(e))&&(yield r)})}};var dM={};qt(dM,{getTracingCallbackHandler:()=>Ooe,getTracingV2CallbackHandler:()=>Poe});var uM={};qt(uM,{LangChainTracerV1:()=>qg});var qg=class extends Fl{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"endpoint",{enumerable:!0,configurable:!0,writable:!0,value:Sr("LANGCHAIN_ENDPOINT")||"http://localhost:1984"}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:{"Content-Type":"application/json"}}),Object.defineProperty(this,"session",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let e=Sr("LANGCHAIN_API_KEY");e&&(this.headers["x-api-key"]=e)}newSession(e){return v(this,null,function*(){let t={start_time:Date.now(),name:e},r=yield this.persistSession(t);return this.session=r,r})}loadSession(e){return v(this,null,function*(){let t=`${this.endpoint}/sessions?name=${e}`;return this._handleSessionResponse(t)})}loadDefaultSession(){return v(this,null,function*(){let e=`${this.endpoint}/sessions?name=default`;return this._handleSessionResponse(e)})}convertV2RunToRun(e){return v(this,null,function*(){let t=this.session??(yield this.loadDefaultSession()),r=e.serialized,i;if(e.run_type==="llm"){let o=e.inputs.prompts?e.inputs.prompts:e.inputs.messages.map(a=>x_(a));i={uuid:e.id,start_time:e.start_time,end_time:e.end_time,execution_order:e.execution_order,child_execution_order:e.child_execution_order,serialized:r,type:e.run_type,session_id:t.id,prompts:o,response:e.outputs}}else if(e.run_type==="chain"){let o=yield Promise.all(e.child_runs.map(a=>this.convertV2RunToRun(a)));i={uuid:e.id,start_time:e.start_time,end_time:e.end_time,execution_order:e.execution_order,child_execution_order:e.child_execution_order,serialized:r,type:e.run_type,session_id:t.id,inputs:e.inputs,outputs:e.outputs,child_llm_runs:o.filter(a=>a.type==="llm"),child_chain_runs:o.filter(a=>a.type==="chain"),child_tool_runs:o.filter(a=>a.type==="tool")}}else if(e.run_type==="tool"){let o=yield Promise.all(e.child_runs.map(a=>this.convertV2RunToRun(a)));i={uuid:e.id,start_time:e.start_time,end_time:e.end_time,execution_order:e.execution_order,child_execution_order:e.child_execution_order,serialized:r,type:e.run_type,session_id:t.id,tool_input:e.inputs.input,output:e.outputs?.output,action:JSON.stringify(r),child_llm_runs:o.filter(a=>a.type==="llm"),child_chain_runs:o.filter(a=>a.type==="chain"),child_tool_runs:o.filter(a=>a.type==="tool")}}else throw new Error(`Unknown run type: ${e.run_type}`);return i})}persistRun(e){return v(this,null,function*(){let t,r;e.run_type!==void 0?r=yield this.convertV2RunToRun(e):r=e,r.type==="llm"?t=`${this.endpoint}/llm-runs`:r.type==="chain"?t=`${this.endpoint}/chain-runs`:t=`${this.endpoint}/tool-runs`;let i=yield fetch(t,{method:"POST",headers:this.headers,body:JSON.stringify(r)});i.ok||console.error(`Failed to persist run: ${i.status} ${i.statusText}`)})}persistSession(e){return v(this,null,function*(){let t=`${this.endpoint}/sessions`,r=yield fetch(t,{method:"POST",headers:this.headers,body:JSON.stringify(e)});return r.ok?m({id:(yield r.json()).id},e):(console.error(`Failed to persist session: ${r.status} ${r.statusText}, using default session.`),m({id:1},e))})}_handleSessionResponse(e){return v(this,null,function*(){let t=yield fetch(e,{method:"GET",headers:this.headers}),r;if(!t.ok)return console.error(`Failed to load session: ${t.status} ${t.statusText}`),r={id:1,start_time:Date.now()},this.session=r,r;let i=yield t.json();return i.length===0?(r={id:1,start_time:Date.now()},this.session=r,r):([r]=i,this.session=r,r)})}};function Ooe(n){return v(this,null,function*(){let e=new qg;return n?yield e.loadSession(n):yield e.loadDefaultSession(),e})}function Poe(){return v(this,null,function*(){return new rP})}var hM={};qt(hM,{RunCollectorCallbackHandler:()=>fM});var fM=class extends Fl{constructor({exampleId:e}={}){super({_awaitHandler:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"run_collector"}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracedRuns",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.exampleId=e,this.tracedRuns=[]}persistRun(e){return v(this,null,function*(){let t=m({},e);t.reference_example_id=this.exampleId,this.tracedRuns.push(t)})}};var mM={};qt(mM,{cosineSimilarity:()=>pM,euclideanDistance:()=>joe,innerProduct:()=>Loe,matrixFunc:()=>vx,maximalMarginalRelevance:()=>Boe,normalize:()=>Foe});function bx(n,e){let t=0,r=0,i=0;for(let o=0;o<n.length;o++)t+=n[o]*e[o],r+=n[o]*n[o],i+=e[o]*e[o];return t/(Math.sqrt(r)*Math.sqrt(i))}function m4(n,e){let t=0;for(let r=0;r<n.length;r++)t+=n[r]*e[r];return t}function Noe(n,e){let t=0;for(let r=0;r<n.length;r++)t+=(n[r]-e[r])*(n[r]-e[r]);return t}function g4(n,e){return Math.sqrt(Noe(n,e))}function vx(n,e,t){if(n.length===0||n[0].length===0||e.length===0||e[0].length===0)return[[]];if(n[0].length!==e[0].length)throw new Error(`Number of columns in X and Y must be the same. X has shape ${[n.length,n[0].length]} and Y has shape ${[e.length,e[0].length]}.`);return n.map(r=>e.map(i=>t(r,i)).map(i=>Number.isNaN(i)?0:i))}function Foe(n,e=!1){let t=Voe(n);return n.map(r=>r.map(i=>e?1-i/t:i/t))}function pM(n,e){return vx(n,e,bx)}function Loe(n,e){return vx(n,e,m4)}function joe(n,e){return vx(n,e,g4)}function Boe(n,e,t=.5,r=4){if(Math.min(r,e.length)<=0)return[];let i=Array.isArray(n[0])?n:[n],o=pM(i,e)[0],s=_4(o).maxIndex,a=[e[s]],l=[s];for(;l.length<Math.min(r,e.length);){let c=-1/0,u=-1,d=pM(e,a);o.forEach((h,f)=>{if(l.includes(f))return;let p=Math.max(...d[f]),g=t*h-(1-t)*p;g>c&&(c=g,u=f)}),a.push(e[u]),l.push(u)}return l}function _4(n){if(n.length===0)return{maxIndex:-1,maxValue:NaN};let e=n[0],t=0;for(let r=1;r<n.length;r+=1)n[r]>e&&(t=r,e=n[r]);return{maxIndex:t,maxValue:e}}function Voe(n){return n.reduce((e,t)=>Math.max(e,_4(t).maxValue),0)}var PM={};qt(PM,{FakeChatMessageHistory:()=>SM,FakeChatModel:()=>xM,FakeEmbeddings:()=>kM,FakeLLM:()=>yM,FakeListChatMessageHistory:()=>DM,FakeListChatModel:()=>IM,FakeRetriever:()=>EM,FakeRunnable:()=>vM,FakeSplitIntoListParser:()=>bM,FakeStreamingChatModel:()=>CM,FakeStreamingLLM:()=>wM,FakeTool:()=>AM,FakeTracer:()=>TM,FakeVectorStore:()=>OM,SingleRunExtractor:()=>MM,SyntheticEmbeddings:()=>RM});var _M={};qt(_M,{SaveableVectorStore:()=>gM,VectorStore:()=>ch,VectorStoreRetriever:()=>lh});var lh=class extends ou{static lc_name(){return"VectorStoreRetriever"}get lc_namespace(){return["langchain_core","vectorstores"]}_vectorstoreType(){return this.vectorStore._vectorstoreType()}constructor(e){super(e),Object.defineProperty(this,"vectorStore",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"k",{enumerable:!0,configurable:!0,writable:!0,value:4}),Object.defineProperty(this,"searchType",{enumerable:!0,configurable:!0,writable:!0,value:"similarity"}),Object.defineProperty(this,"searchKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.vectorStore=e.vectorStore,this.k=e.k??this.k,this.searchType=e.searchType??this.searchType,this.filter=e.filter,e.searchType==="mmr"&&(this.searchKwargs=e.searchKwargs)}_getRelevantDocuments(e,t){return v(this,null,function*(){if(this.searchType==="mmr"){if(typeof this.vectorStore.maxMarginalRelevanceSearch!="function")throw new Error(`The vector store backing this retriever, ${this._vectorstoreType()} does not support max marginal relevance search.`);return this.vectorStore.maxMarginalRelevanceSearch(e,m({k:this.k,filter:this.filter},this.searchKwargs),t?.getChild("vectorstore"))}return this.vectorStore.similaritySearch(e,this.k,this.filter,t?.getChild("vectorstore"))})}addDocuments(e,t){return v(this,null,function*(){return this.vectorStore.addDocuments(e,t)})}},ch=class extends Ds{constructor(e,t){super(t),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","vectorstores",this._vectorstoreType()]}),Object.defineProperty(this,"embeddings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.embeddings=e}delete(e){return v(this,null,function*(){throw new Error("Not implemented.")})}similaritySearch(e,t=4,r=void 0,i=void 0){return v(this,null,function*(){return(yield this.similaritySearchVectorWithScore(yield this.embeddings.embedQuery(e),t,r)).map(s=>s[0])})}similaritySearchWithScore(e,t=4,r=void 0,i=void 0){return v(this,null,function*(){return this.similaritySearchVectorWithScore(yield this.embeddings.embedQuery(e),t,r)})}static fromTexts(e,t,r,i){throw new Error("the Langchain vectorstore implementation you are using forgot to override this, please report a bug")}static fromDocuments(e,t,r){throw new Error("the Langchain vectorstore implementation you are using forgot to override this, please report a bug")}asRetriever(e,t,r,i,o,s){if(typeof e=="number")return new lh({vectorStore:this,k:e,filter:t,tags:[...i??[],this._vectorstoreType()],metadata:o,verbose:s,callbacks:r});{let a={vectorStore:this,k:e?.k,filter:e?.filter,tags:[...e?.tags??[],this._vectorstoreType()],metadata:e?.metadata,verbose:e?.verbose,callbacks:e?.callbacks,searchType:e?.searchType};return e?.searchType==="mmr"?new lh(w(m({},a),{searchKwargs:e.searchKwargs})):new lh(m({},a))}}},gM=class extends ch{static load(e,t){throw new Error("Not implemented")}};var bM=class extends gs{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["tests","fake"]})}getFormatInstructions(){return""}parse(e){return v(this,null,function*(){return e.split(",").map(t=>t.trim())})}},vM=class extends mt{constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["tests","fake"]}),Object.defineProperty(this,"returnOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.returnOptions=e.returnOptions}invoke(e,t){return v(this,null,function*(){return this.returnOptions?t??{}:{input:e}})}},yM=class extends ih{constructor(e){super(e),Object.defineProperty(this,"response",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"thrownErrorString",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.response=e.response,this.thrownErrorString=e.thrownErrorString}_llmType(){return"fake"}_call(e,t,r){return v(this,null,function*(){if(this.thrownErrorString)throw new Error(this.thrownErrorString);let i=this.response??e;return yield r?.handleLLMNewToken(i),i})}},wM=class extends ih{constructor(e){super(e),Object.defineProperty(this,"sleep",{enumerable:!0,configurable:!0,writable:!0,value:50}),Object.defineProperty(this,"responses",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"thrownErrorString",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.sleep=e.sleep??this.sleep,this.responses=e.responses,this.thrownErrorString=e.thrownErrorString}_llmType(){return"fake"}_call(e){return v(this,null,function*(){if(this.thrownErrorString)throw new Error(this.thrownErrorString);let t=this.responses?.[0];return this.responses=this.responses?.slice(1),t??e})}_streamResponseChunks(e,t,r){return We(this,null,function*(){if(this.thrownErrorString)throw new Error(this.thrownErrorString);let i=this.responses?.[0];this.responses=this.responses?.slice(1);for(let o of i??e)yield new ee(new Promise(s=>setTimeout(s,this.sleep))),yield{text:o,generationInfo:{}},yield new ee(r?.handleLLMNewToken(o))})}},xM=class extends ms{_combineLLMOutput(){return[]}_llmType(){return"fake"}_generate(e,t,r){return v(this,null,function*(){if(t?.stop?.length)return{generations:[{message:new pn(t.stop[0]),text:t.stop[0]}]};let i=e.map(o=>typeof o.content=="string"?o.content:JSON.stringify(o.content,null,2)).join(`
`);return yield r?.handleLLMNewToken(i),{generations:[{message:new pn(i),text:i}],llmOutput:{}}})}},CM=class n extends ms{constructor(a){var l=a,{sleep:e=50,responses:t=[],chunks:r=[],toolStyle:i="openai",thrownErrorString:o}=l,s=Ae(l,["sleep","responses","chunks","toolStyle","thrownErrorString"]);super(s),Object.defineProperty(this,"sleep",{enumerable:!0,configurable:!0,writable:!0,value:50}),Object.defineProperty(this,"responses",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"chunks",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"toolStyle",{enumerable:!0,configurable:!0,writable:!0,value:"openai"}),Object.defineProperty(this,"thrownErrorString",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tools",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.sleep=e,this.responses=t,this.chunks=r,this.toolStyle=i,this.thrownErrorString=o}_llmType(){return"fake"}bindTools(e){let t=[...this.tools,...e],r=t.map(s=>{switch(this.toolStyle){case"openai":return{type:"function",function:{name:s.name,description:s.description,parameters:ar(s.schema)}};case"anthropic":return{name:s.name,description:s.description,input_schema:ar(s.schema)};case"bedrock":return{toolSpec:{name:s.name,description:s.description,inputSchema:ar(s.schema)}};case"google":return{name:s.name,description:s.description,parameters:ar(s.schema)};default:throw new Error(`Unsupported tool style: ${this.toolStyle}`)}}),i=this.toolStyle==="google"?[{functionDeclarations:r}]:r,o=new n({sleep:this.sleep,responses:this.responses,chunks:this.chunks,toolStyle:this.toolStyle,thrownErrorString:this.thrownErrorString});return o.tools=t,o.withConfig({tools:i})}_generate(e,t,r){return v(this,null,function*(){if(this.thrownErrorString)throw new Error(this.thrownErrorString);let i=this.responses?.[0]?.content??e[0].content??"";return{generations:[{text:"",message:new pn({content:i,tool_calls:this.chunks?.[0]?.tool_calls})}]}})}_streamResponseChunks(e,t,r){return We(this,null,function*(){if(this.thrownErrorString)throw new Error(this.thrownErrorString);if(this.chunks?.length){for(let s of this.chunks){let a=new Ji({message:new _i({content:s.content,tool_calls:s.tool_calls,additional_kwargs:s.additional_kwargs??{}}),text:s.content?.toString()??""});yield a,yield new ee(r?.handleLLMNewToken(s.content,void 0,void 0,void 0,void 0,{chunk:a}))}return}let i=this.responses?.[0]??new pn(typeof e[0].content=="string"?e[0].content:""),o=typeof i.content=="string"?i.content:"";for(let s of o){yield new ee(new Promise(l=>setTimeout(l,this.sleep)));let a=new Ji({message:new _i({content:s}),text:s});yield a,yield new ee(r?.handleLLMNewToken(s,void 0,void 0,void 0,void 0,{chunk:a}))}})}},EM=class extends ou{constructor(e){super(),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["test","fake"]}),Object.defineProperty(this,"output",{enumerable:!0,configurable:!0,writable:!0,value:[new yo({pageContent:"foo"}),new yo({pageContent:"bar"})]}),this.output=e?.output??this.output}_getRelevantDocuments(e){return v(this,null,function*(){return this.output})}},IM=class extends ms{static lc_name(){return"FakeListChatModel"}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"responses",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"i",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"sleep",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"emitCustomEvent",{enumerable:!0,configurable:!0,writable:!0,value:!1});let{responses:t,sleep:r,emitCustomEvent:i}=e;this.responses=t,this.sleep=r,this.emitCustomEvent=i??this.emitCustomEvent}_combineLLMOutput(){return[]}_llmType(){return"fake-list"}_generate(e,t,r){return v(this,null,function*(){if(yield this._sleepIfRequested(),t?.thrownErrorString)throw new Error(t.thrownErrorString);if(this.emitCustomEvent&&(yield r?.handleCustomEvent("some_test_event",{someval:!0})),t?.stop?.length)return{generations:[this._formatGeneration(t.stop[0])]};{let i=this._currentResponse();return this._incrementResponse(),{generations:[this._formatGeneration(i)],llmOutput:{}}}})}_formatGeneration(e){return{message:new pn(e),text:e}}_streamResponseChunks(e,t,r){return We(this,null,function*(){let i=this._currentResponse();this._incrementResponse(),this.emitCustomEvent&&(yield new ee(r?.handleCustomEvent("some_test_event",{someval:!0})));try{for(var o=Ee(i),s,a,l;s=!(a=yield new ee(o.next())).done;s=!1){let c=a.value;if(yield new ee(this._sleepIfRequested()),t?.thrownErrorString)throw new Error(t.thrownErrorString);yield this._createResponseChunk(c),r?.handleLLMNewToken(c)}}catch{l=[a]}finally{try{s&&(a=o.return)&&(yield new ee(a.call(o)))}finally{if(l)throw l[0]}}})}_sleepIfRequested(){return v(this,null,function*(){this.sleep!==void 0&&(yield this._sleep())})}_sleep(){return v(this,null,function*(){return new Promise(e=>{setTimeout(()=>e(),this.sleep)})})}_createResponseChunk(e){return new Ji({message:new _i({content:e}),text:e})}_currentResponse(){return this.responses[this.i]}_incrementResponse(){this.i<this.responses.length-1?this.i+=1:this.i=0}withStructuredOutput(e,t){return An.from(r=>v(this,null,function*(){let i=yield this.invoke(r);if(i.tool_calls?.[0]?.args)return i.tool_calls[0].args;if(typeof i.content=="string")return JSON.parse(i.content);throw new Error("No structured output found")}))}},SM=class extends Hg{constructor(){super(),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","message","fake"]}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:[]})}getMessages(){return v(this,null,function*(){return this.messages})}addMessage(e){return v(this,null,function*(){this.messages.push(e)})}addUserMessage(e){return v(this,null,function*(){this.messages.push(new wa(e))})}addAIChatMessage(e){return v(this,null,function*(){this.messages.push(new pn(e))})}clear(){return v(this,null,function*(){this.messages=[]})}},DM=class extends ah{constructor(){super(),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","message","fake"]}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:[]})}addMessage(e){return v(this,null,function*(){this.messages.push(e)})}getMessages(){return v(this,null,function*(){return this.messages})}},TM=class extends Fl{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"fake_tracer"}),Object.defineProperty(this,"runs",{enumerable:!0,configurable:!0,writable:!0,value:[]})}persistRun(e){return this.runs.push(e),Promise.resolve()}},AM=class extends ru{constructor(e){super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.description=e.description,this.schema=e.schema}_call(e,t){return v(this,null,function*(){return JSON.stringify(e)})}},kM=class extends nu{constructor(e){super(e??{})}embedDocuments(e){return Promise.resolve(e.map(()=>[.1,.2,.3,.4]))}embedQuery(e){return Promise.resolve([.1,.2,.3,.4])}},RM=class extends nu{constructor(e){super(e??{}),Object.defineProperty(this,"vectorSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.vectorSize=e?.vectorSize??4}embedDocuments(e){return v(this,null,function*(){return Promise.all(e.map(t=>this.embedQuery(t)))})}embedQuery(e){return v(this,null,function*(){let t=e;t=t.toLowerCase().replaceAll(/[^a-z ]/g,"");let r=t.length%this.vectorSize,i=r===0?0:this.vectorSize-r,o=t.length+i;t=t.padEnd(o," ");let s=t.length/this.vectorSize,a=[];for(let c=0;c<t.length;c+=s)a.push(t.slice(c,c+s));return a.map(c=>{let u=0;for(let h=0;h<c.length;h+=1)u+=c===" "?0:c.charCodeAt(h);return u%26/26})})}},MM=class extends Fl{constructor(){super(),Object.defineProperty(this,"runPromiseResolver",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"runPromise",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"single_run_extractor"}),this.runPromise=new Promise(e=>{this.runPromiseResolver=e})}persistRun(e){return v(this,null,function*(){this.runPromiseResolver(e)})}extract(){return v(this,null,function*(){return this.runPromise})}},OM=class n extends ch{_vectorstoreType(){return"memory"}constructor(e,i={}){var o=i,{similarity:t}=o,r=Ae(o,["similarity"]);super(e,r),Object.defineProperty(this,"memoryVectors",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"similarity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.similarity=t??bx}addDocuments(e){return v(this,null,function*(){let t=e.map(({pageContent:r})=>r);return this.addVectors(yield this.embeddings.embedDocuments(t),e)})}addVectors(e,t){return v(this,null,function*(){let r=e.map((i,o)=>({content:t[o].pageContent,embedding:i,metadata:t[o].metadata}));this.memoryVectors=this.memoryVectors.concat(r)})}similaritySearchVectorWithScore(e,t,r){return v(this,null,function*(){let i=l=>{if(!r)return!0;let c=new yo({metadata:l.metadata,pageContent:l.content});return r(c)},o=this.memoryVectors.filter(i);return o.map((l,c)=>({similarity:this.similarity(e,l.embedding),index:c})).sort((l,c)=>l.similarity>c.similarity?-1:0).slice(0,t).map(l=>[new yo({metadata:o[l.index].metadata,pageContent:o[l.index].content}),l.similarity])})}static fromTexts(e,t,r,i){return v(this,null,function*(){let o=[];for(let s=0;s<e.length;s+=1){let a=Array.isArray(t)?t[s]:t,l=new yo({pageContent:e[s],metadata:a});o.push(l)}return n.fromDocuments(o,r,i)})}static fromDocuments(e,t,r){return v(this,null,function*(){let i=new this(t,r);return yield i.addDocuments(e),i})}static fromExistingIndex(e,t){return v(this,null,function*(){return new this(e,t)})}};function $oe(n){let e={};for(let t=n;t&&t.prototype;t=Object.getPrototypeOf(t))Object.assign(e,Reflect.get(t.prototype,"lc_aliases"));return Object.entries(e).reduce((t,[r,i])=>(t[i]=r,t),{})}function yx(n){return v(this,null,function*(){let{optionalImportsMap:e={},optionalImportEntrypoints:t=[],importMap:r={},secretsMap:i={},path:o=["$"]}=this,s=o.join(".");if(typeof n=="object"&&n!==null&&!Array.isArray(n)&&"lc"in n&&"type"in n&&"id"in n&&n.lc===1&&n.type==="secret"){let a=n,[l]=a.id;if(l in i)return i[l];{let c=Sr(l);if(c)return c;throw new Error(`Missing key "${l}" for ${s} in load(secretsMap={})`)}}else if(typeof n=="object"&&n!==null&&!Array.isArray(n)&&"lc"in n&&"type"in n&&"id"in n&&n.lc===1&&n.type==="not_implemented"){let l=JSON.stringify(n);throw new Error(`Trying to load an object that doesn't implement serialization: ${s} -> ${l}`)}else if(typeof n=="object"&&n!==null&&!Array.isArray(n)&&"lc"in n&&"type"in n&&"id"in n&&"kwargs"in n&&n.lc===1){let a=n,l=JSON.stringify(a),[c,...u]=a.id.slice().reverse(),d=u.reverse(),h={langchain_core:NM,langchain:r},f=null,p=[d.join("/")];d[0]==="langchain_community"&&p.push(["langchain",...d.slice(1)].join("/"));let g=p.find(E=>E in e);if(d4.concat(t).includes(d.join("/"))||g)if(g!==void 0)f=yield e[g];else throw new Error(`Missing key "${d.join("/")}" for ${s} in load(optionalImportsMap={})`);else{let E;if(d[0]==="langchain"||d[0]==="langchain_core")E=h[d[0]],d.shift();else throw new Error(`Invalid namespace: ${s} -> ${l}`);if(d.length===0)throw new Error(`Invalid namespace: ${s} -> ${l}`);let T;do{if(T=d.join("__"),T in E)break;d.pop()}while(d.length>0);T in E&&(f=E[T])}if(typeof f!="object"||f===null)throw new Error(`Invalid namespace: ${s} -> ${l}`);let _=f[c]??Object.values(f).find(E=>typeof E=="function"&&NO(E)===c);if(typeof _!="function")throw new Error(`Invalid identifer: ${s} -> ${l}`);let y=yield yx.call(w(m({},this),{path:[...o,"kwargs"]}),a.kwargs);if(a.type==="constructor"){let E=new _(PO(y,OO,$oe(_)));return Object.defineProperty(E.constructor,"name",{value:c}),E}else throw new Error(`Invalid type: ${s} -> ${l}`)}else if(typeof n=="object"&&n!==null)return Array.isArray(n)?Promise.all(n.map((a,l)=>yx.call(w(m({},this),{path:[...o,`${l}`]}),a))):Object.fromEntries(yield Promise.all(Object.entries(n).map(c=>v(this,[c],function*([a,l]){return[a,yield yx.call(w(m({},this),{path:[...o,a]}),l)]}))));return n})}function b4(n,e){return v(this,null,function*(){let t=JSON.parse(n);return yx.call(m({},e),t)})}var v4="[...]",Uoe="[Circular]",wx=[],uh=[];function zoe(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function y4(n,e,t,r){typeof r>"u"&&(r=zoe()),LM(n,"",0,[],void 0,0,r);var i;try{uh.length===0?i=JSON.stringify(n,e,t):i=JSON.stringify(n,Hoe(e),t)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;wx.length!==0;){var o=wx.pop();o.length===4?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}}return i}function FM(n,e,t,r){var i=Object.getOwnPropertyDescriptor(r,t);i.get!==void 0?i.configurable?(Object.defineProperty(r,t,{value:n}),wx.push([r,t,e,i])):uh.push([e,t,n]):(r[t]=n,wx.push([r,t,e]))}function LM(n,e,t,r,i,o,s){o+=1;var a;if(typeof n=="object"&&n!==null){for(a=0;a<r.length;a++)if(r[a]===n){FM(Uoe,n,e,i);return}if(typeof s.depthLimit<"u"&&o>s.depthLimit){FM(v4,n,e,i);return}if(typeof s.edgesLimit<"u"&&t+1>s.edgesLimit){FM(v4,n,e,i);return}if(r.push(n),Array.isArray(n))for(a=0;a<n.length;a++)LM(n[a],a,a,r,n,o,s);else{var l=Object.keys(n);for(a=0;a<l.length;a++){var c=l[a];LM(n[c],c,a,r,n,o,s)}}r.pop()}}function Hoe(n){return n=typeof n<"u"?n:function(e,t){return t},function(e,t){if(uh.length>0)for(var r=0;r<uh.length;r++){var i=uh[r];if(i[1]===e&&i[0]===t){t=i[2],uh.splice(r,1);break}}return n.call(this,e,t)}}function qoe(n){return n!==null&&n.lc===1&&n.type==="constructor"&&Array.isArray(n.id)}function BM(n){return v(this,null,function*(){if(n&&typeof n=="object"){if(Array.isArray(n))return yield Promise.all(n.map(t=>BM(t)));{let e={};for(let[t,r]of Object.entries(n))e[t]=yield BM(r);if(e.lc===2&&e.type==="undefined")return;if(e.lc===2&&e.type==="constructor"&&Array.isArray(e.id))try{let t=e.id[e.id.length-1],r;switch(t){case"Set":r=Set;break;case"Map":r=Map;break;case"RegExp":r=RegExp;break;case"Error":r=Error;break;default:return e}return e.method?r[e.method](...e.args||[]):new r(...e.args||[])}catch{return e}else if(qoe(e))return b4(JSON.stringify(e));return e}}return n})}function jM(n,e,t,r){return{lc:2,type:"constructor",id:[n.name],method:e??null,args:t??[],kwargs:r??{}}}function Goe(n){return n===void 0?{lc:2,type:"undefined"}:n instanceof Set||n instanceof Map?jM(n.constructor,void 0,[Array.from(n)]):n instanceof RegExp?jM(RegExp,void 0,[n.source,n.flags]):n instanceof Error?jM(n.constructor,void 0,[n.message]):n?.lg_name==="Send"?{node:n.node,args:n.args}:n}var Gg=class{_dumps(e){return new TextEncoder().encode(y4(e,(r,i)=>Goe(i)))}dumpsTyped(e){return e instanceof Uint8Array?["bytes",e]:["json",this._dumps(e)]}_loads(e){return v(this,null,function*(){let t=JSON.parse(e);return BM(t)})}loadsTyped(e,t){return v(this,null,function*(){if(e==="bytes")return typeof t=="string"?new TextEncoder().encode(t):t;if(e==="json")return this._loads(typeof t=="string"?t:new TextDecoder().decode(t));throw new Error(`Unknown serialization type: ${e}`)})}};function xx(n){if(typeof n!="object"||n===null)return n;let e=Array.isArray(n)?[]:{};for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=xx(n[t]));return e}function Cx(){return{v:1,id:px(-2),ts:new Date().toISOString(),channel_values:{},channel_versions:{},versions_seen:{},pending_sends:[]}}function xl(n){return{v:n.v,id:n.id,ts:n.ts,channel_values:m({},n.channel_values),channel_versions:m({},n.channel_versions),versions_seen:xx(n.versions_seen),pending_sends:[...n.pending_sends]}}function VM(n,e){return typeof n=="number"&&typeof e=="number"?Math.sign(n-e):String(n).localeCompare(String(e))}function $M(...n){return n.reduce((e,t,r)=>r===0?t:VM(e,t)>=0?e:t)}var UM={[l4]:-1,[sh]:-2,[c4]:-3,[u4]:-4};var su=class extends Error{constructor(e){super(e),this.name="InvalidNamespaceError"}};function Woe(n){if(n.length===0)throw new su("Namespace cannot be empty.");for(let e of n){if(typeof e!="string")throw new su(`Invalid namespace label '${e}' found in ${n}. Namespace labels must be strings, but got ${typeof e}.`);if(e.includes("."))throw new su(`Invalid namespace label '${e}' found in ${n}. Namespace labels cannot contain periods ('.').`);if(e==="")throw new su(`Namespace labels cannot be empty strings. Got ${e} in ${n}`)}if(n[0]==="langgraph")throw new su(`Root label for namespace cannot be "langgraph". Got: ${n}`)}var Wg=class{get(e,t){return v(this,null,function*(){return(yield this.batch([{namespace:e,key:t}]))[0]})}search(r){return v(this,arguments,function*(e,t={}){let{filter:i,limit:o=10,offset:s=0,query:a}=t;return(yield this.batch([{namespacePrefix:e,filter:i,limit:o,offset:s,query:a}]))[0]})}put(e,t,r,i){return v(this,null,function*(){Woe(e),yield this.batch([{namespace:e,key:t,value:r,index:i}])})}delete(e,t){return v(this,null,function*(){yield this.batch([{namespace:e,key:t,value:null}])})}listNamespaces(){return v(this,arguments,function*(e={}){let{prefix:t,suffix:r,maxDepth:i,limit:o=100,offset:s=0}=e,a=[];return t&&a.push({matchType:"prefix",path:t}),r&&a.push({matchType:"suffix",path:r}),(yield this.batch([{matchConditions:a.length?a:void 0,maxDepth:i,limit:o,offset:s}]))[0]})}start(){}stop(){}};var Koe=n=>"lg_name"in n&&n.lg_name==="AsyncBatchedStore"?n.store:n,Ex=class extends Wg{constructor(e){super(),Object.defineProperty(this,"lg_name",{enumerable:!0,configurable:!0,writable:!0,value:"AsyncBatchedStore"}),Object.defineProperty(this,"store",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"nextKey",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"running",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"processingTask",{enumerable:!0,configurable:!0,writable:!0,value:null}),this.store=Koe(e)}get isRunning(){return this.running}batch(e){return v(this,null,function*(){throw new Error("The `batch` method is not implemented on `AsyncBatchedStore`.\n Instead, it calls the `batch` method on the wrapped store.\n If you are seeing this error, something is wrong.")})}get(e,t){return v(this,null,function*(){return this.enqueueOperation({namespace:e,key:t})})}search(e,t){return v(this,null,function*(){let{filter:r,limit:i=10,offset:o=0,query:s}=t||{};return this.enqueueOperation({namespacePrefix:e,filter:r,limit:i,offset:o,query:s})})}put(e,t,r){return v(this,null,function*(){return this.enqueueOperation({namespace:e,key:t,value:r})})}delete(e,t){return v(this,null,function*(){return this.enqueueOperation({namespace:e,key:t,value:null})})}start(){this.running||(this.running=!0,this.processingTask=this.processBatchQueue())}stop(){return v(this,null,function*(){this.running=!1,this.processingTask&&(yield this.processingTask)})}enqueueOperation(e){return new Promise((t,r)=>{let i=this.nextKey;this.nextKey+=1,this.queue.set(i,{operation:e,resolve:t,reject:r})})}processBatchQueue(){return v(this,null,function*(){for(;this.running;){if(yield new Promise(t=>{setTimeout(t,0)}),this.queue.size===0)continue;let e=new Map(this.queue);this.queue.clear();try{let t=Array.from(e.values()).map(({operation:i})=>i),r=yield this.store.batch(t);e.forEach(({resolve:i},o)=>{let s=Array.from(e.keys()).indexOf(o);i(r[s])})}catch(t){e.forEach(({reject:r})=>{r(t)})}}})}toJSON(){return{queue:this.queue,nextKey:this.nextKey,running:this.running,store:"[LangGraphStore]"}}};var Kg=class{constructor(e){Object.defineProperty(this,"serde",{enumerable:!0,configurable:!0,writable:!0,value:new Gg}),this.serde=e||this.serde}};var pa=class extends Error{constructor(e,t){let r=e??"";t?.lc_error_code&&(r=`${r}

Troubleshooting URL: https://langchain-ai.github.io/langgraphjs/troubleshooting/errors/${t.lc_error_code}/
`),super(r),Object.defineProperty(this,"lc_error_code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.lc_error_code=t?.lc_error_code}},Ix=class extends pa{get is_bubble_up(){return!0}},Sx=class extends pa{constructor(e,t){super(e,t),this.name="GraphRecursionError"}static get unminifiable_name(){return"GraphRecursionError"}},dh=class extends pa{constructor(e,t){super(e,t),this.name="GraphValueError"}static get unminifiable_name(){return"GraphValueError"}},Cl=class extends Ix{constructor(e,t){super(JSON.stringify(e,null,2),t),Object.defineProperty(this,"interrupts",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="GraphInterrupt",this.interrupts=e??[]}static get unminifiable_name(){return"GraphInterrupt"}},Qg=class extends Cl{constructor(e,t){super([{value:e,when:"during"}],t),this.name="NodeInterrupt"}static get unminifiable_name(){return"NodeInterrupt"}},Yg=class extends Ix{constructor(e){super(),Object.defineProperty(this,"command",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="ParentCommand",this.command=e}static get unminifiable_name(){return"ParentCommand"}};function w4(n){return n!==void 0&&n.name===Yg.unminifiable_name}function fh(n){return n!==void 0&&n.is_bubble_up===!0}function bs(n){return n!==void 0&&[Cl.unminifiable_name,Qg.unminifiable_name].includes(n.name)}var Zg=class extends pa{constructor(e,t){super(e,t),this.name="EmptyInputError"}static get unminifiable_name(){return"EmptyInputError"}},rn=class extends pa{constructor(e,t){super(e,t),this.name="EmptyChannelError"}static get unminifiable_name(){return"EmptyChannelError"}},xt=class extends pa{constructor(e,t){super(e,t),this.name="InvalidUpdateError"}static get unminifiable_name(){return"InvalidUpdateError"}};var Dx=class extends pa{constructor(e,t){super(e,t),this.name="UnreachableNodeError"}static get unminifiable_name(){return"UnreachableNodeError"}};function au(n){return n!=null&&n.lg_is_channel===!0}var Ti=class{constructor(){Object.defineProperty(this,"ValueType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"UpdateType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lg_is_channel",{enumerable:!0,configurable:!0,writable:!0,value:!0})}consume(){return!1}finish(){return!1}isAvailable(){try{return this.get(),!0}catch(e){if(e.name===rn.unminifiable_name)return!1;throw e}}};function El(n,e){let t=Object.fromEntries(Object.entries(n).filter(([,i])=>au(i))),r={};for(let i in t)if(Object.prototype.hasOwnProperty.call(t,i)){let o=e.channel_values[i];r[i]=t[i].fromCheckpoint(o)}return r}function wo(n,e,t,r){let i;if(e===void 0)i=n.channel_values;else{i={};for(let o of Object.keys(e))try{i[o]=e[o].checkpoint()}catch(s){if(s.name!==rn.unminifiable_name)throw s}}return{v:1,id:r?.id??px(t),ts:new Date().toISOString(),channel_values:i,channel_versions:m({},n.channel_versions),versions_seen:xx(n.versions_seen),pending_sends:n.pending_sends??[]}}var x4,$t="__start__",$e="__end__",xo="__input__",C4="__copy__",Kn="__error__",Tx="__pregel_ns_writes",ma="__pregel_send",Jg="__pregel_call",Co="__pregel_read",Nn="__pregel_checkpointer",vs="__pregel_resuming",cu="__pregel_task_id",hh="__pregel_stream",Qoe="__pregel_resume_value",ph="__pregel_resume_map",Eo="__pregel_scratchpad",e_="__pregel_previous",E4="__pregel_checkpoint_during",HM="checkpoint_id",Il="checkpoint_ns",I4="__pregel_node_finished",Xr="checkpoint_map",qM="__pregel_abort_signals",pt="__interrupt__",Mr="__resume__",t_="__no_writes__",Io="__return__",Ax="__previous__",uu="__pregel_runtime_placeholder__";var Ut="langsmith:hidden",S4="langsmith:nostream",GM="__self__",ga="__pregel_tasks",Or="__pregel_push",n_="__pregel_pull";var Pr="00000000-0000-0000-0000-000000000000",D4=[Ut,xo,pt,Mr,Kn,t_,ga,ma,Co,Nn,hh,vs,cu,Jg,Qoe,Eo,e_,Xr,Il,HM],Dn="|",Jr=":",Yoe=Symbol.for("langgraph.command"),zM=class{constructor(){Object.defineProperty(this,x4,{enumerable:!0,configurable:!0,writable:!0,value:void 0})}};x4=Yoe;function kx(n){let e=n;return e!=null&&typeof e.node=="string"&&e.args!==void 0}var lu=class{constructor(e,t){Object.defineProperty(this,"lg_name",{enumerable:!0,configurable:!0,writable:!0,value:"Send"}),Object.defineProperty(this,"node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.node=e,this.args=Xg(t)}toJSON(){return{lg_name:this.lg_name,node:this.node,args:this.args}}};function Qn(n){return n instanceof lu}function T4(n){return!n||typeof n!="object"||!(pt in n)?!1:Array.isArray(n[pt])}var Gn=class extends zM{constructor(e){super(),Object.defineProperty(this,"lg_name",{enumerable:!0,configurable:!0,writable:!0,value:"Command"}),Object.defineProperty(this,"lc_direct_tool_output",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"graph",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"update",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"resume",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"goto",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.resume=e.resume,this.graph=e.graph,this.update=e.update,e.goto&&(this.goto=Array.isArray(e.goto)?Xg(e.goto):[Xg(e.goto)])}_updateAsTuples(){return this.update&&typeof this.update=="object"&&!Array.isArray(this.update)?Object.entries(this.update):Array.isArray(this.update)&&this.update.every(e=>Array.isArray(e)&&e.length===2&&typeof e[0]=="string")?this.update:[["__root__",this.update]]}toJSON(){let e;return typeof this.goto=="string"?e=this.goto:Qn(this.goto)?e=this.goto.toJSON():e=this.goto?.map(t=>typeof t=="string"?t:t.toJSON()),{lg_name:this.lg_name,update:this.update,resume:this.resume,goto:e}}};Object.defineProperty(Gn,"PARENT",{enumerable:!0,configurable:!0,writable:!0,value:"__parent__"});function Wn(n){return typeof n!="object"||n==null?!1:"lg_name"in n&&n.lg_name==="Command"}function Xg(n,e=new Map){if(n!=null&&typeof n=="object"){if(e.has(n))return e.get(n);let t;if(Array.isArray(n))t=[],e.set(n,t),n.forEach((r,i)=>{t[i]=Xg(r,e)});else if(Wn(n)&&!(n instanceof Gn))t=new Gn(n),e.set(n,t);else if(kx(n)&&!(n instanceof lu))t=new lu(n.node,n.args),e.set(n,t);else if(Wn(n)||Qn(n))t=n,e.set(n,t);else if("lc_serializable"in n&&n.lc_serializable)t=n,e.set(n,t);else{t={},e.set(n,t);for(let[r,i]of Object.entries(n))t[r]=Xg(i,e)}return t}return n}var Zoe=["tags","metadata","callbacks","configurable"],Xoe=["tags","metadata","callbacks","runName","maxConcurrency","recursionLimit","configurable","runId","outputKeys","streamMode","store","writer","interruptBefore","interruptAfter","checkpointDuring","signal"],Joe=25;function Rx(...n){let e={tags:[],metadata:{},callbacks:void 0,recursionLimit:Joe,configurable:{}},t=No.getRunnableConfig();if(t!==void 0){for(let[r,i]of Object.entries(t))if(i!==void 0)if(Zoe.includes(r)){let o;Array.isArray(i)?o=[...i]:typeof i=="object"?r==="callbacks"&&"copy"in i&&typeof i.copy=="function"?o=i.copy():o=m({},i):o=i,e[r]=o}else e[r]=i}for(let r of n)if(r!==void 0)for(let[i,o]of Object.entries(r))o!==void 0&&Xoe.includes(i)&&(e[i]=o);for(let[r,i]of Object.entries(e.configurable))e.metadata=e.metadata??{},!r.startsWith("__")&&(typeof i=="string"||typeof i=="number"||typeof i=="boolean")&&!(r in e.metadata)&&(e.metadata[r]=i);return e}function Mx(n){return n.split(Dn).filter(e=>!e.match(/^\d+$/)).map(e=>e.split(Jr)[0]).join(Dn)}function A4(n){let e=n.split(Dn);for(;e.length>1&&e[e.length-1].match(/^\d+$/);)e.pop();return e.slice(0,-1).join(Dn)}var Nr=class extends mt{constructor(e){super(),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langgraph"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"trace",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"recurse",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.name=e.name??e.func.name,this.func=e.func,this.config=e.tags?{tags:e.tags}:void 0,this.trace=e.trace??this.trace,this.recurse=e.recurse??this.recurse}_tracedInvoke(e,t,r){return v(this,null,function*(){return new Promise((i,o)=>{let s=Bn(t,{callbacks:r?.getChild()});No.runWithConfig(s,()=>v(this,null,function*(){try{let a=yield this.func(e,s);i(a)}catch(a){o(a)}}))})})}invoke(e,t){return v(this,null,function*(){let r,i=Rx(t),o=Br(this.config,i);return this.trace?r=yield this._callWithConfig(this._tracedInvoke,e,o):r=yield No.runWithConfig(o,()=>v(this,null,function*(){return this.func(e,o)})),mt.isRunnable(r)&&this.recurse?yield No.runWithConfig(o,()=>v(this,null,function*(){return r.invoke(e,o)})):r})}};function*_a(n,e){if(e===void 0)yield*Ri(n);else for(let t of n)yield[e,t]}function So(n){return v(this,null,function*(){let e=[];try{for(var t=Ee(yield n),r,i,o;r=!(i=yield t.next()).done;r=!1){let s=i.value;e.push(s)}}catch{o=[i]}finally{try{r&&(i=t.return)&&(yield i.call(t))}finally{if(o)throw o[0]}}return e})}function du(n){let e=[];for(let t of n)e.push(t);return e}function fu(n,e){return n?"configurable"in n?w(m({},n),{configurable:m(m({},n.configurable),e)}):w(m({},n),{configurable:e}):{configurable:e}}var WWe={[Symbol.for("LG_SKIP_WRITE")]:!0};function ese(n){return typeof n=="object"&&n?.[Symbol.for("LG_SKIP_WRITE")]!==void 0}var Do={[Symbol.for("LG_PASSTHROUGH")]:!0};function Ox(n){return typeof n=="object"&&n?.[Symbol.for("LG_PASSTHROUGH")]!==void 0}var WM=Symbol("IS_WRITER"),Tn=class n extends Nr{constructor(e,t){let r=`ChannelWrite<${e.map(i=>Qn(i)?i.node:"channel"in i?i.channel:"...").join(",")}>`;super({writes:e,name:r,tags:t,func:(i,o)=>v(this,null,function*(){return this._write(i,o??{})})}),Object.defineProperty(this,"writes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.writes=e}_write(e,t){return v(this,null,function*(){let r=this.writes.map(i=>KM(i)&&Ox(i.value)?{mapper:i.mapper,value:e}:Px(i)&&Ox(i.value)?{channel:i.channel,value:e,skipNone:i.skipNone,mapper:i.mapper}:i);return yield n.doWrite(t,r),e})}static doWrite(e,t){return v(this,null,function*(){for(let o of t){if(Px(o)){if(o.channel===ga)throw new xt("Cannot write to the reserved channel TASKS");if(Ox(o.value))throw new xt("PASSTHROUGH value must be replaced")}if(KM(o)&&Ox(o.value))throw new xt("PASSTHROUGH value must be replaced")}let r=[];for(let o of t)if(Qn(o))r.push([ga,o]);else if(KM(o)){let s=yield o.mapper.invoke(o.value,e);s!=null&&s.length>0&&r.push(...s)}else if(Px(o)){let s=o.mapper!==void 0?yield o.mapper.invoke(o.value,e):o.value;if(ese(s)||o.skipNone&&s===void 0)continue;r.push([o.channel,s])}else throw new Error(`Invalid write entry: ${JSON.stringify(o)}`);let i=e.configurable?.[ma];i(r)})}static isWriter(e){return e instanceof n||WM in e&&!!e[WM]}static registerWriter(e){return Object.defineProperty(e,WM,{value:!0})}};function Px(n){return n!==void 0&&typeof n.channel=="string"}function KM(n){return n!==void 0&&!Px(n)&&mt.isRunnable(n.mapper)}var Nx=class n extends Nr{constructor(e,t,r=!1){super({func:(i,o)=>n.doRead(o,this.channel,this.fresh,this.mapper)}),Object.defineProperty(this,"lc_graph_name",{enumerable:!0,configurable:!0,writable:!0,value:"ChannelRead"}),Object.defineProperty(this,"channel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fresh",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"mapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.fresh=r,this.mapper=t,this.channel=e,this.name=Array.isArray(e)?`ChannelRead<${e.join(",")}>`:`ChannelRead<${e}>`}static doRead(e,t,r,i){let o=e.configurable?.[Co];if(!o)throw new Error("Runnable is not configured with a read function. Make sure to call in the context of a Pregel process");return i?i(o(t,r)):o(t,r)}},mh=new fi,To=class n extends Yn{constructor(e){let{channels:t,triggers:r,mapper:i,writers:o,bound:s,kwargs:a,metadata:l,retryPolicy:c,cachePolicy:u,tags:d,subgraphs:h,ends:f}=e,p=[...e.config?.tags?e.config.tags:[],...d??[]];super(w(m({},e),{bound:e.bound??mh,config:w(m({},e.config?e.config:{}),{tags:p})})),Object.defineProperty(this,"lc_graph_name",{enumerable:!0,configurable:!0,writable:!0,value:"PregelNode"}),Object.defineProperty(this,"channels",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"triggers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"mapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:mh}),Object.defineProperty(this,"kwargs",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"retryPolicy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cachePolicy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"subgraphs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ends",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.channels=t,this.triggers=r,this.mapper=i,this.writers=o??this.writers,this.bound=s??this.bound,this.kwargs=a??this.kwargs,this.metadata=l??this.metadata,this.tags=p,this.retryPolicy=c,this.cachePolicy=u,this.subgraphs=h,this.ends=f}getWriters(){let e=[...this.writers];for(;e.length>1&&e[e.length-1]instanceof Tn&&e[e.length-2]instanceof Tn;){let t=e.slice(-2),r=t[0].writes.concat(t[1].writes);e[e.length-2]=new Tn(r,t[0].config?.tags),e.pop()}return e}getNode(){let e=this.getWriters();if(!(this.bound===mh&&e.length===0))return this.bound===mh&&e.length===1?e[0]:this.bound===mh?new yn({first:e[0],middle:e.slice(1,e.length-1),last:e[e.length-1],omitSequenceTags:!0}):e.length>0?new yn({first:this.bound,middle:e.slice(0,e.length-1),last:e[e.length-1],omitSequenceTags:!0}):this.bound}join(e){if(!Array.isArray(e))throw new Error("channels must be a list");if(typeof this.channels!="object")throw new Error("all channels must be named when using .join()");return new n({channels:m(m({},this.channels),Object.fromEntries(e.map(t=>[t,t]))),triggers:this.triggers,mapper:this.mapper,writers:this.writers,bound:this.bound,kwargs:this.kwargs,config:this.config,retryPolicy:this.retryPolicy,cachePolicy:this.cachePolicy})}pipe(e){return Tn.isWriter(e)?new n({channels:this.channels,triggers:this.triggers,mapper:this.mapper,writers:[...this.writers,e],bound:this.bound,config:this.config,kwargs:this.kwargs,retryPolicy:this.retryPolicy,cachePolicy:this.cachePolicy}):this.bound===mh?new n({channels:this.channels,triggers:this.triggers,mapper:this.mapper,writers:this.writers,bound:Dr(e),config:this.config,kwargs:this.kwargs,retryPolicy:this.retryPolicy,cachePolicy:this.cachePolicy}):new n({channels:this.channels,triggers:this.triggers,mapper:this.mapper,writers:this.writers,bound:this.bound.pipe(e),config:this.config,kwargs:this.kwargs,retryPolicy:this.retryPolicy,cachePolicy:this.cachePolicy})}};var QM=class{constructor(e,t){Object.defineProperty(this,"runtime",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_promises",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"lg_is_managed_value",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.config=e}static initialize(e,t){return v(this,null,function*(){throw new Error("Not implemented")})}promises(){return v(this,null,function*(){return Promise.all(this._promises)})}addPromise(e){this._promises.push(e)}};var k4="__channel_key_placeholder__",Fx=class extends Map{constructor(e){super(e?Array.from(e):void 0)}replaceRuntimeValues(e,t){if(!(this.size===0||!t)&&!Array.from(this.values()).every(r=>!r.runtime)){if(typeof t=="object"&&!Array.isArray(t))for(let[r,i]of Object.entries(t))for(let[o,s]of this.entries())s.runtime&&s.call(e)===i&&(t[r]={[uu]:o});else if(typeof t=="object"&&"constructor"in t)for(let r of Object.getOwnPropertyNames(Object.getPrototypeOf(t)))try{let i=t[r];for(let[o,s]of this.entries())s.runtime&&s.call(e)===i&&(t[r]={[uu]:o})}catch(i){if(i.name!==TypeError.name)throw i}}}replaceRuntimePlaceholders(e,t){if(!(this.size===0||!t)&&!Array.from(this.values()).every(r=>!r.runtime)){if(typeof t=="object"&&!Array.isArray(t)){for(let[r,i]of Object.entries(t))if(typeof i=="object"&&i!==null&&uu in i){let o=i[uu];typeof o=="string"&&(t[r]=this.get(o)?.call(e))}}else if(typeof t=="object"&&"constructor"in t)for(let r of Object.getOwnPropertyNames(Object.getPrototypeOf(t)))try{let i=t[r];if(typeof i=="object"&&i!==null&&uu in i){let o=this.get(i[uu]);o&&(t[r]=o.call(e))}}catch(i){if(i.name!==TypeError.name)throw i}}}};function hu(n){return!!(typeof n=="object"&&n&&"cls"in n&&"params"in n)}var Lx=class n extends QM{call(){}static initialize(e,t){return v(this,null,function*(){return Promise.resolve(new n(e))})}};function Sl(n,e,t=!0,r=!1){try{return n[e].get()}catch(i){if(i.name===rn.unminifiable_name){if(r)return i;if(t)return null}throw i}}function Ao(n,e,t=!0){if(Array.isArray(e)){let r={};for(let i of e)try{r[i]=Sl(n,i,!t)}catch(o){if(o.name===rn.unminifiable_name)continue}return r}else return Sl(n,e)}function*R4(n,e){if(n.graph===Gn.PARENT)throw new xt("There is no parent graph.");if(n.goto){let t;Array.isArray(n.goto)?t=n.goto:t=[n.goto];for(let r of t)if(Qn(r))yield[Pr,ga,r];else if(typeof r=="string")yield[Pr,`branch:to:${r}`,"__start__"];else throw new Error(`In Command.send, expected Send or string, got ${typeof r}`)}if(n.resume)if(typeof n.resume=="object"&&Object.keys(n.resume).length&&Object.keys(n.resume).every(Rh))for(let[t,r]of Object.entries(n.resume)){let i=e.filter(o=>o[0]===t&&o[1]===Mr).map(o=>o[2]).slice(0,1)??[];i.push(r),yield[t,Mr,i]}else yield[Pr,Mr,n.resume];if(n.update){if(typeof n.update!="object"||!n.update)throw new Error("Expected cmd.update to be a dict mapping channel names to update values");if(Array.isArray(n.update))for(let[t,r]of n.update)yield[Pr,t,r];else for(let[t,r]of Object.entries(n.update))yield[Pr,t,r]}}function*jx(n,e){if(e!=null)if(Array.isArray(n)&&typeof e=="object"&&!Array.isArray(e))for(let t in e)n.includes(t)&&(yield[t,e[t]]);else{if(Array.isArray(n))throw new Error('Input chunk must be an object when "inputChannels" is an array');yield[n,e]}}function*Bx(n,e,t){Array.isArray(n)?(e===!0||e.find(([r,i])=>n.includes(r)))&&(yield Ao(t,n)):(e===!0||e.some(([r,i])=>r===n))&&(yield Sl(t,n))}function*YM(n,e,t){let r=e.filter(([a,l])=>(a.config===void 0||!a.config.tags?.includes(Ut))&&l[0][0]!==Kn&&l[0][0]!==pt);if(!r.length)return;let i;r.some(([a])=>a.writes.some(([l,c])=>l===Io))?i=r.flatMap(([a])=>a.writes.filter(([l,c])=>l===Io).map(([l,c])=>[a.name,c])):Array.isArray(n)?i=r.flatMap(([a])=>{let{writes:l}=a,c={};for(let[u]of l)n.includes(u)&&(c[u]=(c[u]||0)+1);return Object.values(c).some(u=>u>1)?l.filter(([u])=>n.includes(u)).map(([u,d])=>[a.name,{[u]:d}]):[[a.name,Object.fromEntries(l.filter(([u])=>n.includes(u)))]]}):i=r.flatMap(([a])=>a.writes.filter(([l,c])=>l===n).map(([l,c])=>[a.name,c]));let o={};for(let[a,l]of i)a in o||(o[a]=[]),o[a].push(l);let s={};for(let a in o)if(o[a].length===1){let[l]=o[a];s[a]=l}else s[a]=o[a];t&&(s.__metadata__={cached:t}),yield s}var Vx=class{constructor({func:e,name:t,input:r,retry:i,cache:o,callbacks:s}){Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"input",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"retry",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__lg_type",{enumerable:!0,configurable:!0,writable:!0,value:"call"}),this.func=e,this.name=t,this.input=r,this.retry=i,this.cache=o,this.callbacks=s}};function M4(n){return typeof n=="object"&&n!==null&&"__lg_type"in n&&n.__lg_type==="call"}function ZM(n){let e=Object.values(n),t=e.length>0?typeof e[0]:void 0,r;return t==="number"?r=0:t==="string"&&(r=""),r}function gh(n,e){if(Object.keys(n).length>0){let t=ZM(e);return Object.fromEntries(Object.entries(e).filter(([r,i])=>i>(n[r]??t)))}else return e}function O4(n,e){return n&&!Array.isArray(n)&&!(n instanceof Date)&&typeof n=="object"?n:{[e]:n}}function Zi(n,e){return n===null?{configurable:e}:n?.configurable===void 0?w(m({},n),{configurable:e}):w(m({},n),{configurable:m(m({},n.configurable),e)})}function Dl(n,e){let t=e?.parents??{};return Object.keys(t).length>0?Zi(n,{[Xr]:w(m({},t),{[n.configurable?.checkpoint_ns??""]:n.configurable?.checkpoint_id})}):n}function _h(...n){let e=[...new Set(n.filter(i=>i!==void 0))];if(e.length===0)return{signal:void 0,dispose:void 0};if(e.length===1)return{signal:e[0],dispose:void 0};let t=new AbortController,r=()=>{t.abort(),e.forEach(i=>i.removeEventListener("abort",r))};return e.forEach(i=>i.addEventListener("abort",r,{once:!0})),e.some(i=>i.aborted)&&t.abort(),{signal:t.signal,dispose:()=>{e.forEach(i=>i.removeEventListener("abort",r))}}}var P4=(n,e)=>{if(!(!n&&!e))return n?e?Array.isArray(n)&&Array.isArray(e)?[...n,...e]:Array.isArray(n)?[...n,e]:Array.isArray(e)?[n,...e]:[n,e]:n:e};function N4(n,e){let t=new Nr({func:r=>e(...r),name:n,trace:!1,recurse:!1});return new yn({name:n,first:t,last:new Tn([{channel:Io,value:Do}],[Ut])})}var ie=n=>BigInt(n),Zt=(n,e=0)=>new DataView(n.buffer,n.byteOffset+e,n.byteLength-e),B4=ie("0x9E3779B1"),V4=ie("0x85EBCA77"),tse=ie("0xC2B2AE3D"),Tl=ie("0x9E3779B185EBCA87"),pu=ie("0xC2B2AE3D27D4EB4F"),$4=ie("0x165667B19E3779F9"),eO=ie("0x85EBCA77C2B2AE63"),nse=ie("0x27D4EB2F165667C5"),rse=ie("0x165667919E3779F9"),ise=ie("0x9FB21C651E98DF25"),ose=n=>{let e=n.length;if(e%2!==0)throw new Error("String should have an even number of characters");let t=e/2,r=new Uint8Array(t),i=0,o=0;for(;o<t;){let s=n.slice(i,i+=2);r[o]=Number.parseInt(s,16),o+=1}return Zt(r)},ys=ose("b8fe6c3923a44bbe7c01812cf721ad1cded46de9839097db7240a4a4b7b3671fcb79e64eccc0e578825ad07dccff7221b8084674f743248ee03590e6813a264c3c2852bb91c300cb88d0658b1b532ea371644897a20df94e3819ef46a9deacd8a8fa763fe39c343ff9dcbbc7c70b4f1d8a51e04bcdb45931c89f7ec9d9787364eac5ac8334d3ebc3c581a0fffa1363eb170ddd51b7f0da49d316552629d4689e2b16be587d47a1fc8ff8b8d17ad031ce45cb3a8f95160428afd7fbcabb4b407e"),bh=(ie(1)<<ie(128))-ie(1),dt=(ie(1)<<ie(64))-ie(1),Hx=(ie(1)<<ie(32))-ie(1),ba=64,U4=ba/8,sse=8,$x=4;function vh(n){if(!n)throw new Error("Assert failed")}function ase(n){let e=new DataView(new ArrayBuffer(8));return e.setBigUint64(0,n,!0),e.getBigUint64(0,!1)}function lse(n){let e=n;return e=(e&ie(65535))<<ie(16)|(e&ie(4294901760))>>ie(16),e=(e&ie(16711935))<<ie(8)|(e&ie(4278255360))>>ie(8),e}function cse(n,e){return(n&Hx)*(e&Hx)&dt}function use(n,e){return(n<<e|n>>ie(32)-e)&Hx}function z4(n,e,t){for(let r=0;r<U4;r+=1){let i=e.getBigUint64(r*8,!0),o=i^t.getBigUint64(r*8,!0);n[r^1]+=i,n[r]+=cse(o,o>>ie(32))}return n}function F4(n,e,t,r){for(let i=0;i<r;i+=1)z4(n,Zt(e,i*ba),Zt(t,i*8));return n}function dse(n,e){for(let t=0;t<U4;t+=1){let r=e.getBigUint64(t*8,!0),i=n[t];i=XM(i,ie(47)),i^=r,i*=B4,n[t]=i&dt}return n}function Ux(n,e){return H4(n[0]^e.getBigUint64(0,!0),n[1]^e.getBigUint64(sse,!0))}function L4(n,e,t){let r=t;return r+=Ux(n.slice(0),Zt(e,0*$x)),r+=Ux(n.slice(2),Zt(e,4*$x)),r+=Ux(n.slice(4),Zt(e,8*$x)),r+=Ux(n.slice(6),Zt(e,12*$x)),ws(r&dt)}function fse(n,e,t,r,i){let o=n,s=Math.floor((t.byteLength-ba)/8),a=ba*s,l=Math.floor((e.byteLength-1)/a);for(let c=0;c<l;c+=1)o=F4(o,Zt(e,c*a),t,s),o=i(o,Zt(t,t.byteLength-ba));{let c=Math.floor((e.byteLength-1-a*l)/ba);o=F4(o,Zt(e,l*a),t,c),o=r(o,Zt(e,e.byteLength-ba),Zt(t,t.byteLength-ba-7))}return o}function hse(n,e){let t=new BigUint64Array([tse,Tl,pu,$4,eO,V4,nse,B4]);vh(n.byteLength>128),t=fse(t,n,e,z4,dse),vh(t.length*8===64);{let r=L4(t,Zt(e,11),ie(n.byteLength)*Tl&dt);return L4(t,Zt(e,e.byteLength-ba-11),~(ie(n.byteLength)*pu)&dt)<<ie(64)|r}}function H4(n,e){let t=n*e&bh;return t&dt^t>>ie(64)}function j4(n,e,t){return H4((n.getBigUint64(0,!0)^e.getBigUint64(0,!0)+t)&dt,(n.getBigUint64(8,!0)^e.getBigUint64(8,!0)-t)&dt)}function zx(n,e,t,r,i){let o=n&dt,s=n>>ie(64)&dt;return o+=j4(e,r,i),o^=t.getBigUint64(0,!0)+t.getBigUint64(8,!0),o&=dt,s+=j4(t,Zt(r,16),i),s^=e.getBigUint64(0,!0)+e.getBigUint64(8,!0),s&=dt,s<<ie(64)|o}function ws(n){let e=n;return e^=e>>ie(37),e*=rse,e&=dt,e^=e>>ie(32),e}function qx(n){let e=n;return e^=e>>ie(33),e*=pu,e&=dt,e^=e>>ie(29),e*=$4,e&=dt,e^=e>>ie(32),e}function pse(n,e,t){let r=n.byteLength;vh(r>0&&r<=3);let i=ie(n.getUint8(r-1))|ie(r<<8)|ie(n.getUint8(0)<<16)|ie(n.getUint8(r>>1)<<24),o=(ie(e.getUint32(0,!0))^ie(e.getUint32(4,!0)))+t,s=(i^o)&dt,a=(ie(e.getUint32(8,!0))^ie(e.getUint32(12,!0)))-t,l=(use(lse(i),ie(13))^a)&dt;return(qx(l)&dt)<<ie(64)|qx(s)}function XM(n,e){return n^n>>e}function mse(n,e,t){let r=n.byteLength;vh(r>=4&&r<=8);{let i=n.getUint32(0,!0),o=n.getUint32(r-4,!0),s=ie(i)|ie(o)<<ie(32),a=(e.getBigUint64(16,!0)^e.getBigUint64(24,!0))+t&dt,c=(s^a)*(Tl+(ie(r)<<ie(2)))&bh;return c+=(c&dt)<<ie(65),c&=bh,c^=c>>ie(67),XM(XM(c&dt,ie(35))*ise&dt,ie(28))|ws(c>>ie(64))<<ie(64)}}function gse(n,e,t){let r=n.byteLength;vh(r>=9&&r<=16);{let i=(e.getBigUint64(32,!0)^e.getBigUint64(40,!0))+t&dt,o=(e.getBigUint64(48,!0)^e.getBigUint64(56,!0))-t&dt,s=n.getBigUint64(0,!0),a=n.getBigUint64(r-8,!0),l=(s^a^i)*Tl,c=(l&dt)+(ie(r-1)<<ie(54));l=l&(bh^dt)|c,a^=o,l+=a+(a&Hx)*(V4-ie(1))<<ie(64),l&=bh,l^=ase(l>>ie(64));let u=(l&dt)*pu;return u+=(l>>ie(64))*pu<<ie(64),u&=bh,ws(u&dt)|ws(u>>ie(64))<<ie(64)}}function _se(n,e){let t=n.byteLength;return vh(t<=16),t>8?gse(n,ys,e):t>=4?mse(n,ys,e):t>0?pse(n,ys,e):qx(e^ys.getBigUint64(64,!0)^ys.getBigUint64(72,!0))|qx(e^ys.getBigUint64(80,!0)^ys.getBigUint64(88,!0))<<ie(64)}function JM(n){return~n+ie(1)&dt}function bse(n,e,t){let r=ie(n.byteLength)*Tl&dt,i=ie(n.byteLength-1)/ie(32);for(;i>=0;){let a=Number(i);r=zx(r,Zt(n,16*a),Zt(n,n.byteLength-16*(a+1)),Zt(e,32*a),t),i-=ie(1)}let o=r+(r>>ie(64))&dt;o=ws(o);let s=(r&dt)*Tl+(r>>ie(64))*eO+(ie(n.byteLength)-t&dt)*pu;return s&=dt,s=JM(ws(s)),o|s<<ie(64)}function vse(n,e,t){let r=ie(n.byteLength)*Tl&dt;for(let s=32;s<160;s+=32)r=zx(r,Zt(n,s-32),Zt(n,s-16),Zt(e,s-32),t);r=ws(r&dt)|ws(r>>ie(64))<<ie(64);for(let s=160;s<=n.byteLength;s+=32)r=zx(r,Zt(n,s-32),Zt(n,s-16),Zt(e,3+s-160),t);r=zx(r,Zt(n,n.byteLength-16),Zt(n,n.byteLength-32),Zt(e,103),JM(t));let i=r+(r>>ie(64))&dt;i=ws(i);let o=(r&dt)*Tl+(r>>ie(64))*eO+(ie(n.byteLength)-t&dt)*pu;return o&=dt,o=JM(ws(o)),i|o<<ie(64)}function mu(n,e=ie(0)){let t=new TextEncoder,r=Zt(typeof n=="string"?t.encode(n):n),i=r.byteLength,o=s=>s.toString(16).padStart(32,"0");return i<=16?o(_se(r,e)):i<=128?o(bse(r,ys,e)):i<=240?o(vse(r,ys,e)):o(hse(r,ys))}function q4(n){return/^[0-9a-f]{32}$/.test(n)}var G4=n=>n!==void 0?n+1:1;function i_(n,e,t){let r=Object.values(n.channel_versions),i=r.length>0?typeof r[0]:void 0,o;i==="number"?o=0:i==="string"&&(o="");let s=n.versions_seen[pt]??{},a=Object.entries(n.channel_versions).some(([c,u])=>u>(s[c]??o)),l=t.some(c=>e==="*"?!c.config?.tags?.includes(Ut):e.includes(c.name));return a&&l}function r_(n,e,t,r,i,o,s=!1){let a=[],l=new Set;if(Array.isArray(o))a=o.filter(u=>r.get(u)),o=o.filter(u=>!r.get(u)),l=new Set(o.filter(u=>i.writes.some(([d,h])=>d===u)));else{for(let[u]of i.writes)if(u===o){l=new Set([u]);break}l=l||new Set}let c;if(s&&l.size>0){let u=Object.fromEntries(Object.entries(t).filter(([f,p])=>l.has(f))),d=wo(e,u,-1),h=El(u,d);ei(xl(d),h,[i],void 0,void 0),c=Ao(m(m({},t),h),o)}else c=Ao(t,o);if(a.length>0)for(let u of a){let d=r.get(u);if(d){let h=d.call(n);c[u]=h}}return c}function tO(n,e,t,r,i){for(let[o,s]of i)if([Or,ga].includes(o)&&s!=null){if(!Qn(s))throw new xt(`Invalid packet type, expected SendProtocol, got ${JSON.stringify(s)}`);if(!(s.node in t))throw new xt(`Invalid node name "${s.node}" in Send packet`);r.replaceRuntimeValues(n,s.args)}e(i)}var yse=new Set([t_,Or,Mr,pt,Io,Kn]);function ei(n,e,t,r,i){t.sort((h,f)=>{let p=h.path?.slice(0,3)||[],g=f.path?.slice(0,3)||[];for(let _=0;_<Math.min(p.length,g.length);_+=1){if(p[_]<g[_])return-1;if(p[_]>g[_])return 1}return p.length-g.length});let o=t.some(h=>h.triggers.length>0),s=Object.fromEntries(Object.entries(e).filter(([h,f])=>au(f)));for(let h of t){n.versions_seen[h.name]??={};for(let f of h.triggers)f in n.channel_versions&&(n.versions_seen[h.name][f]=n.channel_versions[f])}let a;Object.keys(n.channel_versions).length>0&&(a=$M(...Object.values(n.channel_versions)));let l=new Set(t.flatMap(h=>h.triggers).filter(h=>!D4.includes(h)));for(let h of l)h in s&&s[h].consume()&&r!==void 0&&(n.channel_versions[h]=r(a,s[h]));n.pending_sends?.length&&o&&(n.pending_sends=[]);let c={},u={};for(let h of t)for(let[f,p]of h.writes)yse.has(f)||(f===ga?n.pending_sends.push({node:p.node,args:p.args}):f in s?(c[f]??=[],c[f].push(p)):(u[f]??=[],u[f].push(p)));a=void 0,Object.keys(n.channel_versions).length>0&&(a=$M(...Object.values(n.channel_versions)));let d=new Set;for(let[h,f]of Object.entries(c))if(h in s){let p;try{p=s[h].update(f)}catch(g){if(g.name===xt.unminifiable_name){let _=new xt(`Invalid update for channel "${h}" with values ${JSON.stringify(f)}: ${g.message}`);throw _.lc_error_code=g.lc_error_code,_}else throw g}p&&r!==void 0&&(n.channel_versions[h]=r(a,s[h]),s[h].isAvailable()&&d.add(h))}if(o)for(let h of Object.keys(s))s[h].isAvailable()&&!d.has(h)&&s[h].update([])&&r!==void 0&&(n.channel_versions[h]=r(a,s[h]),s[h].isAvailable()&&d.add(h));if(o&&n.pending_sends.length===0&&!Object.keys(i??{}).some(h=>d.has(h)))for(let h of Object.keys(s))s[h].finish()&&r!==void 0&&(n.channel_versions[h]=r(a,s[h]),s[h].isAvailable()&&d.add(h));return u}function Al(n,e,t,r,i,o,s,a){let l={};for(let c=0;c<n.pending_sends.length;c+=1){let u=Gx([Or,c],n,e,t,r,i,o,s,a);u!==void 0&&(l[u.id]=u)}for(let c of Object.keys(t)){let u=Gx([n_,c],n,e,t,r,i,o,s,a);u!==void 0&&(l[u.id]=u)}return l}function Gx(n,e,t,r,i,o,s,a,l){let{step:c,checkpointer:u,manager:d}=l,h=s.configurable??{},f=h.checkpoint_ns??"";if(n[0]===Or&&M4(n[n.length-1])){let p=n[n.length-1],g=N4(p.name,p.func),_=[Or],y=f===""?p.name:`${f}${Dn}${p.name}`,E=wl(JSON.stringify([y,c.toString(),p.name,Or,n[1],n[2]]),e.id),T=`${y}${Jr}${E}`,A=[...n.slice(0,3),!0],P={langgraph_step:c,langgraph_node:p.name,langgraph_triggers:_,langgraph_path:A,langgraph_checkpoint_ns:T};if(a){let R=[];return{name:p.name,input:p.input,proc:g,writes:R,config:Bn(Br(s,{metadata:P,store:l.store??s.store}),{runName:p.name,callbacks:d?.getChild(`graph:step:${c}`),configurable:{[cu]:E,[ma]:S=>tO(c,$=>R.push(...$),r,o,S),[Co]:(S,$=!1)=>r_(c,e,i,o,{name:p.name,writes:R,triggers:_,path:A},S,$),[Nn]:u??h[Nn],[Xr]:w(m({},h[Xr]),{[f]:e.id}),[Eo]:nO({pendingWrites:t??[],taskId:E,currentTaskInput:p.input,resumeMap:s.configurable?.[ph],namespaceHash:mu(T)}),[e_]:e.channel_values[Ax],checkpoint_id:void 0,checkpoint_ns:T}}),triggers:_,retry_policy:p.retry,cache_key:p.cache?{key:mu((p.cache.keyFunc??JSON.stringify)([p.input])),ns:[Tx,p.name??"__dynamic__"],ttl:p.cache.ttl}:void 0,id:E,path:A,writers:[]}}else return{id:E,name:p.name,interrupts:[],path:A}}else if(n[0]===Or){let p=typeof n[1]=="number"?n[1]:parseInt(n[1],10);if(p>=e.pending_sends.length)return;let g=kx(e.pending_sends[p])&&!Qn(e.pending_sends[p])?new lu(e.pending_sends[p].node,e.pending_sends[p].args):e.pending_sends[p];if(!kx(g)){console.warn(`Ignoring invalid packet ${JSON.stringify(g)} in pending sends.`);return}if(!(g.node in r)){console.warn(`Ignoring unknown node name ${g.node} in pending sends.`);return}let _=[Or],y=f===""?g.node:`${f}${Dn}${g.node}`,E=wl(JSON.stringify([y,c.toString(),g.node,Or,p.toString()]),e.id),T=`${y}${Jr}${E}`,A={langgraph_step:c,langgraph_node:g.node,langgraph_triggers:_,langgraph_path:n.slice(0,3),langgraph_checkpoint_ns:T};if(a){let P=r[g.node],R=P.getNode();if(R!==void 0){o.replaceRuntimePlaceholders(c,g.args),P.metadata!==void 0&&(A=m(m({},A),P.metadata));let W=[];return{name:g.node,input:g.args,proc:R,subgraphs:P.subgraphs,writes:W,config:Bn(Br(s,{metadata:A,tags:P.tags,store:l.store??s.store}),{runName:g.node,callbacks:d?.getChild(`graph:step:${c}`),configurable:{[cu]:E,[ma]:S=>tO(c,$=>W.push(...$),r,o,S),[Co]:(S,$=!1)=>r_(c,e,i,o,{name:g.node,writes:W,triggers:_,path:n},S,$),[Nn]:u??h[Nn],[Xr]:w(m({},h[Xr]),{[f]:e.id}),[Eo]:nO({pendingWrites:t??[],taskId:E,currentTaskInput:g.args,resumeMap:s.configurable?.[ph],namespaceHash:mu(T)}),[e_]:e.channel_values[Ax],checkpoint_id:void 0,checkpoint_ns:T}}),triggers:_,retry_policy:P.retryPolicy,cache_key:P.cachePolicy?{key:mu((P.cachePolicy.keyFunc??JSON.stringify)([g.args])),ns:[Tx,P.name??"__dynamic__",g.node],ttl:P.cachePolicy.ttl}:void 0,id:E,path:n,writers:P.getWriters()}}}else return{id:E,name:g.node,interrupts:[],path:n}}else if(n[0]===n_){let p=n[1].toString(),g=r[p];if(g===void 0)return;if(t?.length){let T=f===""?p:`${f}${Dn}${p}`,A=wl(JSON.stringify([T,c.toString(),p,n_,p]),e.id);if(t.some(R=>R[0]===A&&R[1]!==Kn))return}let _=ZM(e.channel_versions);if(_===void 0)return;let y=e.versions_seen[p]??{},E=g.triggers.filter(T=>{let A=Sl(i,T,!1,!0);return!(A instanceof Error&&A.name===rn.unminifiable_name)&&(e.channel_versions[T]??_)>(y[T]??_)}).sort();if(E.length>0){let T=wse(c,g,o,i,a);if(T===void 0)return;let A=f===""?p:`${f}${Dn}${p}`,P=wl(JSON.stringify([A,c.toString(),p,n_,E]),e.id),R=`${A}${Jr}${P}`,W={langgraph_step:c,langgraph_node:p,langgraph_triggers:E,langgraph_path:n,langgraph_checkpoint_ns:R};if(a){let S=g.getNode();if(S!==void 0){g.metadata!==void 0&&(W=m(m({},W),g.metadata));let $=[];return{name:p,input:T,proc:S,subgraphs:g.subgraphs,writes:$,config:Bn(Br(s,{metadata:W,tags:g.tags,store:l.store??s.store}),{runName:p,callbacks:d?.getChild(`graph:step:${c}`),configurable:{[cu]:P,[ma]:Z=>tO(c,Y=>{$.push(...Y)},r,o,Z),[Co]:(Z,Y=!1)=>r_(c,e,i,o,{name:p,writes:$,triggers:E,path:n},Z,Y),[Nn]:u??h[Nn],[Xr]:w(m({},h[Xr]),{[f]:e.id}),[Eo]:nO({pendingWrites:t??[],taskId:P,currentTaskInput:T,resumeMap:s.configurable?.[ph],namespaceHash:mu(R)}),[e_]:e.channel_values[Ax],checkpoint_id:void 0,checkpoint_ns:R}}),triggers:E,retry_policy:g.retryPolicy,cache_key:g.cachePolicy?{key:mu((g.cachePolicy.keyFunc??JSON.stringify)([T])),ns:[Tx,g.name??"__dynamic__",p],ttl:g.cachePolicy.ttl}:void 0,id:P,path:n,writers:g.getWriters()}}}else return{id:P,name:p,interrupts:[],path:n}}}}function wse(n,e,t,r,i){let o;if(typeof e.channels=="object"&&!Array.isArray(e.channels)){o={};for(let[s,a]of Object.entries(e.channels))if(e.triggers.includes(a))try{o[s]=Sl(r,a,!1)}catch(l){if(l.name===rn.unminifiable_name)return;throw l}else if(a in r)try{o[s]=Sl(r,a,!1)}catch(l){if(l.name===rn.unminifiable_name)continue;throw l}else o[s]=t.get(s)?.call(n)}else if(Array.isArray(e.channels)){let s=!1;for(let a of e.channels)try{o=Sl(r,a,!1),s=!0;break}catch(l){if(l.name===rn.unminifiable_name)continue;throw l}if(!s)return}else throw new Error(`Invalid channels type, expected list or dict, got ${e.channels}`);return i&&e.mapper!==void 0&&(o=e.mapper(o)),o}function nO({pendingWrites:n,taskId:e,currentTaskInput:t,resumeMap:r,namespaceHash:i}){let o=n.find(([l,c])=>l===Pr&&c===Mr)?.[2],a={callCounter:0,interruptCounter:-1,resume:(()=>{let l=n.filter(([c,u])=>c===e&&u===Mr).flatMap(([c,u,d])=>d);if(r!=null&&i in r){let c=r[i];l.push(c)}return l})(),nullResume:o,subgraphCounter:0,currentTaskInput:t,consumeNullResume:()=>{if(a.nullResume)return delete a.nullResume,n.splice(n.findIndex(([l,c])=>l===Pr&&c===Mr),1),o}};return a}function xse(n){return"steps"in n&&Array.isArray(n.steps)}function o_(n){return"lg_is_pregel"in n&&n.lg_is_pregel===!0}function Wx(n){let e=[n];for(let t of e){if(o_(t))return t;xse(t)&&e.push(...t.steps)}}var s_={blue:{start:"\x1B[34m",end:"\x1B[0m"},green:{start:"\x1B[32m",end:"\x1B[0m"},yellow:{start:"\x1B[33;1m",end:"\x1B[0m"}},a_=(n,e)=>`${n.start}${e}${n.end}`;function*rO(n){for(let{id:e,name:t,input:r,config:i,triggers:o,writes:s}of n){if(i?.tags?.includes(Ut))continue;let a=s.filter(([l,c])=>l===e&&c===pt).map(([,l])=>l);yield{id:e,name:t,input:r,triggers:o,interrupts:a}}}function*W4(n,e){for(let[{id:t,name:r,config:i},o]of n)i?.tags?.includes(Ut)||(yield{id:t,name:r,result:o.filter(([s])=>Array.isArray(e)?e.includes(s):s===e),interrupts:o.filter(s=>s[0]===pt).map(s=>s[1])})}function*K4(n,e,t,r,i,o,s,a){function l(d){let h={};return d.callbacks!=null&&(h.callbacks=d.callbacks),d.configurable!=null&&(h.configurable=d.configurable),d.maxConcurrency!=null&&(h.max_concurrency=d.maxConcurrency),d.metadata!=null&&(h.metadata=d.metadata),d.recursionLimit!=null&&(h.recursion_limit=d.recursionLimit),d.runId!=null&&(h.run_id=d.runId),d.runName!=null&&(h.run_name=d.runName),d.tags!=null&&(h.tags=d.tags),h}let c=n.configurable?.checkpoint_ns,u={};for(let d of i){if(!(d.subgraphs?.length?d.subgraphs:[d.proc]).find(Wx))continue;let f=`${d.name}:${d.id}`;c&&(f=`${c}|${f}`),u[d.id]={configurable:{thread_id:n.configurable?.thread_id,checkpoint_ns:f}}}yield{config:l(n),values:Ao(e,t),metadata:r,next:i.map(d=>d.name),tasks:iO(i,o,u,a),parentConfig:s?l(s):void 0}}function iO(n,e,t,r){return n.map(i=>{let o=e.find(([c,u])=>c===i.id&&u===Kn)?.[2],s=e.filter(([c,u])=>c===i.id&&u===pt).map(([,,c])=>c),a=(()=>{if(o||s.length||!e.length)return;let c=e.findIndex(([u,d])=>u===i.id&&d===Io);if(c>=0)return e[c][2];if(typeof r=="string")return e.find(([u,d])=>u===i.id&&d===r)?.[2];if(Array.isArray(r)){let u=e.filter(([d,h])=>d===i.id&&r.includes(h)).map(([,d,h])=>[d,h]);return u.length?Object.fromEntries(u):void 0}})();if(o)return{id:i.id,name:i.name,path:i.path,error:o,interrupts:s,result:a};let l=t?.[i.id];return w(m({id:i.id,name:i.name,path:i.path,interrupts:s},l!==void 0?{state:l}:{}),{result:a})})}function Q4(n,e,t){console.log([`${a_(s_.blue,`[${n}:checkpoint]`)}`,`\x1B[1m State at the end of step ${n}:\x1B[0m
`,JSON.stringify(Ao(e,t),null,2)].join(""))}function Kx(n,e){let t=e.length;console.log([`${a_(s_.blue,`[${n}:tasks]`)}`,`\x1B[1m Starting step ${n} with ${t} task${t===1?"":"s"}:\x1B[0m
`,e.map(r=>`- ${a_(s_.green,String(r.name))} -> ${JSON.stringify(r.input,null,2)}`).join(`
`)].join(""))}function Y4(n,e,t){let r={};for(let[i,o]of e)t.includes(i)&&(r[i]||(r[i]=[]),r[i].push(o));console.log([`${a_(s_.blue,`[${n}:writes]`)}`,`\x1B[1m Finished step ${n} with writes to ${Object.keys(r).length} channel${Object.keys(r).length!==1?"s":""}:\x1B[0m
`,Object.entries(r).map(([i,o])=>`- ${a_(s_.yellow,i)} -> ${o.map(s=>JSON.stringify(s)).join(", ")}`).join(`
`)].join(""))}var l_=class extends EC{constructor(e,t){let r=e.getReader(),i=t??new AbortController;super({start(o){return s();function s(){return r.read().then(({done:a,value:l})=>{if(a){o.close();return}return o.enqueue(l),s()})}}}),Object.defineProperty(this,"_abortController",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_reader",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._abortController=i,this._reader=r}cancel(e){return v(this,null,function*(){this._abortController.abort(e),this._reader.releaseLock()})}get signal(){return this._abortController.signal}},yh=class extends EC{get closed(){return this._closed}constructor(e){let t,r=new Promise(i=>{t=i});super({start:i=>{t(i)}}),Object.defineProperty(this,"modes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"controller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"passthroughFn",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_closed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),r.then(i=>{this.controller=i}),this.passthroughFn=e.passthroughFn,this.modes=e.modes}push(e){this.passthroughFn?.(e),this.controller.enqueue(e)}close(){try{this.controller.close()}catch{}finally{this._closed=!0}}error(e){this.controller.error(e)}};var Qx=Symbol.for("INPUT_DONE"),oO=Symbol.for("INPUT_RESUMING"),Cse=25;function Ese(...n){return new yh({passthroughFn:e=>{for(let t of n)t.modes.has(e[1])&&t.push(e)},modes:new Set(n.flatMap(e=>Array.from(e.modes)))})}var sO=class extends Kg{constructor(e){super(),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:Promise.resolve()}),this.cache=e}get(e){return v(this,null,function*(){return this.enqueueOperation("get",e)})}set(e){return v(this,null,function*(){return this.enqueueOperation("set",e)})}clear(e){return v(this,null,function*(){return this.enqueueOperation("clear",e)})}stop(){return v(this,null,function*(){yield this.queue})}enqueueOperation(e,...t){let r=this.queue.then(()=>this.cache[e](...t));return this.queue=r.then(()=>{},()=>{}),r}},Yx=class n{get isResuming(){let e=Object.keys(this.checkpoint.channel_versions).length!==0,r=this.config.configurable?.[vs]!==void 0&&this.config.configurable?.[vs],i=this.input===null||this.input===void 0,o=Wn(this.input)&&this.input.resume!=null,s=this.input===oO,a=!this.isNested&&this.config.metadata?.run_id!==void 0&&this.checkpointMetadata?.run_id!==void 0&&this.config.metadata.run_id===this.checkpointMetadata?.run_id;return e&&(r||i||o||s||a)}constructor(e){Object.defineProperty(this,"input",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"output",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"checkpointer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"checkpointerGetNextVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"channels",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"managed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"checkpoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"checkpointIdSaved",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"checkpointConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"checkpointMetadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"checkpointNamespace",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"checkpointPendingWrites",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"checkpointPreviousVersions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"step",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"checkpointDuring",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputKeys",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streamKeys",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"skipDoneTasks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"prevCheckpointConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"prevCheckpoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:"pending"}),Object.defineProperty(this,"tasks",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"stream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"checkpointerPromises",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"isNested",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_checkpointerChainedPromise",{enumerable:!0,configurable:!0,writable:!0,value:Promise.resolve()}),Object.defineProperty(this,"store",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"manager",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"interruptAfter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"interruptBefore",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"toInterrupt",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"debug",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"triggerToNodes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.input=e.input,this.checkpointer=e.checkpointer,this.checkpointer!==void 0?this.checkpointerGetNextVersion=this.checkpointer.getNextVersion.bind(this.checkpointer):this.checkpointerGetNextVersion=G4,this.checkpoint=e.checkpoint,this.checkpointMetadata=e.checkpointMetadata,this.checkpointPreviousVersions=e.checkpointPreviousVersions,this.channels=e.channels,this.managed=e.managed,this.checkpointPendingWrites=e.checkpointPendingWrites,this.step=e.step,this.stop=e.stop,this.config=e.config,this.checkpointConfig=e.checkpointConfig,this.isNested=e.isNested,this.manager=e.manager,this.outputKeys=e.outputKeys,this.streamKeys=e.streamKeys,this.nodes=e.nodes,this.skipDoneTasks=e.skipDoneTasks,this.store=e.store,this.cache=e.cache?new sO(e.cache):void 0,this.stream=e.stream,this.checkpointNamespace=e.checkpointNamespace,this.prevCheckpointConfig=e.prevCheckpointConfig,this.interruptAfter=e.interruptAfter,this.interruptBefore=e.interruptBefore,this.checkpointDuring=e.checkpointDuring,this.debug=e.debug,this.triggerToNodes=e.triggerToNodes}static initialize(e){return v(this,null,function*(){let{config:t,stream:r}=e;r!==void 0&&t.configurable?.[hh]!==void 0&&(r=Ese(r,t.configurable[hh]));let i=t.configurable?!("checkpoint_id"in t.configurable):!0,o=t.configurable?.[Eo];t.configurable&&o&&(o.subgraphCounter>0&&(t=Zi(t,{[Il]:[t.configurable[Il],o.subgraphCounter.toString()].join(Dn)})),o.subgraphCounter+=1);let s=Co in(t.configurable??{});!s&&t.configurable?.checkpoint_ns!==void 0&&t.configurable?.checkpoint_ns!==""&&(t=Zi(t,{checkpoint_ns:"",checkpoint_id:void 0}));let a=t;t.configurable?.[Xr]!==void 0&&t.configurable?.[Xr]?.[t.configurable?.checkpoint_ns]&&(a=Zi(t,{checkpoint_id:t.configurable[Xr][t.configurable?.checkpoint_ns]}));let l=t.configurable?.checkpoint_ns?.split(Dn)??[],c=(yield e.checkpointer?.getTuple(a))??{config:t,checkpoint:Cx(),metadata:{source:"input",step:-2,writes:null,parents:{}},pendingWrites:[]};a=w(m(m({},t),c.config),{configurable:m(m({checkpoint_ns:""},t.configurable),c.config.configurable)});let u=c.parentConfig,d=xl(c.checkpoint),h=m({},c.metadata),f=c.pendingWrites??[],p=El(e.channelSpecs,d),g=(h.step??0)+1,_=g+(t.recursionLimit??Cse)+1,y=m({},d.channel_versions),E=e.store?new Ex(e.store):void 0;return E&&E.start(),new n({input:e.input,config:t,checkpointer:e.checkpointer,checkpoint:d,checkpointMetadata:h,checkpointConfig:a,prevCheckpointConfig:u,checkpointNamespace:l,channels:p,managed:e.managed,isNested:s,manager:e.manager,skipDoneTasks:i,step:g,stop:_,checkpointPreviousVersions:y,checkpointPendingWrites:f,outputKeys:e.outputKeys??[],streamKeys:e.streamKeys??[],nodes:e.nodes,stream:r,store:E,cache:e.cache,interruptAfter:e.interruptAfter,interruptBefore:e.interruptBefore,checkpointDuring:e.checkpointDuring,debug:e.debug,triggerToNodes:e.triggerToNodes})})}_checkpointerPutAfterPrevious(e){this._checkpointerChainedPromise=this._checkpointerChainedPromise.then(()=>this.checkpointer?.put(e.config,e.checkpoint,e.metadata,e.newVersions)),this.checkpointerPromises.push(this._checkpointerChainedPromise)}updateManagedValues(e,t){return v(this,null,function*(){let r=this.managed.get(e);r&&"update"in r&&typeof r.update=="function"&&(yield r.update(t))})}putWrites(e,t){let r=t;if(r.length===0)return;r.every(([s])=>s in UM)&&(r=Array.from(new Map(r.map(s=>[s[0],s])).values())),this.checkpointPendingWrites=this.checkpointPendingWrites.filter(s=>s[0]!==e);for(let[s,a]of r)this.checkpointPendingWrites.push([e,s,a]);let i=this.checkpointer?.putWrites(w(m({},this.checkpointConfig),{configurable:w(m({},this.checkpointConfig.configurable),{checkpoint_ns:this.config.configurable?.checkpoint_ns??"",checkpoint_id:this.checkpoint.id})}),r,e);if(i!==void 0&&this.checkpointerPromises.push(i),this.tasks&&this._outputWrites(e,r),!t.length||!this.cache||!this.tasks)return;let o=this.tasks[e];o==null||o.cache_key==null||t[0][0]===Kn||t[0][0]===pt||this.cache.set([{key:[o.cache_key.ns,o.cache_key.key],value:o.writes,ttl:o.cache_key.ttl}])}_outputWrites(e,t,r=!1){let i=this.tasks[e];if(i!==void 0){if(i.config!==void 0&&(i.config.tags??[]).includes(Ut))return;if(t.length>0)if(t[0][0]===pt){if(i.path?.[0]===Or&&i.path?.at(-1)===!0)return;let o=t.filter(s=>s[0]===pt).flatMap(s=>s[1]);this._emit([["updates",{[pt]:o}],["values",{[pt]:o}]])}else t[0][0]!==Kn&&this._emit(du(_a(YM(this.outputKeys,[[i,t]],r),"updates")));r||this._emit(du(_a(W4([[i,t]],this.streamKeys),"tasks")))}}_matchCachedWrites(){return v(this,null,function*(){if(!this.cache)return[];let e=[],t=([s,a])=>`ns:${s.join(",")}|key:${a}`,r=[],i={};for(let s of Object.values(this.tasks))s.cache_key!=null&&!s.writes.length&&(r.push([s.cache_key.ns,s.cache_key.key]),i[t([s.cache_key.ns,s.cache_key.key])]=s);if(r.length===0)return[];let o=yield this.cache.get(r);for(let{key:s,value:a}of o){let l=i[t(s)];l!=null&&(l.writes.push(...a),e.push({task:l,result:a}))}return e})}tick(e){return v(this,null,function*(){this.store&&!this.store.isRunning&&this.store?.start();let{inputKeys:t=[]}=e;if(this.status!=="pending")throw new Error(`Cannot tick when status is no longer "pending". Current status: "${this.status}"`);if(![Qx,oO].includes(this.input))yield this._first(t);else{if(this.toInterrupt.length>0)throw this.status="interrupt_before",new Cl;if(Object.values(this.tasks).every(o=>o.writes.length>0)){let o=Object.values(this.tasks).flatMap(l=>l.writes),s=ei(this.checkpoint,this.channels,Object.values(this.tasks),this.checkpointerGetNextVersion,this.triggerToNodes);for(let[l,c]of Object.entries(s))yield this.updateManagedValues(l,c);let a=yield So(_a(Bx(this.outputKeys,o,this.channels),"values"));if(this._emit(a),this.checkpointPendingWrites=[],yield this._putCheckpoint({source:"loop",writes:YM(this.outputKeys,Object.values(this.tasks).map(l=>[l,l.writes])).next().value??null}),i_(this.checkpoint,this.interruptAfter,Object.values(this.tasks)))throw this.status="interrupt_after",new Cl;this.config.configurable?.[vs]!==void 0&&delete this.config.configurable?.[vs]}else return!1}if(this.step>this.stop)return this.status="out_of_steps",!1;let r=Al(this.checkpoint,this.checkpointPendingWrites,this.nodes,this.channels,this.managed,this.config,!0,{step:this.step,checkpointer:this.checkpointer,isResuming:this.isResuming,manager:this.manager,store:this.store,stream:this.stream});if(this.tasks=r,this.checkpointer&&this._emit(yield So(_a(K4(this.checkpointConfig,this.channels,this.streamKeys,this.checkpointMetadata,Object.values(this.tasks),this.checkpointPendingWrites,this.prevCheckpointConfig,this.outputKeys),"checkpoints"))),Object.values(this.tasks).length===0)return this.status="done",!1;if(this.skipDoneTasks&&this.checkpointPendingWrites.length>0){for(let[o,s,a]of this.checkpointPendingWrites){if(s===Kn||s===pt||s===Mr)continue;let l=Object.values(this.tasks).find(c=>c.id===o);l&&l.writes.push([s,a])}for(let o of Object.values(this.tasks))o.writes.length>0&&this._outputWrites(o.id,o.writes,!0)}if(Object.values(this.tasks).every(o=>o.writes.length>0))return this.tick({inputKeys:t});if(i_(this.checkpoint,this.interruptBefore,Object.values(this.tasks)))throw this.status="interrupt_before",new Cl;let i=yield So(_a(rO(Object.values(this.tasks)),"tasks"));return this._emit(i),!0})}finishAndHandleError(e){return v(this,null,function*(){!this.checkpointDuring&&(!this.isNested||typeof e<"u"||this.checkpointNamespace.every(r=>!r.includes(Jr)))&&(this._putCheckpoint(this.checkpointMetadata),this._flushPendingWrites());let t=this._suppressInterrupt(e);if((t||e===void 0)&&(this.output=Ao(this.channels,this.outputKeys)),t){if(this.tasks!==void 0&&this.checkpointPendingWrites.length>0&&Object.values(this.tasks).some(r=>r.writes.length>0)){let r=ei(this.checkpoint,this.channels,Object.values(this.tasks),this.checkpointerGetNextVersion,this.triggerToNodes);for(let[i,o]of Object.entries(r))yield this.updateManagedValues(i,o);this._emit(du(_a(Bx(this.outputKeys,Object.values(this.tasks).flatMap(i=>i.writes),this.channels),"values")))}bs(e)&&!e.interrupts.length&&this._emit([["updates",{[pt]:[]}],["values",{[pt]:[]}]])}return t})}acceptPush(e,t,r){return v(this,null,function*(){if(this.interruptAfter?.length>0&&i_(this.checkpoint,this.interruptAfter,[e])){this.toInterrupt.push(e);return}let i=Gx([Or,e.path??[],t,e.id,r],this.checkpoint,this.checkpointPendingWrites,this.nodes,this.channels,this.managed,e.config??{},!0,{step:this.step,checkpointer:this.checkpointer,manager:this.manager,store:this.store,stream:this.stream});if(!i)return;if(this.interruptBefore?.length>0&&i_(this.checkpoint,this.interruptBefore,[i])){this.toInterrupt.push(i);return}this._emit(du(_a(rO([i]),"tasks"))),this.debug&&Kx(this.step,[i]),this.tasks[i.id]=i,this.skipDoneTasks&&this._matchWrites({[i.id]:i});let o=yield this._matchCachedWrites();for(let{task:s}of o)this._outputWrites(s.id,s.writes,!0);return i})}_suppressInterrupt(e){return bs(e)&&!this.isNested}_first(e){return v(this,null,function*(){let{configurable:t}=this.config,r=t?.[Eo];if(r&&r.nullResume!==void 0&&this.putWrites(Pr,[[Mr,r.nullResume]]),Wn(this.input)){let s=this.input.resume!=null;if(this.input.resume!=null&&typeof this.input.resume=="object"&&Object.keys(this.input.resume).every(q4)&&(this.config.configurable??={},this.config.configurable[ph]=this.input.resume),s&&this.checkpointer==null)throw new Error("Cannot use Command(resume=...) without checkpointer");let a={};for(let[l,c,u]of R4(this.input,this.checkpointPendingWrites))a[l]??=[],a[l].push([c,u]);if(Object.keys(a).length===0)throw new Zg("Received empty Command input");for(let[l,c]of Object.entries(a))this.putWrites(l,c)}let i=(this.checkpointPendingWrites??[]).filter(s=>s[0]===Pr).map(s=>s.slice(1));i.length>0&&ei(this.checkpoint,this.channels,[{name:xo,writes:i,triggers:[]}],this.checkpointerGetNextVersion,this.triggerToNodes);let o=Wn(this.input)&&i.length>0;if(this.isResuming||o){for(let a of Object.keys(this.channels))if(this.checkpoint.channel_versions[a]!==void 0){let l=this.checkpoint.channel_versions[a];this.checkpoint.versions_seen[pt]=w(m({},this.checkpoint.versions_seen[pt]),{[a]:l})}let s=yield So(_a(Bx(this.outputKeys,!0,this.channels),"values"));this._emit(s)}if(this.isResuming)this.input=oO;else if(o)yield this._putCheckpoint({source:"input",writes:{}}),this.input=Qx;else{let s=yield So(jx(e,this.input));if(s.length>0){let a=Al(this.checkpoint,this.checkpointPendingWrites,this.nodes,this.channels,this.managed,this.config,!0,{step:this.step});ei(this.checkpoint,this.channels,Object.values(a).concat([{name:xo,writes:s,triggers:[]}]),this.checkpointerGetNextVersion,this.triggerToNodes),yield this._putCheckpoint({source:"input",writes:Object.fromEntries(s)}),this.input=Qx}else if(vs in(this.config.configurable??{}))this.input=Qx;else throw new Zg(`Received no input writes for ${JSON.stringify(e,null,2)}`)}this.isNested||(this.config=Zi(this.config,{[vs]:this.isResuming}))})}_emit(e){for(let[t,r]of e)if(this.stream.modes.has(t)&&this.stream.push([this.checkpointNamespace,t,r]),(t==="checkpoints"||t==="tasks")&&this.stream.modes.has("debug")){let i=t==="checkpoints"?this.step-1:this.step,o=new Date().toISOString(),s=t==="checkpoints"?"checkpoint":typeof r=="object"&&r!=null&&"result"in r?"task_result":"task";this.stream.push([this.checkpointNamespace,"debug",{step:i,type:s,timestamp:o,payload:r}])}}_putCheckpoint(e){let t=this.checkpointMetadata===e,r=this.checkpointer!=null&&(this.checkpointDuring||t),i=o=>{this.prevCheckpointConfig=this.checkpointConfig?.configurable?.checkpoint_id?this.checkpointConfig:void 0,this.checkpointConfig=w(m({},this.checkpointConfig),{configurable:w(m({},this.checkpointConfig.configurable),{checkpoint_ns:this.config.configurable?.checkpoint_ns??""})});let s=m({},this.checkpoint.channel_versions),a=gh(this.checkpointPreviousVersions,s);this.checkpointPreviousVersions=s,this._checkpointerPutAfterPrevious({config:m({},this.checkpointConfig),checkpoint:xl(o),metadata:m({},this.checkpointMetadata),newVersions:a}),this.checkpointConfig=w(m({},this.checkpointConfig),{configurable:w(m({},this.checkpointConfig.configurable),{checkpoint_id:this.checkpoint.id})})};!t&&!this.checkpointDuring&&this.checkpointer!=null&&this.prevCheckpoint!=null&&this.checkpoint.pending_sends.length>0&&i(this.prevCheckpoint),t||(this.checkpointMetadata=w(m({},e),{step:this.step,parents:this.config.configurable?.[Xr]??{}})),this.checkpointDuring||(this.prevCheckpoint=this.checkpoint),this.checkpoint=wo(this.checkpoint,r?this.channels:void 0,this.step,t?{id:this.checkpoint.id}:void 0),r&&i(this.checkpoint),t||(this.step+=1)}_flushPendingWrites(){if(this.checkpointer==null||this.checkpointPendingWrites.length===0)return;let e=Zi(this.checkpointConfig,{[Il]:this.config.configurable?.checkpoint_ns??"",[HM]:this.checkpoint.id}),t={};for(let[r,i,o]of this.checkpointPendingWrites)t[r]??=[],t[r].push([i,o]);for(let[r,i]of Object.entries(t))this.checkpointerPromises.push(this.checkpointer.putWrites(e,i,r))}_matchWrites(e){for(let[t,r,i]of this.checkpointPendingWrites){if(r===Kn||r===pt||r===Mr)continue;let o=Object.values(e).find(s=>s.id===t);o&&o.writes.push([r,i])}for(let t of Object.values(e))t.writes.length>0&&this._outputWrites(t.id,t.writes,!0)}};function Ise(n){return ln(n?.message)}var Zx=class extends JO{constructor(e){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"StreamMessagesHandler"}),Object.defineProperty(this,"streamFn",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadatas",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"seen",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"emittedChatModelRunIds",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"stableMessageIdMap",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"lc_prefer_streaming",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.streamFn=e}_emit(e,t,r,i=!1){if(i&&t.id!==void 0&&this.seen[t.id]!==void 0)return;let o=t.id;r!=null&&(Ah(t)?o??=`run-${r}-tool-${t.tool_call_id}`:((o==null||o===`run-${r}`)&&(o=this.stableMessageIdMap[r]??o??`run-${r}`),this.stableMessageIdMap[r]??=o)),o!==t.id&&(t.id=o,t.lc_kwargs.id=o),t.id!=null&&(this.seen[t.id]=t),this.streamFn([e[0],"messages",[t,e[1]]])}handleChatModelStart(e,t,r,i,o,s,a,l){a&&(!s||!s.includes(S4)&&!s.includes("nostream"))&&(this.metadatas[r]=[a.langgraph_checkpoint_ns.split("|"),m({tags:s,name:l},a)])}handleLLMNewToken(e,t,r,i,o,s){let a=s?.chunk;this.emittedChatModelRunIds[r]=!0,this.metadatas[r]!==void 0&&(Ise(a)?this._emit(this.metadatas[r],a.message,r):this._emit(this.metadatas[r],new _i({content:e}),r))}handleLLMEnd(e,t){if(this.metadatas[t]!==void 0){if(!this.emittedChatModelRunIds[t]){let r=e.generations?.[0]?.[0];ln(r?.message)&&this._emit(this.metadatas[t],r?.message,t,!0),delete this.emittedChatModelRunIds[t]}delete this.metadatas[t],delete this.stableMessageIdMap[t]}}handleLLMError(e,t){delete this.metadatas[t]}handleChainStart(e,t,r,i,o,s,a,l){if(s!==void 0&&l===s.langgraph_node&&(o===void 0||!o.includes(Ut))&&(this.metadatas[r]=[s.langgraph_checkpoint_ns.split("|"),m({tags:o,name:l},s)],typeof t=="object")){for(let c of Object.values(t))if((ln(c)||Nl(c))&&c.id!==void 0)this.seen[c.id]=c;else if(Array.isArray(c))for(let u of c)(ln(u)||Nl(u))&&u.id!==void 0&&(this.seen[u.id]=u)}}handleChainEnd(e,t){let r=this.metadatas[t];if(delete this.metadatas[t],r!==void 0){if(ln(e))this._emit(r,e,t,!0);else if(Array.isArray(e))for(let i of e)ln(i)&&this._emit(r,i,t,!0);else if(e!=null&&typeof e=="object"){for(let i of Object.values(e))if(ln(i))this._emit(r,i,t,!0);else if(Array.isArray(i))for(let o of i)ln(o)&&this._emit(r,o,t,!0)}}}handleChainError(e,t){delete this.metadatas[t]}};var Sse=500,Dse=2,Tse=128e3,Ase=3,kse=[400,401,402,403,404,405,406,407,409],Rse=n=>{if(n.message.startsWith("Cancel")||n.message.startsWith("AbortError")||n.name==="AbortError"||n.name==="GraphValueError"||n?.code==="ECONNABORTED")return!1;let e=n?.response?.status??n?.status;return!(e&&kse.includes(+e)||n?.error?.code==="insufficient_quota")};function aO(n,e,t,r){return v(this,null,function*(){let i=n.retry_policy??e,o=i!==void 0?i.initialInterval??Sse:0,s=0,a,l,{config:c}=n;for(t&&(c=Zi(c,t)),c=w(m({},c),{signal:r});!r?.aborted;){n.writes.splice(0,n.writes.length),a=void 0;try{l=yield n.proc.invoke(n.input,c);break}catch(u){if(a=u,a.pregelTaskId=n.id,w4(a)){let p=c?.configurable?.checkpoint_ns,g=a.command;if(g.graph===p){for(let _ of n.writers)yield _.invoke(g,c);a=void 0;break}else if(g.graph===Gn.PARENT){let _=A4(p);a.command=new Gn(w(m({},a.command),{graph:_}))}}if(fh(a)||i===void 0||(s+=1,s>=(i.maxAttempts??Ase))||!(i.retryOn??Rse)(a))break;o=Math.min(i.maxInterval??Tse,o*(i.backoffFactor??Dse));let h=i.jitter?Math.floor(o+Math.random()*1e3):o;yield new Promise(p=>setTimeout(p,h));let f=a.name??a.constructor.unminifiable_name??a.constructor.name;(i?.logWarning??!0)&&console.log(`Retrying task "${String(n.name)}" after ${o.toFixed(2)}ms (attempt ${s}) after ${f}: ${a}`),c=Zi(c,{[vs]:!0})}}return{task:n,result:l,error:a,signalAborted:r?.aborted}})}var lO=Symbol.for("promiseAdded");function Mse(){let n={next:()=>{},wait:Promise.resolve(lO)};function e(t){n.next=()=>{n.wait=new Promise(e),t(lO)}}return n.wait=new Promise(e),n}var Xx=class{constructor({loop:e,nodeFinished:t}){Object.defineProperty(this,"nodeFinished",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"loop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.loop=e,this.nodeFinished=t}tick(){return v(this,arguments,function*(e={}){let{timeout:t,retryPolicy:r,onStepWrite:i,maxConcurrency:o}=e,s=new Set,a,l=new AbortController,c=l.signal,u=t?AbortSignal.timeout(t):void 0,d=Object.values(this.loop.tasks).filter(T=>T.writes.length===0),{signals:h,disposeCombinedSignal:f}=this._initializeAbortSignals({exceptionSignal:c,stepTimeoutSignal:u,signal:e.signal}),p=this._executeTasksWithRetry(d,{signals:h,retryPolicy:r,maxConcurrency:o});try{for(var g=Ee(p),_,y,E;_=!(y=yield g.next()).done;_=!1){let{task:T,error:A,signalAborted:P}=y.value;this._commit(T,A),bs(A)||fh(A)&&!bs(a)?a=A:A&&(s.size===0||!P)&&(l.abort(),s.add(A))}}catch{E=[y]}finally{try{_&&(y=g.return)&&(yield y.call(g))}finally{if(E)throw E[0]}}if(f?.(),i?.(this.loop.step,Object.values(this.loop.tasks).map(T=>T.writes).flat()),s.size===1)throw Array.from(s)[0];if(s.size>1)throw new AggregateError(Array.from(s),`Multiple errors occurred during superstep ${this.loop.step}. See the "errors" field of this exception for more details.`);if(bs(a)||fh(a)&&this.loop.isNested)throw a})}_initializeAbortSignals({exceptionSignal:e,stepTimeoutSignal:t,signal:r}){let i=this.loop.config.configurable?.[qM]??{},o=i.externalAbortSignal??r,s=t??i.timeoutAbortSignal,{signal:a,dispose:l}=_h(o,s,e),c={externalAbortSignal:o,timeoutAbortSignal:s,composedAbortSignal:a};return this.loop.config=Zi(this.loop.config,{[qM]:c}),{signals:c,disposeCombinedSignal:l}}_executeTasksWithRetry(e,t){return We(this,null,function*(){let{retryPolicy:r,maxConcurrency:i,signals:o}=t??{},s=Mse(),a={},l={executingTasksMap:a,barrier:s,retryPolicy:r,scheduleTask:(f,p,g)=>v(this,null,function*(){return this.loop.acceptPush(f,p,g)})};if(o?.composedAbortSignal?.aborted)throw new Error("Abort");let c=0,u,d=_h(o?.externalAbortSignal,o?.timeoutAbortSignal),h=d.signal?new Promise((f,p)=>{u=()=>p(new Error("Abort")),d.signal?.addEventListener("abort",u,{once:!0})}):void 0;for(;(c===0||Object.keys(a).length>0)&&e.length;){for(;Object.values(a).length<(i??e.length)&&c<e.length;c+=1){let p=e[c];a[p.id]=aO(p,r,{[Jg]:Z4?.bind(l,this,p)},o?.composedAbortSignal).catch(g=>({task:p,error:g,signalAborted:o?.composedAbortSignal?.aborted}))}let f=yield new ee(Promise.race([...Object.values(a),...h?[h]:[],s.wait]));f!==lO&&(yield f,u!=null&&(d.signal?.removeEventListener("abort",u),d.dispose?.()),delete a[f.task.id])}})}_commit(e,t){if(t!==void 0)if(bs(t)){if(t.interrupts.length){let r=t.interrupts.map(o=>[pt,o]),i=e.writes.filter(o=>o[0]===Mr);i.length&&r.push(...i),this.loop.putWrites(e.id,r)}}else fh(t)&&e.writes.length?this.loop.putWrites(e.id,e.writes):this.loop.putWrites(e.id,[[Kn,{message:t.message,name:t.name}]]);else this.nodeFinished&&(e.config?.tags==null||!e.config.tags.includes(Ut))&&this.nodeFinished(String(e.name)),e.writes.length===0&&e.writes.push([t_,null]),this.loop.putWrites(e.id,e.writes)}};function Z4(s,a,l,c,u){return v(this,arguments,function*(n,e,t,r,i,o={}){let d=e.config?.configurable?.[Eo];if(!d)throw new Error(`BUG: No scratchpad found on task ${e.name}__${e.id}`);let h=d.callCounter;d.callCounter+=1;let f=new Vx({func:t,name:r,input:i,cache:o.cache,retry:o.retry,callbacks:o.callbacks}),p=yield this.scheduleTask(e,h,f);if(!p)return;let g=this.executingTasksMap[p.id];if(g!==void 0)return g;if(p.writes.length>0){let _=p.writes.filter(([E])=>E===Io),y=p.writes.filter(([E])=>E===Kn);if(_.length>0){if(_.length===1)return Promise.resolve(_[0][1]);throw new Error(`BUG: multiple returns found for task ${p.name}__${p.id}`)}if(y.length>0){if(y.length===1){let E=y[0][1],T=E instanceof Error?E:new Error(String(E));return Promise.reject(T)}throw new Error(`BUG: multiple errors found for task ${p.name}__${p.id}`)}return}else{let _=aO(p,o.retry,{[Jg]:Z4.bind(this,n,p)});return this.executingTasksMap[p.id]=_,this.barrier.next(),_.then(({result:y,error:E})=>E?Promise.reject(E):y)}})}var ko=class extends Error{constructor(e){super(e),this.name="GraphValidationError"}};function X4({nodes:n,channels:e,inputChannels:t,outputChannels:r,streamChannels:i,interruptAfterNodes:o,interruptBeforeNodes:s}){if(!e)throw new ko("Channels not provided");let a=new Set,l=new Set;for(let[c,u]of Object.entries(n)){if(c===pt)throw new ko(`"Node name ${pt} is reserved"`);if(u.constructor===To)u.triggers.forEach(d=>a.add(d));else throw new ko(`Invalid node type ${typeof u}, expected PregelNode`)}for(let c of a)if(!(c in e))throw new ko(`Subscribed channel '${String(c)}' not in channels`);if(Array.isArray(t)){if(t.every(c=>!a.has(c)))throw new ko(`None of the input channels ${t} are subscribed to by any node`)}else if(!a.has(t))throw new ko(`Input channel ${String(t)} is not subscribed to by any node`);Array.isArray(r)?r.forEach(c=>l.add(c)):l.add(r),i&&!Array.isArray(i)?l.add(i):Array.isArray(i)&&i.forEach(c=>l.add(c));for(let c of l)if(!(c in e))throw new ko(`Output channel '${String(c)}' not in channels`);if(o&&o!=="*"){for(let c of o)if(!(c in n))throw new ko(`Node ${String(c)} not in nodes`)}if(s&&s!=="*"){for(let c of s)if(!(c in n))throw new ko(`Node ${String(c)} not in nodes`)}}function cO(n,e){if(Array.isArray(n)){for(let t of n)if(!(t in e))throw new Error(`Key ${String(t)} not found in channels`)}else if(!(n in e))throw new Error(`Key ${String(n)} not found in channels`)}var Jx=class{static subscribeTo(e,t){let{key:r,tags:i}=m({key:void 0,tags:void 0},t??{});if(Array.isArray(e)&&r!==void 0)throw new Error("Can't specify a key when subscribing to multiple channels");let o;typeof e=="string"?r?o={[r]:e}:o=[e]:o=Object.fromEntries(e.map(a=>[a,a]));let s=Array.isArray(e)?e:[e];return new To({channels:o,triggers:s,tags:i})}static writeTo(e,t){let r=[];for(let i of e)r.push({channel:i,value:Do,skipNone:!1});for(let[i,o]of Object.entries(t??{}))mt.isRunnable(o)||typeof o=="function"?r.push({channel:i,value:Do,skipNone:!0,mapper:Dr(o)}):r.push({channel:i,value:o,skipNone:!1});return new Tn(r)}},uO=class extends mt{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langgraph","pregel"]})}invoke(e,t){throw new Error("Not implemented")}withConfig(e){return super.withConfig(e)}stream(e,t){return super.stream(e,t)}},eC=class n extends uO{static lc_name(){return"LangGraph"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langgraph","pregel"]}),Object.defineProperty(this,"lg_is_pregel",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"channels",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputChannels",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputChannels",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoValidate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"streamMode",{enumerable:!0,configurable:!0,writable:!0,value:["values"]}),Object.defineProperty(this,"streamChannels",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"interruptAfter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"interruptBefore",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stepTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"debug",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"checkpointer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"retryPolicy",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"store",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"triggerToNodes",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let{streamMode:t}=e;t!=null&&!Array.isArray(t)&&(t=[t]),this.nodes=e.nodes,this.channels=e.channels,this.autoValidate=e.autoValidate??this.autoValidate,this.streamMode=t??this.streamMode,this.inputChannels=e.inputChannels,this.outputChannels=e.outputChannels,this.streamChannels=e.streamChannels??this.streamChannels,this.interruptAfter=e.interruptAfter,this.interruptBefore=e.interruptBefore,this.stepTimeout=e.stepTimeout??this.stepTimeout,this.debug=e.debug??this.debug,this.checkpointer=e.checkpointer,this.retryPolicy=e.retryPolicy,this.config=e.config,this.store=e.store,this.cache=e.cache,this.name=e.name,this.autoValidate&&this.validate()}withConfig(e){let t=Br(this.config,e);return new this.constructor(w(m({},this),{config:t}))}validate(){X4({nodes:this.nodes,channels:this.channels,outputChannels:this.outputChannels,inputChannels:this.inputChannels,streamChannels:this.streamChannels,interruptAfterNodes:this.interruptAfter,interruptBeforeNodes:this.interruptBefore});for(let[e,t]of Object.entries(this.nodes))for(let r of t.triggers)this.triggerToNodes[r]??=[],this.triggerToNodes[r].push(e);return this}get streamChannelsList(){return Array.isArray(this.streamChannels)?this.streamChannels:this.streamChannels?[this.streamChannels]:Object.keys(this.channels)}get streamChannelsAsIs(){return this.streamChannels?this.streamChannels:Object.keys(this.channels)}getGraphAsync(e){return v(this,null,function*(){return this.getGraph(e)})}*getSubgraphs(e,t){for(let[r,i]of Object.entries(this.nodes)){if(e!==void 0&&!e.startsWith(r))continue;let o=i.subgraphs?.length?i.subgraphs:[i.bound];for(let s of o){let a=Wx(s);if(a!==void 0){if(r===e){yield[r,a];return}if(e===void 0&&(yield[r,a]),t){let l=e;e!==void 0&&(l=e.slice(r.length+1));for(let[c,u]of a.getSubgraphs(l,t))yield[`${r}${Dn}${c}`,u]}}}}}getSubgraphsAsync(e,t){return We(this,null,function*(){yield*Ri(this.getSubgraphs(e,t))})}_prepareStateSnapshot(o){return v(this,arguments,function*({config:e,saved:t,subgraphCheckpointer:r,applyPendingWrites:i=!1}){if(t===void 0)return{values:{},next:[],config:e,tasks:[]};let{managed:s}=yield this.prepareSpecs(e,{skipManaged:!0}),a=El(this.channels,t.checkpoint);if(t.pendingWrites?.length){let p=t.pendingWrites.filter(([g,_])=>g===Pr).map(([g,_,y])=>[String(_),y]);p.length>0&&ei(t.checkpoint,a,[{name:xo,writes:p,triggers:[]}],void 0,this.triggerToNodes)}let l=Object.values(Al(t.checkpoint,t.pendingWrites,this.nodes,a,s,t.config,!0,{step:(t.metadata?.step??-1)+1,store:this.store})),c=yield So(this.getSubgraphsAsync()),u=t.config.configurable?.checkpoint_ns??"",d={};for(let p of l){let g=c.find(([y])=>y===p.name);if(!g)continue;let _=`${String(p.name)}${Jr}${p.id}`;if(u&&(_=`${u}${Dn}${_}`),r===void 0){let y={configurable:{thread_id:t.config.configurable?.thread_id,checkpoint_ns:_}};d[p.id]=y}else{let y={configurable:{[Nn]:r,thread_id:t.config.configurable?.thread_id,checkpoint_ns:_}},E=g[1];d[p.id]=yield E.getState(y,{subgraphs:!0})}}if(i&&t.pendingWrites?.length){let p=Object.fromEntries(l.map(_=>[_.id,_]));for(let[_,y,E]of t.pendingWrites)[Kn,pt,sh].includes(y)||_ in p&&p[_].writes.push([String(y),E]);let g=l.filter(_=>_.writes.length>0);g.length>0&&ei(t.checkpoint,a,g,void 0,this.triggerToNodes)}let h=t?.metadata;h&&t?.config?.configurable?.thread_id&&(h=w(m({},h),{thread_id:t.config.configurable.thread_id}));let f=l.filter(p=>p.writes.length===0).map(p=>p.name);return{values:Ao(a,this.streamChannelsAsIs),next:f,tasks:iO(l,t?.pendingWrites??[],d,this.streamChannelsAsIs),metadata:h,config:Dl(t.config,t.metadata),createdAt:t.checkpoint.ts,parentConfig:t.parentConfig}})}getState(e,t){return v(this,null,function*(){let r=e.configurable?.[Nn]??this.checkpointer;if(!r)throw new dh("No checkpointer set");let i=e.configurable?.checkpoint_ns??"";if(i!==""&&e.configurable?.[Nn]===void 0){let h=Mx(i);try{for(var l=Ee(this.getSubgraphsAsync(h,!0)),c,u,d;c=!(u=yield l.next()).done;c=!1){let[f,p]=u.value;if(f===h)return yield p.getState(fu(e,{[Nn]:r}),{subgraphs:t?.subgraphs})}}catch{d=[u]}finally{try{c&&(u=l.return)&&(yield u.call(l))}finally{if(d)throw d[0]}}throw new Error(`Subgraph with namespace "${h}" not found.`)}let o=Br(this.config,e),s=yield r.getTuple(e);return yield this._prepareStateSnapshot({config:o,saved:s,subgraphCheckpointer:t?.subgraphs?r:void 0,applyPendingWrites:!e.configurable?.checkpoint_id})})}getStateHistory(e,t){return We(this,null,function*(){let r=e.configurable?.[Nn]??this.checkpointer;if(!r)throw new dh("No checkpointer set");let i=e.configurable?.checkpoint_ns??"";if(i!==""&&e.configurable?.[Nn]===void 0){let p=Mx(i);try{for(var s=Ee(this.getSubgraphsAsync(p,!0)),a,l,c;a=!(l=yield new ee(s.next())).done;a=!1){let[g,_]=l.value;if(g===p){yield*Ri(_.getStateHistory(fu(e,{[Nn]:r}),t));return}}}catch{c=[l]}finally{try{a&&(l=s.return)&&(yield new ee(l.call(s)))}finally{if(c)throw c[0]}}throw new Error(`Subgraph with namespace "${p}" not found.`)}let o=Br(this.config,e,{configurable:{checkpoint_ns:i}});try{for(var u=Ee(r.list(o,t)),d,h,f;d=!(h=yield new ee(u.next())).done;d=!1){let p=h.value;yield this._prepareStateSnapshot({config:p.config,saved:p})}}catch{f=[h]}finally{try{d&&(h=u.return)&&(yield new ee(h.call(u)))}finally{if(f)throw f[0]}}})}bulkUpdateState(e,t){return v(this,null,function*(){let r=e.configurable?.[Nn]??this.checkpointer;if(!r)throw new dh("No checkpointer set");if(t.length===0)throw new Error("No supersteps provided");if(t.some(d=>d.updates.length===0))throw new Error("No updates provided");let i=e.configurable?.checkpoint_ns??"";if(i!==""&&e.configurable?.[Nn]===void 0){let d=Mx(i);try{for(var a=Ee(this.getSubgraphsAsync(d,!0)),l,c,u;l=!(c=yield a.next()).done;l=!1){let[,h]=c.value;return yield h.bulkUpdateState(fu(e,{[Nn]:r}),t)}}catch{u=[c]}finally{try{l&&(c=a.return)&&(yield c.call(a))}finally{if(u)throw u[0]}}throw new Error(`Subgraph "${d}" not found`)}let o=(d,h)=>v(this,null,function*(){let f=this.config?Br(this.config,d):d,p=yield r.getTuple(f),g=p!==void 0?xl(p.checkpoint):Cx(),_=m({},p?.checkpoint.channel_versions),y=p?.metadata?.step??-1,E=fu(f,{checkpoint_ns:f.configurable?.checkpoint_ns??""}),T=f.metadata??{};p?.config.configurable&&(E=fu(f,p.config.configurable),T=m(m({},p.metadata),T));let{values:A,asNode:P}=h[0];if(A==null&&P===void 0){if(h.length>1)throw new xt("Cannot create empty checkpoint with multiple updates");let F=yield r.put(E,wo(g,void 0,y),{source:"update",step:y+1,writes:{},parents:p?.metadata?.parents??{}},{});return Dl(F,p?p.metadata:void 0)}let R=El(this.channels,g),{managed:W}=yield this.prepareSpecs(f,{skipManaged:!0});if(A===null&&P===$e){if(h.length>1)throw new xt("Cannot apply multiple updates when clearing state");if(p){let j=Al(g,p.pendingWrites||[],this.nodes,R,W,p.config,!0,{step:(p.metadata?.step??-1)+1,checkpointer:r,store:this.store}),H=(p.pendingWrites||[]).filter(q=>q[0]===Pr).map(q=>q.slice(1));H.length>0&&ei(g,R,[{name:xo,writes:H,triggers:[]}],r.getNextVersion.bind(r),this.triggerToNodes);for(let[q,X,le]of p.pendingWrites||[])[Kn,pt,sh].includes(X)||q in j&&j[q].writes.push([X,le]);ei(g,R,Object.values(j),r.getNextVersion.bind(r),this.triggerToNodes)}let F=yield r.put(E,wo(g,R,y),w(m({},T),{source:"update",step:y+1,writes:{},parents:p?.metadata?.parents??{}}),gh(_,g.channel_versions));return Dl(F,p?p.metadata:void 0)}if(P===C4){if(h.length>1)throw new xt("Cannot copy checkpoint with multiple updates");if(p==null)throw new xt("Cannot copy a non-existent checkpoint");let F=q=>!Array.isArray(q)||q.length===0?!1:q.every(X=>Array.isArray(X)&&X.length===2),j=wo(g,void 0,y),H=yield r.put(p.parentConfig??fu(p.config,{checkpoint_id:void 0}),j,{source:"fork",step:y+1,writes:{},parents:p.metadata?.parents??{}},{});if(F(A)){let q=Al(j,p.pendingWrites,this.nodes,R,W,H,!1,{step:y+2}),X=Object.values(q).reduce((ge,{name:pe,id:It})=>(ge[pe]??=[],ge[pe].push({id:It}),ge),{}),le=A.reduce((ge,pe)=>{let[It,zt]=pe;ge[zt]??=[];let Cn=ge[zt].length,ft=X[zt]?.[Cn]?.id;return ge[zt].push({values:It,asNode:zt,taskId:ft}),ge},{});return o(Dl(H,p.metadata),Object.values(le).flat())}return Dl(H,p.metadata)}if(P===xo){if(h.length>1)throw new xt("Cannot apply multiple updates when updating as input");let F=yield So(jx(this.inputChannels,A));if(F.length===0)throw new xt(`Received no input writes for ${JSON.stringify(this.inputChannels,null,2)}`);ei(g,R,[{name:xo,writes:F,triggers:[]}],r.getNextVersion.bind(this.checkpointer),this.triggerToNodes);let j=p?.metadata?.step!=null?p.metadata.step+1:-1,H=yield r.put(E,wo(g,R,j),{source:"input",step:j,writes:Object.fromEntries(F),parents:p?.metadata?.parents??{}},gh(_,g.channel_versions));return yield r.putWrites(H,F,wl(xo,g.id)),Dl(H,p?p.metadata:void 0)}if(f.configurable?.checkpoint_id===void 0&&p?.pendingWrites!==void 0&&p.pendingWrites.length>0){let F=Al(g,p.pendingWrites,this.nodes,R,W,p.config,!0,{store:this.store,checkpointer:this.checkpointer,step:(p.metadata?.step??-1)+1}),j=(p.pendingWrites??[]).filter(q=>q[0]===Pr).map(q=>q.slice(1));j.length>0&&ei(p.checkpoint,R,[{name:xo,writes:j,triggers:[]}],void 0,this.triggerToNodes);for(let[q,X,le]of p.pendingWrites)[Kn,pt,sh].includes(X)||F[q]===void 0||F[q].writes.push([X,le]);let H=Object.values(F).filter(q=>q.writes.length>0);H.length>0&&ei(g,R,H,void 0,this.triggerToNodes)}let S=Object.values(g.versions_seen).map(F=>Object.values(F)).flat().find(F=>!!F),$=[];if(h.length===1){let{values:F,asNode:j,taskId:H}=h[0];if(j===void 0&&Object.keys(this.nodes).length===1)[j]=Object.keys(this.nodes);else if(j===void 0&&S===void 0)typeof this.inputChannels=="string"&&this.nodes[this.inputChannels]!==void 0&&(j=this.inputChannels);else if(j===void 0){let q=Object.entries(g.versions_seen).map(([X,le])=>Object.values(le).map(ge=>[ge,X])).flat().sort(([X],[le])=>VM(X,le));q&&(q.length===1?j=q[0][1]:q[q.length-1][0]!==q[q.length-2][0]&&(j=q[q.length-1][1]))}if(j===void 0)throw new xt('Ambiguous update, specify "asNode"');$.push({values:F,asNode:j,taskId:H})}else for(let{asNode:F,values:j,taskId:H}of h){if(F==null)throw new xt('"asNode" is required when applying multiple updates');$.push({values:j,asNode:F,taskId:H})}let Z=[];for(let{asNode:F,values:j,taskId:H}of $){if(this.nodes[F]===void 0)throw new xt(`Node "${F.toString()}" does not exist`);let q=this.nodes[F].getWriters();if(!q.length)throw new xt(`No writers found for node "${F.toString()}"`);Z.push({name:F,input:j,proc:q.length>1?yn.from(q,{omitSequenceTags:!0}):q[0],writes:[],triggers:[pt],id:H??wl(pt,g.id),writers:[]})}for(let F of Z)yield F.proc.invoke(F.input,Bn(w(m({},f),{store:f?.store??this.store}),{runName:f.runName??`${this.getName()}UpdateState`,configurable:{[ma]:j=>F.writes.push(...j),[Co]:(j,H=!1)=>r_(y,g,R,W,F,j,H)}}));for(let F of Z){let j=F.writes.filter(H=>H[0]!==Or);p!==void 0&&j.length>0&&(yield r.putWrites(E,j,F.id))}ei(g,R,Z,r.getNextVersion.bind(this.checkpointer),this.triggerToNodes);let Y=gh(_,g.channel_versions),oe=yield r.put(E,wo(g,R,y+1),{source:"update",step:y+1,writes:Object.fromEntries($.map(F=>[F.asNode,F.values])),parents:p?.metadata?.parents??{}},Y);for(let F of Z){let j=F.writes.filter(H=>H[0]===Or);j.length>0&&(yield r.putWrites(oe,j,F.id))}return Dl(oe,p?p.metadata:void 0)}),s=e;for(let{updates:d}of t)s=yield o(s,d);return s})}updateState(e,t,r){return v(this,null,function*(){return this.bulkUpdateState(e,[{updates:[{values:t,asNode:r}]}])})}_defaults(e){let A=e,{debug:t,streamMode:r,inputKeys:i,outputKeys:o,interruptAfter:s,interruptBefore:a}=A,l=Ae(A,["debug","streamMode","inputKeys","outputKeys","interruptAfter","interruptBefore"]),c=!0,u=t!==void 0?t:this.debug,d=o;d===void 0?d=this.streamChannelsAsIs:cO(d,this.channels);let h=i;h===void 0?h=this.inputChannels:cO(h,this.channels);let f=a??this.interruptBefore??[],p=s??this.interruptAfter??[],g;r!==void 0?(g=Array.isArray(r)?r:[r],c=typeof r=="string"):(e.configurable?.[cu]!==void 0?g=["values"]:g=this.streamMode,c=!0);let _;if(this.checkpointer===!1)_=void 0;else if(e!==void 0&&e.configurable?.[Nn]!==void 0)_=e.configurable[Nn];else{if(this.checkpointer===!0)throw new Error("checkpointer: true cannot be used for root graphs.");_=this.checkpointer}let y=e.store??this.store,E=e.cache??this.cache,T=e.checkpointDuring??e?.configurable?.[E4]??!0;return[u,g,h,d,l,f,p,_,y,c,E,T]}stream(e,t){return v(this,null,function*(){let r=new AbortController,i=w(m({recursionLimit:this.config?.recursionLimit},t),{signal:_h(t?.signal,r.signal).signal});return new l_(yield sr(n.prototype,this,"stream").call(this,e,i),r)})}streamEvents(e,t,r){let i=new AbortController,o=w(m({recursionLimit:this.config?.recursionLimit},t),{callbacks:P4(this.config?.callbacks,t?.callbacks),signal:_h(t?.signal,i.signal).signal});return new l_(super.streamEvents(e,o,r),i)}prepareSpecs(e,t){return v(this,null,function*(){let r=w(m({},e),{store:this.store}),i={},o={};for(let[a,l]of Object.entries(this.channels))au(l)?i[a]=l:t?.skipManaged?o[a]={cls:Lx,params:{config:{}}}:o[a]=l;let s=new Fx(yield Object.entries(o).reduce((u,d)=>v(this,[u,d],function*(a,[l,c]){let h=yield a,f;return hu(c)?("key"in c.params&&c.params.key===k4&&(c.params.key=l),f=yield c.cls.initialize(r,c.params)):f=yield c.initialize(r),f!==void 0&&h.push([l,f]),h}),Promise.resolve([])));return{channelSpecs:i,managed:s}})}_validateInput(e){return v(this,null,function*(){return e})}_validateConfigurable(e){return v(this,null,function*(){return e})}_streamIterator(e,t){return We(this,null,function*(){let r=t?.subgraphs,i=Rx(this.config,t);if(i.recursionLimit===void 0||i.recursionLimit<1)throw new Error('Passed "recursionLimit" must be at least 1.');if(this.checkpointer!==void 0&&this.checkpointer!==!1&&i.configurable===void 0)throw new Error('Checkpointer requires one or more of the following "configurable" keys: "thread_id", "checkpoint_ns", "checkpoint_id"');let o=yield new ee(this._validateInput(e)),oe=i,{runId:s}=oe,a=Ae(oe,["runId"]),[l,c,,u,d,h,f,p,g,_,y,E]=this._defaults(a);d.configurable=yield new ee(this._validateConfigurable(d.configurable));let T=new yh({modes:new Set(c)});if(this.checkpointer===!0){d.configurable??={};let X=d.configurable[Il]??"";d.configurable[Il]=X.split(Dn).map(le=>le.split(Jr)[0]).join(Dn)}if(c.includes("messages")){let X=new Zx(ge=>T.push(ge)),{callbacks:le}=d;if(le===void 0)d.callbacks=[X];else if(Array.isArray(le))d.callbacks=le.concat(X);else{let ge=le.copy();ge.addHandler(X,!0),d.callbacks=ge}}c.includes("custom")&&(d.writer=X=>T.push([[],"custom",X]));let A=yield new ee(Tu(d)),P=yield new ee(A?.handleChainStart(this.toJSON(),O4(e,"input"),s,void 0,void 0,void 0,d?.runName??this.getName())),{channelSpecs:R,managed:W}=yield new ee(this.prepareSpecs(d)),S,$,Y=v(this,null,function*(){try{S=yield Yx.initialize({input:o,config:d,checkpointer:p,nodes:this.nodes,channelSpecs:R,managed:W,outputKeys:u,streamKeys:this.streamChannelsAsIs,store:g,cache:y,stream:T,interruptAfter:f,interruptBefore:h,manager:P,debug:this.debug,triggerToNodes:this.triggerToNodes,checkpointDuring:E});let X=new Xx({loop:S,nodeFinished:d.configurable?.[I4]});t?.subgraphs&&(S.config.configurable=w(m({},S.config.configurable),{[hh]:S.stream})),yield this._runLoop({loop:S,runner:X,debug:l,config:d})}catch(X){$=X}finally{try{S&&(yield S.store?.stop(),yield S.cache?.stop()),yield Promise.all([...S?.checkpointerPromises??[],...Array.from(W.values()).map(X=>X.promises())])}catch(X){$=$??X}$?T.error($):T.close()}});try{try{for(var F=Ee(T),j,H,q;j=!(H=yield new ee(F.next())).done;j=!1){let X=H.value;if(X===void 0)throw new Error("Data structure error.");let[le,ge,pe]=X;c.includes(ge)&&(r&&!_?yield[le,ge,pe]:_?r?yield[le,pe]:yield pe:yield[ge,pe])}}catch{q=[H]}finally{try{j&&(H=F.return)&&(yield new ee(H.call(F)))}finally{if(q)throw q[0]}}}catch(X){throw yield new ee(P?.handleChainError($)),X}finally{yield new ee(Y)}yield new ee(P?.handleChainEnd(S?.output??{},s,void 0,void 0,void 0))})}invoke(e,t){return v(this,null,function*(){let r=t?.streamMode??"values",i=w(m({},t),{outputKeys:t?.outputKeys??this.outputChannels,streamMode:r}),o=[],s=yield this.stream(e,i),a=[],l;try{for(var c=Ee(s),u,d,h;u=!(d=yield c.next()).done;u=!1){let f=d.value;r==="values"?T4(f)?a.push(f[pt]):l=f:o.push(f)}}catch{h=[d]}finally{try{u&&(d=c.return)&&(yield d.call(c))}finally{if(h)throw h[0]}}if(r==="values"){if(a.length>0){let f=a.flat(1);if(l==null)return{[pt]:f};if(typeof l=="object")return w(m({},l),{[pt]:f})}return l}return o})}_runLoop(e){return v(this,null,function*(){let{loop:t,runner:r,debug:i,config:o}=e,s;try{for(;yield t.tick({inputKeys:this.inputChannels});){for(let{task:a}of yield t._matchCachedWrites())t._outputWrites(a.id,a.writes,!0);i&&Q4(t.checkpointMetadata.step,t.channels,this.streamChannelsList),i&&Kx(t.step,Object.values(t.tasks)),yield r.tick({timeout:this.stepTimeout,retryPolicy:this.retryPolicy,onStepWrite:(a,l)=>{i&&Y4(a,l,this.streamChannelsList)},maxConcurrency:o.maxConcurrency,signal:o.signal})}if(t.status==="out_of_steps")throw new Sx([`Recursion limit of ${o.recursionLimit} reached`,"without hitting a stop condition. You can increase the",'limit by setting the "recursionLimit" config key.'].join(" "),{lc_error_code:"GRAPH_RECURSION_LIMIT"})}catch(a){if(s=a,!(yield t.finishAndHandleError(s)))throw a}finally{s===void 0&&(yield t.finishAndHandleError())}})}clearCache(){return v(this,null,function*(){yield this.cache?.clear([])})}};var kl=class n extends Ti{constructor(e,t){super(),Object.defineProperty(this,"lc_graph_name",{enumerable:!0,configurable:!0,writable:!0,value:"BinaryOperatorAggregate"}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"operator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"initialValueFactory",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.operator=e,this.initialValueFactory=t,this.value=t?.()}fromCheckpoint(e){let t=new n(this.operator,this.initialValueFactory);return typeof e<"u"&&(t.value=e),t}update(e){let t=e;if(!t.length)return!1;this.value===void 0&&([this.value]=t,t=t.slice(1));for(let r of t)this.value!==void 0&&(this.value=this.operator(this.value,r));return!0}get(){if(this.value===void 0)throw new rn;return this.value}checkpoint(){if(this.value===void 0)throw new rn;return this.value}isAvailable(){return this.value!==void 0}};var xs=class n extends Ti{constructor(e=!0){super(),Object.defineProperty(this,"lc_graph_name",{enumerable:!0,configurable:!0,writable:!0,value:"EphemeralValue"}),Object.defineProperty(this,"guard",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.guard=e}fromCheckpoint(e){let t=new n(this.guard);return typeof e<"u"&&(t.value=[e]),t}update(e){if(e.length===0){let t=this.value.length>0;return this.value=[],t}if(e.length!==1&&this.guard)throw new xt("EphemeralValue can only receive one value per step.");return this.value=[e[e.length-1]],!0}get(){if(this.value.length===0)throw new rn;return this.value[0]}checkpoint(){if(this.value.length===0)throw new rn;return this.value[0]}isAvailable(){return this.value.length!==0}};var c_=class{constructor(e){Object.defineProperty(this,"path",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ends",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),mt.isRunnable(e.path)?this.path=e.path:this.path=Dr(e.path).withConfig({runName:"Branch"}),this.ends=Array.isArray(e.pathMap)?e.pathMap.reduce((t,r)=>(t[r]=r,t),{}):e.pathMap}run(e,t){return Tn.registerWriter(new Nr({name:"<branch_run>",trace:!1,func:(r,i)=>v(this,null,function*(){try{return yield this._route(r,i,e,t)}catch(o){throw o.name===Qg.unminifiable_name&&console.warn(`[WARN]: 'NodeInterrupt' thrown in conditional edge. This is likely a bug in your graph implementation.
NodeInterrupt should only be thrown inside a node, not in edge conditions.`),o}})}))}_route(e,t,r,i){return v(this,null,function*(){let o=yield this.path.invoke(i?i(t):e,t);Array.isArray(o)||(o=[o]);let s;if(this.ends?s=o.map(l=>Qn(l)?l:this.ends[l]):s=o,s.some(l=>!l))throw new Error("Branch condition returned unknown or null destination");if(s.filter(Qn).some(l=>l.node===$e))throw new xt("Cannot send a packet to the END node");return(yield r(s,t))??e})}},u_=class{constructor(){Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"edges",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"branches",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"entryPoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"compiled",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.nodes={},this.edges=new Set,this.branches={}}warnIfCompiled(e){this.compiled&&console.warn(e)}get allEdges(){return this.edges}addNode(...e){function t(i){return i.length>=1&&typeof i[0]!="string"}let r=t(e)?Array.isArray(e[0])?e[0]:Object.entries(e[0]):[[e[0],e[1],e[2]]];if(r.length===0)throw new Error("No nodes provided in `addNode`");for(let[i,o,s]of r){for(let l of[Dn,Jr])if(i.includes(l))throw new Error(`"${l}" is a reserved character and is not allowed in node names.`);if(this.warnIfCompiled("Adding a node to a graph that has already been compiled. This will not be reflected in the compiled graph."),i in this.nodes)throw new Error(`Node \`${i}\` already present.`);if(i===$e)throw new Error(`Node \`${i}\` is reserved.`);let a=Dr(o);this.nodes[i]={runnable:a,metadata:s?.metadata,subgraphs:o_(a)?[a]:s?.subgraphs,ends:s?.ends}}return this}addEdge(e,t){if(this.warnIfCompiled("Adding an edge to a graph that has already been compiled. This will not be reflected in the compiled graph."),e===$e)throw new Error("END cannot be a start node");if(t===$t)throw new Error("START cannot be an end node");if(Array.from(this.edges).some(([r])=>r===e)&&!("channels"in this))throw new Error(`Already found path for ${e}. For multiple edges, use StateGraph.`);return this.edges.add([e,t]),this}addConditionalEdges(e,t,r){let i=typeof e=="object"?e:{source:e,path:t,pathMap:r};if(this.warnIfCompiled("Adding an edge to a graph that has already been compiled. This will not be reflected in the compiled graph."),!mt.isRunnable(i.path)){let s=Array.isArray(i.pathMap)?i.pathMap.join(","):Object.keys(i.pathMap??{}).join(",");i.path=Dr(i.path).withConfig({runName:`Branch<${i.source}${s!==""?`,${s}`:""}>`.slice(0,63)})}let o=i.path.getName()==="RunnableLambda"?"condition":i.path.getName();if(this.branches[i.source]&&this.branches[i.source][o])throw new Error(`Condition \`${o}\` already present for node \`${e}\``);return this.branches[i.source]??={},this.branches[i.source][o]=new c_(i),this}setEntryPoint(e){return this.warnIfCompiled("Setting the entry point of a graph that has already been compiled. This will not be reflected in the compiled graph."),this.addEdge($t,e)}setFinishPoint(e){return this.warnIfCompiled("Setting a finish point of a graph that has already been compiled. This will not be reflected in the compiled graph."),this.addEdge(e,$e)}compile({checkpointer:e,interruptBefore:t,interruptAfter:r,name:i}={}){this.validate([...Array.isArray(t)?t:[],...Array.isArray(r)?r:[]]);let o=new d_({builder:this,checkpointer:e,interruptAfter:r,interruptBefore:t,autoValidate:!1,nodes:{},channels:{[$t]:new xs,[$e]:new xs},inputChannels:$t,outputChannels:$e,streamChannels:[],streamMode:"values",name:i});for(let[s,a]of Object.entries(this.nodes))o.attachNode(s,a);for(let[s,a]of this.edges)o.attachEdge(s,a);for(let[s,a]of Object.entries(this.branches))for(let[l,c]of Object.entries(a))o.attachBranch(s,l,c);return o.validate()}validate(e){let t=new Set([...this.allEdges].map(([i,o])=>i));for(let[i]of Object.entries(this.branches))t.add(i);for(let i of t)if(i!==$t&&!(i in this.nodes))throw new Error(`Found edge starting at unknown node \`${i}\``);let r=new Set([...this.allEdges].map(([i,o])=>o));for(let[i,o]of Object.entries(this.branches))for(let s of Object.values(o))if(s.ends!=null)for(let a of Object.values(s.ends))r.add(a);else{r.add($e);for(let a of Object.keys(this.nodes))a!==i&&r.add(a)}for(let i of Object.values(this.nodes))for(let o of i.ends??[])r.add(o);for(let i of Object.keys(this.nodes))if(!r.has(i))throw new Dx([`Node \`${i}\` is not reachable.`,"","If you are returning Command objects from your node,",'make sure you are passing names of potential destination nodes as an "ends" array','into ".addNode(..., { ends: ["node1", "node2"] })".'].join(`
`),{lc_error_code:"UNREACHABLE_NODE"});for(let i of r)if(i!==$e&&!(i in this.nodes))throw new Error(`Found edge ending at unknown node \`${i}\``);if(e){for(let i of e)if(!(i in this.nodes))throw new Error(`Interrupt node \`${i}\` is not present`)}this.compiled=!0}},d_=class extends eC{constructor(r){var i=r,{builder:e}=i,t=Ae(i,["builder"]);super(t),Object.defineProperty(this,"builder",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.builder=e}attachNode(e,t){this.channels[e]=new xs,this.nodes[e]=new To({channels:[],triggers:[],metadata:t.metadata,subgraphs:t.subgraphs,ends:t.ends}).pipe(t.runnable).pipe(new Tn([{channel:e,value:Do}],[Ut])),this.streamChannels.push(e)}attachEdge(e,t){if(t===$e){if(e===$t)throw new Error("Cannot have an edge from START to END");this.nodes[e].writers.push(new Tn([{channel:$e,value:Do}],[Ut]))}else this.nodes[t].triggers.push(e),this.nodes[t].channels.push(e)}attachBranch(e,t,r){e===$t&&!this.nodes[$t]&&(this.nodes[$t]=Jx.subscribeTo($t,{tags:[Ut]})),this.nodes[e].pipe(r.run(o=>{let s=o.map(a=>Qn(a)?a:{channel:a===$e?$e:`branch:${e}:${t}:${a}`,value:Do});return new Tn(s,[Ut])}));let i=r.ends?Object.values(r.ends):Object.keys(this.nodes);for(let o of i)if(o!==$e){let s=`branch:${e}:${t}:${o}`;this.channels[s]=new xs,this.nodes[o].triggers.push(s),this.nodes[o].channels.push(s)}}getGraphAsync(e){return v(this,null,function*(){let t=e?.xray,r=new AC,i={[$t]:r.addNode({schema:b.any()},$t)},o={},s={};t&&(s=Object.fromEntries((yield So(this.getSubgraphsAsync())).filter(d=>J4(d[1]))));function a(d,h,f,p=!1){if(h===$e&&o[$e]===void 0&&(o[$e]=r.addNode({schema:b.any()},$e)),i[d]!==void 0){if(o[h]===void 0)throw new Error(`End node ${h} not found!`);return r.addEdge(i[d],o[h],f!==h?f:void 0,p)}}for(let[d,h]of Object.entries(this.builder.nodes)){let f=Fr(d),p=h.runnable,g=h.metadata??{};if(this.interruptBefore?.includes(d)&&this.interruptAfter?.includes(d)?g.__interrupt="before,after":this.interruptBefore?.includes(d)?g.__interrupt="before":this.interruptAfter?.includes(d)&&(g.__interrupt="after"),t){let _=typeof t=="number"?t-1:t,y=s[d]!==void 0?yield s[d].getGraphAsync(w(m({},e),{xray:_})):p.getGraph(e);if(y.trimFirstNode(),y.trimLastNode(),Object.keys(y.nodes).length>1){let A=function(R){return R?R.lc_runnable:!1},P=function(R,W){if(R!==void 0&&!Rh(R))return R;if(A(W))try{let S=W.getName();return S=S.startsWith("Runnable")?S.slice(8):S,S}catch{return W.getName()}else return W.name??"UnknownSchema"};var c=A,u=P;let[E,T]=r.extend(y,f);if(E===void 0)throw new Error(`Could not extend subgraph "${d}" due to missing entrypoint.`);T!==void 0&&(i[f]=m({name:P(T.id,T.data)},T)),o[f]=m({name:P(E.id,E.data)},E)}else{let E=r.addNode(p,f,g);i[f]=E,o[f]=E}}else{let _=r.addNode(p,f,g);i[f]=_,o[f]=_}}let l=[...this.builder.allEdges].sort(([d],[h])=>d<h?-1:h>d?1:0);for(let[d,h]of l)a(Fr(d),Fr(h));for(let[d,h]of Object.entries(this.builder.branches)){let f=w(m({},Object.fromEntries(Object.keys(this.builder.nodes).filter(p=>p!==d).map(p=>[Fr(p),Fr(p)]))),{[$e]:$e});for(let p of Object.values(h)){let g;p.ends!==void 0?g=p.ends:g=f;for(let[_,y]of Object.entries(g))a(Fr(d),Fr(y),_,!0)}}for(let[d,h]of Object.entries(this.builder.nodes))if(h.ends!==void 0)for(let f of h.ends)a(Fr(d),Fr(f),void 0,!0);return r})}getGraph(e){let t=e?.xray,r=new AC,i={[$t]:r.addNode({schema:b.any()},$t)},o={},s={};t&&(s=Object.fromEntries(du(this.getSubgraphs()).filter(d=>J4(d[1]))));function a(d,h,f,p=!1){return h===$e&&o[$e]===void 0&&(o[$e]=r.addNode({schema:b.any()},$e)),r.addEdge(i[d],o[h],f!==h?f:void 0,p)}for(let[d,h]of Object.entries(this.builder.nodes)){let f=Fr(d),p=h.runnable,g=h.metadata??{};if(this.interruptBefore?.includes(d)&&this.interruptAfter?.includes(d)?g.__interrupt="before,after":this.interruptBefore?.includes(d)?g.__interrupt="before":this.interruptAfter?.includes(d)&&(g.__interrupt="after"),t){let _=typeof t=="number"?t-1:t,y=s[d]!==void 0?s[d].getGraph(w(m({},e),{xray:_})):p.getGraph(e);if(y.trimFirstNode(),y.trimLastNode(),Object.keys(y.nodes).length>1){let A=function(R){return R?R.lc_runnable:!1},P=function(R,W){if(R!==void 0&&!Rh(R))return R;if(A(W))try{let S=W.getName();return S=S.startsWith("Runnable")?S.slice(8):S,S}catch{return W.getName()}else return W.name??"UnknownSchema"};var c=A,u=P;let[E,T]=r.extend(y,f);if(E===void 0)throw new Error(`Could not extend subgraph "${d}" due to missing entrypoint.`);T!==void 0&&(i[f]=m({name:P(T.id,T.data)},T)),o[f]=m({name:P(E.id,E.data)},E)}else{let E=r.addNode(p,f,g);i[f]=E,o[f]=E}}else{let _=r.addNode(p,f,g);i[f]=_,o[f]=_}}let l=[...this.builder.allEdges].sort(([d],[h])=>d<h?-1:h>d?1:0);for(let[d,h]of l)a(Fr(d),Fr(h));for(let[d,h]of Object.entries(this.builder.branches)){let f=w(m({},Object.fromEntries(Object.keys(this.builder.nodes).filter(p=>p!==d).map(p=>[Fr(p),Fr(p)]))),{[$e]:$e});for(let p of Object.values(h)){let g;p.ends!==void 0?g=p.ends:g=f;for(let[_,y]of Object.entries(g))a(Fr(d),Fr(y),_,!0)}}return r}};function J4(n){return typeof n.attachNode=="function"&&typeof n.attachEdge=="function"}function Fr(n){return n==="subgraph"?`"${n}"`:n}var gu=(n,e)=>n.size===e.size&&[...n].every(t=>e.has(t)),tC=class n extends Ti{constructor(e){super(),Object.defineProperty(this,"lc_graph_name",{enumerable:!0,configurable:!0,writable:!0,value:"NamedBarrierValue"}),Object.defineProperty(this,"names",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"seen",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.names=e,this.seen=new Set}fromCheckpoint(e){let t=new n(this.names);return typeof e<"u"&&(t.seen=new Set(e)),t}update(e){let t=!1;for(let r of e)if(this.names.has(r))this.seen.has(r)||(this.seen.add(r),t=!0);else throw new xt(`Value ${JSON.stringify(r)} not in names ${JSON.stringify(this.names)}`);return t}get(){if(!gu(this.names,this.seen))throw new rn}checkpoint(){return[...this.seen]}consume(){return this.seen&&this.names&&gu(this.seen,this.names)?(this.seen=new Set,!0):!1}isAvailable(){return!!this.names&&gu(this.names,this.seen)}},nC=class n extends Ti{constructor(e){super(),Object.defineProperty(this,"lc_graph_name",{enumerable:!0,configurable:!0,writable:!0,value:"NamedBarrierValueAfterFinish"}),Object.defineProperty(this,"names",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"seen",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"finished",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.names=e,this.seen=new Set,this.finished=!1}fromCheckpoint(e){let t=new n(this.names);if(typeof e<"u"){let[r,i]=e;t.seen=new Set(r),t.finished=i}return t}update(e){let t=!1;for(let r of e)if(this.names.has(r)&&!this.seen.has(r))this.seen.add(r),t=!0;else if(!this.names.has(r))throw new xt(`Value ${JSON.stringify(r)} not in names ${JSON.stringify(this.names)}`);return t}get(){if(!this.finished||!gu(this.names,this.seen))throw new rn}checkpoint(){return[[...this.seen],this.finished]}consume(){return this.finished&&this.seen&&this.names&&gu(this.seen,this.names)?(this.seen=new Set,this.finished=!1,!0):!1}finish(){return!this.finished&&this.names&&gu(this.names,this.seen)?(this.finished=!0,!0):!1}isAvailable(){return this.finished&&!!this.names&&gu(this.names,this.seen)}};var _u=class n extends Ti{constructor(){super(...arguments),Object.defineProperty(this,"lc_graph_name",{enumerable:!0,configurable:!0,writable:!0,value:"LastValue"}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:[]})}fromCheckpoint(e){let t=new n;return typeof e<"u"&&(t.value=[e]),t}update(e){if(e.length===0)return!1;if(e.length!==1)throw new xt("LastValue can only receive one value per step.",{lc_error_code:"INVALID_CONCURRENT_GRAPH_UPDATE"});return this.value=[e[e.length-1]],!0}get(){if(this.value.length===0)throw new rn;return this.value[0]}checkpoint(){if(this.value.length===0)throw new rn;return this.value[0]}isAvailable(){return this.value.length!==0}},rC=class n extends Ti{constructor(){super(...arguments),Object.defineProperty(this,"lc_graph_name",{enumerable:!0,configurable:!0,writable:!0,value:"LastValueAfterFinish"}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"finished",{enumerable:!0,configurable:!0,writable:!0,value:!1})}fromCheckpoint(e){let t=new n;if(typeof e<"u"){let[r,i]=e;t.value=[r],t.finished=i}return t}update(e){return e.length===0?!1:(this.finished=!1,this.value=[e[e.length-1]],!0)}get(){if(this.value.length===0||!this.finished)throw new rn;return this.value[0]}checkpoint(){if(this.value.length!==0)return[this.value[0],this.finished]}consume(){return this.finished?(this.finished=!1,this.value=[],!0):!1}finish(){return!this.finished&&this.value.length>0?(this.finished=!0,!0):!1}isAvailable(){return this.value.length!==0&&this.finished}};var iC=class{constructor(e){Object.defineProperty(this,"lc_graph_name",{enumerable:!0,configurable:!0,writable:!0,value:"AnnotationRoot"}),Object.defineProperty(this,"spec",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.spec=e}},va=function(n){return hu(n)?n:n?oC(n):new _u};va.Root=n=>new iC(n);function oC(n){return typeof n=="object"&&n&&"reducer"in n&&n.reducer?new kl(n.reducer,n.default):typeof n=="object"&&n&&"value"in n&&n.value?new kl(n.value,n.default):new _u}var Ose="lg:",dO=class{constructor(){Object.defineProperty(this,"_map",{enumerable:!0,configurable:!0,writable:!0,value:new WeakMap}),Object.defineProperty(this,"_extensionCache",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}get(e){return this._map.get(e)}extend(e,t){let r=this.get(e);this._map.set(e,t(r))}remove(e){return this._map.delete(e),this}has(e){return this._map.has(e)}getChannelsForSchema(e){let t={},r=E_(e);for(let[i,o]of Object.entries(r)){let s=this.get(o);s?.reducer?t[i]=new kl(s.reducer.fn,s.default):t[i]=new _u}return t}getExtendedChannelSchemas(e,t){if(Object.keys(t).length===0)return e;let r=Object.entries(t).filter(([,s])=>s===!0).sort(([s],[a])=>s.localeCompare(a)).map(([s,a])=>`${s}:${a}`).join("|"),i=this._extensionCache.get(r)??new WeakMap;if(i.has(e))return i.get(e);let o=e;if(t.withReducerSchema||t.withJsonSchemaExtrasAsDescription){let s=Object.entries(E_(e)).map(([a,l])=>{let c=this.get(l),u=t.withReducerSchema?c?.reducer?.schema??l:l;if(t.withJsonSchemaExtrasAsDescription&&c?.jsonSchemaExtra){let d=xa(u)??xa(l),h=JSON.stringify(w(m({},c.jsonSchemaExtra),{description:d}));u=u.describe(`${Ose}${h}`)}return[a,u]});o=TC(e,Object.fromEntries(s)),Ph(o)&&(o._def.unknownKeys="strip")}return t.asPartial&&(o=Lh(o)),i.set(e,o),this._extensionCache.set(r,i),o}},fO=new dO;var ya="__root__",hO=Symbol.for("langgraph.state.partial"),Rl=class extends u_{constructor(e,t){if(super(),Object.defineProperty(this,"channels",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"waitingEdges",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"_schemaDefinition",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_schemaRuntimeDefinition",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_inputDefinition",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_inputRuntimeDefinition",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_outputDefinition",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_outputRuntimeDefinition",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_schemaDefinitions",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"_metaRegistry",{enumerable:!0,configurable:!0,writable:!0,value:fO}),Object.defineProperty(this,"_configSchema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_configRuntimeSchema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Bse(e)){let r=this._metaRegistry.getChannelsForSchema(e.state),i=e.input!=null?this._metaRegistry.getChannelsForSchema(e.input):r,o=e.output!=null?this._metaRegistry.getChannelsForSchema(e.output):r;this._schemaDefinition=r,this._schemaRuntimeDefinition=e.state,this._inputDefinition=i,this._inputRuntimeDefinition=e.input??hO,this._outputDefinition=o,this._outputRuntimeDefinition=e.output??e.state}else if(Fo(e)){let r=this._metaRegistry.getChannelsForSchema(e);this._schemaDefinition=r,this._schemaRuntimeDefinition=e,this._inputDefinition=r,this._inputRuntimeDefinition=hO,this._outputDefinition=r,this._outputRuntimeDefinition=e}else if(jse(e))this._schemaDefinition=e.input.spec,this._inputDefinition=e.input.spec,this._outputDefinition=e.output.spec;else if(Lse(e))this._schemaDefinition=e.stateSchema.spec,this._inputDefinition=e.input?.spec??this._schemaDefinition,this._outputDefinition=e.output?.spec??this._schemaDefinition;else if(Nse(e)||e8(e)){let r=e8(e)?e.spec:e;this._schemaDefinition=r}else if(Fse(e)){let r=Pse(e.channels);this._schemaDefinition=r}else throw new Error("Invalid StateGraph input. Make sure to pass a valid Annotation.Root or Zod schema.");this._inputDefinition??=this._schemaDefinition,this._outputDefinition??=this._schemaDefinition,this._addSchema(this._schemaDefinition),this._addSchema(this._inputDefinition),this._addSchema(this._outputDefinition),Fo(t)&&(this._configRuntimeSchema=t)}get allEdges(){return new Set([...this.edges,...Array.from(this.waitingEdges).flatMap(([e,t])=>e.map(r=>[r,t]))])}_addSchema(e){if(!this._schemaDefinitions.has(e)){this._schemaDefinitions.set(e,e);for(let[t,r]of Object.entries(e)){let i;if(typeof r=="function"?i=r():i=r,this.channels[t]!==void 0){if(this.channels[t]!==i&&!hu(i)&&i.lc_graph_name!=="LastValue")throw new Error(`Channel "${t}" already exists with a different type.`)}else this.channels[t]=i}}}addNode(...e){function t(i){return i.length>=1&&typeof i[0]!="string"}let r=t(e)?Array.isArray(e[0])?e[0]:Object.entries(e[0]).map(([i,o])=>[i,o,o[Symbol.for("langgraph.state.node")]??void 0]):[[e[0],e[1],e[2]]];if(r.length===0)throw new Error("No nodes provided in `addNode`");for(let[i,o,s]of r){if(i in this.channels)throw new Error(`${i} is already being used as a state attribute (a.k.a. a channel), cannot also be used as a node name.`);for(let d of[Dn,Jr])if(i.includes(d))throw new Error(`"${d}" is a reserved character and is not allowed in node names.`);if(this.warnIfCompiled("Adding a node to a graph that has already been compiled. This will not be reflected in the compiled graph."),i in this.nodes)throw new Error(`Node \`${i}\` already present.`);if(i===$e||i===$t)throw new Error(`Node \`${i}\` is reserved.`);let a=this._schemaDefinition;s?.input!==void 0&&(Fo(s.input)?a=this._metaRegistry.getChannelsForSchema(s.input):s.input.spec!==void 0&&(a=s.input.spec)),a!==void 0&&this._addSchema(a);let l;mt.isRunnable(o)?l=o:typeof o=="function"?l=new Nr({func:o,name:i,trace:!1}):l=Dr(o);let c=s?.cachePolicy;typeof c=="boolean"&&(c=c?{}:void 0);let u={runnable:l,retryPolicy:s?.retryPolicy,cachePolicy:c,metadata:s?.metadata,input:a??this._schemaDefinition,subgraphs:o_(l)?[l]:s?.subgraphs,ends:s?.ends,defer:s?.defer};this.nodes[i]=u}return this}addEdge(e,t){if(typeof e=="string")return super.addEdge(e,t);this.compiled&&console.warn("Adding an edge to a graph that has already been compiled. This will not be reflected in the compiled graph.");for(let r of e){if(r===$e)throw new Error("END cannot be a start node");if(!Object.keys(this.nodes).some(i=>i===r))throw new Error(`Need to add a node named "${r}" first`)}if(t===$e)throw new Error("END cannot be an end node");if(!Object.keys(this.nodes).some(r=>r===t))throw new Error(`Need to add a node named "${t}" first`);return this.waitingEdges.add([e,t]),this}addSequence(e){let t=Array.isArray(e)?e:Object.entries(e).map(([i,o])=>[i,o,o[Symbol.for("langgraph.state.node")]??void 0]);if(t.length===0)throw new Error("Sequence requires at least one node.");let r;for(let[i,o,s]of t){if(i in this.nodes)throw new Error(`Node names must be unique: node with the name "${i}" already exists.`);let a=i;this.addNode(a,o,s),r!=null&&this.addEdge(r,a),r=a}return this}compile({checkpointer:e,store:t,cache:r,interruptBefore:i,interruptAfter:o,name:s}={}){this.validate([...Array.isArray(i)?i:[],...Array.isArray(o)?o:[]]);let a=Object.keys(this._schemaDefinitions.get(this._outputDefinition)),l=a.length===1&&a[0]===ya?ya:a,c=Object.keys(this.channels),u=c.length===1&&c[0]===ya?ya:c,d=new sC({builder:this,checkpointer:e,interruptAfter:o,interruptBefore:i,autoValidate:!1,nodes:{},channels:w(m({},this.channels),{[$t]:new xs}),inputChannels:$t,outputChannels:l,streamChannels:u,streamMode:"updates",store:t,cache:r,name:s});d.attachNode($t);for(let[h,f]of Object.entries(this.nodes))d.attachNode(h,f);d.attachBranch($t,GM,t8(),{withReader:!1});for(let[h]of Object.entries(this.nodes))d.attachBranch(h,GM,t8(),{withReader:!1});for(let[h,f]of this.edges)d.attachEdge(h,f);for(let[h,f]of this.waitingEdges)d.attachEdge(h,f);for(let[h,f]of Object.entries(this.branches))for(let[p,g]of Object.entries(f))d.attachBranch(h,p,g);return d.validate()}};function Pse(n){let e={};for(let[t,r]of Object.entries(n))if(t===ya)e[t]=oC(r);else{let i=t;e[t]=oC(r)}return e}var sC=class extends d_{constructor(){super(...arguments),Object.defineProperty(this,"_metaRegistry",{enumerable:!0,configurable:!0,writable:!0,value:fO})}attachNode(e,t){let r;e===$t?r=Object.entries(this.builder._schemaDefinitions.get(this.builder._inputDefinition)).filter(([l,c])=>!hu(c)).map(([l])=>l):r=Object.keys(this.builder.channels);function i(l){if(Wn(l))return l.graph===Gn.PARENT?null:l._updateAsTuples();if(Array.isArray(l)&&l.length>0&&l.some(c=>Wn(c))){let c=[];for(let u of l)if(Wn(u)){if(u.graph===Gn.PARENT)continue;c.push(...u._updateAsTuples())}else c.push([ya,u]);return c}else if(l!=null)return[[ya,l]];return null}let o=e;function s(l){if(l){if(Wn(l))return l.graph===Gn.PARENT?null:l._updateAsTuples().filter(([c])=>r.includes(c));if(Array.isArray(l)&&l.length>0&&l.some(Wn)){let c=[];for(let u of l)if(Wn(u)){if(u.graph===Gn.PARENT)continue;c.push(...u._updateAsTuples().filter(([d])=>r.includes(d)))}else{let d=s(u);d&&c.push(...d??[])}return c}else{if(typeof l=="object"&&!Array.isArray(l))return Object.entries(l).filter(([c])=>r.includes(c));{let c=Array.isArray(l)?"array":typeof l;throw new xt(`Expected node "${o.toString()}" to return an object or an array containing at least one Command object, received ${c}`,{lc_error_code:"INVALID_GRAPH_NODE_RETURN_VALUE"})}}}else return null}let a=[{value:Do,mapper:new Nr({func:r.length&&r[0]===ya?i:s,trace:!1,recurse:!1})}];if(e===$t)this.nodes[e]=new To({tags:[Ut],triggers:[$t],channels:[$t],writers:[new Tn(a,[Ut])]});else{let l=t?.input??this.builder._schemaDefinition,c=Object.fromEntries(Object.keys(this.builder._schemaDefinitions.get(l)).map(h=>[h,h])),u=Object.keys(c).length===1&&ya in c,d=`branch:to:${e}`;this.channels[d]=t?.defer?new rC:new xs(!1),this.nodes[e]=new To({triggers:[d],channels:u?Object.keys(c):c,writers:[new Tn(a,[Ut])],mapper:u?void 0:h=>Object.fromEntries(Object.entries(h).filter(([f])=>f in c)),bound:t?.runnable,metadata:t?.metadata,retryPolicy:t?.retryPolicy,cachePolicy:t?.cachePolicy,subgraphs:t?.subgraphs,ends:t?.ends})}}attachEdge(e,t){if(t!==$e){if(typeof e=="string")this.nodes[e].writers.push(new Tn([{channel:`branch:to:${t}`,value:null}],[Ut]));else if(Array.isArray(e)){let r=`join:${e.join("+")}:${t}`;this.channels[r]=this.builder.nodes[t].defer?new nC(new Set(e)):new tC(new Set(e)),this.nodes[t].triggers.push(r);for(let i of e)this.nodes[i].writers.push(new Tn([{channel:r,value:i}],[Ut]))}}}attachBranch(e,t,r,i={withReader:!0}){let o=(s,a)=>v(null,null,function*(){let l=s.filter(u=>u!==$e);if(!l.length)return;let c=l.map(u=>Qn(u)?u:{channel:u===$e?u:`branch:to:${u}`,value:e});yield Tn.doWrite(w(m({},a),{tags:(a.tags??[]).concat([Ut])}),c)});this.nodes[e].writers.push(r.run(o,i.withReader?s=>Nx.doRead(s,this.streamChannels??this.outputChannels,!0):void 0))}_validateInput(e){return v(this,null,function*(){if(e==null)return e;let t=(()=>{let r=this.builder._inputRuntimeDefinition,i=this.builder._schemaRuntimeDefinition,o=s=>{if(s!=null)return this._metaRegistry.getExtendedChannelSchemas(s,{withReducerSchema:!0})};if(Fo(r))return o(r);if(r===hO)return Lh(o(i))})();if(Wn(e)){let r=e;return e.update&&t!=null&&(r.update=Fh(t,e.update)),r}return t!=null?Fh(t,e):e})}_validateConfigurable(e){return v(this,null,function*(){let t=this.builder._configRuntimeSchema;return Fo(t)&&Fh(t,e),e})}};function Nse(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)&&Object.keys(n).length>0&&Object.values(n).every(e=>typeof e=="function"||au(e))}function e8(n){return typeof n=="object"&&n!==null&&"lc_graph_name"in n&&n.lc_graph_name==="AnnotationRoot"}function Fse(n){return typeof n=="object"&&n!==null&&n.channels!==void 0}function Lse(n){return typeof n=="object"&&n!==null&&n.stateSchema!==void 0}function jse(n){return typeof n=="object"&&n!==null&&n.stateSchema===void 0&&n.input!==void 0&&n.output!==void 0}function Bse(n){return!(typeof n!="object"||n==null||!("state"in n)||!Fo(n.state)||"input"in n&&!Fo(n.input)||"output"in n&&!Fo(n.output))}function Vse(n){if(Qn(n))return[n];let e=[];Wn(n)?e.push(n):Array.isArray(n)&&e.push(...n.filter(Wn));let t=[];for(let r of e){if(r.graph===Gn.PARENT)throw new Yg(r);Qn(r.goto)||typeof r.goto=="string"?t.push(r.goto):Array.isArray(r.goto)&&t.push(...r.goto)}return t}function t8(){let n=new Nr({func:Vse,tags:[Ut],trace:!1,recurse:!1,name:"<control_branch>"});return new c_({path:n})}var r8="__remove_all__";function aC(n,e){let t=Array.isArray(n)?n:[n],r=Array.isArray(e)?e:[e],i=t.map(Po),o=r.map(Po);for(let u of i)(u.id===null||u.id===void 0)&&(u.id=CC(),u.lc_kwargs.id=u.id);let s;for(let u=0;u<o.length;u+=1){let d=o[u];(d.id===null||d.id===void 0)&&(d.id=CC(),d.lc_kwargs.id=d.id),d.getType()==="remove"&&d.id===r8&&(s=u)}if(s!=null)return o.slice(s+1);let a=[...i],l=new Map(a.map((u,d)=>[u.id,d])),c=new Set;for(let u of o){let d=l.get(u.id);if(d!==void 0)u.getType()==="remove"?c.add(u.id):(c.delete(u.id),a[d]=u);else{if(u.getType()==="remove")throw new Error(`Attempting to delete a message with an ID that doesn't exist ('${u.id}')`);l.set(u.id,a.length),a.push(u)}}return a.filter(u=>!c.has(u.id))}var f_=class extends Nr{constructor(e,t){let{name:r,tags:i,handleToolErrors:o}=t??{};super({name:r,tags:i,func:(s,a)=>this.run(s,a)}),Object.defineProperty(this,"tools",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"handleToolErrors",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"trace",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.tools=e,this.handleToolErrors=o??this.handleToolErrors}run(e,t){return v(this,null,function*(){let r=Array.isArray(e)?e[e.length-1]:e.messages[e.messages.length-1];if(r?._getType()!=="ai")throw new Error("ToolNode only accepts AIMessages as input.");let i=yield Promise.all(r.tool_calls?.map(a=>v(this,null,function*(){let l=this.tools.find(c=>c.name===a.name);try{if(l===void 0)throw new Error(`Tool "${a.name}" not found.`);let c=yield l.invoke(w(m({},a),{type:"tool_call"}),t);return ln(c)&&c._getType()==="tool"||Wn(c)?c:new Iu({name:l.name,content:typeof c=="string"?c:JSON.stringify(c),tool_call_id:a.id})}catch(c){if(!this.handleToolErrors||bs(c))throw c;return new Iu({content:`Error: ${c.message}
 Please fix your mistakes.`,name:a.name,tool_call_id:a.id??""})}}))??[]);if(!i.some(Wn))return Array.isArray(e)?i:{messages:i};let o=[],s=null;for(let a of i)Wn(a)?a.graph===Gn.PARENT&&Array.isArray(a.goto)&&a.goto.every(l=>Qn(l))?s?s.goto.push(...a.goto):s=new Gn({graph:Gn.PARENT,goto:a.goto}):o.push(a):o.push(Array.isArray(e)?[a]:{messages:[a]});return s&&o.push(s),o})}};var pO=/<name>(.*?)<\/name>/s,mO=/<content>(.*?)<\/content>/s;function $se(n){if(!(ln(n)&&(ti(n)||Nl(n)&&kh(n)))||!n.name)return n;let{name:t}=n;if(typeof n.content=="string")return new pn(w(m({},Object.keys(n.lc_kwargs??{}).length>0?n.lc_kwargs:n),{content:`<name>${t}</name><content>${n.content}</content>`,name:void 0}));let r=[],i=0;for(let o of n.content)typeof o=="string"?(i+=1,r.push(`<name>${t}</name><content>${o}</content>`)):typeof o=="object"&&"type"in o&&o.type==="text"?(i+=1,r.push(w(m({},o),{text:`<name>${t}</name><content>${o.text}</content>`}))):r.push(o);return i||r.unshift({type:"text",text:`<name>${t}</name><content></content>`}),new pn(w(m({},n.lc_kwargs),{content:r,name:void 0}))}function Use(n){if(!ti(n)||!n.content)return n;let e=[],t;if(Array.isArray(n.content))e=n.content.filter(r=>{if(r.type==="text"){let i=r.text.match(pO),o=r.text.match(mO);return i&&(!o||o[1]==="")?(t=i[1],!1):!0}return!0}).map(r=>{if(r.type==="text"){let i=r.text.match(pO),o=r.text.match(mO);return!i||!o?r:(t=i[1],w(m({},r),{text:o[1]}))}return r});else{let r=n.content,i=r.match(pO),o=r.match(mO);if(!i||!o)return n;t=i[1],e=o[1]}return new pn(w(m({},Object.keys(n.lc_kwargs??{}).length>0?n.lc_kwargs:n),{content:e,name:t}))}function gO(n,e){let t,r;if(e==="inline")t=$se,r=Use;else throw new Error(`Invalid agent name mode: ${e}. Needs to be one of: "inline"`);function i(o){return o.map(t)}return yn.from([An.from(i),n,An.from(r)])}function zse(n){if(typeof n=="string"||ln(n)&&n._getType()==="system")return n;if(typeof n=="function")return e=>v(null,null,function*(){return n(e.messages)});if(mt.isRunnable(n))return An.from(e=>e.messages).pipe(n);throw new Error(`Unexpected type for messageModifier: ${typeof n}`)}var lC="prompt";function Hse(n){let e;if(n==null)e=An.from(t=>t.messages).withConfig({runName:lC});else if(typeof n=="string"){let t=new wC(n);e=An.from(r=>[t,...r.messages??[]]).withConfig({runName:lC})}else if(ln(n)&&n._getType()==="system")e=An.from(t=>[n,...t.messages]).withConfig({runName:lC});else if(typeof n=="function")e=An.from(n).withConfig({runName:lC});else if(mt.isRunnable(n))e=n;else throw new Error(`Got unexpected type for 'prompt': ${typeof n}`);return e}function bO(n){return mt.isRunnable(n)}function qse(n,e,t){if([n,e,t].filter(o=>o!=null).length>1)throw new Error("Expected only one of prompt, stateModifier, or messageModifier, got multiple values");let i=n;return e!=null?i=e:t!=null&&(i=zse(t)),Hse(i)}function h_(n){return"invoke"in n&&typeof n.invoke=="function"&&"_modelType"in n}function wh(n){return"_queuedMethodOperations"in n&&"_model"in n&&typeof n._model=="function"}function i8(n){return h_(n)?"bindTools"in n&&typeof n.bindTools=="function":!1}function Gse(n,e){return v(this,null,function*(){let t=n;if(yn.isRunnableSequence(t)&&(t=t.steps.find(a=>Yn.isRunnableBinding(a)||h_(a)||wh(a))||t),wh(t)&&(t=yield t._model()),!Yn.isRunnableBinding(t))return!0;let r=t.kwargs!=null&&typeof t.kwargs=="object"&&"tools"in t.kwargs&&Array.isArray(t.kwargs.tools)?t.kwargs.tools??null:t.config!=null&&typeof t.config=="object"&&"tools"in t.config&&Array.isArray(t.config.tools)?t.config.tools??null:null;if(r!=null&&r.length===1&&"functionDeclarations"in r[0]&&(r=r[0].functionDeclarations),r==null)return!0;if(e.length!==r.length)throw new Error("Number of tools in the model.bindTools() and tools passed to createReactAgent must match");let i=new Set(e.flatMap(a=>bO(a)?a.name:[])),o=new Set;for(let a of r){let l;if("type"in a&&a.type==="function")l=a.function.name;else if("name"in a)l=a.name;else if("toolSpec"in a&&"name"in a.toolSpec)l=a.toolSpec.name;else continue;l&&o.add(l)}let s=[...i].filter(a=>!o.has(a));if(s.length>0)throw new Error(`Missing tools '${s}' in the model.bindTools().Tools in the model.bindTools() must match the tools passed to createReactAgent.`);return!1})}var _O=(n,e)=>{if(i8(n))return n.bindTools(e);if(Yn.isRunnableBinding(n)&&i8(n.bound)){let t=n.bound.bindTools(e);return Yn.isRunnableBinding(t)?new Yn({bound:t.bound,config:m(m({},n.config),t.config),kwargs:m(m({},n.kwargs),t.kwargs),configFactories:t.configFactories??n.configFactories}):new Yn({bound:t,config:n.config,kwargs:n.kwargs,configFactories:n.configFactories})}return null};function Wse(n,e){return v(this,null,function*(){let t=_O(n,e);if(t)return t;if(wh(n)){let r=_O(yield n._model(),e);if(r)return r}if(yn.isRunnableSequence(n)){let r=n.steps.findIndex(i=>Yn.isRunnableBinding(i)||h_(i)||wh(i));if(r>=0){let i=_O(n.steps[r],e);if(i){let o=n.steps.slice();return o.splice(r,1,i),yn.from(o)}}}throw new Error(`llm ${n} must define bindTools method.`)})}function Kse(n){return v(this,null,function*(){let e=n;if(yn.isRunnableSequence(e)&&(e=e.steps.find(t=>Yn.isRunnableBinding(t)||h_(t)||wh(t))||e),wh(e)&&(e=yield e._model()),Yn.isRunnableBinding(e)&&(e=e.bound),!h_(e))throw new Error(`Expected \`llm\` to be a ChatModel or RunnableBinding (e.g. llm.bind_tools(...)) with invoke() and generate() methods, got ${e.constructor.name}`);return e})}var o8=()=>va.Root({messages:va({reducer:aC,default:()=>[]}),structuredResponse:va}),Qse=va.Root({llmInputMessages:va({reducer:(n,e)=>aC([],e),default:()=>[]})});function vO(n){let{llm:e,tools:t,messageModifier:r,stateModifier:i,prompt:o,stateSchema:s,checkpointSaver:a,checkpointer:l,interruptBefore:c,interruptAfter:u,store:d,responseFormat:h,preModelHook:f,postModelHook:p,name:g,includeAgentName:_}=n,y,E;Array.isArray(t)?(y=t,E=new f_(y.filter(bO))):(y=t.tools,E=t);let T=null,A=H=>v(null,null,function*(){if(T)return T;let q;(yield Gse(H,y))?q=yield Wse(H,y):q=H;let X=qse(o,i,r),le=_==="inline"?X.pipe(gO(q,_)):X.pipe(q);return T=le,le}),P=new Set(y.filter(bO).filter(H=>"returnDirect"in H&&H.returnDirect).map(H=>H.name));function R(H){let ge=H,{messages:q,llmInputMessages:X}=ge,le=Ae(ge,["messages","llmInputMessages"]);return X!=null&&X.length>0?m({messages:X},le):m({messages:q},le)}let W=(H,q)=>v(null,null,function*(){if(h==null)throw new Error("Attempted to generate structured output with no passed response schema. Please contact us for help.");let X=[...H.messages],le,ge=yield Kse(e);if(typeof h=="object"&&"schema"in h){let It=h,{prompt:zt,schema:Cn}=It,ft=Ae(It,["prompt","schema"]);le=ge.withStructuredOutput(Cn,ft),zt!=null&&X.unshift(new wC({content:zt}))}else le=ge.withStructuredOutput(h);return{structuredResponse:yield le.invoke(X,q)}}),S=(H,q)=>v(null,null,function*(){let le=yield(yield A(e)).invoke(R(H),q);return le.name=g,le.lc_kwargs.name=g,{messages:[le]}}),$=s??o8(),Z=new Rl($).addNode("tools",E);if(!("messages"in Z._schemaDefinition))throw new Error("Missing required `messages` key in state schema.");let Y=Z,oe=H=>Object.fromEntries(Object.entries(H).filter(([q,X])=>X!=null)),F="agent",j;return f!=null?(Y.addNode("pre_model_hook",f).addEdge("pre_model_hook","agent"),F="pre_model_hook",j=va.Root(m(m({},Z._schemaDefinition),Qse.spec))):F="agent",Y.addNode("agent",S,{input:j}).addEdge($t,F),p!=null&&Y.addNode("post_model_hook",p).addEdge("agent","post_model_hook").addConditionalEdges("post_model_hook",H=>{let{messages:q}=H,X=q[q.length-1];return ti(X)&&X.tool_calls?.length?"tools":Ah(X)?F:h!=null?"generate_structured_response":$e},oe({tools:"tools",[F]:F,generate_structured_response:h!=null?"generate_structured_response":null,[$e]:h!=null?null:$e})),h!==void 0&&Z.addNode("generate_structured_response",W).addEdge("generate_structured_response",$e),p==null&&Y.addConditionalEdges("agent",H=>{let{messages:q}=H,X=q[q.length-1];return!ti(X)||!X.tool_calls?.length?h!=null?"generate_structured_response":$e:"tools"},oe({tools:"tools",generate_structured_response:h!=null?"generate_structured_response":null,[$e]:h!=null?null:$e})),P.size>0?Y.addConditionalEdges("tools",H=>{for(let q=H.messages.length-1;q>=0;q-=1){let X=H.messages[q];if(!Ah(X))break;if(X.name!==void 0&&P.has(X.name))return $e}return F},oe({[F]:F,[$e]:$e})):Y.addEdge("tools",F),Y.compile({checkpointer:l??a,interruptBefore:c,interruptAfter:u,store:d,name:g})}var cC=class n{constructor(e){this.httpClient=e}getRequest(e){return this.httpClient.get(e).pipe(be(t=>t.status===200?{status:t.status,open_ai:t.openai_functions}:{status:500,error:"something went wrong"}),Pi(t=>(console.error("API error:",t),ye({error:"API request failed"}))))}static \u0275fac=function(t){return new(t||n)(de(Ya))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})};var uC=class n{constructor(e){this.restApiService=e}langchain_model=null;openAI_agent;getOpenAiClient(e){if(!e)throw new Error("OpenAI API key is not set");return this.langchain_model&&delete this.langchain_model,this.langchain_model=new Ug({apiKey:e,model:"gpt-4o-mini",temperature:0,maxTokens:512,streaming:!0}),this.langchain_model}openAImodels(e="langchain",t,r,i,o){let s=null,a=null;e=="langgraph"?s=vO({llm:t,tools:r}):e=="langchain"&&r.length>0?s=t.bindTools(r,{tool_choice:"auto"}):e=="langchain"&&r.length==0&&(a=t);let l=Ll.fromMessages([RC.fromTemplate(i),kC.fromTemplate(o)]);return{model_with_tools:s,overall_prompt:l,model_with_out_tools:a}}static \u0275fac=function(t){return new(t||n)(de(cC))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})};var dC=class n{constructor(e,t,r,i,o){this.mcpService=e;this.openAIService=t;this.storageService=r;this.mcpElicitationService=i;this.cdr=o;this.system_prompt="You are a helpful assistant. Use tools *only* when needed.     If you already have the answer, reply normally instead of calling a tool again.",this.human_prompt="{input}";let s=this.storageService.getValueFromKey("open_ai_token")||"";this.openAiKey.set(s),s&&this.InitializeLLM(s)}messages=[];title="AI powered chatbot";isSidebarOpen=!0;chatMessages=[{sender:"bot",content:"Hello! How can I assist you today?",timestamp:new Date}];opentAI_functions;llm_model;llm_with_tools;errorMessage="";system_prompt="";human_prompt="";llm_runnable;selectedTool=null;page=kt("");openAiKey=jp("");dialog=x(ng);InitializeLLM(e,t=[]){if(this.llm_model=this.openAIService.getOpenAiClient(e),t.length>0)try{this.llm_with_tools=this.openAIService.openAImodels("langchain",this.llm_model,t,this.system_prompt,this.human_prompt),this.llm_runnable=yn.from([this.llm_with_tools.overall_prompt,this.llm_with_tools.model_with_tools])}catch{}else this.llm_with_tools=this.openAIService.openAImodels("langchain",this.llm_model,[],this.system_prompt,this.human_prompt),this.llm_runnable=yn.from([this.llm_with_tools.overall_prompt,this.llm_with_tools.model_with_out_tools])}toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}toolsList(e){this.InitializeLLM(this.openAiKey(),e)}testTool(e){e?(this.selectedTool=e,this.mcpElicitationService.createFormFromSchema(e.inputSchema,"Tool test")):this.selectedTool=null}tool_response(e){this.chatMessages.push({sender:"user",content:e.request,timestamp:new Date}),this.chatMessages.push({sender:"bot",content:e.response,timestamp:new Date})}agentWorkflow(e){return v(this,null,function*(){let t="",r=null,i=[{role:"user",content:e}];this.chatMessages.push({sender:"user",content:e,timestamp:new Date});try{let f=yield this.llm_runnable.stream({input:i});this.chatMessages.push({sender:"bot",content:"",timestamp:new Date});try{for(var o=Ee(f),s,a,l;s=!(a=yield o.next()).done;s=!1){let p=a.value;if(p instanceof _i){r?r=r.concat(p):r=p;let g=this.chatMessages.length-1;this.chatMessages[g].content=r.content,this.cdr.detectChanges()}}}catch{l=[a]}finally{try{s&&(a=o.return)&&(yield a.call(o))}finally{if(l)throw l[0]}}if(r?.tool_calls&&r.tool_calls.length>0){let p=r.tool_calls[0],g=p.args,_=p.name,E=(yield this.mcpService.callTool(_,g)).content.map(A=>A.text).join(`
`);this.chatMessages.push({sender:"bot",content:E,timestamp:new Date}),i.push({type:"function_call",id:p.id,name:p.name,arguments:JSON.stringify(g)}),i.push({type:"function_call_output",id:p.id,output:E});let T=yield this.llm_runnable.stream({input:i});r=null,this.chatMessages.push({sender:"bot",content:"",timestamp:new Date});try{for(var c=Ee(T),u,d,h;u=!(d=yield c.next()).done;u=!1){let A=d.value;if(A instanceof _i){r?r=r.concat(A):r=A;let P=this.chatMessages.length-1;this.chatMessages[P].content=r.content,this.cdr.detectChanges()}}}catch{h=[d]}finally{try{u&&(d=c.return)&&(yield d.call(c))}finally{if(h)throw h[0]}}}}catch{this.chatMessages.push({sender:"bot",content:"Sorry, something went wrong while processing your request.",timestamp:new Date})}})}static \u0275fac=function(t){return new(t||n)(ce(fr),ce(uC),ce(gf),ce(ss),ce(_n))};static \u0275cmp=xe({type:n,selectors:[["app-root"]],inputs:{openAiKey:[1,"openAiKey"]},outputs:{openAiKey:"openAiKeyChange"},features:[_t([fr,ss])],decls:17,vars:4,consts:[["sidenav",""],[1,"app-container"],[1,"sidenav-container"],["mode","side",1,"sidebar",3,"openedChange","opened"],[3,"tools","sendOpenAiKey"],[3,"sendToolResponse","tool"],[1,"content"],[1,"header"],["mat-icon-button","",1,"menu-button",3,"click"],[1,"title"],[1,"chat-container"],[3,"messages"],[3,"sendMessage","sendTool"]],template:function(t,r){if(t&1){let i=Kt();V(0,"div",1)(1,"mat-sidenav-container",2)(2,"mat-sidenav",3,0),qa("openedChange",function(s){return tt(i),dc(r.isSidebarOpen,s)||(r.isSidebarOpen=s),nt(s)}),V(4,"app-mcp-client",4),Me("tools",function(s){return tt(i),nt(r.toolsList(s))})("sendOpenAiKey",function(s){return tt(i),nt(r.InitializeLLM(s))}),z(),V(5,"app-elicitation",5),Me("sendToolResponse",function(s){return tt(i),nt(r.tool_response(s))}),z(),Pt(6,"app-sidebar"),z(),V(7,"mat-sidenav-content",6)(8,"div",7)(9,"button",8),Me("click",function(){return tt(i),nt(r.toggleSidebar())}),V(10,"mat-icon"),ae(11,"menu"),z()(),V(12,"h1",9),ae(13),z()(),V(14,"div",10),Pt(15,"app-chatbot",11),V(16,"app-input-box",12),Me("sendMessage",function(s){return tt(i),nt(r.agentWorkflow(s))})("sendTool",function(s){return tt(i),nt(r.testTool(s))}),z()()()()()}t&2&&(B(2),Ha("opened",r.isSidebarOpen),B(3),ue("tool",r.selectedTool),B(8),Rt(r.title),B(2),ue("messages",r.chatMessages))},dependencies:[Z0,X0,ew,qz,hk,Hz,nw,sw,Kz,pk,pf,hf,Qz,J0,uw],styles:[".app-container[_ngcontent-%COMP%]{height:100vh;display:flex;background-color:#f7f7f8;font-family:Segoe UI,Roboto,sans-serif}.sidenav-container[_ngcontent-%COMP%]{flex:1;display:flex;height:100vh;overflow:hidden}.sidebar[_ngcontent-%COMP%]{width:340px;background-color:#fff;display:flex;flex-direction:column;height:100%;border-right:1px solid #e5e5e6;transition:width .3s ease}.content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;height:100vh;overflow:hidden}.header[_ngcontent-%COMP%]{display:flex;align-items:center;padding:6px 10px;background-color:#fff;border-bottom:1px solid #eaeaea;z-index:2}.menu-button[_ngcontent-%COMP%]{margin-right:16px;color:#666;background:none;border:none;cursor:pointer}.title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:500;color:#333;margin:0}.chat-container[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;max-width:900px;width:100%;margin:0 auto;position:relative;overflow:hidden}.chat-container[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:first-child{flex:1;overflow-y:auto;padding:20px 20px 100px;scrollbar-width:none;-ms-overflow-style:none}.chat-container[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:first-child::-webkit-scrollbar{display:none}.chat-container[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:last-child{position:sticky;bottom:0}"],changeDetection:0})};ID(dC,tB).catch(n=>console.error(n));
